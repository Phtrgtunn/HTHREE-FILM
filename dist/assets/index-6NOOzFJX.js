const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./NetflixHomepage-D6OVJD3X.js","./NetflixHomepage-DaF0RcGy.css","./MovieDetail-DjCL2H4Q.js","./MovieCardRecommended-D0OkDLwr.js","./MovieCardRecommended-_uzs5TfP.css","./MovieDetail-CCzYKY1Y.css","./WatchMovie-2GjKqHqG.js","./WatchMovie-DMhpZVtX.css","./ListBaseType--FGDStgt.js","./movieApi-DOm6b_3X.js","./country-CS3BRhgF.js","./country-tn0RQdqM.css","./ListBaseType-BU-68pVX.css","./ListBaseCategory-B2Y7aBy-.js","./ListBaseCategory-BspsSTlx.css","./ListBaseNational-C2cgBrxG.js","./ListBaseNational-COpFSnOy.css","./Contact-DBVM3jfI.js","./Contact-CLC8FJQy.css","./Account-oVsUrRpc.js","./ConfirmModal-DW7m07Pd.js","./ConfirmModal-Bae_SFrS.css","./Account-XtB6UZQy.css","./SearchResults-vcuoj3RF.js","./SearchResults-Dfl-sKSy.css","./Pricing-ChWPk8mp.js","./Pricing-B26-Yy1c.css","./Cart-CJM2AchJ.js","./UndoSnackbar-CARr9Abi.js","./UndoSnackbar-Dl76tMyS.css","./Cart-BCzSTYxP.css","./Checkout-doB7aG2J.js","./Checkout-BmGnYrkB.css","./Admin-a_sHJ5BB.js","./Admin-BmXBmDzx.css","./Library-BJ7V2MjP.js"])))=>i.map(i=>d[i]);
function zg(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in t)){const o=Object.getOwnPropertyDescriptor(n,s);o&&Object.defineProperty(t,s,o.get?o:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=r(s);fetch(s.href,o)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Xl(t){const e=Object.create(null);for(const r of t.split(","))e[r]=1;return r=>r in e}const Fe={},Gn=[],or=()=>{},Wg=()=>!1,Ni=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Yl=t=>t.startsWith("onUpdate:"),nt=Object.assign,Ql=(t,e)=>{const r=t.indexOf(e);r>-1&&t.splice(r,1)},Kg=Object.prototype.hasOwnProperty,Me=(t,e)=>Kg.call(t,e),ge=Array.isArray,Jn=t=>uo(t)==="[object Map]",ps=t=>uo(t)==="[object Set]",Kc=t=>uo(t)==="[object Date]",ke=t=>typeof t=="function",Ke=t=>typeof t=="string",Wt=t=>typeof t=="symbol",He=t=>t!==null&&typeof t=="object",wh=t=>(He(t)||ke(t))&&ke(t.then)&&ke(t.catch),_h=Object.prototype.toString,uo=t=>_h.call(t),Gg=t=>uo(t).slice(8,-1),xh=t=>uo(t)==="[object Object]",Zl=t=>Ke(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Ps=Xl(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Li=t=>{const e=Object.create(null);return r=>e[r]||(e[r]=t(r))},Jg=/-(\w)/g,jt=Li(t=>t.replace(Jg,(e,r)=>r?r.toUpperCase():"")),Xg=/\B([A-Z])/g,Jr=Li(t=>t.replace(Xg,"-$1").toLowerCase()),Mi=Li(t=>t.charAt(0).toUpperCase()+t.slice(1)),pa=Li(t=>t?`on${Mi(t)}`:""),Vr=(t,e)=>!Object.is(t,e),qo=(t,...e)=>{for(let r=0;r<t.length;r++)t[r](...e)},Eh=(t,e,r,n=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:n,value:r})},ci=t=>{const e=parseFloat(t);return isNaN(e)?t:e},Yg=t=>{const e=Ke(t)?Number(t):NaN;return isNaN(e)?t:e};let Gc;const ji=()=>Gc||(Gc=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Kr(t){if(ge(t)){const e={};for(let r=0;r<t.length;r++){const n=t[r],s=Ke(n)?tm(n):Kr(n);if(s)for(const o in s)e[o]=s[o]}return e}else if(Ke(t)||He(t))return t}const Qg=/;(?![^(]*\))/g,Zg=/:([^]+)/,em=/\/\*[^]*?\*\//g;function tm(t){const e={};return t.replace(em,"").split(Qg).forEach(r=>{if(r){const n=r.split(Zg);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e}function Te(t){let e="";if(Ke(t))e=t;else if(ge(t))for(let r=0;r<t.length;r++){const n=Te(t[r]);n&&(e+=n+" ")}else if(He(t))for(const r in t)t[r]&&(e+=r+" ");return e.trim()}const rm="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",nm=Xl(rm);function kh(t){return!!t||t===""}function sm(t,e){if(t.length!==e.length)return!1;let r=!0;for(let n=0;r&&n<t.length;n++)r=Cn(t[n],e[n]);return r}function Cn(t,e){if(t===e)return!0;let r=Kc(t),n=Kc(e);if(r||n)return r&&n?t.getTime()===e.getTime():!1;if(r=Wt(t),n=Wt(e),r||n)return t===e;if(r=ge(t),n=ge(e),r||n)return r&&n?sm(t,e):!1;if(r=He(t),n=He(e),r||n){if(!r||!n)return!1;const s=Object.keys(t).length,o=Object.keys(e).length;if(s!==o)return!1;for(const i in t){const a=t.hasOwnProperty(i),l=e.hasOwnProperty(i);if(a&&!l||!a&&l||!Cn(t[i],e[i]))return!1}}return String(t)===String(e)}function ec(t,e){return t.findIndex(r=>Cn(r,e))}const Sh=t=>!!(t&&t.__v_isRef===!0),j=t=>Ke(t)?t:t==null?"":ge(t)||He(t)&&(t.toString===_h||!ke(t.toString))?Sh(t)?j(t.value):JSON.stringify(t,Th,2):String(t),Th=(t,e)=>Sh(e)?Th(t,e.value):Jn(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((r,[n,s],o)=>(r[ga(n,o)+" =>"]=s,r),{})}:ps(e)?{[`Set(${e.size})`]:[...e.values()].map(r=>ga(r))}:Wt(e)?ga(e):He(e)&&!ge(e)&&!xh(e)?String(e):e,ga=(t,e="")=>{var r;return Wt(t)?`Symbol(${(r=t.description)!=null?r:e})`:t};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let yt;class Ch{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=yt,!e&&yt&&(this.index=(yt.scopes||(yt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,r;if(this.scopes)for(e=0,r=this.scopes.length;e<r;e++)this.scopes[e].pause();for(e=0,r=this.effects.length;e<r;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,r;if(this.scopes)for(e=0,r=this.scopes.length;e<r;e++)this.scopes[e].resume();for(e=0,r=this.effects.length;e<r;e++)this.effects[e].resume()}}run(e){if(this._active){const r=yt;try{return yt=this,e()}finally{yt=r}}}on(){yt=this}off(){yt=this.parent}stop(e){if(this._active){this._active=!1;let r,n;for(r=0,n=this.effects.length;r<n;r++)this.effects[r].stop();for(this.effects.length=0,r=0,n=this.cleanups.length;r<n;r++)this.cleanups[r]();if(this.cleanups.length=0,this.scopes){for(r=0,n=this.scopes.length;r<n;r++)this.scopes[r].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function Ah(t){return new Ch(t)}function Ih(){return yt}function om(t,e=!1){yt&&yt.cleanups.push(t)}let qe;const ma=new WeakSet;class Rh{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,yt&&yt.active&&yt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,ma.has(this)&&(ma.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Ph(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Jc(this),$h(this);const e=qe,r=qt;qe=this,qt=!0;try{return this.fn()}finally{Nh(this),qe=e,qt=r,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)nc(e);this.deps=this.depsTail=void 0,Jc(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?ma.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Xa(this)&&this.run()}get dirty(){return Xa(this)}}let Oh=0,$s,Ns;function Ph(t,e=!1){if(t.flags|=8,e){t.next=Ns,Ns=t;return}t.next=$s,$s=t}function tc(){Oh++}function rc(){if(--Oh>0)return;if(Ns){let e=Ns;for(Ns=void 0;e;){const r=e.next;e.next=void 0,e.flags&=-9,e=r}}let t;for(;$s;){let e=$s;for($s=void 0;e;){const r=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(n){t||(t=n)}e=r}}if(t)throw t}function $h(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function Nh(t){let e,r=t.depsTail,n=r;for(;n;){const s=n.prevDep;n.version===-1?(n===r&&(r=s),nc(n),im(n)):e=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=s}t.deps=e,t.depsTail=r}function Xa(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(Lh(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function Lh(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Ks))return;t.globalVersion=Ks;const e=t.dep;if(t.flags|=2,e.version>0&&!t.isSSR&&t.deps&&!Xa(t)){t.flags&=-3;return}const r=qe,n=qt;qe=t,qt=!0;try{$h(t);const s=t.fn(t._value);(e.version===0||Vr(s,t._value))&&(t._value=s,e.version++)}catch(s){throw e.version++,s}finally{qe=r,qt=n,Nh(t),t.flags&=-3}}function nc(t,e=!1){const{dep:r,prevSub:n,nextSub:s}=t;if(n&&(n.nextSub=s,t.prevSub=void 0),s&&(s.prevSub=n,t.nextSub=void 0),r.subs===t&&(r.subs=n,!n&&r.computed)){r.computed.flags&=-5;for(let o=r.computed.deps;o;o=o.nextDep)nc(o,!0)}!e&&!--r.sc&&r.map&&r.map.delete(r.key)}function im(t){const{prevDep:e,nextDep:r}=t;e&&(e.nextDep=r,t.prevDep=void 0),r&&(r.prevDep=e,t.nextDep=void 0)}let qt=!0;const Mh=[];function Xr(){Mh.push(qt),qt=!1}function Yr(){const t=Mh.pop();qt=t===void 0?!0:t}function Jc(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const r=qe;qe=void 0;try{e()}finally{qe=r}}}let Ks=0;class am{constructor(e,r){this.sub=e,this.dep=r,this.version=r.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class sc{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!qe||!qt||qe===this.computed)return;let r=this.activeLink;if(r===void 0||r.sub!==qe)r=this.activeLink=new am(qe,this),qe.deps?(r.prevDep=qe.depsTail,qe.depsTail.nextDep=r,qe.depsTail=r):qe.deps=qe.depsTail=r,jh(r);else if(r.version===-1&&(r.version=this.version,r.nextDep)){const n=r.nextDep;n.prevDep=r.prevDep,r.prevDep&&(r.prevDep.nextDep=n),r.prevDep=qe.depsTail,r.nextDep=void 0,qe.depsTail.nextDep=r,qe.depsTail=r,qe.deps===r&&(qe.deps=n)}return r}trigger(e){this.version++,Ks++,this.notify(e)}notify(e){tc();try{for(let r=this.subs;r;r=r.prevSub)r.sub.notify()&&r.sub.dep.notify()}finally{rc()}}}function jh(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let n=e.deps;n;n=n.nextDep)jh(n)}const r=t.dep.subs;r!==t&&(t.prevSub=r,r&&(r.nextSub=t)),t.dep.subs=t}}const ui=new WeakMap,kn=Symbol(""),Ya=Symbol(""),Gs=Symbol("");function dt(t,e,r){if(qt&&qe){let n=ui.get(t);n||ui.set(t,n=new Map);let s=n.get(r);s||(n.set(r,s=new sc),s.map=n,s.key=r),s.track()}}function gr(t,e,r,n,s,o){const i=ui.get(t);if(!i){Ks++;return}const a=l=>{l&&l.trigger()};if(tc(),e==="clear")i.forEach(a);else{const l=ge(t),c=l&&Zl(r);if(l&&r==="length"){const u=Number(n);i.forEach((h,f)=>{(f==="length"||f===Gs||!Wt(f)&&f>=u)&&a(h)})}else switch((r!==void 0||i.has(void 0))&&a(i.get(r)),c&&a(i.get(Gs)),e){case"add":l?c&&a(i.get("length")):(a(i.get(kn)),Jn(t)&&a(i.get(Ya)));break;case"delete":l||(a(i.get(kn)),Jn(t)&&a(i.get(Ya)));break;case"set":Jn(t)&&a(i.get(kn));break}}rc()}function lm(t,e){const r=ui.get(t);return r&&r.get(e)}function Ln(t){const e=Ee(t);return e===t?e:(dt(e,"iterate",Gs),Nt(t)?e:e.map(ht))}function Di(t){return dt(t=Ee(t),"iterate",Gs),t}const cm={__proto__:null,[Symbol.iterator](){return va(this,Symbol.iterator,ht)},concat(...t){return Ln(this).concat(...t.map(e=>ge(e)?Ln(e):e))},entries(){return va(this,"entries",t=>(t[1]=ht(t[1]),t))},every(t,e){return ur(this,"every",t,e,void 0,arguments)},filter(t,e){return ur(this,"filter",t,e,r=>r.map(ht),arguments)},find(t,e){return ur(this,"find",t,e,ht,arguments)},findIndex(t,e){return ur(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return ur(this,"findLast",t,e,ht,arguments)},findLastIndex(t,e){return ur(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return ur(this,"forEach",t,e,void 0,arguments)},includes(...t){return ya(this,"includes",t)},indexOf(...t){return ya(this,"indexOf",t)},join(t){return Ln(this).join(t)},lastIndexOf(...t){return ya(this,"lastIndexOf",t)},map(t,e){return ur(this,"map",t,e,void 0,arguments)},pop(){return xs(this,"pop")},push(...t){return xs(this,"push",t)},reduce(t,...e){return Xc(this,"reduce",t,e)},reduceRight(t,...e){return Xc(this,"reduceRight",t,e)},shift(){return xs(this,"shift")},some(t,e){return ur(this,"some",t,e,void 0,arguments)},splice(...t){return xs(this,"splice",t)},toReversed(){return Ln(this).toReversed()},toSorted(t){return Ln(this).toSorted(t)},toSpliced(...t){return Ln(this).toSpliced(...t)},unshift(...t){return xs(this,"unshift",t)},values(){return va(this,"values",ht)}};function va(t,e,r){const n=Di(t),s=n[e]();return n!==t&&!Nt(t)&&(s._next=s.next,s.next=()=>{const o=s._next();return o.value&&(o.value=r(o.value)),o}),s}const um=Array.prototype;function ur(t,e,r,n,s,o){const i=Di(t),a=i!==t&&!Nt(t),l=i[e];if(l!==um[e]){const h=l.apply(t,o);return a?ht(h):h}let c=r;i!==t&&(a?c=function(h,f){return r.call(this,ht(h),f,t)}:r.length>2&&(c=function(h,f){return r.call(this,h,f,t)}));const u=l.call(i,c,n);return a&&s?s(u):u}function Xc(t,e,r,n){const s=Di(t);let o=r;return s!==t&&(Nt(t)?r.length>3&&(o=function(i,a,l){return r.call(this,i,a,l,t)}):o=function(i,a,l){return r.call(this,i,ht(a),l,t)}),s[e](o,...n)}function ya(t,e,r){const n=Ee(t);dt(n,"iterate",Gs);const s=n[e](...r);return(s===-1||s===!1)&&ac(r[0])?(r[0]=Ee(r[0]),n[e](...r)):s}function xs(t,e,r=[]){Xr(),tc();const n=Ee(t)[e].apply(t,r);return rc(),Yr(),n}const dm=Xl("__proto__,__v_isRef,__isVue"),Dh=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Wt));function hm(t){Wt(t)||(t=String(t));const e=Ee(this);return dt(e,"has",t),e.hasOwnProperty(t)}class Uh{constructor(e=!1,r=!1){this._isReadonly=e,this._isShallow=r}get(e,r,n){if(r==="__v_skip")return e.__v_skip;const s=this._isReadonly,o=this._isShallow;if(r==="__v_isReactive")return!s;if(r==="__v_isReadonly")return s;if(r==="__v_isShallow")return o;if(r==="__v_raw")return n===(s?o?xm:Vh:o?Hh:Fh).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(n)?e:void 0;const i=ge(e);if(!s){let l;if(i&&(l=cm[r]))return l;if(r==="hasOwnProperty")return hm}const a=Reflect.get(e,r,Je(e)?e:n);return(Wt(r)?Dh.has(r):dm(r))||(s||dt(e,"get",r),o)?a:Je(a)?i&&Zl(r)?a:a.value:He(a)?s?zh(a):Ut(a):a}}class Bh extends Uh{constructor(e=!1){super(!1,e)}set(e,r,n,s){let o=e[r];if(!this._isShallow){const l=An(o);if(!Nt(n)&&!An(n)&&(o=Ee(o),n=Ee(n)),!ge(e)&&Je(o)&&!Je(n))return l?!1:(o.value=n,!0)}const i=ge(e)&&Zl(r)?Number(r)<e.length:Me(e,r),a=Reflect.set(e,r,n,Je(e)?e:s);return e===Ee(s)&&(i?Vr(n,o)&&gr(e,"set",r,n):gr(e,"add",r,n)),a}deleteProperty(e,r){const n=Me(e,r);e[r];const s=Reflect.deleteProperty(e,r);return s&&n&&gr(e,"delete",r,void 0),s}has(e,r){const n=Reflect.has(e,r);return(!Wt(r)||!Dh.has(r))&&dt(e,"has",r),n}ownKeys(e){return dt(e,"iterate",ge(e)?"length":kn),Reflect.ownKeys(e)}}class fm extends Uh{constructor(e=!1){super(!0,e)}set(e,r){return!0}deleteProperty(e,r){return!0}}const pm=new Bh,gm=new fm,mm=new Bh(!0);const Qa=t=>t,Co=t=>Reflect.getPrototypeOf(t);function vm(t,e,r){return function(...n){const s=this.__v_raw,o=Ee(s),i=Jn(o),a=t==="entries"||t===Symbol.iterator&&i,l=t==="keys"&&i,c=s[t](...n),u=r?Qa:e?Za:ht;return!e&&dt(o,"iterate",l?Ya:kn),{next(){const{value:h,done:f}=c.next();return f?{value:h,done:f}:{value:a?[u(h[0]),u(h[1])]:u(h),done:f}},[Symbol.iterator](){return this}}}}function Ao(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function ym(t,e){const r={get(s){const o=this.__v_raw,i=Ee(o),a=Ee(s);t||(Vr(s,a)&&dt(i,"get",s),dt(i,"get",a));const{has:l}=Co(i),c=e?Qa:t?Za:ht;if(l.call(i,s))return c(o.get(s));if(l.call(i,a))return c(o.get(a));o!==i&&o.get(s)},get size(){const s=this.__v_raw;return!t&&dt(Ee(s),"iterate",kn),Reflect.get(s,"size",s)},has(s){const o=this.__v_raw,i=Ee(o),a=Ee(s);return t||(Vr(s,a)&&dt(i,"has",s),dt(i,"has",a)),s===a?o.has(s):o.has(s)||o.has(a)},forEach(s,o){const i=this,a=i.__v_raw,l=Ee(a),c=e?Qa:t?Za:ht;return!t&&dt(l,"iterate",kn),a.forEach((u,h)=>s.call(o,c(u),c(h),i))}};return nt(r,t?{add:Ao("add"),set:Ao("set"),delete:Ao("delete"),clear:Ao("clear")}:{add(s){!e&&!Nt(s)&&!An(s)&&(s=Ee(s));const o=Ee(this);return Co(o).has.call(o,s)||(o.add(s),gr(o,"add",s,s)),this},set(s,o){!e&&!Nt(o)&&!An(o)&&(o=Ee(o));const i=Ee(this),{has:a,get:l}=Co(i);let c=a.call(i,s);c||(s=Ee(s),c=a.call(i,s));const u=l.call(i,s);return i.set(s,o),c?Vr(o,u)&&gr(i,"set",s,o):gr(i,"add",s,o),this},delete(s){const o=Ee(this),{has:i,get:a}=Co(o);let l=i.call(o,s);l||(s=Ee(s),l=i.call(o,s)),a&&a.call(o,s);const c=o.delete(s);return l&&gr(o,"delete",s,void 0),c},clear(){const s=Ee(this),o=s.size!==0,i=s.clear();return o&&gr(s,"clear",void 0,void 0),i}}),["keys","values","entries",Symbol.iterator].forEach(s=>{r[s]=vm(s,t,e)}),r}function oc(t,e){const r=ym(t,e);return(n,s,o)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?n:Reflect.get(Me(r,s)&&s in n?r:n,s,o)}const bm={get:oc(!1,!1)},wm={get:oc(!1,!0)},_m={get:oc(!0,!1)};const Fh=new WeakMap,Hh=new WeakMap,Vh=new WeakMap,xm=new WeakMap;function Em(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function km(t){return t.__v_skip||!Object.isExtensible(t)?0:Em(Gg(t))}function Ut(t){return An(t)?t:ic(t,!1,pm,bm,Fh)}function qh(t){return ic(t,!1,mm,wm,Hh)}function zh(t){return ic(t,!0,gm,_m,Vh)}function ic(t,e,r,n,s){if(!He(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const o=s.get(t);if(o)return o;const i=km(t);if(i===0)return t;const a=new Proxy(t,i===2?n:r);return s.set(t,a),a}function qr(t){return An(t)?qr(t.__v_raw):!!(t&&t.__v_isReactive)}function An(t){return!!(t&&t.__v_isReadonly)}function Nt(t){return!!(t&&t.__v_isShallow)}function ac(t){return t?!!t.__v_raw:!1}function Ee(t){const e=t&&t.__v_raw;return e?Ee(e):t}function lc(t){return!Me(t,"__v_skip")&&Object.isExtensible(t)&&Eh(t,"__v_skip",!0),t}const ht=t=>He(t)?Ut(t):t,Za=t=>He(t)?zh(t):t;function Je(t){return t?t.__v_isRef===!0:!1}function q(t){return Wh(t,!1)}function Sm(t){return Wh(t,!0)}function Wh(t,e){return Je(t)?t:new Tm(t,e)}class Tm{constructor(e,r){this.dep=new sc,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=r?e:Ee(e),this._value=r?e:ht(e),this.__v_isShallow=r}get value(){return this.dep.track(),this._value}set value(e){const r=this._rawValue,n=this.__v_isShallow||Nt(e)||An(e);e=n?e:Ee(e),Vr(e,r)&&(this._rawValue=e,this._value=n?e:ht(e),this.dep.trigger())}}function Le(t){return Je(t)?t.value:t}const Cm={get:(t,e,r)=>e==="__v_raw"?t:Le(Reflect.get(t,e,r)),set:(t,e,r,n)=>{const s=t[e];return Je(s)&&!Je(r)?(s.value=r,!0):Reflect.set(t,e,r,n)}};function Kh(t){return qr(t)?t:new Proxy(t,Cm)}function Am(t){const e=ge(t)?new Array(t.length):{};for(const r in t)e[r]=Rm(t,r);return e}class Im{constructor(e,r,n){this._object=e,this._key=r,this._defaultValue=n,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return lm(Ee(this._object),this._key)}}function Rm(t,e,r){const n=t[e];return Je(n)?n:new Im(t,e,r)}class Om{constructor(e,r,n){this.fn=e,this.setter=r,this._value=void 0,this.dep=new sc(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Ks-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!r,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&qe!==this)return Ph(this,!0),!0}get value(){const e=this.dep.track();return Lh(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function Pm(t,e,r=!1){let n,s;return ke(t)?n=t:(n=t.get,s=t.set),new Om(n,s,r)}const Io={},di=new WeakMap;let fn;function $m(t,e=!1,r=fn){if(r){let n=di.get(r);n||di.set(r,n=[]),n.push(t)}}function Nm(t,e,r=Fe){const{immediate:n,deep:s,once:o,scheduler:i,augmentJob:a,call:l}=r,c=C=>s?C:Nt(C)||s===!1||s===0?mr(C,1):mr(C);let u,h,f,p,g=!1,v=!1;if(Je(t)?(h=()=>t.value,g=Nt(t)):qr(t)?(h=()=>c(t),g=!0):ge(t)?(v=!0,g=t.some(C=>qr(C)||Nt(C)),h=()=>t.map(C=>{if(Je(C))return C.value;if(qr(C))return c(C);if(ke(C))return l?l(C,2):C()})):ke(t)?e?h=l?()=>l(t,2):t:h=()=>{if(f){Xr();try{f()}finally{Yr()}}const C=fn;fn=u;try{return l?l(t,3,[p]):t(p)}finally{fn=C}}:h=or,e&&s){const C=h,$=s===!0?1/0:s;h=()=>mr(C(),$)}const _=Ih(),T=()=>{u.stop(),_&&_.active&&Ql(_.effects,u)};if(o&&e){const C=e;e=(...$)=>{C(...$),T()}}let k=v?new Array(t.length).fill(Io):Io;const E=C=>{if(!(!(u.flags&1)||!u.dirty&&!C))if(e){const $=u.run();if(s||g||(v?$.some((R,S)=>Vr(R,k[S])):Vr($,k))){f&&f();const R=fn;fn=u;try{const S=[$,k===Io?void 0:v&&k[0]===Io?[]:k,p];l?l(e,3,S):e(...S),k=$}finally{fn=R}}}else u.run()};return a&&a(E),u=new Rh(h),u.scheduler=i?()=>i(E,!1):E,p=C=>$m(C,!1,u),f=u.onStop=()=>{const C=di.get(u);if(C){if(l)l(C,4);else for(const $ of C)$();di.delete(u)}},e?n?E(!0):k=u.run():i?i(E.bind(null,!0),!0):u.run(),T.pause=u.pause.bind(u),T.resume=u.resume.bind(u),T.stop=T,T}function mr(t,e=1/0,r){if(e<=0||!He(t)||t.__v_skip||(r=r||new Set,r.has(t)))return t;if(r.add(t),e--,Je(t))mr(t.value,e,r);else if(ge(t))for(let n=0;n<t.length;n++)mr(t[n],e,r);else if(ps(t)||Jn(t))t.forEach(n=>{mr(n,e,r)});else if(xh(t)){for(const n in t)mr(t[n],e,r);for(const n of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,n)&&mr(t[n],e,r)}return t}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function ho(t,e,r,n){try{return n?t(...n):t()}catch(s){Ui(s,e,r)}}function Kt(t,e,r,n){if(ke(t)){const s=ho(t,e,r,n);return s&&wh(s)&&s.catch(o=>{Ui(o,e,r)}),s}if(ge(t)){const s=[];for(let o=0;o<t.length;o++)s.push(Kt(t[o],e,r,n));return s}}function Ui(t,e,r,n=!0){const s=e?e.vnode:null,{errorHandler:o,throwUnhandledErrorInProduction:i}=e&&e.appContext.config||Fe;if(e){let a=e.parent;const l=e.proxy,c=`https://vuejs.org/error-reference/#runtime-${r}`;for(;a;){const u=a.ec;if(u){for(let h=0;h<u.length;h++)if(u[h](t,l,c)===!1)return}a=a.parent}if(o){Xr(),ho(o,null,10,[t,l,c]),Yr();return}}Lm(t,r,s,n,i)}function Lm(t,e,r,n=!0,s=!1){if(s)throw t;console.error(t)}const bt=[];let nr=-1;const Xn=[];let Lr=null,Vn=0;const Gh=Promise.resolve();let hi=null;function Qr(t){const e=hi||Gh;return t?e.then(this?t.bind(this):t):e}function Mm(t){let e=nr+1,r=bt.length;for(;e<r;){const n=e+r>>>1,s=bt[n],o=Js(s);o<t||o===t&&s.flags&2?e=n+1:r=n}return e}function cc(t){if(!(t.flags&1)){const e=Js(t),r=bt[bt.length-1];!r||!(t.flags&2)&&e>=Js(r)?bt.push(t):bt.splice(Mm(e),0,t),t.flags|=1,Jh()}}function Jh(){hi||(hi=Gh.then(Yh))}function jm(t){ge(t)?Xn.push(...t):Lr&&t.id===-1?Lr.splice(Vn+1,0,t):t.flags&1||(Xn.push(t),t.flags|=1),Jh()}function Yc(t,e,r=nr+1){for(;r<bt.length;r++){const n=bt[r];if(n&&n.flags&2){if(t&&n.id!==t.uid)continue;bt.splice(r,1),r--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function Xh(t){if(Xn.length){const e=[...new Set(Xn)].sort((r,n)=>Js(r)-Js(n));if(Xn.length=0,Lr){Lr.push(...e);return}for(Lr=e,Vn=0;Vn<Lr.length;Vn++){const r=Lr[Vn];r.flags&4&&(r.flags&=-2),r.flags&8||r(),r.flags&=-2}Lr=null,Vn=0}}const Js=t=>t.id==null?t.flags&2?-1:1/0:t.id;function Yh(t){try{for(nr=0;nr<bt.length;nr++){const e=bt[nr];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),ho(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;nr<bt.length;nr++){const e=bt[nr];e&&(e.flags&=-2)}nr=-1,bt.length=0,Xh(),hi=null,(bt.length||Xn.length)&&Yh()}}let rt=null,Qh=null;function fi(t){const e=rt;return rt=t,Qh=t&&t.type.__scopeId||null,e}function fe(t,e=rt,r){if(!e||t._n)return t;const n=(...s)=>{n._d&&du(-1);const o=fi(e);let i;try{i=t(...s)}finally{fi(o),n._d&&du(1)}return i};return n._n=!0,n._c=!0,n._d=!0,n}function uc(t,e){if(rt===null)return t;const r=zi(rt),n=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[o,i,a,l=Fe]=e[s];o&&(ke(o)&&(o={mounted:o,updated:o}),o.deep&&mr(i),n.push({dir:o,instance:r,value:i,oldValue:void 0,arg:a,modifiers:l}))}return t}function an(t,e,r,n){const s=t.dirs,o=e&&e.dirs;for(let i=0;i<s.length;i++){const a=s[i];o&&(a.oldValue=o[i].value);let l=a.dir[n];l&&(Xr(),Kt(l,r,8,[t.el,a,t,e]),Yr())}}const Zh=Symbol("_vte"),ef=t=>t.__isTeleport,Ls=t=>t&&(t.disabled||t.disabled===""),Qc=t=>t&&(t.defer||t.defer===""),Zc=t=>typeof SVGElement<"u"&&t instanceof SVGElement,eu=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,el=(t,e)=>{const r=t&&t.to;return Ke(r)?e?e(r):null:r},tf={name:"Teleport",__isTeleport:!0,process(t,e,r,n,s,o,i,a,l,c){const{mc:u,pc:h,pbc:f,o:{insert:p,querySelector:g,createText:v,createComment:_}}=c,T=Ls(e.props);let{shapeFlag:k,children:E,dynamicChildren:C}=e;if(t==null){const $=e.el=v(""),R=e.anchor=v("");p($,r,n),p(R,r,n);const S=(m,A)=>{k&16&&(s&&s.isCE&&(s.ce._teleportTarget=m),u(E,m,A,s,o,i,a,l))},O=()=>{const m=e.target=el(e.props,g),A=rf(m,e,v,p);m&&(i!=="svg"&&Zc(m)?i="svg":i!=="mathml"&&eu(m)&&(i="mathml"),T||(S(m,A),zo(e,!1)))};T&&(S(r,R),zo(e,!0)),Qc(e.props)?vt(()=>{O(),e.el.__isMounted=!0},o):O()}else{if(Qc(e.props)&&!t.el.__isMounted){vt(()=>{tf.process(t,e,r,n,s,o,i,a,l,c),delete t.el.__isMounted},o);return}e.el=t.el,e.targetStart=t.targetStart;const $=e.anchor=t.anchor,R=e.target=t.target,S=e.targetAnchor=t.targetAnchor,O=Ls(t.props),m=O?r:R,A=O?$:S;if(i==="svg"||Zc(R)?i="svg":(i==="mathml"||eu(R))&&(i="mathml"),C?(f(t.dynamicChildren,C,m,s,o,i,a),fc(t,e,!0)):l||h(t,e,m,A,s,o,i,a,!1),T)O?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):Ro(e,r,$,c,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const Q=e.target=el(e.props,g);Q&&Ro(e,Q,null,c,0)}else O&&Ro(e,R,S,c,1);zo(e,T)}},remove(t,e,r,{um:n,o:{remove:s}},o){const{shapeFlag:i,children:a,anchor:l,targetStart:c,targetAnchor:u,target:h,props:f}=t;if(h&&(s(c),s(u)),o&&s(l),i&16){const p=o||!Ls(f);for(let g=0;g<a.length;g++){const v=a[g];n(v,e,r,p,!!v.dynamicChildren)}}},move:Ro,hydrate:Dm};function Ro(t,e,r,{o:{insert:n},m:s},o=2){o===0&&n(t.targetAnchor,e,r);const{el:i,anchor:a,shapeFlag:l,children:c,props:u}=t,h=o===2;if(h&&n(i,e,r),(!h||Ls(u))&&l&16)for(let f=0;f<c.length;f++)s(c[f],e,r,2);h&&n(a,e,r)}function Dm(t,e,r,n,s,o,{o:{nextSibling:i,parentNode:a,querySelector:l,insert:c,createText:u}},h){const f=e.target=el(e.props,l);if(f){const p=Ls(e.props),g=f._lpa||f.firstChild;if(e.shapeFlag&16)if(p)e.anchor=h(i(t),e,a(t),r,n,s,o),e.targetStart=g,e.targetAnchor=g&&i(g);else{e.anchor=i(t);let v=g;for(;v;){if(v&&v.nodeType===8){if(v.data==="teleport start anchor")e.targetStart=v;else if(v.data==="teleport anchor"){e.targetAnchor=v,f._lpa=e.targetAnchor&&i(e.targetAnchor);break}}v=i(v)}e.targetAnchor||rf(f,e,u,c),h(g&&i(g),e,f,r,n,s,o)}zo(e,p)}return e.anchor&&i(e.anchor)}const gs=tf;function zo(t,e){const r=t.ctx;if(r&&r.ut){let n,s;for(e?(n=t.el,s=t.anchor):(n=t.targetStart,s=t.targetAnchor);n&&n!==s;)n.nodeType===1&&n.setAttribute("data-v-owner",r.uid),n=n.nextSibling;r.ut()}}function rf(t,e,r,n){const s=e.targetStart=r(""),o=e.targetAnchor=r("");return s[Zh]=o,t&&(n(s,t),n(o,t)),o}const Mr=Symbol("_leaveCb"),Oo=Symbol("_enterCb");function nf(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Et(()=>{t.isMounted=!0}),hf(()=>{t.isUnmounting=!0}),t}const Ot=[Function,Array],sf={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Ot,onEnter:Ot,onAfterEnter:Ot,onEnterCancelled:Ot,onBeforeLeave:Ot,onLeave:Ot,onAfterLeave:Ot,onLeaveCancelled:Ot,onBeforeAppear:Ot,onAppear:Ot,onAfterAppear:Ot,onAppearCancelled:Ot},of=t=>{const e=t.subTree;return e.component?of(e.component):e},Um={name:"BaseTransition",props:sf,setup(t,{slots:e}){const r=Df(),n=nf();return()=>{const s=e.default&&dc(e.default(),!0);if(!s||!s.length)return;const o=af(s),i=Ee(t),{mode:a}=i;if(n.isLeaving)return ba(o);const l=tu(o);if(!l)return ba(o);let c=Xs(l,i,n,r,h=>c=h);l.type!==wt&&In(l,c);let u=r.subTree&&tu(r.subTree);if(u&&u.type!==wt&&!mn(l,u)&&of(r).type!==wt){let h=Xs(u,i,n,r);if(In(u,h),a==="out-in"&&l.type!==wt)return n.isLeaving=!0,h.afterLeave=()=>{n.isLeaving=!1,r.job.flags&8||r.update(),delete h.afterLeave,u=void 0},ba(o);a==="in-out"&&l.type!==wt?h.delayLeave=(f,p,g)=>{const v=lf(n,u);v[String(u.key)]=u,f[Mr]=()=>{p(),f[Mr]=void 0,delete c.delayedLeave,u=void 0},c.delayedLeave=()=>{g(),delete c.delayedLeave,u=void 0}}:u=void 0}else u&&(u=void 0);return o}}};function af(t){let e=t[0];if(t.length>1){for(const r of t)if(r.type!==wt){e=r;break}}return e}const Bm=Um;function lf(t,e){const{leavingVNodes:r}=t;let n=r.get(e.type);return n||(n=Object.create(null),r.set(e.type,n)),n}function Xs(t,e,r,n,s){const{appear:o,mode:i,persisted:a=!1,onBeforeEnter:l,onEnter:c,onAfterEnter:u,onEnterCancelled:h,onBeforeLeave:f,onLeave:p,onAfterLeave:g,onLeaveCancelled:v,onBeforeAppear:_,onAppear:T,onAfterAppear:k,onAppearCancelled:E}=e,C=String(t.key),$=lf(r,t),R=(m,A)=>{m&&Kt(m,n,9,A)},S=(m,A)=>{const Q=A[1];R(m,A),ge(m)?m.every(K=>K.length<=1)&&Q():m.length<=1&&Q()},O={mode:i,persisted:a,beforeEnter(m){let A=l;if(!r.isMounted)if(o)A=_||l;else return;m[Mr]&&m[Mr](!0);const Q=$[C];Q&&mn(t,Q)&&Q.el[Mr]&&Q.el[Mr](),R(A,[m])},enter(m){let A=c,Q=u,K=h;if(!r.isMounted)if(o)A=T||c,Q=k||u,K=E||h;else return;let ie=!1;const we=m[Oo]=De=>{ie||(ie=!0,De?R(K,[m]):R(Q,[m]),O.delayedLeave&&O.delayedLeave(),m[Oo]=void 0)};A?S(A,[m,we]):we()},leave(m,A){const Q=String(t.key);if(m[Oo]&&m[Oo](!0),r.isUnmounting)return A();R(f,[m]);let K=!1;const ie=m[Mr]=we=>{K||(K=!0,A(),we?R(v,[m]):R(g,[m]),m[Mr]=void 0,$[Q]===t&&delete $[Q])};$[Q]=t,p?S(p,[m,ie]):ie()},clone(m){const A=Xs(m,e,r,n,s);return s&&s(A),A}};return O}function ba(t){if(Bi(t))return t=Er(t),t.children=null,t}function tu(t){if(!Bi(t))return ef(t.type)&&t.children?af(t.children):t;const{shapeFlag:e,children:r}=t;if(r){if(e&16)return r[0];if(e&32&&ke(r.default))return r.default()}}function In(t,e){t.shapeFlag&6&&t.component?(t.transition=e,In(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function dc(t,e=!1,r){let n=[],s=0;for(let o=0;o<t.length;o++){let i=t[o];const a=r==null?i.key:String(r)+String(i.key!=null?i.key:o);i.type===ve?(i.patchFlag&128&&s++,n=n.concat(dc(i.children,e,a))):(e||i.type!==wt)&&n.push(a!=null?Er(i,{key:a}):i)}if(s>1)for(let o=0;o<n.length;o++)n[o].patchFlag=-2;return n}/*! #__NO_SIDE_EFFECTS__ */function ms(t,e){return ke(t)?nt({name:t.name},e,{setup:t}):t}function cf(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function pi(t,e,r,n,s=!1){if(ge(t)){t.forEach((g,v)=>pi(g,e&&(ge(e)?e[v]:e),r,n,s));return}if(Yn(n)&&!s){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&pi(t,e,r,n.component.subTree);return}const o=n.shapeFlag&4?zi(n.component):n.el,i=s?null:o,{i:a,r:l}=t,c=e&&e.r,u=a.refs===Fe?a.refs={}:a.refs,h=a.setupState,f=Ee(h),p=h===Fe?()=>!1:g=>Me(f,g);if(c!=null&&c!==l&&(Ke(c)?(u[c]=null,p(c)&&(h[c]=null)):Je(c)&&(c.value=null)),ke(l))ho(l,a,12,[i,u]);else{const g=Ke(l),v=Je(l);if(g||v){const _=()=>{if(t.f){const T=g?p(l)?h[l]:u[l]:l.value;s?ge(T)&&Ql(T,o):ge(T)?T.includes(o)||T.push(o):g?(u[l]=[o],p(l)&&(h[l]=u[l])):(l.value=[o],t.k&&(u[t.k]=l.value))}else g?(u[l]=i,p(l)&&(h[l]=i)):v&&(l.value=i,t.k&&(u[t.k]=i))};i?(_.id=-1,vt(_,r)):_()}}}ji().requestIdleCallback;ji().cancelIdleCallback;const Yn=t=>!!t.type.__asyncLoader,Bi=t=>t.type.__isKeepAlive;function Fm(t,e){uf(t,"a",e)}function Hm(t,e){uf(t,"da",e)}function uf(t,e,r=st){const n=t.__wdc||(t.__wdc=()=>{let s=r;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(Fi(e,n,r),r){let s=r.parent;for(;s&&s.parent;)Bi(s.parent.vnode)&&Vm(n,e,r,s),s=s.parent}}function Vm(t,e,r,n){const s=Fi(e,t,n,!0);Jt(()=>{Ql(n[e],s)},r)}function Fi(t,e,r=st,n=!1){if(r){const s=r[t]||(r[t]=[]),o=e.__weh||(e.__weh=(...i)=>{Xr();const a=fo(r),l=Kt(e,r,t,i);return a(),Yr(),l});return n?s.unshift(o):s.push(o),o}}const Tr=t=>(e,r=st)=>{(!Qs||t==="sp")&&Fi(t,(...n)=>e(...n),r)},qm=Tr("bm"),Et=Tr("m"),zm=Tr("bu"),df=Tr("u"),hf=Tr("bum"),Jt=Tr("um"),Wm=Tr("sp"),Km=Tr("rtg"),Gm=Tr("rtc");function ff(t,e=st){Fi("ec",t,e)}const pf="components";function Hi(t,e){return vf(pf,t,!0,e)||t}const gf=Symbol.for("v-ndc");function mf(t){return Ke(t)?vf(pf,t,!1)||t:t||gf}function vf(t,e,r=!0,n=!1){const s=rt||st;if(s){const o=s.type;{const a=Nv(o,!1);if(a&&(a===e||a===jt(e)||a===Mi(jt(e))))return o}const i=ru(s[t]||o[t],e)||ru(s.appContext[t],e);return!i&&n?o:i}}function ru(t,e){return t&&(t[e]||t[jt(e)]||t[Mi(jt(e))])}function $e(t,e,r,n){let s;const o=r,i=ge(t);if(i||Ke(t)){const a=i&&qr(t);let l=!1;a&&(l=!Nt(t),t=Di(t)),s=new Array(t.length);for(let c=0,u=t.length;c<u;c++)s[c]=e(l?ht(t[c]):t[c],c,void 0,o)}else if(typeof t=="number"){s=new Array(t);for(let a=0;a<t;a++)s[a]=e(a+1,a,void 0,o)}else if(He(t))if(t[Symbol.iterator])s=Array.from(t,(a,l)=>e(a,l,void 0,o));else{const a=Object.keys(t);s=new Array(a.length);for(let l=0,c=a.length;l<c;l++){const u=a[l];s[l]=e(t[u],u,l,o)}}else s=[];return s}function yf(t,e,r={},n,s){if(rt.ce||rt.parent&&Yn(rt.parent)&&rt.parent.ce)return e!=="default"&&(r.name=e),y(),Ie(ve,null,[V("slot",r,n)],64);let o=t[e];o&&o._c&&(o._d=!1),y();const i=o&&bf(o(r)),a=r.key||i&&i.key,l=Ie(ve,{key:(a&&!Wt(a)?a:`_${e}`)+""},i||[],i&&t._===1?64:-2);return l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),o&&o._c&&(o._d=!0),l}function bf(t){return t.some(e=>Rn(e)?!(e.type===wt||e.type===ve&&!bf(e.children)):!0)?t:null}const tl=t=>t?Uf(t)?zi(t):tl(t.parent):null,Ms=nt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>tl(t.parent),$root:t=>tl(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>_f(t),$forceUpdate:t=>t.f||(t.f=()=>{cc(t.update)}),$nextTick:t=>t.n||(t.n=Qr.bind(t.proxy)),$watch:t=>mv.bind(t)}),wa=(t,e)=>t!==Fe&&!t.__isScriptSetup&&Me(t,e),Jm={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:r,setupState:n,data:s,props:o,accessCache:i,type:a,appContext:l}=t;let c;if(e[0]!=="$"){const p=i[e];if(p!==void 0)switch(p){case 1:return n[e];case 2:return s[e];case 4:return r[e];case 3:return o[e]}else{if(wa(n,e))return i[e]=1,n[e];if(s!==Fe&&Me(s,e))return i[e]=2,s[e];if((c=t.propsOptions[0])&&Me(c,e))return i[e]=3,o[e];if(r!==Fe&&Me(r,e))return i[e]=4,r[e];rl&&(i[e]=0)}}const u=Ms[e];let h,f;if(u)return e==="$attrs"&&dt(t.attrs,"get",""),u(t);if((h=a.__cssModules)&&(h=h[e]))return h;if(r!==Fe&&Me(r,e))return i[e]=4,r[e];if(f=l.config.globalProperties,Me(f,e))return f[e]},set({_:t},e,r){const{data:n,setupState:s,ctx:o}=t;return wa(s,e)?(s[e]=r,!0):n!==Fe&&Me(n,e)?(n[e]=r,!0):Me(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(o[e]=r,!0)},has({_:{data:t,setupState:e,accessCache:r,ctx:n,appContext:s,propsOptions:o}},i){let a;return!!r[i]||t!==Fe&&Me(t,i)||wa(e,i)||(a=o[0])&&Me(a,i)||Me(n,i)||Me(Ms,i)||Me(s.config.globalProperties,i)},defineProperty(t,e,r){return r.get!=null?t._.accessCache[e]=0:Me(r,"value")&&this.set(t,e,r.value,null),Reflect.defineProperty(t,e,r)}};function nu(t){return ge(t)?t.reduce((e,r)=>(e[r]=null,e),{}):t}let rl=!0;function Xm(t){const e=_f(t),r=t.proxy,n=t.ctx;rl=!1,e.beforeCreate&&su(e.beforeCreate,t,"bc");const{data:s,computed:o,methods:i,watch:a,provide:l,inject:c,created:u,beforeMount:h,mounted:f,beforeUpdate:p,updated:g,activated:v,deactivated:_,beforeDestroy:T,beforeUnmount:k,destroyed:E,unmounted:C,render:$,renderTracked:R,renderTriggered:S,errorCaptured:O,serverPrefetch:m,expose:A,inheritAttrs:Q,components:K,directives:ie,filters:we}=e;if(c&&Ym(c,n,null),i)for(const N in i){const de=i[N];ke(de)&&(n[N]=de.bind(r))}if(s){const N=s.call(r,r);He(N)&&(t.data=Ut(N))}if(rl=!0,o)for(const N in o){const de=o[N],ue=ke(de)?de.bind(r,r):ke(de.get)?de.get.bind(r,r):or,re=!ke(de)&&ke(de.set)?de.set.bind(r):or,P=Ae({get:ue,set:re});Object.defineProperty(n,N,{enumerable:!0,configurable:!0,get:()=>P.value,set:ae=>P.value=ae})}if(a)for(const N in a)wf(a[N],n,r,N);if(l){const N=ke(l)?l.call(r):l;Reflect.ownKeys(N).forEach(de=>{Wo(de,N[de])})}u&&su(u,t,"c");function G(N,de){ge(de)?de.forEach(ue=>N(ue.bind(r))):de&&N(de.bind(r))}if(G(qm,h),G(Et,f),G(zm,p),G(df,g),G(Fm,v),G(Hm,_),G(ff,O),G(Gm,R),G(Km,S),G(hf,k),G(Jt,C),G(Wm,m),ge(A))if(A.length){const N=t.exposed||(t.exposed={});A.forEach(de=>{Object.defineProperty(N,de,{get:()=>r[de],set:ue=>r[de]=ue})})}else t.exposed||(t.exposed={});$&&t.render===or&&(t.render=$),Q!=null&&(t.inheritAttrs=Q),K&&(t.components=K),ie&&(t.directives=ie),m&&cf(t)}function Ym(t,e,r=or){ge(t)&&(t=nl(t));for(const n in t){const s=t[n];let o;He(s)?"default"in s?o=Lt(s.from||n,s.default,!0):o=Lt(s.from||n):o=Lt(s),Je(o)?Object.defineProperty(e,n,{enumerable:!0,configurable:!0,get:()=>o.value,set:i=>o.value=i}):e[n]=o}}function su(t,e,r){Kt(ge(t)?t.map(n=>n.bind(e.proxy)):t.bind(e.proxy),e,r)}function wf(t,e,r,n){let s=n.includes(".")?$f(r,n):()=>r[n];if(Ke(t)){const o=e[t];ke(o)&&_r(s,o)}else if(ke(t))_r(s,t.bind(r));else if(He(t))if(ge(t))t.forEach(o=>wf(o,e,r,n));else{const o=ke(t.handler)?t.handler.bind(r):e[t.handler];ke(o)&&_r(s,o,t)}}function _f(t){const e=t.type,{mixins:r,extends:n}=e,{mixins:s,optionsCache:o,config:{optionMergeStrategies:i}}=t.appContext,a=o.get(e);let l;return a?l=a:!s.length&&!r&&!n?l=e:(l={},s.length&&s.forEach(c=>gi(l,c,i,!0)),gi(l,e,i)),He(e)&&o.set(e,l),l}function gi(t,e,r,n=!1){const{mixins:s,extends:o}=e;o&&gi(t,o,r,!0),s&&s.forEach(i=>gi(t,i,r,!0));for(const i in e)if(!(n&&i==="expose")){const a=Qm[i]||r&&r[i];t[i]=a?a(t[i],e[i]):e[i]}return t}const Qm={data:ou,props:iu,emits:iu,methods:As,computed:As,beforeCreate:mt,created:mt,beforeMount:mt,mounted:mt,beforeUpdate:mt,updated:mt,beforeDestroy:mt,beforeUnmount:mt,destroyed:mt,unmounted:mt,activated:mt,deactivated:mt,errorCaptured:mt,serverPrefetch:mt,components:As,directives:As,watch:ev,provide:ou,inject:Zm};function ou(t,e){return e?t?function(){return nt(ke(t)?t.call(this,this):t,ke(e)?e.call(this,this):e)}:e:t}function Zm(t,e){return As(nl(t),nl(e))}function nl(t){if(ge(t)){const e={};for(let r=0;r<t.length;r++)e[t[r]]=t[r];return e}return t}function mt(t,e){return t?[...new Set([].concat(t,e))]:e}function As(t,e){return t?nt(Object.create(null),t,e):e}function iu(t,e){return t?ge(t)&&ge(e)?[...new Set([...t,...e])]:nt(Object.create(null),nu(t),nu(e??{})):e}function ev(t,e){if(!t)return e;if(!e)return t;const r=nt(Object.create(null),t);for(const n in e)r[n]=mt(t[n],e[n]);return r}function xf(){return{app:null,config:{isNativeTag:Wg,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let tv=0;function rv(t,e){return function(n,s=null){ke(n)||(n=nt({},n)),s!=null&&!He(s)&&(s=null);const o=xf(),i=new WeakSet,a=[];let l=!1;const c=o.app={_uid:tv++,_component:n,_props:s,_container:null,_context:o,_instance:null,version:Mv,get config(){return o.config},set config(u){},use(u,...h){return i.has(u)||(u&&ke(u.install)?(i.add(u),u.install(c,...h)):ke(u)&&(i.add(u),u(c,...h))),c},mixin(u){return o.mixins.includes(u)||o.mixins.push(u),c},component(u,h){return h?(o.components[u]=h,c):o.components[u]},directive(u,h){return h?(o.directives[u]=h,c):o.directives[u]},mount(u,h,f){if(!l){const p=c._ceVNode||V(n,s);return p.appContext=o,f===!0?f="svg":f===!1&&(f=void 0),t(p,u,f),l=!0,c._container=u,u.__vue_app__=c,zi(p.component)}},onUnmount(u){a.push(u)},unmount(){l&&(Kt(a,c._instance,16),t(null,c._container),delete c._container.__vue_app__)},provide(u,h){return o.provides[u]=h,c},runWithContext(u){const h=Sn;Sn=c;try{return u()}finally{Sn=h}}};return c}}let Sn=null;function Wo(t,e){if(st){let r=st.provides;const n=st.parent&&st.parent.provides;n===r&&(r=st.provides=Object.create(n)),r[t]=e}}function Lt(t,e,r=!1){const n=st||rt;if(n||Sn){const s=Sn?Sn._context.provides:n?n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(s&&t in s)return s[t];if(arguments.length>1)return r&&ke(e)?e.call(n&&n.proxy):e}}function nv(){return!!(st||rt||Sn)}const Ef={},kf=()=>Object.create(Ef),Sf=t=>Object.getPrototypeOf(t)===Ef;function sv(t,e,r,n=!1){const s={},o=kf();t.propsDefaults=Object.create(null),Tf(t,e,s,o);for(const i in t.propsOptions[0])i in s||(s[i]=void 0);r?t.props=n?s:qh(s):t.type.props?t.props=s:t.props=o,t.attrs=o}function ov(t,e,r,n){const{props:s,attrs:o,vnode:{patchFlag:i}}=t,a=Ee(s),[l]=t.propsOptions;let c=!1;if((n||i>0)&&!(i&16)){if(i&8){const u=t.vnode.dynamicProps;for(let h=0;h<u.length;h++){let f=u[h];if(Vi(t.emitsOptions,f))continue;const p=e[f];if(l)if(Me(o,f))p!==o[f]&&(o[f]=p,c=!0);else{const g=jt(f);s[g]=sl(l,a,g,p,t,!1)}else p!==o[f]&&(o[f]=p,c=!0)}}}else{Tf(t,e,s,o)&&(c=!0);let u;for(const h in a)(!e||!Me(e,h)&&((u=Jr(h))===h||!Me(e,u)))&&(l?r&&(r[h]!==void 0||r[u]!==void 0)&&(s[h]=sl(l,a,h,void 0,t,!0)):delete s[h]);if(o!==a)for(const h in o)(!e||!Me(e,h))&&(delete o[h],c=!0)}c&&gr(t.attrs,"set","")}function Tf(t,e,r,n){const[s,o]=t.propsOptions;let i=!1,a;if(e)for(let l in e){if(Ps(l))continue;const c=e[l];let u;s&&Me(s,u=jt(l))?!o||!o.includes(u)?r[u]=c:(a||(a={}))[u]=c:Vi(t.emitsOptions,l)||(!(l in n)||c!==n[l])&&(n[l]=c,i=!0)}if(o){const l=Ee(r),c=a||Fe;for(let u=0;u<o.length;u++){const h=o[u];r[h]=sl(s,l,h,c[h],t,!Me(c,h))}}return i}function sl(t,e,r,n,s,o){const i=t[r];if(i!=null){const a=Me(i,"default");if(a&&n===void 0){const l=i.default;if(i.type!==Function&&!i.skipFactory&&ke(l)){const{propsDefaults:c}=s;if(r in c)n=c[r];else{const u=fo(s);n=c[r]=l.call(null,e),u()}}else n=l;s.ce&&s.ce._setProp(r,n)}i[0]&&(o&&!a?n=!1:i[1]&&(n===""||n===Jr(r))&&(n=!0))}return n}const iv=new WeakMap;function Cf(t,e,r=!1){const n=r?iv:e.propsCache,s=n.get(t);if(s)return s;const o=t.props,i={},a=[];let l=!1;if(!ke(t)){const u=h=>{l=!0;const[f,p]=Cf(h,e,!0);nt(i,f),p&&a.push(...p)};!r&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!o&&!l)return He(t)&&n.set(t,Gn),Gn;if(ge(o))for(let u=0;u<o.length;u++){const h=jt(o[u]);au(h)&&(i[h]=Fe)}else if(o)for(const u in o){const h=jt(u);if(au(h)){const f=o[u],p=i[h]=ge(f)||ke(f)?{type:f}:nt({},f),g=p.type;let v=!1,_=!0;if(ge(g))for(let T=0;T<g.length;++T){const k=g[T],E=ke(k)&&k.name;if(E==="Boolean"){v=!0;break}else E==="String"&&(_=!1)}else v=ke(g)&&g.name==="Boolean";p[0]=v,p[1]=_,(v||Me(p,"default"))&&a.push(h)}}const c=[i,a];return He(t)&&n.set(t,c),c}function au(t){return t[0]!=="$"&&!Ps(t)}const Af=t=>t[0]==="_"||t==="$stable",hc=t=>ge(t)?t.map(sr):[sr(t)],av=(t,e,r)=>{if(e._n)return e;const n=fe((...s)=>hc(e(...s)),r);return n._c=!1,n},If=(t,e,r)=>{const n=t._ctx;for(const s in t){if(Af(s))continue;const o=t[s];if(ke(o))e[s]=av(s,o,n);else if(o!=null){const i=hc(o);e[s]=()=>i}}},Rf=(t,e)=>{const r=hc(e);t.slots.default=()=>r},Of=(t,e,r)=>{for(const n in e)(r||n!=="_")&&(t[n]=e[n])},lv=(t,e,r)=>{const n=t.slots=kf();if(t.vnode.shapeFlag&32){const s=e._;s?(Of(n,e,r),r&&Eh(n,"_",s,!0)):If(e,n)}else e&&Rf(t,e)},cv=(t,e,r)=>{const{vnode:n,slots:s}=t;let o=!0,i=Fe;if(n.shapeFlag&32){const a=e._;a?r&&a===1?o=!1:Of(s,e,r):(o=!e.$stable,If(e,s)),i=e}else e&&(Rf(t,e),i={default:1});if(o)for(const a in s)!Af(a)&&i[a]==null&&delete s[a]},vt=Ev;function uv(t){return dv(t)}function dv(t,e){const r=ji();r.__VUE__=!0;const{insert:n,remove:s,patchProp:o,createElement:i,createText:a,createComment:l,setText:c,setElementText:u,parentNode:h,nextSibling:f,setScopeId:p=or,insertStaticContent:g}=t,v=(b,w,I,D=null,H=null,U=null,ee=void 0,X=null,J=!!w.dynamicChildren)=>{if(b===w)return;b&&!mn(b,w)&&(D=M(b),ae(b,H,U,!0),b=null),w.patchFlag===-2&&(J=!1,w.dynamicChildren=null);const{type:W,ref:Y,shapeFlag:B}=w;switch(W){case qi:_(b,w,I,D);break;case wt:T(b,w,I,D);break;case Go:b==null&&k(w,I,D,ee);break;case ve:K(b,w,I,D,H,U,ee,X,J);break;default:B&1?$(b,w,I,D,H,U,ee,X,J):B&6?ie(b,w,I,D,H,U,ee,X,J):(B&64||B&128)&&W.process(b,w,I,D,H,U,ee,X,J,se)}Y!=null&&H&&pi(Y,b&&b.ref,U,w||b,!w)},_=(b,w,I,D)=>{if(b==null)n(w.el=a(w.children),I,D);else{const H=w.el=b.el;w.children!==b.children&&c(H,w.children)}},T=(b,w,I,D)=>{b==null?n(w.el=l(w.children||""),I,D):w.el=b.el},k=(b,w,I,D)=>{[b.el,b.anchor]=g(b.children,w,I,D,b.el,b.anchor)},E=({el:b,anchor:w},I,D)=>{let H;for(;b&&b!==w;)H=f(b),n(b,I,D),b=H;n(w,I,D)},C=({el:b,anchor:w})=>{let I;for(;b&&b!==w;)I=f(b),s(b),b=I;s(w)},$=(b,w,I,D,H,U,ee,X,J)=>{w.type==="svg"?ee="svg":w.type==="math"&&(ee="mathml"),b==null?R(w,I,D,H,U,ee,X,J):m(b,w,H,U,ee,X,J)},R=(b,w,I,D,H,U,ee,X)=>{let J,W;const{props:Y,shapeFlag:B,transition:oe,dirs:pe}=b;if(J=b.el=i(b.type,U,Y&&Y.is,Y),B&8?u(J,b.children):B&16&&O(b.children,J,null,D,H,_a(b,U),ee,X),pe&&an(b,null,D,"created"),S(J,b,b.scopeId,ee,D),Y){for(const Oe in Y)Oe!=="value"&&!Ps(Oe)&&o(J,Oe,null,Y[Oe],U,D);"value"in Y&&o(J,"value",null,Y.value,U),(W=Y.onVnodeBeforeMount)&&Zt(W,D,b)}pe&&an(b,null,D,"beforeMount");const Se=hv(H,oe);Se&&oe.beforeEnter(J),n(J,w,I),((W=Y&&Y.onVnodeMounted)||Se||pe)&&vt(()=>{W&&Zt(W,D,b),Se&&oe.enter(J),pe&&an(b,null,D,"mounted")},H)},S=(b,w,I,D,H)=>{if(I&&p(b,I),D)for(let U=0;U<D.length;U++)p(b,D[U]);if(H){let U=H.subTree;if(w===U||Lf(U.type)&&(U.ssContent===w||U.ssFallback===w)){const ee=H.vnode;S(b,ee,ee.scopeId,ee.slotScopeIds,H.parent)}}},O=(b,w,I,D,H,U,ee,X,J=0)=>{for(let W=J;W<b.length;W++){const Y=b[W]=X?jr(b[W]):sr(b[W]);v(null,Y,w,I,D,H,U,ee,X)}},m=(b,w,I,D,H,U,ee)=>{const X=w.el=b.el;let{patchFlag:J,dynamicChildren:W,dirs:Y}=w;J|=b.patchFlag&16;const B=b.props||Fe,oe=w.props||Fe;let pe;if(I&&ln(I,!1),(pe=oe.onVnodeBeforeUpdate)&&Zt(pe,I,w,b),Y&&an(w,b,I,"beforeUpdate"),I&&ln(I,!0),(B.innerHTML&&oe.innerHTML==null||B.textContent&&oe.textContent==null)&&u(X,""),W?A(b.dynamicChildren,W,X,I,D,_a(w,H),U):ee||de(b,w,X,null,I,D,_a(w,H),U,!1),J>0){if(J&16)Q(X,B,oe,I,H);else if(J&2&&B.class!==oe.class&&o(X,"class",null,oe.class,H),J&4&&o(X,"style",B.style,oe.style,H),J&8){const Se=w.dynamicProps;for(let Oe=0;Oe<Se.length;Oe++){const Re=Se[Oe],Ze=B[Re],et=oe[Re];(et!==Ze||Re==="value")&&o(X,Re,Ze,et,H,I)}}J&1&&b.children!==w.children&&u(X,w.children)}else!ee&&W==null&&Q(X,B,oe,I,H);((pe=oe.onVnodeUpdated)||Y)&&vt(()=>{pe&&Zt(pe,I,w,b),Y&&an(w,b,I,"updated")},D)},A=(b,w,I,D,H,U,ee)=>{for(let X=0;X<w.length;X++){const J=b[X],W=w[X],Y=J.el&&(J.type===ve||!mn(J,W)||J.shapeFlag&70)?h(J.el):I;v(J,W,Y,null,D,H,U,ee,!0)}},Q=(b,w,I,D,H)=>{if(w!==I){if(w!==Fe)for(const U in w)!Ps(U)&&!(U in I)&&o(b,U,w[U],null,H,D);for(const U in I){if(Ps(U))continue;const ee=I[U],X=w[U];ee!==X&&U!=="value"&&o(b,U,X,ee,H,D)}"value"in I&&o(b,"value",w.value,I.value,H)}},K=(b,w,I,D,H,U,ee,X,J)=>{const W=w.el=b?b.el:a(""),Y=w.anchor=b?b.anchor:a("");let{patchFlag:B,dynamicChildren:oe,slotScopeIds:pe}=w;pe&&(X=X?X.concat(pe):pe),b==null?(n(W,I,D),n(Y,I,D),O(w.children||[],I,Y,H,U,ee,X,J)):B>0&&B&64&&oe&&b.dynamicChildren?(A(b.dynamicChildren,oe,I,H,U,ee,X),(w.key!=null||H&&w===H.subTree)&&fc(b,w,!0)):de(b,w,I,Y,H,U,ee,X,J)},ie=(b,w,I,D,H,U,ee,X,J)=>{w.slotScopeIds=X,b==null?w.shapeFlag&512?H.ctx.activate(w,I,D,ee,J):we(w,I,D,H,U,ee,J):De(b,w,J)},we=(b,w,I,D,H,U,ee)=>{const X=b.component=Iv(b,D,H);if(Bi(b)&&(X.ctx.renderer=se),Rv(X,!1,ee),X.asyncDep){if(H&&H.registerDep(X,G,ee),!b.el){const J=X.subTree=V(wt);T(null,J,w,I)}}else G(X,b,w,I,H,U,ee)},De=(b,w,I)=>{const D=w.component=b.component;if(_v(b,w,I))if(D.asyncDep&&!D.asyncResolved){N(D,w,I);return}else D.next=w,D.update();else w.el=b.el,D.vnode=w},G=(b,w,I,D,H,U,ee)=>{const X=()=>{if(b.isMounted){let{next:B,bu:oe,u:pe,parent:Se,vnode:Oe}=b;{const gt=Pf(b);if(gt){B&&(B.el=Oe.el,N(b,B,ee)),gt.asyncDep.then(()=>{b.isUnmounted||X()});return}}let Re=B,Ze;ln(b,!1),B?(B.el=Oe.el,N(b,B,ee)):B=Oe,oe&&qo(oe),(Ze=B.props&&B.props.onVnodeBeforeUpdate)&&Zt(Ze,Se,B,Oe),ln(b,!0);const et=cu(b),ot=b.subTree;b.subTree=et,v(ot,et,h(ot.el),M(ot),b,H,U),B.el=et.el,Re===null&&xv(b,et.el),pe&&vt(pe,H),(Ze=B.props&&B.props.onVnodeUpdated)&&vt(()=>Zt(Ze,Se,B,Oe),H)}else{let B;const{el:oe,props:pe}=w,{bm:Se,m:Oe,parent:Re,root:Ze,type:et}=b,ot=Yn(w);ln(b,!1),Se&&qo(Se),!ot&&(B=pe&&pe.onVnodeBeforeMount)&&Zt(B,Re,w),ln(b,!0);{Ze.ce&&Ze.ce._injectChildStyle(et);const gt=b.subTree=cu(b);v(null,gt,I,D,b,H,U),w.el=gt.el}if(Oe&&vt(Oe,H),!ot&&(B=pe&&pe.onVnodeMounted)){const gt=w;vt(()=>Zt(B,Re,gt),H)}(w.shapeFlag&256||Re&&Yn(Re.vnode)&&Re.vnode.shapeFlag&256)&&b.a&&vt(b.a,H),b.isMounted=!0,w=I=D=null}};b.scope.on();const J=b.effect=new Rh(X);b.scope.off();const W=b.update=J.run.bind(J),Y=b.job=J.runIfDirty.bind(J);Y.i=b,Y.id=b.uid,J.scheduler=()=>cc(Y),ln(b,!0),W()},N=(b,w,I)=>{w.component=b;const D=b.vnode.props;b.vnode=w,b.next=null,ov(b,w.props,D,I),cv(b,w.children,I),Xr(),Yc(b),Yr()},de=(b,w,I,D,H,U,ee,X,J=!1)=>{const W=b&&b.children,Y=b?b.shapeFlag:0,B=w.children,{patchFlag:oe,shapeFlag:pe}=w;if(oe>0){if(oe&128){re(W,B,I,D,H,U,ee,X,J);return}else if(oe&256){ue(W,B,I,D,H,U,ee,X,J);return}}pe&8?(Y&16&&Ue(W,H,U),B!==W&&u(I,B)):Y&16?pe&16?re(W,B,I,D,H,U,ee,X,J):Ue(W,H,U,!0):(Y&8&&u(I,""),pe&16&&O(B,I,D,H,U,ee,X,J))},ue=(b,w,I,D,H,U,ee,X,J)=>{b=b||Gn,w=w||Gn;const W=b.length,Y=w.length,B=Math.min(W,Y);let oe;for(oe=0;oe<B;oe++){const pe=w[oe]=J?jr(w[oe]):sr(w[oe]);v(b[oe],pe,I,null,H,U,ee,X,J)}W>Y?Ue(b,H,U,!0,!1,B):O(w,I,D,H,U,ee,X,J,B)},re=(b,w,I,D,H,U,ee,X,J)=>{let W=0;const Y=w.length;let B=b.length-1,oe=Y-1;for(;W<=B&&W<=oe;){const pe=b[W],Se=w[W]=J?jr(w[W]):sr(w[W]);if(mn(pe,Se))v(pe,Se,I,null,H,U,ee,X,J);else break;W++}for(;W<=B&&W<=oe;){const pe=b[B],Se=w[oe]=J?jr(w[oe]):sr(w[oe]);if(mn(pe,Se))v(pe,Se,I,null,H,U,ee,X,J);else break;B--,oe--}if(W>B){if(W<=oe){const pe=oe+1,Se=pe<Y?w[pe].el:D;for(;W<=oe;)v(null,w[W]=J?jr(w[W]):sr(w[W]),I,Se,H,U,ee,X,J),W++}}else if(W>oe)for(;W<=B;)ae(b[W],H,U,!0),W++;else{const pe=W,Se=W,Oe=new Map;for(W=Se;W<=oe;W++){const xe=w[W]=J?jr(w[W]):sr(w[W]);xe.key!=null&&Oe.set(xe.key,W)}let Re,Ze=0;const et=oe-Se+1;let ot=!1,gt=0;const Qt=new Array(et);for(W=0;W<et;W++)Qt[W]=0;for(W=pe;W<=B;W++){const xe=b[W];if(Ze>=et){ae(xe,H,U,!0);continue}let Ye;if(xe.key!=null)Ye=Oe.get(xe.key);else for(Re=Se;Re<=oe;Re++)if(Qt[Re-Se]===0&&mn(xe,w[Re])){Ye=Re;break}Ye===void 0?ae(xe,H,U,!0):(Qt[Ye-Se]=W+1,Ye>=gt?gt=Ye:ot=!0,v(xe,w[Ye],I,null,H,U,ee,X,J),Ze++)}const Ge=ot?fv(Qt):Gn;for(Re=Ge.length-1,W=et-1;W>=0;W--){const xe=Se+W,Ye=w[xe],_s=xe+1<Y?w[xe+1].el:D;Qt[W]===0?v(null,Ye,I,_s,H,U,ee,X,J):ot&&(Re<0||W!==Ge[Re]?P(Ye,I,_s,2):Re--)}}},P=(b,w,I,D,H=null)=>{const{el:U,type:ee,transition:X,children:J,shapeFlag:W}=b;if(W&6){P(b.component.subTree,w,I,D);return}if(W&128){b.suspense.move(w,I,D);return}if(W&64){ee.move(b,w,I,se);return}if(ee===ve){n(U,w,I);for(let B=0;B<J.length;B++)P(J[B],w,I,D);n(b.anchor,w,I);return}if(ee===Go){E(b,w,I);return}if(D!==2&&W&1&&X)if(D===0)X.beforeEnter(U),n(U,w,I),vt(()=>X.enter(U),H);else{const{leave:B,delayLeave:oe,afterLeave:pe}=X,Se=()=>n(U,w,I),Oe=()=>{B(U,()=>{Se(),pe&&pe()})};oe?oe(U,Se,Oe):Oe()}else n(U,w,I)},ae=(b,w,I,D=!1,H=!1)=>{const{type:U,props:ee,ref:X,children:J,dynamicChildren:W,shapeFlag:Y,patchFlag:B,dirs:oe,cacheIndex:pe}=b;if(B===-2&&(H=!1),X!=null&&pi(X,null,I,b,!0),pe!=null&&(w.renderCache[pe]=void 0),Y&256){w.ctx.deactivate(b);return}const Se=Y&1&&oe,Oe=!Yn(b);let Re;if(Oe&&(Re=ee&&ee.onVnodeBeforeUnmount)&&Zt(Re,w,b),Y&6)ze(b.component,I,D);else{if(Y&128){b.suspense.unmount(I,D);return}Se&&an(b,null,w,"beforeUnmount"),Y&64?b.type.remove(b,w,I,se,D):W&&!W.hasOnce&&(U!==ve||B>0&&B&64)?Ue(W,w,I,!1,!0):(U===ve&&B&384||!H&&Y&16)&&Ue(J,w,I),D&&F(b)}(Oe&&(Re=ee&&ee.onVnodeUnmounted)||Se)&&vt(()=>{Re&&Zt(Re,w,b),Se&&an(b,null,w,"unmounted")},I)},F=b=>{const{type:w,el:I,anchor:D,transition:H}=b;if(w===ve){ye(I,D);return}if(w===Go){C(b);return}const U=()=>{s(I),H&&!H.persisted&&H.afterLeave&&H.afterLeave()};if(b.shapeFlag&1&&H&&!H.persisted){const{leave:ee,delayLeave:X}=H,J=()=>ee(I,U);X?X(b.el,U,J):J()}else U()},ye=(b,w)=>{let I;for(;b!==w;)I=f(b),s(b),b=I;s(w)},ze=(b,w,I)=>{const{bum:D,scope:H,job:U,subTree:ee,um:X,m:J,a:W}=b;lu(J),lu(W),D&&qo(D),H.stop(),U&&(U.flags|=8,ae(ee,b,w,I)),X&&vt(X,w),vt(()=>{b.isUnmounted=!0},w),w&&w.pendingBranch&&!w.isUnmounted&&b.asyncDep&&!b.asyncResolved&&b.suspenseId===w.pendingId&&(w.deps--,w.deps===0&&w.resolve())},Ue=(b,w,I,D=!1,H=!1,U=0)=>{for(let ee=U;ee<b.length;ee++)ae(b[ee],w,I,D,H)},M=b=>{if(b.shapeFlag&6)return M(b.component.subTree);if(b.shapeFlag&128)return b.suspense.next();const w=f(b.anchor||b.el),I=w&&w[Zh];return I?f(I):w};let te=!1;const Z=(b,w,I)=>{b==null?w._vnode&&ae(w._vnode,null,null,!0):v(w._vnode||null,b,w,null,null,null,I),w._vnode=b,te||(te=!0,Yc(),Xh(),te=!1)},se={p:v,um:ae,m:P,r:F,mt:we,mc:O,pc:de,pbc:A,n:M,o:t};return{render:Z,hydrate:void 0,createApp:rv(Z)}}function _a({type:t,props:e},r){return r==="svg"&&t==="foreignObject"||r==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:r}function ln({effect:t,job:e},r){r?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function hv(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function fc(t,e,r=!1){const n=t.children,s=e.children;if(ge(n)&&ge(s))for(let o=0;o<n.length;o++){const i=n[o];let a=s[o];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[o]=jr(s[o]),a.el=i.el),!r&&a.patchFlag!==-2&&fc(i,a)),a.type===qi&&(a.el=i.el)}}function fv(t){const e=t.slice(),r=[0];let n,s,o,i,a;const l=t.length;for(n=0;n<l;n++){const c=t[n];if(c!==0){if(s=r[r.length-1],t[s]<c){e[n]=s,r.push(n);continue}for(o=0,i=r.length-1;o<i;)a=o+i>>1,t[r[a]]<c?o=a+1:i=a;c<t[r[o]]&&(o>0&&(e[n]=r[o-1]),r[o]=n)}}for(o=r.length,i=r[o-1];o-- >0;)r[o]=i,i=e[i];return r}function Pf(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Pf(e)}function lu(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const pv=Symbol.for("v-scx"),gv=()=>Lt(pv);function Ko(t,e){return pc(t,null,e)}function _r(t,e,r){return pc(t,e,r)}function pc(t,e,r=Fe){const{immediate:n,deep:s,flush:o,once:i}=r,a=nt({},r),l=e&&n||!e&&o!=="post";let c;if(Qs){if(o==="sync"){const p=gv();c=p.__watcherHandles||(p.__watcherHandles=[])}else if(!l){const p=()=>{};return p.stop=or,p.resume=or,p.pause=or,p}}const u=st;a.call=(p,g,v)=>Kt(p,u,g,v);let h=!1;o==="post"?a.scheduler=p=>{vt(p,u&&u.suspense)}:o!=="sync"&&(h=!0,a.scheduler=(p,g)=>{g?p():cc(p)}),a.augmentJob=p=>{e&&(p.flags|=4),h&&(p.flags|=2,u&&(p.id=u.uid,p.i=u))};const f=Nm(t,e,a);return Qs&&(c?c.push(f):l&&f()),f}function mv(t,e,r){const n=this.proxy,s=Ke(t)?t.includes(".")?$f(n,t):()=>n[t]:t.bind(n,n);let o;ke(e)?o=e:(o=e.handler,r=e);const i=fo(this),a=pc(s,o.bind(n),r);return i(),a}function $f(t,e){const r=e.split(".");return()=>{let n=t;for(let s=0;s<r.length&&n;s++)n=n[r[s]];return n}}const vv=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${jt(e)}Modifiers`]||t[`${Jr(e)}Modifiers`];function yv(t,e,...r){if(t.isUnmounted)return;const n=t.vnode.props||Fe;let s=r;const o=e.startsWith("update:"),i=o&&vv(n,e.slice(7));i&&(i.trim&&(s=r.map(u=>Ke(u)?u.trim():u)),i.number&&(s=r.map(ci)));let a,l=n[a=pa(e)]||n[a=pa(jt(e))];!l&&o&&(l=n[a=pa(Jr(e))]),l&&Kt(l,t,6,s);const c=n[a+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,Kt(c,t,6,s)}}function Nf(t,e,r=!1){const n=e.emitsCache,s=n.get(t);if(s!==void 0)return s;const o=t.emits;let i={},a=!1;if(!ke(t)){const l=c=>{const u=Nf(c,e,!0);u&&(a=!0,nt(i,u))};!r&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!o&&!a?(He(t)&&n.set(t,null),null):(ge(o)?o.forEach(l=>i[l]=null):nt(i,o),He(t)&&n.set(t,i),i)}function Vi(t,e){return!t||!Ni(e)?!1:(e=e.slice(2).replace(/Once$/,""),Me(t,e[0].toLowerCase()+e.slice(1))||Me(t,Jr(e))||Me(t,e))}function cu(t){const{type:e,vnode:r,proxy:n,withProxy:s,propsOptions:[o],slots:i,attrs:a,emit:l,render:c,renderCache:u,props:h,data:f,setupState:p,ctx:g,inheritAttrs:v}=t,_=fi(t);let T,k;try{if(r.shapeFlag&4){const C=s||n,$=C;T=sr(c.call($,C,u,h,p,f,g)),k=a}else{const C=e;T=sr(C.length>1?C(h,{attrs:a,slots:i,emit:l}):C(h,null)),k=e.props?a:bv(a)}}catch(C){js.length=0,Ui(C,t,1),T=V(wt)}let E=T;if(k&&v!==!1){const C=Object.keys(k),{shapeFlag:$}=E;C.length&&$&7&&(o&&C.some(Yl)&&(k=wv(k,o)),E=Er(E,k,!1,!0))}return r.dirs&&(E=Er(E,null,!1,!0),E.dirs=E.dirs?E.dirs.concat(r.dirs):r.dirs),r.transition&&In(E,r.transition),T=E,fi(_),T}const bv=t=>{let e;for(const r in t)(r==="class"||r==="style"||Ni(r))&&((e||(e={}))[r]=t[r]);return e},wv=(t,e)=>{const r={};for(const n in t)(!Yl(n)||!(n.slice(9)in e))&&(r[n]=t[n]);return r};function _v(t,e,r){const{props:n,children:s,component:o}=t,{props:i,children:a,patchFlag:l}=e,c=o.emitsOptions;if(e.dirs||e.transition)return!0;if(r&&l>=0){if(l&1024)return!0;if(l&16)return n?uu(n,i,c):!!i;if(l&8){const u=e.dynamicProps;for(let h=0;h<u.length;h++){const f=u[h];if(i[f]!==n[f]&&!Vi(c,f))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:n===i?!1:n?i?uu(n,i,c):!0:!!i;return!1}function uu(t,e,r){const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!0;for(let s=0;s<n.length;s++){const o=n[s];if(e[o]!==t[o]&&!Vi(r,o))return!0}return!1}function xv({vnode:t,parent:e},r){for(;e;){const n=e.subTree;if(n.suspense&&n.suspense.activeBranch===t&&(n.el=t.el),n===t)(t=e.vnode).el=r,e=e.parent;else break}}const Lf=t=>t.__isSuspense;function Ev(t,e){e&&e.pendingBranch?ge(t)?e.effects.push(...t):e.effects.push(t):jm(t)}const ve=Symbol.for("v-fgt"),qi=Symbol.for("v-txt"),wt=Symbol.for("v-cmt"),Go=Symbol.for("v-stc"),js=[];let It=null;function y(t=!1){js.push(It=t?null:[])}function kv(){js.pop(),It=js[js.length-1]||null}let Ys=1;function du(t,e=!1){Ys+=t,t<0&&It&&e&&(It.hasOnce=!0)}function Mf(t){return t.dynamicChildren=Ys>0?It||Gn:null,kv(),Ys>0&&It&&It.push(t),t}function x(t,e,r,n,s,o){return Mf(d(t,e,r,n,s,o,!0))}function Ie(t,e,r,n,s){return Mf(V(t,e,r,n,s,!0))}function Rn(t){return t?t.__v_isVNode===!0:!1}function mn(t,e){return t.type===e.type&&t.key===e.key}const jf=({key:t})=>t??null,Jo=({ref:t,ref_key:e,ref_for:r})=>(typeof t=="number"&&(t=""+t),t!=null?Ke(t)||Je(t)||ke(t)?{i:rt,r:t,k:e,f:!!r}:t:null);function d(t,e=null,r=null,n=0,s=null,o=t===ve?0:1,i=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&jf(e),ref:e&&Jo(e),scopeId:Qh,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:n,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:rt};return a?(gc(l,r),o&128&&t.normalize(l)):r&&(l.shapeFlag|=Ke(r)?8:16),Ys>0&&!i&&It&&(l.patchFlag>0||o&6)&&l.patchFlag!==32&&It.push(l),l}const V=Sv;function Sv(t,e=null,r=null,n=0,s=null,o=!1){if((!t||t===gf)&&(t=wt),Rn(t)){const a=Er(t,e,!0);return r&&gc(a,r),Ys>0&&!o&&It&&(a.shapeFlag&6?It[It.indexOf(t)]=a:It.push(a)),a.patchFlag=-2,a}if(Lv(t)&&(t=t.__vccOpts),e){e=Tv(e);let{class:a,style:l}=e;a&&!Ke(a)&&(e.class=Te(a)),He(l)&&(ac(l)&&!ge(l)&&(l=nt({},l)),e.style=Kr(l))}const i=Ke(t)?1:Lf(t)?128:ef(t)?64:He(t)?4:ke(t)?2:0;return d(t,e,r,n,s,i,o,!0)}function Tv(t){return t?ac(t)||Sf(t)?nt({},t):t:null}function Er(t,e,r=!1,n=!1){const{props:s,ref:o,patchFlag:i,children:a,transition:l}=t,c=e?cr(s||{},e):s,u={__v_isVNode:!0,__v_skip:!0,type:t.type,props:c,key:c&&jf(c),ref:e&&e.ref?r&&o?ge(o)?o.concat(Jo(e)):[o,Jo(e)]:Jo(e):o,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==ve?i===-1?16:i|16:i,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Er(t.ssContent),ssFallback:t.ssFallback&&Er(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&n&&In(u,l.clone(u)),u}function le(t=" ",e=0){return V(qi,null,t,e)}function ar(t,e){const r=V(Go,null,t);return r.staticCount=e,r}function z(t="",e=!1){return e?(y(),Ie(wt,null,t)):V(wt,null,t)}function sr(t){return t==null||typeof t=="boolean"?V(wt):ge(t)?V(ve,null,t.slice()):Rn(t)?jr(t):V(qi,null,String(t))}function jr(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Er(t)}function gc(t,e){let r=0;const{shapeFlag:n}=t;if(e==null)e=null;else if(ge(e))r=16;else if(typeof e=="object")if(n&65){const s=e.default;s&&(s._c&&(s._d=!1),gc(t,s()),s._c&&(s._d=!0));return}else{r=32;const s=e._;!s&&!Sf(e)?e._ctx=rt:s===3&&rt&&(rt.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else ke(e)?(e={default:e,_ctx:rt},r=32):(e=String(e),n&64?(r=16,e=[le(e)]):r=8);t.children=e,t.shapeFlag|=r}function cr(...t){const e={};for(let r=0;r<t.length;r++){const n=t[r];for(const s in n)if(s==="class")e.class!==n.class&&(e.class=Te([e.class,n.class]));else if(s==="style")e.style=Kr([e.style,n.style]);else if(Ni(s)){const o=e[s],i=n[s];i&&o!==i&&!(ge(o)&&o.includes(i))&&(e[s]=o?[].concat(o,i):i)}else s!==""&&(e[s]=n[s])}return e}function Zt(t,e,r,n=null){Kt(t,e,7,[r,n])}const Cv=xf();let Av=0;function Iv(t,e,r){const n=t.type,s=(e?e.appContext:t.appContext)||Cv,o={uid:Av++,vnode:t,type:n,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Ch(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Cf(n,s),emitsOptions:Nf(n,s),emit:null,emitted:null,propsDefaults:Fe,inheritAttrs:n.inheritAttrs,ctx:Fe,data:Fe,props:Fe,attrs:Fe,slots:Fe,refs:Fe,setupState:Fe,setupContext:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=e?e.root:o,o.emit=yv.bind(null,o),t.ce&&t.ce(o),o}let st=null;const Df=()=>st||rt;let mi,ol;{const t=ji(),e=(r,n)=>{let s;return(s=t[r])||(s=t[r]=[]),s.push(n),o=>{s.length>1?s.forEach(i=>i(o)):s[0](o)}};mi=e("__VUE_INSTANCE_SETTERS__",r=>st=r),ol=e("__VUE_SSR_SETTERS__",r=>Qs=r)}const fo=t=>{const e=st;return mi(t),t.scope.on(),()=>{t.scope.off(),mi(e)}},hu=()=>{st&&st.scope.off(),mi(null)};function Uf(t){return t.vnode.shapeFlag&4}let Qs=!1;function Rv(t,e=!1,r=!1){e&&ol(e);const{props:n,children:s}=t.vnode,o=Uf(t);sv(t,n,o,e),lv(t,s,r);const i=o?Ov(t,e):void 0;return e&&ol(!1),i}function Ov(t,e){const r=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,Jm);const{setup:n}=r;if(n){Xr();const s=t.setupContext=n.length>1?$v(t):null,o=fo(t),i=ho(n,t,0,[t.props,s]),a=wh(i);if(Yr(),o(),(a||t.sp)&&!Yn(t)&&cf(t),a){if(i.then(hu,hu),e)return i.then(l=>{fu(t,l)}).catch(l=>{Ui(l,t,0)});t.asyncDep=i}else fu(t,i)}else Bf(t)}function fu(t,e,r){ke(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:He(e)&&(t.setupState=Kh(e)),Bf(t)}function Bf(t,e,r){const n=t.type;t.render||(t.render=n.render||or);{const s=fo(t);Xr();try{Xm(t)}finally{Yr(),s()}}}const Pv={get(t,e){return dt(t,"get",""),t[e]}};function $v(t){const e=r=>{t.exposed=r||{}};return{attrs:new Proxy(t.attrs,Pv),slots:t.slots,emit:t.emit,expose:e}}function zi(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(Kh(lc(t.exposed)),{get(e,r){if(r in e)return e[r];if(r in Ms)return Ms[r](t)},has(e,r){return r in e||r in Ms}})):t.proxy}function Nv(t,e=!0){return ke(t)?t.displayName||t.name:t.name||e&&t.__name}function Lv(t){return ke(t)&&"__vccOpts"in t}const Ae=(t,e)=>Pm(t,e,Qs);function wn(t,e,r){const n=arguments.length;return n===2?He(e)&&!ge(e)?Rn(e)?V(t,null,[e]):V(t,e):V(t,null,e):(n>3?r=Array.prototype.slice.call(arguments,2):n===3&&Rn(r)&&(r=[r]),V(t,e,r))}const Mv="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let il;const pu=typeof window<"u"&&window.trustedTypes;if(pu)try{il=pu.createPolicy("vue",{createHTML:t=>t})}catch{}const Ff=il?t=>il.createHTML(t):t=>t,jv="http://www.w3.org/2000/svg",Dv="http://www.w3.org/1998/Math/MathML",fr=typeof document<"u"?document:null,gu=fr&&fr.createElement("template"),Uv={insert:(t,e,r)=>{e.insertBefore(t,r||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,r,n)=>{const s=e==="svg"?fr.createElementNS(jv,t):e==="mathml"?fr.createElementNS(Dv,t):r?fr.createElement(t,{is:r}):fr.createElement(t);return t==="select"&&n&&n.multiple!=null&&s.setAttribute("multiple",n.multiple),s},createText:t=>fr.createTextNode(t),createComment:t=>fr.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>fr.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,r,n,s,o){const i=r?r.previousSibling:e.lastChild;if(s&&(s===o||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),r),!(s===o||!(s=s.nextSibling)););else{gu.innerHTML=Ff(n==="svg"?`<svg>${t}</svg>`:n==="mathml"?`<math>${t}</math>`:t);const a=gu.content;if(n==="svg"||n==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,r)}return[i?i.nextSibling:e.firstChild,r?r.previousSibling:e.lastChild]}},Ir="transition",Es="animation",ss=Symbol("_vtc"),Hf={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Vf=nt({},sf,Hf),Bv=t=>(t.displayName="Transition",t.props=Vf,t),lt=Bv((t,{slots:e})=>wn(Bm,qf(t),e)),cn=(t,e=[])=>{ge(t)?t.forEach(r=>r(...e)):t&&t(...e)},mu=t=>t?ge(t)?t.some(e=>e.length>1):t.length>1:!1;function qf(t){const e={};for(const K in t)K in Hf||(e[K]=t[K]);if(t.css===!1)return e;const{name:r="v",type:n,duration:s,enterFromClass:o=`${r}-enter-from`,enterActiveClass:i=`${r}-enter-active`,enterToClass:a=`${r}-enter-to`,appearFromClass:l=o,appearActiveClass:c=i,appearToClass:u=a,leaveFromClass:h=`${r}-leave-from`,leaveActiveClass:f=`${r}-leave-active`,leaveToClass:p=`${r}-leave-to`}=t,g=Fv(s),v=g&&g[0],_=g&&g[1],{onBeforeEnter:T,onEnter:k,onEnterCancelled:E,onLeave:C,onLeaveCancelled:$,onBeforeAppear:R=T,onAppear:S=k,onAppearCancelled:O=E}=e,m=(K,ie,we,De)=>{K._enterCancelled=De,Pr(K,ie?u:a),Pr(K,ie?c:i),we&&we()},A=(K,ie)=>{K._isLeaving=!1,Pr(K,h),Pr(K,p),Pr(K,f),ie&&ie()},Q=K=>(ie,we)=>{const De=K?S:k,G=()=>m(ie,K,we);cn(De,[ie,G]),vu(()=>{Pr(ie,K?l:o),tr(ie,K?u:a),mu(De)||yu(ie,n,v,G)})};return nt(e,{onBeforeEnter(K){cn(T,[K]),tr(K,o),tr(K,i)},onBeforeAppear(K){cn(R,[K]),tr(K,l),tr(K,c)},onEnter:Q(!1),onAppear:Q(!0),onLeave(K,ie){K._isLeaving=!0;const we=()=>A(K,ie);tr(K,h),K._enterCancelled?(tr(K,f),al()):(al(),tr(K,f)),vu(()=>{K._isLeaving&&(Pr(K,h),tr(K,p),mu(C)||yu(K,n,_,we))}),cn(C,[K,we])},onEnterCancelled(K){m(K,!1,void 0,!0),cn(E,[K])},onAppearCancelled(K){m(K,!0,void 0,!0),cn(O,[K])},onLeaveCancelled(K){A(K),cn($,[K])}})}function Fv(t){if(t==null)return null;if(He(t))return[xa(t.enter),xa(t.leave)];{const e=xa(t);return[e,e]}}function xa(t){return Yg(t)}function tr(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.add(r)),(t[ss]||(t[ss]=new Set)).add(e)}function Pr(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.remove(n));const r=t[ss];r&&(r.delete(e),r.size||(t[ss]=void 0))}function vu(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let Hv=0;function yu(t,e,r,n){const s=t._endId=++Hv,o=()=>{s===t._endId&&n()};if(r!=null)return setTimeout(o,r);const{type:i,timeout:a,propCount:l}=zf(t,e);if(!i)return n();const c=i+"end";let u=0;const h=()=>{t.removeEventListener(c,f),o()},f=p=>{p.target===t&&++u>=l&&h()};setTimeout(()=>{u<l&&h()},a+1),t.addEventListener(c,f)}function zf(t,e){const r=window.getComputedStyle(t),n=g=>(r[g]||"").split(", "),s=n(`${Ir}Delay`),o=n(`${Ir}Duration`),i=bu(s,o),a=n(`${Es}Delay`),l=n(`${Es}Duration`),c=bu(a,l);let u=null,h=0,f=0;e===Ir?i>0&&(u=Ir,h=i,f=o.length):e===Es?c>0&&(u=Es,h=c,f=l.length):(h=Math.max(i,c),u=h>0?i>c?Ir:Es:null,f=u?u===Ir?o.length:l.length:0);const p=u===Ir&&/\b(transform|all)(,|$)/.test(n(`${Ir}Property`).toString());return{type:u,timeout:h,propCount:f,hasTransform:p}}function bu(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((r,n)=>wu(r)+wu(t[n])))}function wu(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function al(){return document.body.offsetHeight}function Vv(t,e,r){const n=t[ss];n&&(e=(e?[e,...n]:[...n]).join(" ")),e==null?t.removeAttribute("class"):r?t.setAttribute("class",e):t.className=e}const _u=Symbol("_vod"),qv=Symbol("_vsh"),zv=Symbol(""),Wv=/(^|;)\s*display\s*:/;function Kv(t,e,r){const n=t.style,s=Ke(r);let o=!1;if(r&&!s){if(e)if(Ke(e))for(const i of e.split(";")){const a=i.slice(0,i.indexOf(":")).trim();r[a]==null&&Xo(n,a,"")}else for(const i in e)r[i]==null&&Xo(n,i,"");for(const i in r)i==="display"&&(o=!0),Xo(n,i,r[i])}else if(s){if(e!==r){const i=n[zv];i&&(r+=";"+i),n.cssText=r,o=Wv.test(r)}}else e&&t.removeAttribute("style");_u in t&&(t[_u]=o?n.display:"",t[qv]&&(n.display="none"))}const xu=/\s*!important$/;function Xo(t,e,r){if(ge(r))r.forEach(n=>Xo(t,e,n));else if(r==null&&(r=""),e.startsWith("--"))t.setProperty(e,r);else{const n=Gv(t,e);xu.test(r)?t.setProperty(Jr(n),r.replace(xu,""),"important"):t[n]=r}}const Eu=["Webkit","Moz","ms"],Ea={};function Gv(t,e){const r=Ea[e];if(r)return r;let n=jt(e);if(n!=="filter"&&n in t)return Ea[e]=n;n=Mi(n);for(let s=0;s<Eu.length;s++){const o=Eu[s]+n;if(o in t)return Ea[e]=o}return e}const ku="http://www.w3.org/1999/xlink";function Su(t,e,r,n,s,o=nm(e)){n&&e.startsWith("xlink:")?r==null?t.removeAttributeNS(ku,e.slice(6,e.length)):t.setAttributeNS(ku,e,r):r==null||o&&!kh(r)?t.removeAttribute(e):t.setAttribute(e,o?"":Wt(r)?String(r):r)}function Tu(t,e,r,n,s){if(e==="innerHTML"||e==="textContent"){r!=null&&(t[e]=e==="innerHTML"?Ff(r):r);return}const o=t.tagName;if(e==="value"&&o!=="PROGRESS"&&!o.includes("-")){const a=o==="OPTION"?t.getAttribute("value")||"":t.value,l=r==null?t.type==="checkbox"?"on":"":String(r);(a!==l||!("_value"in t))&&(t.value=l),r==null&&t.removeAttribute(e),t._value=r;return}let i=!1;if(r===""||r==null){const a=typeof t[e];a==="boolean"?r=kh(r):r==null&&a==="string"?(r="",i=!0):a==="number"&&(r=0,i=!0)}try{t[e]=r}catch{}i&&t.removeAttribute(s||e)}function vr(t,e,r,n){t.addEventListener(e,r,n)}function Jv(t,e,r,n){t.removeEventListener(e,r,n)}const Cu=Symbol("_vei");function Xv(t,e,r,n,s=null){const o=t[Cu]||(t[Cu]={}),i=o[e];if(n&&i)i.value=n;else{const[a,l]=Yv(e);if(n){const c=o[e]=ey(n,s);vr(t,a,c,l)}else i&&(Jv(t,a,i,l),o[e]=void 0)}}const Au=/(?:Once|Passive|Capture)$/;function Yv(t){let e;if(Au.test(t)){e={};let n;for(;n=t.match(Au);)t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Jr(t.slice(2)),e]}let ka=0;const Qv=Promise.resolve(),Zv=()=>ka||(Qv.then(()=>ka=0),ka=Date.now());function ey(t,e){const r=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=r.attached)return;Kt(ty(n,r.value),e,5,[n])};return r.value=t,r.attached=Zv(),r}function ty(t,e){if(ge(e)){const r=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{r.call(t),t._stopped=!0},e.map(n=>s=>!s._stopped&&n&&n(s))}else return e}const Iu=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,ry=(t,e,r,n,s,o)=>{const i=s==="svg";e==="class"?Vv(t,n,i):e==="style"?Kv(t,r,n):Ni(e)?Yl(e)||Xv(t,e,r,n,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):ny(t,e,n,i))?(Tu(t,e,n),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Su(t,e,n,i,o,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!Ke(n))?Tu(t,jt(e),n,o,e):(e==="true-value"?t._trueValue=n:e==="false-value"&&(t._falseValue=n),Su(t,e,n,i))};function ny(t,e,r,n){if(n)return!!(e==="innerHTML"||e==="textContent"||e in t&&Iu(e)&&ke(r));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=t.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return Iu(e)&&Ke(r)?!1:e in t}const Wf=new WeakMap,Kf=new WeakMap,vi=Symbol("_moveCb"),Ru=Symbol("_enterCb"),sy=t=>(delete t.props.mode,t),oy=sy({name:"TransitionGroup",props:nt({},Vf,{tag:String,moveClass:String}),setup(t,{slots:e}){const r=Df(),n=nf();let s,o;return df(()=>{if(!s.length)return;const i=t.moveClass||`${t.name||"v"}-move`;if(!cy(s[0].el,r.vnode.el,i))return;s.forEach(iy),s.forEach(ay);const a=s.filter(ly);al(),a.forEach(l=>{const c=l.el,u=c.style;tr(c,i),u.transform=u.webkitTransform=u.transitionDuration="";const h=c[vi]=f=>{f&&f.target!==c||(!f||/transform$/.test(f.propertyName))&&(c.removeEventListener("transitionend",h),c[vi]=null,Pr(c,i))};c.addEventListener("transitionend",h)})}),()=>{const i=Ee(t),a=qf(i);let l=i.tag||ve;if(s=[],o)for(let c=0;c<o.length;c++){const u=o[c];u.el&&u.el instanceof Element&&(s.push(u),In(u,Xs(u,a,n,r)),Wf.set(u,u.el.getBoundingClientRect()))}o=e.default?dc(e.default()):[];for(let c=0;c<o.length;c++){const u=o[c];u.key!=null&&In(u,Xs(u,a,n,r))}return V(l,null,o)}}}),Gf=oy;function iy(t){const e=t.el;e[vi]&&e[vi](),e[Ru]&&e[Ru]()}function ay(t){Kf.set(t,t.el.getBoundingClientRect())}function ly(t){const e=Wf.get(t),r=Kf.get(t),n=e.left-r.left,s=e.top-r.top;if(n||s){const o=t.el.style;return o.transform=o.webkitTransform=`translate(${n}px,${s}px)`,o.transitionDuration="0s",t}}function cy(t,e,r){const n=t.cloneNode(),s=t[ss];s&&s.forEach(a=>{a.split(/\s+/).forEach(l=>l&&n.classList.remove(l))}),r.split(/\s+/).forEach(a=>a&&n.classList.add(a)),n.style.display="none";const o=e.nodeType===1?e:e.parentNode;o.appendChild(n);const{hasTransform:i}=zf(n);return o.removeChild(n),i}const Gr=t=>{const e=t.props["onUpdate:modelValue"]||!1;return ge(e)?r=>qo(e,r):e};function uy(t){t.target.composing=!0}function Ou(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Mt=Symbol("_assign"),Zs={created(t,{modifiers:{lazy:e,trim:r,number:n}},s){t[Mt]=Gr(s);const o=n||s.props&&s.props.type==="number";vr(t,e?"change":"input",i=>{if(i.target.composing)return;let a=t.value;r&&(a=a.trim()),o&&(a=ci(a)),t[Mt](a)}),r&&vr(t,"change",()=>{t.value=t.value.trim()}),e||(vr(t,"compositionstart",uy),vr(t,"compositionend",Ou),vr(t,"change",Ou))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:r,modifiers:{lazy:n,trim:s,number:o}},i){if(t[Mt]=Gr(i),t.composing)return;const a=(o||t.type==="number")&&!/^0\d/.test(t.value)?ci(t.value):t.value,l=e??"";a!==l&&(document.activeElement===t&&t.type!=="range"&&(n&&e===r||s&&t.value.trim()===l)||(t.value=l))}},dy={deep:!0,created(t,e,r){t[Mt]=Gr(r),vr(t,"change",()=>{const n=t._modelValue,s=os(t),o=t.checked,i=t[Mt];if(ge(n)){const a=ec(n,s),l=a!==-1;if(o&&!l)i(n.concat(s));else if(!o&&l){const c=[...n];c.splice(a,1),i(c)}}else if(ps(n)){const a=new Set(n);o?a.add(s):a.delete(s),i(a)}else i(Jf(t,o))})},mounted:Pu,beforeUpdate(t,e,r){t[Mt]=Gr(r),Pu(t,e,r)}};function Pu(t,{value:e,oldValue:r},n){t._modelValue=e;let s;if(ge(e))s=ec(e,n.props.value)>-1;else if(ps(e))s=e.has(n.props.value);else{if(e===r)return;s=Cn(e,Jf(t,!0))}t.checked!==s&&(t.checked=s)}const hy={created(t,{value:e},r){t.checked=Cn(e,r.props.value),t[Mt]=Gr(r),vr(t,"change",()=>{t[Mt](os(t))})},beforeUpdate(t,{value:e,oldValue:r},n){t[Mt]=Gr(n),e!==r&&(t.checked=Cn(e,n.props.value))}},fy={deep:!0,created(t,{value:e,modifiers:{number:r}},n){const s=ps(e);vr(t,"change",()=>{const o=Array.prototype.filter.call(t.options,i=>i.selected).map(i=>r?ci(os(i)):os(i));t[Mt](t.multiple?s?new Set(o):o:o[0]),t._assigning=!0,Qr(()=>{t._assigning=!1})}),t[Mt]=Gr(n)},mounted(t,{value:e}){$u(t,e)},beforeUpdate(t,e,r){t[Mt]=Gr(r)},updated(t,{value:e}){t._assigning||$u(t,e)}};function $u(t,e){const r=t.multiple,n=ge(e);if(!(r&&!n&&!ps(e))){for(let s=0,o=t.options.length;s<o;s++){const i=t.options[s],a=os(i);if(r)if(n){const l=typeof a;l==="string"||l==="number"?i.selected=e.some(c=>String(c)===String(a)):i.selected=ec(e,a)>-1}else i.selected=e.has(a);else if(Cn(os(i),e)){t.selectedIndex!==s&&(t.selectedIndex=s);return}}!r&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function os(t){return"_value"in t?t._value:t.value}function Jf(t,e){const r=e?"_trueValue":"_falseValue";return r in t?t[r]:e}const m5={created(t,e,r){Po(t,e,r,null,"created")},mounted(t,e,r){Po(t,e,r,null,"mounted")},beforeUpdate(t,e,r,n){Po(t,e,r,n,"beforeUpdate")},updated(t,e,r,n){Po(t,e,r,n,"updated")}};function py(t,e){switch(t){case"SELECT":return fy;case"TEXTAREA":return Zs;default:switch(e){case"checkbox":return dy;case"radio":return hy;default:return Zs}}}function Po(t,e,r,n,s){const i=py(t.tagName,r.props&&r.props.type)[s];i&&i(t,e,r,n)}const gy=["ctrl","shift","alt","meta"],my={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>gy.some(r=>t[`${r}Key`]&&!e.includes(r))},Rt=(t,e)=>{const r=t._withMods||(t._withMods={}),n=e.join(".");return r[n]||(r[n]=(s,...o)=>{for(let i=0;i<e.length;i++){const a=my[e[i]];if(a&&a(s,e))return}return t(s,...o)})},vy={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Kn=(t,e)=>{const r=t._withKeys||(t._withKeys={}),n=e.join(".");return r[n]||(r[n]=s=>{if(!("key"in s))return;const o=Jr(s.key);if(e.some(i=>i===o||vy[i]===o))return t(s)})},yy=nt({patchProp:ry},Uv);let Nu;function by(){return Nu||(Nu=uv(yy))}const Xf=(...t)=>{const e=by().createApp(...t),{mount:r}=e;return e.mount=n=>{const s=_y(n);if(!s)return;const o=e._component;!ke(o)&&!o.render&&!o.template&&(o.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const i=r(s,!1,wy(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),i},e};function wy(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function _y(t){return Ke(t)?document.querySelector(t):t}/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const qn=typeof document<"u";function Yf(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function xy(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&Yf(t.default)}const Ne=Object.assign;function Sa(t,e){const r={};for(const n in e){const s=e[n];r[n]=Gt(s)?s.map(t):t(s)}return r}const Ds=()=>{},Gt=Array.isArray,Qf=/#/g,Ey=/&/g,ky=/\//g,Sy=/=/g,Ty=/\?/g,Zf=/\+/g,Cy=/%5B/g,Ay=/%5D/g,ep=/%5E/g,Iy=/%60/g,tp=/%7B/g,Ry=/%7C/g,rp=/%7D/g,Oy=/%20/g;function mc(t){return encodeURI(""+t).replace(Ry,"|").replace(Cy,"[").replace(Ay,"]")}function Py(t){return mc(t).replace(tp,"{").replace(rp,"}").replace(ep,"^")}function ll(t){return mc(t).replace(Zf,"%2B").replace(Oy,"+").replace(Qf,"%23").replace(Ey,"%26").replace(Iy,"`").replace(tp,"{").replace(rp,"}").replace(ep,"^")}function $y(t){return ll(t).replace(Sy,"%3D")}function Ny(t){return mc(t).replace(Qf,"%23").replace(Ty,"%3F")}function Ly(t){return t==null?"":Ny(t).replace(ky,"%2F")}function eo(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const My=/\/$/,jy=t=>t.replace(My,"");function Ta(t,e,r="/"){let n,s={},o="",i="";const a=e.indexOf("#");let l=e.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(n=e.slice(0,l),o=e.slice(l+1,a>-1?a:e.length),s=t(o)),a>-1&&(n=n||e.slice(0,a),i=e.slice(a,e.length)),n=Fy(n??e,r),{fullPath:n+(o&&"?")+o+i,path:n,query:s,hash:eo(i)}}function Dy(t,e){const r=e.query?t(e.query):"";return e.path+(r&&"?")+r+(e.hash||"")}function Lu(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function Uy(t,e,r){const n=e.matched.length-1,s=r.matched.length-1;return n>-1&&n===s&&is(e.matched[n],r.matched[s])&&np(e.params,r.params)&&t(e.query)===t(r.query)&&e.hash===r.hash}function is(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function np(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const r in t)if(!By(t[r],e[r]))return!1;return!0}function By(t,e){return Gt(t)?Mu(t,e):Gt(e)?Mu(e,t):t===e}function Mu(t,e){return Gt(e)?t.length===e.length&&t.every((r,n)=>r===e[n]):t.length===1&&t[0]===e}function Fy(t,e){if(t.startsWith("/"))return t;if(!t)return e;const r=e.split("/"),n=t.split("/"),s=n[n.length-1];(s===".."||s===".")&&n.push("");let o=r.length-1,i,a;for(i=0;i<n.length;i++)if(a=n[i],a!==".")if(a==="..")o>1&&o--;else break;return r.slice(0,o).join("/")+"/"+n.slice(i).join("/")}const dr={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var to;(function(t){t.pop="pop",t.push="push"})(to||(to={}));var Us;(function(t){t.back="back",t.forward="forward",t.unknown=""})(Us||(Us={}));function Hy(t){if(!t)if(qn){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),jy(t)}const Vy=/^[^#]+#/;function qy(t,e){return t.replace(Vy,"#")+e}function zy(t,e){const r=document.documentElement.getBoundingClientRect(),n=t.getBoundingClientRect();return{behavior:e.behavior,left:n.left-r.left-(e.left||0),top:n.top-r.top-(e.top||0)}}const Wi=()=>({left:window.scrollX,top:window.scrollY});function Wy(t){let e;if("el"in t){const r=t.el,n=typeof r=="string"&&r.startsWith("#"),s=typeof r=="string"?n?document.getElementById(r.slice(1)):document.querySelector(r):r;if(!s)return;e=zy(s,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function ju(t,e){return(history.state?history.state.position-e:-1)+t}const cl=new Map;function Ky(t,e){cl.set(t,e)}function Gy(t){const e=cl.get(t);return cl.delete(t),e}let Jy=()=>location.protocol+"//"+location.host;function sp(t,e){const{pathname:r,search:n,hash:s}=e,o=t.indexOf("#");if(o>-1){let a=s.includes(t.slice(o))?t.slice(o).length:1,l=s.slice(a);return l[0]!=="/"&&(l="/"+l),Lu(l,"")}return Lu(r,t)+n+s}function Xy(t,e,r,n){let s=[],o=[],i=null;const a=({state:f})=>{const p=sp(t,location),g=r.value,v=e.value;let _=0;if(f){if(r.value=p,e.value=f,i&&i===g){i=null;return}_=v?f.position-v.position:0}else n(p);s.forEach(T=>{T(r.value,g,{delta:_,type:to.pop,direction:_?_>0?Us.forward:Us.back:Us.unknown})})};function l(){i=r.value}function c(f){s.push(f);const p=()=>{const g=s.indexOf(f);g>-1&&s.splice(g,1)};return o.push(p),p}function u(){const{history:f}=window;f.state&&f.replaceState(Ne({},f.state,{scroll:Wi()}),"")}function h(){for(const f of o)f();o=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:l,listen:c,destroy:h}}function Du(t,e,r,n=!1,s=!1){return{back:t,current:e,forward:r,replaced:n,position:window.history.length,scroll:s?Wi():null}}function Yy(t){const{history:e,location:r}=window,n={value:sp(t,r)},s={value:e.state};s.value||o(n.value,{back:null,current:n.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function o(l,c,u){const h=t.indexOf("#"),f=h>-1?(r.host&&document.querySelector("base")?t:t.slice(h))+l:Jy()+t+l;try{e[u?"replaceState":"pushState"](c,"",f),s.value=c}catch(p){console.error(p),r[u?"replace":"assign"](f)}}function i(l,c){const u=Ne({},e.state,Du(s.value.back,l,s.value.forward,!0),c,{position:s.value.position});o(l,u,!0),n.value=l}function a(l,c){const u=Ne({},s.value,e.state,{forward:l,scroll:Wi()});o(u.current,u,!0);const h=Ne({},Du(n.value,l,null),{position:u.position+1},c);o(l,h,!1),n.value=l}return{location:n,state:s,push:a,replace:i}}function op(t){t=Hy(t);const e=Yy(t),r=Xy(t,e.state,e.location,e.replace);function n(o,i=!0){i||r.pauseListeners(),history.go(o)}const s=Ne({location:"",base:t,go:n,createHref:qy.bind(null,t)},e,r);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}function Qy(t){return typeof t=="string"||t&&typeof t=="object"}function ip(t){return typeof t=="string"||typeof t=="symbol"}const ap=Symbol("");var ul;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(ul||(ul={}));function as(t,e){return Ne(new Error,{type:t,[ap]:!0},e)}function rr(t,e){return t instanceof Error&&ap in t&&(e==null||!!(t.type&e))}const Uu="[^/]+?",Zy={sensitive:!1,strict:!1,start:!0,end:!0},e1=/[.+*?^${}()[\]/\\]/g;function t1(t,e){const r=Ne({},Zy,e),n=[];let s=r.start?"^":"";const o=[];for(const c of t){const u=c.length?[]:[90];r.strict&&!c.length&&(s+="/");for(let h=0;h<c.length;h++){const f=c[h];let p=40+(r.sensitive?.25:0);if(f.type===0)h||(s+="/"),s+=f.value.replace(e1,"\\$&"),p+=40;else if(f.type===1){const{value:g,repeatable:v,optional:_,regexp:T}=f;o.push({name:g,repeatable:v,optional:_});const k=T||Uu;if(k!==Uu){p+=10;try{new RegExp(`(${k})`)}catch(C){throw new Error(`Invalid custom RegExp for param "${g}" (${k}): `+C.message)}}let E=v?`((?:${k})(?:/(?:${k}))*)`:`(${k})`;h||(E=_&&c.length<2?`(?:/${E})`:"/"+E),_&&(E+="?"),s+=E,p+=20,_&&(p+=-8),v&&(p+=-20),k===".*"&&(p+=-50)}u.push(p)}n.push(u)}if(r.strict&&r.end){const c=n.length-1;n[c][n[c].length-1]+=.7000000000000001}r.strict||(s+="/?"),r.end?s+="$":r.strict&&!s.endsWith("/")&&(s+="(?:/|$)");const i=new RegExp(s,r.sensitive?"":"i");function a(c){const u=c.match(i),h={};if(!u)return null;for(let f=1;f<u.length;f++){const p=u[f]||"",g=o[f-1];h[g.name]=p&&g.repeatable?p.split("/"):p}return h}function l(c){let u="",h=!1;for(const f of t){(!h||!u.endsWith("/"))&&(u+="/"),h=!1;for(const p of f)if(p.type===0)u+=p.value;else if(p.type===1){const{value:g,repeatable:v,optional:_}=p,T=g in c?c[g]:"";if(Gt(T)&&!v)throw new Error(`Provided param "${g}" is an array but it is not repeatable (* or + modifiers)`);const k=Gt(T)?T.join("/"):T;if(!k)if(_)f.length<2&&(u.endsWith("/")?u=u.slice(0,-1):h=!0);else throw new Error(`Missing required param "${g}"`);u+=k}}return u||"/"}return{re:i,score:n,keys:o,parse:a,stringify:l}}function r1(t,e){let r=0;for(;r<t.length&&r<e.length;){const n=e[r]-t[r];if(n)return n;r++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function lp(t,e){let r=0;const n=t.score,s=e.score;for(;r<n.length&&r<s.length;){const o=r1(n[r],s[r]);if(o)return o;r++}if(Math.abs(s.length-n.length)===1){if(Bu(n))return 1;if(Bu(s))return-1}return s.length-n.length}function Bu(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const n1={type:0,value:""},s1=/[a-zA-Z0-9_]/;function o1(t){if(!t)return[[]];if(t==="/")return[[n1]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(p){throw new Error(`ERR (${r})/"${c}": ${p}`)}let r=0,n=r;const s=[];let o;function i(){o&&s.push(o),o=[]}let a=0,l,c="",u="";function h(){c&&(r===0?o.push({type:0,value:c}):r===1||r===2||r===3?(o.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),o.push({type:1,value:c,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),c="")}function f(){c+=l}for(;a<t.length;){if(l=t[a++],l==="\\"&&r!==2){n=r,r=4;continue}switch(r){case 0:l==="/"?(c&&h(),i()):l===":"?(h(),r=1):f();break;case 4:f(),r=n;break;case 1:l==="("?r=2:s1.test(l)?f():(h(),r=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:r=3:u+=l;break;case 3:h(),r=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,u="";break;default:e("Unknown state");break}}return r===2&&e(`Unfinished custom RegExp for param "${c}"`),h(),i(),s}function i1(t,e,r){const n=t1(o1(t.path),r),s=Ne(n,{record:t,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function cp(t,e){const r=[],n=new Map;e=qu({strict:!1,end:!0,sensitive:!1},e);function s(h){return n.get(h)}function o(h,f,p){const g=!p,v=Hu(h);v.aliasOf=p&&p.record;const _=qu(e,h),T=[v];if("alias"in h){const C=typeof h.alias=="string"?[h.alias]:h.alias;for(const $ of C)T.push(Hu(Ne({},v,{components:p?p.record.components:v.components,path:$,aliasOf:p?p.record:v})))}let k,E;for(const C of T){const{path:$}=C;if(f&&$[0]!=="/"){const R=f.record.path,S=R[R.length-1]==="/"?"":"/";C.path=f.record.path+($&&S+$)}if(k=i1(C,f,_),p?p.alias.push(k):(E=E||k,E!==k&&E.alias.push(k),g&&h.name&&!Vu(k)&&i(h.name)),up(k)&&l(k),v.children){const R=v.children;for(let S=0;S<R.length;S++)o(R[S],k,p&&p.children[S])}p=p||k}return E?()=>{i(E)}:Ds}function i(h){if(ip(h)){const f=n.get(h);f&&(n.delete(h),r.splice(r.indexOf(f),1),f.children.forEach(i),f.alias.forEach(i))}else{const f=r.indexOf(h);f>-1&&(r.splice(f,1),h.record.name&&n.delete(h.record.name),h.children.forEach(i),h.alias.forEach(i))}}function a(){return r}function l(h){const f=c1(h,r);r.splice(f,0,h),h.record.name&&!Vu(h)&&n.set(h.record.name,h)}function c(h,f){let p,g={},v,_;if("name"in h&&h.name){if(p=n.get(h.name),!p)throw as(1,{location:h});_=p.record.name,g=Ne(Fu(f.params,p.keys.filter(E=>!E.optional).concat(p.parent?p.parent.keys.filter(E=>E.optional):[]).map(E=>E.name)),h.params&&Fu(h.params,p.keys.map(E=>E.name))),v=p.stringify(g)}else if(h.path!=null)v=h.path,p=r.find(E=>E.re.test(v)),p&&(g=p.parse(v),_=p.record.name);else{if(p=f.name?n.get(f.name):r.find(E=>E.re.test(f.path)),!p)throw as(1,{location:h,currentLocation:f});_=p.record.name,g=Ne({},f.params,h.params),v=p.stringify(g)}const T=[];let k=p;for(;k;)T.unshift(k.record),k=k.parent;return{name:_,path:v,params:g,matched:T,meta:l1(T)}}t.forEach(h=>o(h));function u(){r.length=0,n.clear()}return{addRoute:o,resolve:c,removeRoute:i,clearRoutes:u,getRoutes:a,getRecordMatcher:s}}function Fu(t,e){const r={};for(const n of e)n in t&&(r[n]=t[n]);return r}function Hu(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:a1(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function a1(t){const e={},r=t.props||!1;if("component"in t)e.default=r;else for(const n in t.components)e[n]=typeof r=="object"?r[n]:r;return e}function Vu(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function l1(t){return t.reduce((e,r)=>Ne(e,r.meta),{})}function qu(t,e){const r={};for(const n in t)r[n]=n in e?e[n]:t[n];return r}function c1(t,e){let r=0,n=e.length;for(;r!==n;){const o=r+n>>1;lp(t,e[o])<0?n=o:r=o+1}const s=u1(t);return s&&(n=e.lastIndexOf(s,n-1)),n}function u1(t){let e=t;for(;e=e.parent;)if(up(e)&&lp(t,e)===0)return e}function up({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function dp(t){const e={};if(t===""||t==="?")return e;const n=(t[0]==="?"?t.slice(1):t).split("&");for(let s=0;s<n.length;++s){const o=n[s].replace(Zf," "),i=o.indexOf("="),a=eo(i<0?o:o.slice(0,i)),l=i<0?null:eo(o.slice(i+1));if(a in e){let c=e[a];Gt(c)||(c=e[a]=[c]),c.push(l)}else e[a]=l}return e}function dl(t){let e="";for(let r in t){const n=t[r];if(r=$y(r),n==null){n!==void 0&&(e+=(e.length?"&":"")+r);continue}(Gt(n)?n.map(o=>o&&ll(o)):[n&&ll(n)]).forEach(o=>{o!==void 0&&(e+=(e.length?"&":"")+r,o!=null&&(e+="="+o))})}return e}function d1(t){const e={};for(const r in t){const n=t[r];n!==void 0&&(e[r]=Gt(n)?n.map(s=>s==null?null:""+s):n==null?n:""+n)}return e}const hp=Symbol(""),hl=Symbol(""),po=Symbol(""),Ki=Symbol(""),yi=Symbol("");function ks(){let t=[];function e(n){return t.push(n),()=>{const s=t.indexOf(n);s>-1&&t.splice(s,1)}}function r(){t=[]}return{add:e,list:()=>t.slice(),reset:r}}function Dr(t,e,r,n,s,o=i=>i()){const i=n&&(n.enterCallbacks[s]=n.enterCallbacks[s]||[]);return()=>new Promise((a,l)=>{const c=f=>{f===!1?l(as(4,{from:r,to:e})):f instanceof Error?l(f):Qy(f)?l(as(2,{from:e,to:f})):(i&&n.enterCallbacks[s]===i&&typeof f=="function"&&i.push(f),a())},u=o(()=>t.call(n&&n.instances[s],e,r,c));let h=Promise.resolve(u);t.length<3&&(h=h.then(c)),h.catch(f=>l(f))})}function Ca(t,e,r,n,s=o=>o()){const o=[];for(const i of t)for(const a in i.components){let l=i.components[a];if(!(e!=="beforeRouteEnter"&&!i.instances[a]))if(Yf(l)){const u=(l.__vccOpts||l)[e];u&&o.push(Dr(u,r,n,i,a,s))}else{let c=l();o.push(()=>c.then(u=>{if(!u)throw new Error(`Couldn't resolve component "${a}" at "${i.path}"`);const h=xy(u)?u.default:u;i.mods[a]=u,i.components[a]=h;const p=(h.__vccOpts||h)[e];return p&&Dr(p,r,n,i,a,s)()}))}}return o}function fl(t){const e=Lt(po),r=Lt(Ki),n=Ae(()=>{const l=Le(t.to);return e.resolve(l)}),s=Ae(()=>{const{matched:l}=n.value,{length:c}=l,u=l[c-1],h=r.matched;if(!u||!h.length)return-1;const f=h.findIndex(is.bind(null,u));if(f>-1)return f;const p=zu(l[c-2]);return c>1&&zu(u)===p&&h[h.length-1].path!==p?h.findIndex(is.bind(null,l[c-2])):f}),o=Ae(()=>s.value>-1&&g1(r.params,n.value.params)),i=Ae(()=>s.value>-1&&s.value===r.matched.length-1&&np(r.params,n.value.params));function a(l={}){if(p1(l)){const c=e[Le(t.replace)?"replace":"push"](Le(t.to)).catch(Ds);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>c),c}return Promise.resolve()}return{route:n,href:Ae(()=>n.value.href),isActive:o,isExactActive:i,navigate:a}}function h1(t){return t.length===1?t[0]:t}const f1=ms({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:fl,setup(t,{slots:e}){const r=Ut(fl(t)),{options:n}=Lt(po),s=Ae(()=>({[Wu(t.activeClass,n.linkActiveClass,"router-link-active")]:r.isActive,[Wu(t.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:r.isExactActive}));return()=>{const o=e.default&&h1(e.default(r));return t.custom?o:wn("a",{"aria-current":r.isExactActive?t.ariaCurrentValue:null,href:r.href,onClick:r.navigate,class:s.value},o)}}}),fp=f1;function p1(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function g1(t,e){for(const r in e){const n=e[r],s=t[r];if(typeof n=="string"){if(n!==s)return!1}else if(!Gt(s)||s.length!==n.length||n.some((o,i)=>o!==s[i]))return!1}return!0}function zu(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const Wu=(t,e,r)=>t??e??r,m1=ms({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:r}){const n=Lt(yi),s=Ae(()=>t.route||n.value),o=Lt(hl,0),i=Ae(()=>{let c=Le(o);const{matched:u}=s.value;let h;for(;(h=u[c])&&!h.components;)c++;return c}),a=Ae(()=>s.value.matched[i.value]);Wo(hl,Ae(()=>i.value+1)),Wo(hp,a),Wo(yi,s);const l=q();return _r(()=>[l.value,a.value,t.name],([c,u,h],[f,p,g])=>{u&&(u.instances[h]=c,p&&p!==u&&c&&c===f&&(u.leaveGuards.size||(u.leaveGuards=p.leaveGuards),u.updateGuards.size||(u.updateGuards=p.updateGuards))),c&&u&&(!p||!is(u,p)||!f)&&(u.enterCallbacks[h]||[]).forEach(v=>v(c))},{flush:"post"}),()=>{const c=s.value,u=t.name,h=a.value,f=h&&h.components[u];if(!f)return Ku(r.default,{Component:f,route:c});const p=h.props[u],g=p?p===!0?c.params:typeof p=="function"?p(c):p:null,_=wn(f,Ne({},g,e,{onVnodeUnmounted:T=>{T.component.isUnmounted&&(h.instances[u]=null)},ref:l}));return Ku(r.default,{Component:_,route:c})||_}}});function Ku(t,e){if(!t)return null;const r=t(e);return r.length===1?r[0]:r}const pp=m1;function gp(t){const e=cp(t.routes,t),r=t.parseQuery||dp,n=t.stringifyQuery||dl,s=t.history,o=ks(),i=ks(),a=ks(),l=Sm(dr);let c=dr;qn&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=Sa.bind(null,M=>""+M),h=Sa.bind(null,Ly),f=Sa.bind(null,eo);function p(M,te){let Z,se;return ip(M)?(Z=e.getRecordMatcher(M),se=te):se=M,e.addRoute(se,Z)}function g(M){const te=e.getRecordMatcher(M);te&&e.removeRoute(te)}function v(){return e.getRoutes().map(M=>M.record)}function _(M){return!!e.getRecordMatcher(M)}function T(M,te){if(te=Ne({},te||l.value),typeof M=="string"){const I=Ta(r,M,te.path),D=e.resolve({path:I.path},te),H=s.createHref(I.fullPath);return Ne(I,D,{params:f(D.params),hash:eo(I.hash),redirectedFrom:void 0,href:H})}let Z;if(M.path!=null)Z=Ne({},M,{path:Ta(r,M.path,te.path).path});else{const I=Ne({},M.params);for(const D in I)I[D]==null&&delete I[D];Z=Ne({},M,{params:h(I)}),te.params=h(te.params)}const se=e.resolve(Z,te),ne=M.hash||"";se.params=u(f(se.params));const b=Dy(n,Ne({},M,{hash:Py(ne),path:se.path})),w=s.createHref(b);return Ne({fullPath:b,hash:ne,query:n===dl?d1(M.query):M.query||{}},se,{redirectedFrom:void 0,href:w})}function k(M){return typeof M=="string"?Ta(r,M,l.value.path):Ne({},M)}function E(M,te){if(c!==M)return as(8,{from:te,to:M})}function C(M){return S(M)}function $(M){return C(Ne(k(M),{replace:!0}))}function R(M){const te=M.matched[M.matched.length-1];if(te&&te.redirect){const{redirect:Z}=te;let se=typeof Z=="function"?Z(M):Z;return typeof se=="string"&&(se=se.includes("?")||se.includes("#")?se=k(se):{path:se},se.params={}),Ne({query:M.query,hash:M.hash,params:se.path!=null?{}:M.params},se)}}function S(M,te){const Z=c=T(M),se=l.value,ne=M.state,b=M.force,w=M.replace===!0,I=R(Z);if(I)return S(Ne(k(I),{state:typeof I=="object"?Ne({},ne,I.state):ne,force:b,replace:w}),te||Z);const D=Z;D.redirectedFrom=te;let H;return!b&&Uy(n,se,Z)&&(H=as(16,{to:D,from:se}),P(se,se,!0,!1)),(H?Promise.resolve(H):A(D,se)).catch(U=>rr(U)?rr(U,2)?U:re(U):de(U,D,se)).then(U=>{if(U){if(rr(U,2))return S(Ne({replace:w},k(U.to),{state:typeof U.to=="object"?Ne({},ne,U.to.state):ne,force:b}),te||D)}else U=K(D,se,!0,w,ne);return Q(D,se,U),U})}function O(M,te){const Z=E(M,te);return Z?Promise.reject(Z):Promise.resolve()}function m(M){const te=ye.values().next().value;return te&&typeof te.runWithContext=="function"?te.runWithContext(M):M()}function A(M,te){let Z;const[se,ne,b]=v1(M,te);Z=Ca(se.reverse(),"beforeRouteLeave",M,te);for(const I of se)I.leaveGuards.forEach(D=>{Z.push(Dr(D,M,te))});const w=O.bind(null,M,te);return Z.push(w),Ue(Z).then(()=>{Z=[];for(const I of o.list())Z.push(Dr(I,M,te));return Z.push(w),Ue(Z)}).then(()=>{Z=Ca(ne,"beforeRouteUpdate",M,te);for(const I of ne)I.updateGuards.forEach(D=>{Z.push(Dr(D,M,te))});return Z.push(w),Ue(Z)}).then(()=>{Z=[];for(const I of b)if(I.beforeEnter)if(Gt(I.beforeEnter))for(const D of I.beforeEnter)Z.push(Dr(D,M,te));else Z.push(Dr(I.beforeEnter,M,te));return Z.push(w),Ue(Z)}).then(()=>(M.matched.forEach(I=>I.enterCallbacks={}),Z=Ca(b,"beforeRouteEnter",M,te,m),Z.push(w),Ue(Z))).then(()=>{Z=[];for(const I of i.list())Z.push(Dr(I,M,te));return Z.push(w),Ue(Z)}).catch(I=>rr(I,8)?I:Promise.reject(I))}function Q(M,te,Z){a.list().forEach(se=>m(()=>se(M,te,Z)))}function K(M,te,Z,se,ne){const b=E(M,te);if(b)return b;const w=te===dr,I=qn?history.state:{};Z&&(se||w?s.replace(M.fullPath,Ne({scroll:w&&I&&I.scroll},ne)):s.push(M.fullPath,ne)),l.value=M,P(M,te,Z,w),re()}let ie;function we(){ie||(ie=s.listen((M,te,Z)=>{if(!ze.listening)return;const se=T(M),ne=R(se);if(ne){S(Ne(ne,{replace:!0,force:!0}),se).catch(Ds);return}c=se;const b=l.value;qn&&Ky(ju(b.fullPath,Z.delta),Wi()),A(se,b).catch(w=>rr(w,12)?w:rr(w,2)?(S(Ne(k(w.to),{force:!0}),se).then(I=>{rr(I,20)&&!Z.delta&&Z.type===to.pop&&s.go(-1,!1)}).catch(Ds),Promise.reject()):(Z.delta&&s.go(-Z.delta,!1),de(w,se,b))).then(w=>{w=w||K(se,b,!1),w&&(Z.delta&&!rr(w,8)?s.go(-Z.delta,!1):Z.type===to.pop&&rr(w,20)&&s.go(-1,!1)),Q(se,b,w)}).catch(Ds)}))}let De=ks(),G=ks(),N;function de(M,te,Z){re(M);const se=G.list();return se.length?se.forEach(ne=>ne(M,te,Z)):console.error(M),Promise.reject(M)}function ue(){return N&&l.value!==dr?Promise.resolve():new Promise((M,te)=>{De.add([M,te])})}function re(M){return N||(N=!M,we(),De.list().forEach(([te,Z])=>M?Z(M):te()),De.reset()),M}function P(M,te,Z,se){const{scrollBehavior:ne}=t;if(!qn||!ne)return Promise.resolve();const b=!Z&&Gy(ju(M.fullPath,0))||(se||!Z)&&history.state&&history.state.scroll||null;return Qr().then(()=>ne(M,te,b)).then(w=>w&&Wy(w)).catch(w=>de(w,M,te))}const ae=M=>s.go(M);let F;const ye=new Set,ze={currentRoute:l,listening:!0,addRoute:p,removeRoute:g,clearRoutes:e.clearRoutes,hasRoute:_,getRoutes:v,resolve:T,options:t,push:C,replace:$,go:ae,back:()=>ae(-1),forward:()=>ae(1),beforeEach:o.add,beforeResolve:i.add,afterEach:a.add,onError:G.add,isReady:ue,install(M){const te=this;M.component("RouterLink",fp),M.component("RouterView",pp),M.config.globalProperties.$router=te,Object.defineProperty(M.config.globalProperties,"$route",{enumerable:!0,get:()=>Le(l)}),qn&&!F&&l.value===dr&&(F=!0,C(s.location).catch(ne=>{}));const Z={};for(const ne in dr)Object.defineProperty(Z,ne,{get:()=>l.value[ne],enumerable:!0});M.provide(po,te),M.provide(Ki,qh(Z)),M.provide(yi,l);const se=M.unmount;ye.add(M),M.unmount=function(){ye.delete(M),ye.size<1&&(c=dr,ie&&ie(),ie=null,l.value=dr,F=!1,N=!1),se()}}};function Ue(M){return M.reduce((te,Z)=>te.then(()=>m(Z)),Promise.resolve())}return ze}function v1(t,e){const r=[],n=[],s=[],o=Math.max(e.matched.length,t.matched.length);for(let i=0;i<o;i++){const a=e.matched[i];a&&(t.matched.find(c=>is(c,a))?n.push(a):r.push(a));const l=t.matched[i];l&&(e.matched.find(c=>is(c,l))||s.push(l))}return[r,n,s]}function Zr(){return Lt(po)}function Gi(t){return Lt(Ki)}const y1=Object.freeze(Object.defineProperty({__proto__:null,get NavigationFailureType(){return ul},RouterLink:fp,RouterView:pp,START_LOCATION:dr,createRouter:gp,createRouterMatcher:cp,createWebHistory:op,isNavigationFailure:rr,matchedRouteKey:hp,parseQuery:dp,routeLocationKey:Ki,routerKey:po,routerViewLocationKey:yi,stringifyQuery:dl,useLink:fl,useRoute:Gi,useRouter:Zr,viewDepthKey:hl},Symbol.toStringTag,{value:"Module"})),b1=()=>{};var Gu={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mp=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let s=t.charCodeAt(n);s<128?e[r++]=s:s<2048?(e[r++]=s>>6|192,e[r++]=s&63|128):(s&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=s>>18|240,e[r++]=s>>12&63|128,e[r++]=s>>6&63|128,e[r++]=s&63|128):(e[r++]=s>>12|224,e[r++]=s>>6&63|128,e[r++]=s&63|128)}return e},w1=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const s=t[r++];if(s<128)e[n++]=String.fromCharCode(s);else if(s>191&&s<224){const o=t[r++];e[n++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=t[r++],i=t[r++],a=t[r++],l=((s&7)<<18|(o&63)<<12|(i&63)<<6|a&63)-65536;e[n++]=String.fromCharCode(55296+(l>>10)),e[n++]=String.fromCharCode(56320+(l&1023))}else{const o=t[r++],i=t[r++];e[n++]=String.fromCharCode((s&15)<<12|(o&63)<<6|i&63)}}return e.join("")},vp={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let s=0;s<t.length;s+=3){const o=t[s],i=s+1<t.length,a=i?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,u=o>>2,h=(o&3)<<4|a>>4;let f=(a&15)<<2|c>>6,p=c&63;l||(p=64,i||(f=64)),n.push(r[u],r[h],r[f],r[p])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(mp(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):w1(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let s=0;s<t.length;){const o=r[t.charAt(s++)],a=s<t.length?r[t.charAt(s)]:0;++s;const c=s<t.length?r[t.charAt(s)]:64;++s;const h=s<t.length?r[t.charAt(s)]:64;if(++s,o==null||a==null||c==null||h==null)throw new _1;const f=o<<2|a>>4;if(n.push(f),c!==64){const p=a<<4&240|c>>2;if(n.push(p),h!==64){const g=c<<6&192|h;n.push(g)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class _1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const x1=function(t){const e=mp(t);return vp.encodeByteArray(e,!0)},yp=function(t){return x1(t).replace(/\./g,"")},bp=function(t){try{return vp.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k1=()=>E1().__FIREBASE_DEFAULTS__,S1=()=>{if(typeof process>"u"||typeof Gu>"u")return;const t=Gu.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},T1=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&bp(t[1]);return e&&JSON.parse(e)},vc=()=>{try{return b1()||k1()||S1()||T1()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},C1=t=>{var e,r;return(r=(e=vc())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[t]},wp=()=>{var t;return(t=vc())===null||t===void 0?void 0:t.config},_p=t=>{var e;return(e=vc())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let A1=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}};/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yc(t){return t.endsWith(".cloudworkstations.dev")}async function I1(t){return(await fetch(t,{credentials:"include"})).ok}const Bs={};function R1(){const t={prod:[],emulator:[]};for(const e of Object.keys(Bs))Bs[e]?t.emulator.push(e):t.prod.push(e);return t}function O1(t){let e=document.getElementById(t),r=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),r=!0),{created:r,element:e}}let Ju=!1;function P1(t,e){if(typeof window>"u"||typeof document>"u"||!yc(window.location.host)||Bs[t]===e||Bs[t]||Ju)return;Bs[t]=e;function r(f){return`__firebase__banner__${f}`}const n="__firebase__banner",o=R1().prod.length>0;function i(){const f=document.getElementById(n);f&&f.remove()}function a(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function l(f,p){f.setAttribute("width","24"),f.setAttribute("id",p),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function c(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{Ju=!0,i()},f}function u(f,p){f.setAttribute("id",p),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function h(){const f=O1(n),p=r("text"),g=document.getElementById(p)||document.createElement("span"),v=r("learnmore"),_=document.getElementById(v)||document.createElement("a"),T=r("preprendIcon"),k=document.getElementById(T)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const E=f.element;a(E),u(_,v);const C=c();l(k,T),E.append(k,g,_,C),document.body.appendChild(E)}o?(g.innerText="Preview backend disconnected.",k.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(k.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,g.innerText="Preview backend running in this workspace."),g.setAttribute("id",p)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _t(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function $1(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(_t())}function N1(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function L1(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function M1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function j1(){const t=_t();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function D1(){try{return typeof indexedDB=="object"}catch{return!1}}function U1(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(n);s.onsuccess=()=>{s.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},s.onupgradeneeded=()=>{r=!1},s.onerror=()=>{var o;e(((o=s.error)===null||o===void 0?void 0:o.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B1="FirebaseError";class en extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=B1,Object.setPrototypeOf(this,en.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,go.prototype.create)}}class go{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},s=`${this.service}/${e}`,o=this.errors[e],i=o?F1(o,n):"Error",a=`${this.serviceName}: ${i} (${s}).`;return new en(s,a,n)}}function F1(t,e){return t.replace(H1,(r,n)=>{const s=e[n];return s!=null?String(s):`<${n}?>`})}const H1=/\{\$([^}]+)}/g;function V1(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ls(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const s of r){if(!n.includes(s))return!1;const o=t[s],i=e[s];if(Xu(o)&&Xu(i)){if(!ls(o,i))return!1}else if(o!==i)return!1}for(const s of n)if(!r.includes(s))return!1;return!0}function Xu(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mo(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(s=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function Is(t){const e={};return t.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[s,o]=n.split("=");e[decodeURIComponent(s)]=decodeURIComponent(o)}}),e}function Rs(t){const e=t.indexOf("?");if(!e)return"";const r=t.indexOf("#",e);return t.substring(e,r>0?r:void 0)}function q1(t,e){const r=new z1(t,e);return r.subscribe.bind(r)}class z1{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let s;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");W1(e,["next","error","complete"])?s=e:s={next:e,error:r,complete:n},s.next===void 0&&(s.next=Aa),s.error===void 0&&(s.error=Aa),s.complete===void 0&&(s.complete=Aa);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function W1(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function Aa(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xt(t){return t&&t._delegate?t._delegate:t}class cs{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pn="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new A1;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:r});s&&n.resolve(s)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(r=e==null?void 0:e.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(J1(e))try{this.getOrInitializeService({instanceIdentifier:pn})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(r);try{const o=this.getOrInitializeService({instanceIdentifier:s});n.resolve(o)}catch{}}}}clearInstance(e=pn){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=pn){return this.instances.has(e)}getOptions(e=pn){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[o,i]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(o);n===a&&i.resolve(s)}return s}onInit(e,r){var n;const s=this.normalizeInstanceIdentifier(r),o=(n=this.onInitCallbacks.get(s))!==null&&n!==void 0?n:new Set;o.add(e),this.onInitCallbacks.set(s,o);const i=this.instances.get(s);return i&&e(i,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const s of n)try{s(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:G1(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=pn){return this.component?this.component.multipleInstances?e:pn:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function G1(t){return t===pn?void 0:t}function J1(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new K1(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Be;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Be||(Be={}));const Y1={debug:Be.DEBUG,verbose:Be.VERBOSE,info:Be.INFO,warn:Be.WARN,error:Be.ERROR,silent:Be.SILENT},Q1=Be.INFO,Z1={[Be.DEBUG]:"log",[Be.VERBOSE]:"log",[Be.INFO]:"info",[Be.WARN]:"warn",[Be.ERROR]:"error"},eb=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),s=Z1[e];if(s)console[s](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class xp{constructor(e){this.name=e,this._logLevel=Q1,this._logHandler=eb,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Be))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Y1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Be.DEBUG,...e),this._logHandler(this,Be.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Be.VERBOSE,...e),this._logHandler(this,Be.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Be.INFO,...e),this._logHandler(this,Be.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Be.WARN,...e),this._logHandler(this,Be.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Be.ERROR,...e),this._logHandler(this,Be.ERROR,...e)}}const tb=(t,e)=>e.some(r=>t instanceof r);let Yu,Qu;function rb(){return Yu||(Yu=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function nb(){return Qu||(Qu=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Ep=new WeakMap,pl=new WeakMap,kp=new WeakMap,Ia=new WeakMap,bc=new WeakMap;function sb(t){const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("success",o),t.removeEventListener("error",i)},o=()=>{r(zr(t.result)),s()},i=()=>{n(t.error),s()};t.addEventListener("success",o),t.addEventListener("error",i)});return e.then(r=>{r instanceof IDBCursor&&Ep.set(r,t)}).catch(()=>{}),bc.set(e,t),e}function ob(t){if(pl.has(t))return;const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",i),t.removeEventListener("abort",i)},o=()=>{r(),s()},i=()=>{n(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",o),t.addEventListener("error",i),t.addEventListener("abort",i)});pl.set(t,e)}let gl={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return pl.get(t);if(e==="objectStoreNames")return t.objectStoreNames||kp.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return zr(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function ib(t){gl=t(gl)}function ab(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(Ra(this),e,...r);return kp.set(n,e.sort?e.sort():[e]),zr(n)}:nb().includes(t)?function(...e){return t.apply(Ra(this),e),zr(Ep.get(this))}:function(...e){return zr(t.apply(Ra(this),e))}}function lb(t){return typeof t=="function"?ab(t):(t instanceof IDBTransaction&&ob(t),tb(t,rb())?new Proxy(t,gl):t)}function zr(t){if(t instanceof IDBRequest)return sb(t);if(Ia.has(t))return Ia.get(t);const e=lb(t);return e!==t&&(Ia.set(t,e),bc.set(e,t)),e}const Ra=t=>bc.get(t);function cb(t,e,{blocked:r,upgrade:n,blocking:s,terminated:o}={}){const i=indexedDB.open(t,e),a=zr(i);return n&&i.addEventListener("upgradeneeded",l=>{n(zr(i.result),l.oldVersion,l.newVersion,zr(i.transaction),l)}),r&&i.addEventListener("blocked",l=>r(l.oldVersion,l.newVersion,l)),a.then(l=>{o&&l.addEventListener("close",()=>o()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const ub=["get","getKey","getAll","getAllKeys","count"],db=["put","add","delete","clear"],Oa=new Map;function Zu(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Oa.get(e))return Oa.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,s=db.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(s||ub.includes(r)))return;const o=async function(i,...a){const l=this.transaction(i,s?"readwrite":"readonly");let c=l.store;return n&&(c=c.index(a.shift())),(await Promise.all([c[r](...a),s&&l.done]))[0]};return Oa.set(e,o),o}ib(t=>({...t,get:(e,r,n)=>Zu(e,r)||t.get(e,r,n),has:(e,r)=>!!Zu(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hb{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(fb(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function fb(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const ml="@firebase/app",ed="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kr=new xp("@firebase/app"),pb="@firebase/app-compat",gb="@firebase/analytics-compat",mb="@firebase/analytics",vb="@firebase/app-check-compat",yb="@firebase/app-check",bb="@firebase/auth",wb="@firebase/auth-compat",_b="@firebase/database",xb="@firebase/data-connect",Eb="@firebase/database-compat",kb="@firebase/functions",Sb="@firebase/functions-compat",Tb="@firebase/installations",Cb="@firebase/installations-compat",Ab="@firebase/messaging",Ib="@firebase/messaging-compat",Rb="@firebase/performance",Ob="@firebase/performance-compat",Pb="@firebase/remote-config",$b="@firebase/remote-config-compat",Nb="@firebase/storage",Lb="@firebase/storage-compat",Mb="@firebase/firestore",jb="@firebase/ai",Db="@firebase/firestore-compat",Ub="firebase",Bb="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vl="[DEFAULT]",Fb={[ml]:"fire-core",[pb]:"fire-core-compat",[mb]:"fire-analytics",[gb]:"fire-analytics-compat",[yb]:"fire-app-check",[vb]:"fire-app-check-compat",[bb]:"fire-auth",[wb]:"fire-auth-compat",[_b]:"fire-rtdb",[xb]:"fire-data-connect",[Eb]:"fire-rtdb-compat",[kb]:"fire-fn",[Sb]:"fire-fn-compat",[Tb]:"fire-iid",[Cb]:"fire-iid-compat",[Ab]:"fire-fcm",[Ib]:"fire-fcm-compat",[Rb]:"fire-perf",[Ob]:"fire-perf-compat",[Pb]:"fire-rc",[$b]:"fire-rc-compat",[Nb]:"fire-gcs",[Lb]:"fire-gcs-compat",[Mb]:"fire-fst",[Db]:"fire-fst-compat",[jb]:"fire-vertex","fire-js":"fire-js",[Ub]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bi=new Map,Hb=new Map,yl=new Map;function td(t,e){try{t.container.addComponent(e)}catch(r){kr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function ro(t){const e=t.name;if(yl.has(e))return kr.debug(`There were multiple attempts to register component ${e}.`),!1;yl.set(e,t);for(const r of bi.values())td(r,t);for(const r of Hb.values())td(r,t);return!0}function Sp(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function $t(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vb={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Wr=new go("app","Firebase",Vb);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qb{constructor(e,r,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new cs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Wr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vo=Bb;function Tp(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n=Object.assign({name:vl,automaticDataCollectionEnabled:!0},e),s=n.name;if(typeof s!="string"||!s)throw Wr.create("bad-app-name",{appName:String(s)});if(r||(r=wp()),!r)throw Wr.create("no-options");const o=bi.get(s);if(o){if(ls(r,o.options)&&ls(n,o.config))return o;throw Wr.create("duplicate-app",{appName:s})}const i=new X1(s);for(const l of yl.values())i.addComponent(l);const a=new qb(r,n,i);return bi.set(s,a),a}function zb(t=vl){const e=bi.get(t);if(!e&&t===vl&&wp())return Tp();if(!e)throw Wr.create("no-app",{appName:t});return e}function Qn(t,e,r){var n;let s=(n=Fb[t])!==null&&n!==void 0?n:t;r&&(s+=`-${r}`);const o=s.match(/\s|\//),i=e.match(/\s|\//);if(o||i){const a=[`Unable to register library "${s}" with version "${e}":`];o&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&i&&a.push("and"),i&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),kr.warn(a.join(" "));return}ro(new cs(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wb="firebase-heartbeat-database",Kb=1,no="firebase-heartbeat-store";let Pa=null;function Cp(){return Pa||(Pa=cb(Wb,Kb,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(no)}catch(r){console.warn(r)}}}}).catch(t=>{throw Wr.create("idb-open",{originalErrorMessage:t.message})})),Pa}async function Gb(t){try{const r=(await Cp()).transaction(no),n=await r.objectStore(no).get(Ap(t));return await r.done,n}catch(e){if(e instanceof en)kr.warn(e.message);else{const r=Wr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});kr.warn(r.message)}}}async function rd(t,e){try{const n=(await Cp()).transaction(no,"readwrite");await n.objectStore(no).put(e,Ap(t)),await n.done}catch(r){if(r instanceof en)kr.warn(r.message);else{const n=Wr.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});kr.warn(n.message)}}}function Ap(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jb=1024,Xb=30;class Yb{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new Zb(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=nd();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(i=>i.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:s}),this._heartbeatsCache.heartbeats.length>Xb){const i=ew(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){kr.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=nd(),{heartbeatsToSend:n,unsentEntries:s}=Qb(this._heartbeatsCache.heartbeats),o=yp(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(r){return kr.warn(r),""}}}function nd(){return new Date().toISOString().substring(0,10)}function Qb(t,e=Jb){const r=[];let n=t.slice();for(const s of t){const o=r.find(i=>i.agent===s.agent);if(o){if(o.dates.push(s.date),sd(r)>e){o.dates.pop();break}}else if(r.push({agent:s.agent,dates:[s.date]}),sd(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class Zb{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return D1()?U1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await Gb(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const s=await this.read();return rd(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const s=await this.read();return rd(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function sd(t){return yp(JSON.stringify({version:2,heartbeats:t})).length}function ew(t){if(t.length===0)return-1;let e=0,r=t[0].date;for(let n=1;n<t.length;n++)t[n].date<r&&(r=t[n].date,e=n);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tw(t){ro(new cs("platform-logger",e=>new hb(e),"PRIVATE")),ro(new cs("heartbeat",e=>new Yb(e),"PRIVATE")),Qn(ml,ed,t),Qn(ml,ed,"esm2017"),Qn("fire-js","")}tw("");var bl=function(t,e){return bl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])},bl(t,e)};function Ip(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");bl(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var wi=function(){return wi=Object.assign||function(e){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},wi.apply(this,arguments)};function Cr(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r}function Rp(t,e,r,n){var s=arguments.length,o=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(o=(s<3?i(o):s>3?i(e,r,o):i(e,r))||o);return s>3&&o&&Object.defineProperty(e,r,o),o}function Op(t,e){return function(r,n){e(r,n,t)}}function Pp(t,e,r,n,s,o){function i(T){if(T!==void 0&&typeof T!="function")throw new TypeError("Function expected");return T}for(var a=n.kind,l=a==="getter"?"get":a==="setter"?"set":"value",c=!e&&t?n.static?t:t.prototype:null,u=e||(c?Object.getOwnPropertyDescriptor(c,n.name):{}),h,f=!1,p=r.length-1;p>=0;p--){var g={};for(var v in n)g[v]=v==="access"?{}:n[v];for(var v in n.access)g.access[v]=n.access[v];g.addInitializer=function(T){if(f)throw new TypeError("Cannot add initializers after decoration has completed");o.push(i(T||null))};var _=(0,r[p])(a==="accessor"?{get:u.get,set:u.set}:u[l],g);if(a==="accessor"){if(_===void 0)continue;if(_===null||typeof _!="object")throw new TypeError("Object expected");(h=i(_.get))&&(u.get=h),(h=i(_.set))&&(u.set=h),(h=i(_.init))&&s.unshift(h)}else(h=i(_))&&(a==="field"?s.unshift(h):u[l]=h)}c&&Object.defineProperty(c,n.name,u),f=!0}function $p(t,e,r){for(var n=arguments.length>2,s=0;s<e.length;s++)r=n?e[s].call(t,r):e[s].call(t);return n?r:void 0}function Np(t){return typeof t=="symbol"?t:"".concat(t)}function Lp(t,e,r){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:r?"".concat(r," ",e):e})}function Mp(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function ce(t,e,r,n){function s(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function a(u){try{c(n.next(u))}catch(h){i(h)}}function l(u){try{c(n.throw(u))}catch(h){i(h)}}function c(u){u.done?o(u.value):s(u.value).then(a,l)}c((n=n.apply(t,e||[])).next())})}function jp(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,s,o,i=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return i.next=a(0),i.throw=a(1),i.return=a(2),typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function a(c){return function(u){return l([c,u])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(r=0)),r;)try{if(n=1,s&&(o=c[0]&2?s.return:c[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,c[1])).done)return o;switch(s=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,s=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){r.label=c[1];break}if(c[0]===6&&r.label<o[1]){r.label=o[1],o=c;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(c);break}o[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(u){c=[6,u],s=0}finally{n=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}var Ji=Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]};function Dp(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Ji(e,t,r)}function _i(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function wc(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),s,o=[],i;try{for(;(e===void 0||e-- >0)&&!(s=n.next()).done;)o.push(s.value)}catch(a){i={error:a}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(i)throw i.error}}return o}function Up(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(wc(arguments[e]));return t}function Bp(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),s=0,e=0;e<r;e++)for(var o=arguments[e],i=0,a=o.length;i<a;i++,s++)n[s]=o[i];return n}function Fp(t,e,r){if(r||arguments.length===2)for(var n=0,s=e.length,o;n<s;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))}function us(t){return this instanceof us?(this.v=t,this):new us(t)}function Hp(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),s,o=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",i),s[Symbol.asyncIterator]=function(){return this},s;function i(p){return function(g){return Promise.resolve(g).then(p,h)}}function a(p,g){n[p]&&(s[p]=function(v){return new Promise(function(_,T){o.push([p,v,_,T])>1||l(p,v)})},g&&(s[p]=g(s[p])))}function l(p,g){try{c(n[p](g))}catch(v){f(o[0][3],v)}}function c(p){p.value instanceof us?Promise.resolve(p.value.v).then(u,h):f(o[0][2],p)}function u(p){l("next",p)}function h(p){l("throw",p)}function f(p,g){p(g),o.shift(),o.length&&l(o[0][0],o[0][1])}}function Vp(t){var e,r;return e={},n("next"),n("throw",function(s){throw s}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(s,o){e[s]=t[s]?function(i){return(r=!r)?{value:us(t[s](i)),done:!1}:o?o(i):i}:o}}function qp(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof _i=="function"?_i(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(o){r[o]=t[o]&&function(i){return new Promise(function(a,l){i=t[o](i),s(a,l,i.done,i.value)})}}function s(o,i,a,l){Promise.resolve(l).then(function(c){o({value:c,done:a})},i)}}function zp(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var rw=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e},wl=function(t){return wl=Object.getOwnPropertyNames||function(e){var r=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[r.length]=n);return r},wl(t)};function Wp(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r=wl(t),n=0;n<r.length;n++)r[n]!=="default"&&Ji(e,t,r[n]);return rw(e,t),e}function Kp(t){return t&&t.__esModule?t:{default:t}}function Gp(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}function Jp(t,e,r,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(t,r):s?s.value=r:e.set(t,r),r}function Xp(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function Yp(t,e,r){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var n,s;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=e[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=e[Symbol.dispose],r&&(s=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");s&&(n=function(){try{s.call(this)}catch(o){return Promise.reject(o)}}),t.stack.push({value:e,dispose:n,async:r})}else r&&t.stack.push({async:!0});return e}var nw=typeof SuppressedError=="function"?SuppressedError:function(t,e,r){var n=new Error(r);return n.name="SuppressedError",n.error=t,n.suppressed=e,n};function Qp(t){function e(o){t.error=t.hasError?new nw(o,t.error,"An error was suppressed during disposal."):o,t.hasError=!0}var r,n=0;function s(){for(;r=t.stack.pop();)try{if(!r.async&&n===1)return n=0,t.stack.push(r),Promise.resolve().then(s);if(r.dispose){var o=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(o).then(s,function(i){return e(i),s()})}else n|=1}catch(i){e(i)}if(n===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return s()}function Zp(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,n,s,o,i){return n?e?".jsx":".js":s&&(!o||!i)?r:s+o+"."+i.toLowerCase()+"js"}):t}const sw={__extends:Ip,__assign:wi,__rest:Cr,__decorate:Rp,__param:Op,__esDecorate:Pp,__runInitializers:$p,__propKey:Np,__setFunctionName:Lp,__metadata:Mp,__awaiter:ce,__generator:jp,__createBinding:Ji,__exportStar:Dp,__values:_i,__read:wc,__spread:Up,__spreadArrays:Bp,__spreadArray:Fp,__await:us,__asyncGenerator:Hp,__asyncDelegator:Vp,__asyncValues:qp,__makeTemplateObject:zp,__importStar:Wp,__importDefault:Kp,__classPrivateFieldGet:Gp,__classPrivateFieldSet:Jp,__classPrivateFieldIn:Xp,__addDisposableResource:Yp,__disposeResources:Qp,__rewriteRelativeImportExtension:Zp},ow=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:Yp,get __assign(){return wi},__asyncDelegator:Vp,__asyncGenerator:Hp,__asyncValues:qp,__await:us,__awaiter:ce,__classPrivateFieldGet:Gp,__classPrivateFieldIn:Xp,__classPrivateFieldSet:Jp,__createBinding:Ji,__decorate:Rp,__disposeResources:Qp,__esDecorate:Pp,__exportStar:Dp,__extends:Ip,__generator:jp,__importDefault:Kp,__importStar:Wp,__makeTemplateObject:zp,__metadata:Mp,__param:Op,__propKey:Np,__read:wc,__rest:Cr,__rewriteRelativeImportExtension:Zp,__runInitializers:$p,__setFunctionName:Lp,__spread:Up,__spreadArray:Fp,__spreadArrays:Bp,__values:_i,default:sw},Symbol.toStringTag,{value:"Module"}));function e0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const iw=e0,t0=new go("auth","Firebase",e0());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xi=new xp("@firebase/auth");function aw(t,...e){xi.logLevel<=Be.WARN&&xi.warn(`Auth (${vo}): ${t}`,...e)}function Yo(t,...e){xi.logLevel<=Be.ERROR&&xi.error(`Auth (${vo}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dt(t,...e){throw xc(t,...e)}function zt(t,...e){return xc(t,...e)}function _c(t,e,r){const n=Object.assign(Object.assign({},iw()),{[e]:r});return new go("auth","Firebase",n).create(e,{appName:t.name})}function xr(t){return _c(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function lw(t,e,r){const n=r;if(!(e instanceof n))throw n.name!==e.constructor.name&&Dt(t,"argument-error"),_c(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function xc(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return t0.create(t,...e)}function be(t,e,...r){if(!t)throw xc(e,...r)}function br(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Yo(e),new Error(e)}function Sr(t,e){t||br(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _l(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function cw(){return od()==="http:"||od()==="https:"}function od(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uw(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(cw()||L1()||"connection"in navigator)?navigator.onLine:!0}function dw(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{constructor(e,r){this.shortDelay=e,this.longDelay=r,Sr(r>e,"Short delay should be less than long delay!"),this.isMobile=$1()||M1()}get(){return uw()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ec(t,e){Sr(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r0{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;br("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;br("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;br("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hw={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fw=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],pw=new yo(3e4,6e4);function tn(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Ar(t,e,r,n,s={}){return n0(t,s,async()=>{let o={},i={};n&&(e==="GET"?i=n:o={body:JSON.stringify(n)});const a=mo(Object.assign({key:t.config.apiKey},i)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},o);return N1()||(c.referrerPolicy="no-referrer"),t.emulatorConfig&&yc(t.emulatorConfig.host)&&(c.credentials="include"),r0.fetch()(await s0(t,t.config.apiHost,r,a),c)})}async function n0(t,e,r){t._canInitEmulator=!1;const n=Object.assign(Object.assign({},hw),e);try{const s=new mw(t),o=await Promise.race([r(),s.promise]);s.clearNetworkTimeout();const i=await o.json();if("needConfirmation"in i)throw $o(t,"account-exists-with-different-credential",i);if(o.ok&&!("errorMessage"in i))return i;{const a=o.ok?i.errorMessage:i.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw $o(t,"credential-already-in-use",i);if(l==="EMAIL_EXISTS")throw $o(t,"email-already-in-use",i);if(l==="USER_DISABLED")throw $o(t,"user-disabled",i);const u=n[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw _c(t,u,c);Dt(t,u)}}catch(s){if(s instanceof en)throw s;Dt(t,"network-request-failed",{message:String(s)})}}async function bo(t,e,r,n,s={}){const o=await Ar(t,e,r,n,s);return"mfaPendingCredential"in o&&Dt(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function s0(t,e,r,n){const s=`${e}${r}?${n}`,o=t,i=o.config.emulator?Ec(t.config,s):`${t.config.apiScheme}://${s}`;return fw.includes(r)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(i).toString():i}function gw(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class mw{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(zt(this.auth,"network-request-failed")),pw.get())})}}function $o(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const s=zt(t,e,n);return s.customData._tokenResponse=r,s}function id(t){return t!==void 0&&t.enterprise!==void 0}class vw{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===e)return gw(r.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function yw(t,e){return Ar(t,"GET","/v2/recaptchaConfig",tn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bw(t,e){return Ar(t,"POST","/v1/accounts:delete",e)}async function Ei(t,e){return Ar(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fs(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function ww(t,e=!1){const r=Xt(t),n=await r.getIdToken(e),s=kc(n);be(s&&s.exp&&s.auth_time&&s.iat,r.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,i=o==null?void 0:o.sign_in_provider;return{claims:s,token:n,authTime:Fs($a(s.auth_time)),issuedAtTime:Fs($a(s.iat)),expirationTime:Fs($a(s.exp)),signInProvider:i||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function $a(t){return Number(t)*1e3}function kc(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return Yo("JWT malformed, contained fewer than 3 sections"),null;try{const s=bp(r);return s?JSON.parse(s):(Yo("Failed to decode base64 JWT payload"),null)}catch(s){return Yo("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function ad(t){const e=kc(t);return be(e,"internal-error"),be(typeof e.exp<"u","internal-error"),be(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ds(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof en&&_w(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function _w({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xw{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var r;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=Fs(this.lastLoginAt),this.creationTime=Fs(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ki(t){var e;const r=t.auth,n=await t.getIdToken(),s=await ds(t,Ei(r,{idToken:n}));be(s==null?void 0:s.users.length,r,"internal-error");const o=s.users[0];t._notifyReloadListener(o);const i=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?o0(o.providerUserInfo):[],a=kw(t.providerData,i),l=t.isAnonymous,c=!(t.email&&o.passwordHash)&&!(a!=null&&a.length),u=l?c:!1,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new xl(o.createdAt,o.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function Ew(t){const e=Xt(t);await ki(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function kw(t,e){return[...t.filter(n=>!e.some(s=>s.providerId===n.providerId)),...e]}function o0(t){return t.map(e=>{var{providerId:r}=e,n=Cr(e,["providerId"]);return{providerId:r,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sw(t,e){const r=await n0(t,{},async()=>{const n=mo({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=t.config,i=await s0(t,s,"/v1/token",`key=${o}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",r0.fetch()(i,{method:"POST",headers:a,body:n})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function Tw(t,e){return Ar(t,"POST","/v2/accounts:revokeToken",tn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){be(e.idToken,"internal-error"),be(typeof e.idToken<"u","internal-error"),be(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):ad(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){be(e.length!==0,"internal-error");const r=ad(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(be(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:s,expiresIn:o}=await Sw(e,r);this.updateTokensAndExpiration(n,s,Number(o))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:s,expirationTime:o}=r,i=new Zn;return n&&(be(typeof n=="string","internal-error",{appName:e}),i.refreshToken=n),s&&(be(typeof s=="string","internal-error",{appName:e}),i.accessToken=s),o&&(be(typeof o=="number","internal-error",{appName:e}),i.expirationTime=o),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Zn,this.toJSON())}_performRefresh(){return br("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rr(t,e){be(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Vt{constructor(e){var{uid:r,auth:n,stsTokenManager:s}=e,o=Cr(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new xw(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new xl(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const r=await ds(this,this.stsTokenManager.getToken(this.auth,e));return be(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return ww(this,e)}reload(){return Ew(this)}_assign(e){this!==e&&(be(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>Object.assign({},r)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new Vt(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(e){be(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await ki(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if($t(this.auth.app))return Promise.reject(xr(this.auth));const e=await this.getIdToken();return await ds(this,bw(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){var n,s,o,i,a,l,c,u;const h=(n=r.displayName)!==null&&n!==void 0?n:void 0,f=(s=r.email)!==null&&s!==void 0?s:void 0,p=(o=r.phoneNumber)!==null&&o!==void 0?o:void 0,g=(i=r.photoURL)!==null&&i!==void 0?i:void 0,v=(a=r.tenantId)!==null&&a!==void 0?a:void 0,_=(l=r._redirectEventId)!==null&&l!==void 0?l:void 0,T=(c=r.createdAt)!==null&&c!==void 0?c:void 0,k=(u=r.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:E,emailVerified:C,isAnonymous:$,providerData:R,stsTokenManager:S}=r;be(E&&S,e,"internal-error");const O=Zn.fromJSON(this.name,S);be(typeof E=="string",e,"internal-error"),Rr(h,e.name),Rr(f,e.name),be(typeof C=="boolean",e,"internal-error"),be(typeof $=="boolean",e,"internal-error"),Rr(p,e.name),Rr(g,e.name),Rr(v,e.name),Rr(_,e.name),Rr(T,e.name),Rr(k,e.name);const m=new Vt({uid:E,auth:e,email:f,emailVerified:C,displayName:h,isAnonymous:$,photoURL:g,phoneNumber:p,tenantId:v,stsTokenManager:O,createdAt:T,lastLoginAt:k});return R&&Array.isArray(R)&&(m.providerData=R.map(A=>Object.assign({},A))),_&&(m._redirectEventId=_),m}static async _fromIdTokenResponse(e,r,n=!1){const s=new Zn;s.updateFromServerResponse(r);const o=new Vt({uid:r.localId,auth:e,stsTokenManager:s,isAnonymous:n});return await ki(o),o}static async _fromGetAccountInfoResponse(e,r,n){const s=r.users[0];be(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?o0(s.providerUserInfo):[],i=!(s.email&&s.passwordHash)&&!(o!=null&&o.length),a=new Zn;a.updateFromIdToken(n);const l=new Vt({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:i}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new xl(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(o!=null&&o.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ld=new Map;function wr(t){Sr(t instanceof Function,"Expected a class definition");let e=ld.get(t);return e?(Sr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,ld.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}i0.type="NONE";const cd=i0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qo(t,e,r){return`firebase:${t}:${e}:${r}`}class es{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:s,name:o}=this.auth;this.fullUserKey=Qo(this.userKey,s.apiKey,o),this.fullPersistenceKey=Qo("persistence",s.apiKey,o),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const r=await Ei(this.auth,{idToken:e}).catch(()=>{});return r?Vt._fromGetAccountInfoResponse(this.auth,r,e):null}return Vt._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new es(wr(cd),e,n);const s=(await Promise.all(r.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let o=s[0]||wr(cd);const i=Qo(n,e.config.apiKey,e.name);let a=null;for(const c of r)try{const u=await c._get(i);if(u){let h;if(typeof u=="string"){const f=await Ei(e,{idToken:u}).catch(()=>{});if(!f)break;h=await Vt._fromGetAccountInfoResponse(e,f,u)}else h=Vt._fromJSON(e,u);c!==o&&(a=h),o=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!o._shouldAllowMigration||!l.length?new es(o,e,n):(o=l[0],a&&await o._set(i,a.toJSON()),await Promise.all(r.map(async c=>{if(c!==o)try{await c._remove(i)}catch{}})),new es(o,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ud(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(u0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(a0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(h0(e))return"Blackberry";if(f0(e))return"Webos";if(l0(e))return"Safari";if((e.includes("chrome/")||c0(e))&&!e.includes("edge/"))return"Chrome";if(d0(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function a0(t=_t()){return/firefox\//i.test(t)}function l0(t=_t()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function c0(t=_t()){return/crios\//i.test(t)}function u0(t=_t()){return/iemobile/i.test(t)}function d0(t=_t()){return/android/i.test(t)}function h0(t=_t()){return/blackberry/i.test(t)}function f0(t=_t()){return/webos/i.test(t)}function Sc(t=_t()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Cw(t=_t()){var e;return Sc(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Aw(){return j1()&&document.documentMode===10}function p0(t=_t()){return Sc(t)||d0(t)||f0(t)||h0(t)||/windows phone/i.test(t)||u0(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g0(t,e=[]){let r;switch(t){case"Browser":r=ud(_t());break;case"Worker":r=`${ud(_t())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${vo}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iw{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=o=>new Promise((i,a)=>{try{const l=e(o);i(l)}catch(l){a(l)}});n.onAbort=r,this.queue.push(n);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const s of r)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rw(t,e={}){return Ar(t,"GET","/v2/passwordPolicy",tn(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ow=6;class Pw{constructor(e){var r,n,s,o;const i=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=i.minPasswordLength)!==null&&r!==void 0?r:Ow,i.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=i.maxPasswordLength),i.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=i.containsLowercaseCharacter),i.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=i.containsUppercaseCharacter),i.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=i.containsNumericCharacter),i.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=i.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var r,n,s,o,i,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(r=l.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(n=l.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(s=l.containsLowercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsUppercaseLetter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(i=l.containsNumericCharacter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),s&&(r.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let s=0;s<e.length;s++)n=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $w{constructor(e,r,n,s){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new dd(this),this.idTokenSubscription=new dd(this),this.beforeStateQueue=new Iw(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=t0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=wr(r)),this._initializationPromise=this.queue(async()=>{var n,s,o;if(!this._deleted&&(this.persistenceManager=await es.create(this,e),(n=this._resolvePersistenceManagerAvailable)===null||n===void 0||n.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await Ei(this,{idToken:e}),n=await Vt._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if($t(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(a,a))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,a=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!i||i===a)&&(l!=null&&l.user)&&(s=l.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(i){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return be(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await ki(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=dw()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if($t(this.app))return Promise.reject(xr(this));const r=e?Xt(e):null;return r&&be(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&be(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return $t(this.app)?Promise.reject(xr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return $t(this.app)?Promise.reject(xr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(wr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Rw(this),r=new Pw(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new go("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await Tw(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&wr(e)||this._popupRedirectResolver;be(r,this,"argument-error"),this.redirectPersistenceManager=await es.create(this,[wr(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(r=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,s){if(this._deleted)return()=>{};const o=typeof r=="function"?r:r.next.bind(r);let i=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(be(a,this,"internal-error"),a.then(()=>{i||o(this.currentUser)}),typeof r=="function"){const l=e.addObserver(r,n,s);return()=>{i=!0,l()}}else{const l=e.addObserver(r);return()=>{i=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return be(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=g0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(r["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(r["X-Firebase-AppCheck"]=s),r}async _getAppCheckToken(){var e;if($t(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const r=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return r!=null&&r.error&&aw(`Error while retrieving App Check token: ${r.error}`),r==null?void 0:r.token}}function rn(t){return Xt(t)}class dd{constructor(e){this.auth=e,this.observer=null,this.addObserver=q1(r=>this.observer=r)}get next(){return be(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xi={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Nw(t){Xi=t}function m0(t){return Xi.loadJS(t)}function Lw(){return Xi.recaptchaEnterpriseScript}function Mw(){return Xi.gapiScript}function jw(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class Dw{constructor(){this.enterprise=new Uw}ready(e){e()}execute(e,r){return Promise.resolve("token")}render(e,r){return""}}class Uw{ready(e){e()}execute(e,r){return Promise.resolve("token")}render(e,r){return""}}const Bw="recaptcha-enterprise",v0="NO_RECAPTCHA";class Fw{constructor(e){this.type=Bw,this.auth=rn(e)}async verify(e="verify",r=!1){async function n(o){if(!r){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(i,a)=>{yw(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new vw(l);return o.tenantId==null?o._agentRecaptchaConfig=c:o._tenantRecaptchaConfigs[o.tenantId]=c,i(c.siteKey)}}).catch(l=>{a(l)})})}function s(o,i,a){const l=window.grecaptcha;id(l)?l.enterprise.ready(()=>{l.enterprise.execute(o,{action:e}).then(c=>{i(c)}).catch(()=>{i(v0)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Dw().execute("siteKey",{action:"verify"}):new Promise((o,i)=>{n(this.auth).then(a=>{if(!r&&id(window.grecaptcha))s(a,o,i);else{if(typeof window>"u"){i(new Error("RecaptchaVerifier is only supported in browser"));return}let l=Lw();l.length!==0&&(l+=a),m0(l).then(()=>{s(a,o,i)}).catch(c=>{i(c)})}}).catch(a=>{i(a)})})}}async function hd(t,e,r,n=!1,s=!1){const o=new Fw(t);let i;if(s)i=v0;else try{i=await o.verify(r)}catch{i=await o.verify(r,!0)}const a=Object.assign({},e);if(r==="mfaSmsEnrollment"||r==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,c=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:c,captchaResponse:i,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:i,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return n?Object.assign(a,{captchaResp:i}):Object.assign(a,{captchaResponse:i}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function El(t,e,r,n,s){var o;if(!((o=t._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await hd(t,e,r,r==="getOobCode");return n(t,i)}else return n(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await hd(t,e,r,r==="getOobCode");return n(t,a)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hw(t,e){const r=Sp(t,"auth");if(r.isInitialized()){const s=r.getImmediate(),o=r.getOptions();if(ls(o,e??{}))return s;Dt(s,"already-initialized")}return r.initialize({options:e})}function Vw(t,e){const r=(e==null?void 0:e.persistence)||[],n=(Array.isArray(r)?r:[r]).map(wr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function qw(t,e,r){const n=rn(t);be(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const s=!1,o=y0(e),{host:i,port:a}=zw(e),l=a===null?"":`:${a}`,c={url:`${o}//${i}${l}/`},u=Object.freeze({host:i,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!n._canInitEmulator){be(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),be(ls(c,n.config.emulator)&&ls(u,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=c,n.emulatorConfig=u,n.settings.appVerificationDisabledForTesting=!0,yc(i)?(I1(`${o}//${i}${l}`),P1("Auth",!0)):Ww()}function y0(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function zw(t){const e=y0(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(n);if(s){const o=s[1];return{host:o,port:fd(n.substr(o.length+1))}}else{const[o,i]=n.split(":");return{host:o,port:fd(i)}}}function fd(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Ww(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return br("not implemented")}_getIdTokenResponse(e){return br("not implemented")}_linkToIdToken(e,r){return br("not implemented")}_getReauthenticationResolver(e){return br("not implemented")}}async function Kw(t,e){return Ar(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gw(t,e){return bo(t,"POST","/v1/accounts:signInWithPassword",tn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jw(t,e){return bo(t,"POST","/v1/accounts:signInWithEmailLink",tn(t,e))}async function Xw(t,e){return bo(t,"POST","/v1/accounts:signInWithEmailLink",tn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so extends Tc{constructor(e,r,n,s=null){super("password",n),this._email=e,this._password=r,this._tenantId=s}static _fromEmailAndPassword(e,r){return new so(e,r,"password")}static _fromEmailAndCode(e,r,n=null){return new so(e,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return El(e,r,"signInWithPassword",Gw);case"emailLink":return Jw(e,{email:this._email,oobCode:this._password});default:Dt(e,"internal-error")}}async _linkToIdToken(e,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return El(e,n,"signUpPassword",Kw);case"emailLink":return Xw(e,{idToken:r,email:this._email,oobCode:this._password});default:Dt(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ts(t,e){return bo(t,"POST","/v1/accounts:signInWithIdp",tn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yw="http://localhost";class On extends Tc{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new On(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):Dt("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:s}=r,o=Cr(r,["providerId","signInMethod"]);if(!n||!s)return null;const i=new On(n,s);return i.idToken=o.idToken||void 0,i.accessToken=o.accessToken||void 0,i.secret=o.secret,i.nonce=o.nonce,i.pendingToken=o.pendingToken||null,i}_getIdTokenResponse(e){const r=this.buildRequest();return ts(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,ts(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,ts(e,r)}buildRequest(){const e={requestUri:Yw,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=mo(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qw(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Zw(t){const e=Is(Rs(t)).link,r=e?Is(Rs(e)).deep_link_id:null,n=Is(Rs(t)).deep_link_id;return(n?Is(Rs(n)).link:null)||n||r||e||t}class Cc{constructor(e){var r,n,s,o,i,a;const l=Is(Rs(e)),c=(r=l.apiKey)!==null&&r!==void 0?r:null,u=(n=l.oobCode)!==null&&n!==void 0?n:null,h=Qw((s=l.mode)!==null&&s!==void 0?s:null);be(c&&u&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=u,this.continueUrl=(o=l.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(i=l.lang)!==null&&i!==void 0?i:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const r=Zw(e);try{return new Cc(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs{constructor(){this.providerId=vs.PROVIDER_ID}static credential(e,r){return so._fromEmailAndPassword(e,r)}static credentialWithLink(e,r){const n=Cc.parseLink(r);return be(n,"argument-error"),so._fromEmailAndCode(e,n.code,n.tenantId)}}vs.PROVIDER_ID="password";vs.EMAIL_PASSWORD_SIGN_IN_METHOD="password";vs.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo extends Ac{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur extends wo{constructor(){super("facebook.com")}static credential(e){return On._fromParams({providerId:Ur.PROVIDER_ID,signInMethod:Ur.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ur.credentialFromTaggedObject(e)}static credentialFromError(e){return Ur.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ur.credential(e.oauthAccessToken)}catch{return null}}}Ur.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ur.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr extends wo{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return On._fromParams({providerId:yr.PROVIDER_ID,signInMethod:yr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return yr.credentialFromTaggedObject(e)}static credentialFromError(e){return yr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return yr.credential(r,n)}catch{return null}}}yr.GOOGLE_SIGN_IN_METHOD="google.com";yr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br extends wo{constructor(){super("github.com")}static credential(e){return On._fromParams({providerId:Br.PROVIDER_ID,signInMethod:Br.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Br.credentialFromTaggedObject(e)}static credentialFromError(e){return Br.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Br.credential(e.oauthAccessToken)}catch{return null}}}Br.GITHUB_SIGN_IN_METHOD="github.com";Br.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr extends wo{constructor(){super("twitter.com")}static credential(e,r){return On._fromParams({providerId:Fr.PROVIDER_ID,signInMethod:Fr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return Fr.credentialFromTaggedObject(e)}static credentialFromError(e){return Fr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return Fr.credential(r,n)}catch{return null}}}Fr.TWITTER_SIGN_IN_METHOD="twitter.com";Fr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e_(t,e){return bo(t,"POST","/v1/accounts:signUp",tn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,s=!1){const o=await Vt._fromIdTokenResponse(e,n,s),i=pd(n);return new Pn({user:o,providerId:i,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const s=pd(n);return new Pn({user:e,providerId:s,_tokenResponse:n,operationType:r})}}function pd(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si extends en{constructor(e,r,n,s){var o;super(r.code,r.message),this.operationType=n,this.user=s,Object.setPrototypeOf(this,Si.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,s){return new Si(e,r,n,s)}}function b0(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Si._fromErrorAndOperation(t,o,e,n):o})}async function t_(t,e,r=!1){const n=await ds(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return Pn._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r_(t,e,r=!1){const{auth:n}=t;if($t(n.app))return Promise.reject(xr(n));const s="reauthenticate";try{const o=await ds(t,b0(n,s,e,t),r);be(o.idToken,n,"internal-error");const i=kc(o.idToken);be(i,n,"internal-error");const{sub:a}=i;return be(t.uid===a,n,"user-mismatch"),Pn._forOperation(t,s,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&Dt(n,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w0(t,e,r=!1){if($t(t.app))return Promise.reject(xr(t));const n="signIn",s=await b0(t,n,e),o=await Pn._fromIdTokenResponse(t,n,s);return r||await t._updateCurrentUser(o.user),o}async function n_(t,e){return w0(rn(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _0(t){const e=rn(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function s_(t,e,r){if($t(t.app))return Promise.reject(xr(t));const n=rn(t),i=await El(n,{returnSecureToken:!0,email:e,password:r,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",e_).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&_0(t),l}),a=await Pn._fromIdTokenResponse(n,"signIn",i);return await n._updateCurrentUser(a.user),a}function o_(t,e,r){return $t(t.app)?Promise.reject(xr(t)):n_(Xt(t),vs.credential(e,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&_0(t),n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i_(t,e){return Ar(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a_(t,{displayName:e,photoURL:r}){if(e===void 0&&r===void 0)return;const n=Xt(t),o={idToken:await n.getIdToken(),displayName:e,photoUrl:r,returnSecureToken:!0},i=await ds(n,i_(n.auth,o));n.displayName=i.displayName||null,n.photoURL=i.photoUrl||null;const a=n.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=n.displayName,a.photoURL=n.photoURL),await n._updateTokensIfNecessary(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l_(t,e){return Xt(t).setPersistence(e)}function c_(t,e,r,n){return Xt(t).onIdTokenChanged(e,r,n)}function u_(t,e,r){return Xt(t).beforeAuthStateChanged(e,r)}function _o(t,e,r,n){return Xt(t).onAuthStateChanged(e,r,n)}function d_(t){return Xt(t).signOut()}const Ti="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x0{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(Ti,"1"),this.storage.removeItem(Ti),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h_=1e3,f_=10;class E0 extends x0{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=p0(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),s=this.localCache[r];n!==s&&e(r,s,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((i,a,l)=>{this.notifyListeners(i,l)});return}const n=e.key;r?this.detachListener():this.stopPolling();const s=()=>{const i=this.storage.getItem(n);!r&&this.localCache[n]===i||this.notifyListeners(n,i)},o=this.storage.getItem(n);Aw()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,f_):s()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},h_)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}E0.type="LOCAL";const k0=E0;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S0 extends x0{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}S0.type="SESSION";const T0=S0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p_(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(s=>s.isListeningto(e));if(r)return r;const n=new Yi(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:s,data:o}=r.data,i=this.handlersMap[s];if(!(i!=null&&i.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:s});const a=Array.from(i).map(async c=>c(r.origin,o)),l=await p_(a);r.ports[0].postMessage({status:"done",eventId:n,eventType:s,response:l})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Yi.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ic(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g_{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,i;return new Promise((a,l)=>{const c=Ic("",20);s.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},n);i={messageChannel:s,onMessage(h){const f=h;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(u),o=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(f.data.response);break;default:clearTimeout(u),clearTimeout(o),l(new Error("invalid_response"));break}}},this.handlers.add(i),s.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:e,eventId:c,data:r},[s.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ir(){return window}function m_(t){ir().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C0(){return typeof ir().WorkerGlobalScope<"u"&&typeof ir().importScripts=="function"}async function v_(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function y_(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function b_(){return C0()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A0="firebaseLocalStorageDb",w_=1,Ci="firebaseLocalStorage",I0="fbase_key";class xo{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function Qi(t,e){return t.transaction([Ci],e?"readwrite":"readonly").objectStore(Ci)}function __(){const t=indexedDB.deleteDatabase(A0);return new xo(t).toPromise()}function kl(){const t=indexedDB.open(A0,w_);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(Ci,{keyPath:I0})}catch(s){r(s)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(Ci)?e(n):(n.close(),await __(),e(await kl()))})})}async function gd(t,e,r){const n=Qi(t,!0).put({[I0]:e,value:r});return new xo(n).toPromise()}async function x_(t,e){const r=Qi(t,!1).get(e),n=await new xo(r).toPromise();return n===void 0?null:n.value}function md(t,e){const r=Qi(t,!0).delete(e);return new xo(r).toPromise()}const E_=800,k_=3;class R0{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await kl(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>k_)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return C0()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Yi._getInstance(b_()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await v_(),!this.activeServiceWorker)return;this.sender=new g_(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((r=n[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||y_()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await kl();return await gd(e,Ti,"1"),await md(e,Ti),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>gd(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>x_(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>md(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=Qi(s,!1).getAll();return new xo(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)n.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!n.has(s)&&(this.notifyListeners(s,null),r.push(s));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),E_)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}R0.type="LOCAL";const S_=R0;new yo(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O0(t,e){return e?wr(e):(be(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc extends Tc{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ts(e,this._buildIdpRequest())}_linkToIdToken(e,r){return ts(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return ts(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function T_(t){return w0(t.auth,new Rc(t),t.bypassAuthState)}function C_(t){const{auth:e,user:r}=t;return be(r,e,"internal-error"),r_(r,new Rc(t),t.bypassAuthState)}async function A_(t){const{auth:e,user:r}=t;return be(r,e,"internal-error"),t_(r,new Rc(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0{constructor(e,r,n,s,o=!1){this.auth=e,this.resolver=n,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:s,tenantId:o,error:i,type:a}=e;if(i){this.reject(i);return}const l={auth:this.auth,requestUri:r,sessionId:n,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return T_;case"linkViaPopup":case"linkViaRedirect":return A_;case"reauthViaPopup":case"reauthViaRedirect":return C_;default:Dt(this.auth,"internal-error")}}resolve(e){Sr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Sr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I_=new yo(2e3,1e4);async function R_(t,e,r){if($t(t.app))return Promise.reject(zt(t,"operation-not-supported-in-this-environment"));const n=rn(t);lw(t,e,Ac);const s=O0(n,r);return new _n(n,"signInViaPopup",e,s).executeNotNull()}class _n extends P0{constructor(e,r,n,s,o){super(e,r,s,o),this.provider=n,this.authWindow=null,this.pollId=null,_n.currentPopupAction&&_n.currentPopupAction.cancel(),_n.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return be(e,this.auth,"internal-error"),e}async onExecution(){Sr(this.filter.length===1,"Popup operations only handle one event");const e=Ic();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(zt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(zt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_n.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if(!((n=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(zt(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,I_.get())};e()}}_n.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O_="pendingRedirect",Zo=new Map;class P_ extends P0{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=Zo.get(this.auth._key());if(!e){try{const n=await $_(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}Zo.set(this.auth._key(),e)}return this.bypassAuthState||Zo.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function $_(t,e){const r=M_(e),n=L_(t);if(!await n._isAvailable())return!1;const s=await n._get(r)==="true";return await n._remove(r),s}function N_(t,e){Zo.set(t._key(),e)}function L_(t){return wr(t._redirectPersistence)}function M_(t){return Qo(O_,t.config.apiKey,t.name)}async function j_(t,e,r=!1){if($t(t.app))return Promise.reject(xr(t));const n=rn(t),s=O0(n,e),i=await new P_(n,s,r).execute();return i&&!r&&(delete i.user._redirectEventId,await n._persistUserIfCurrent(i.user),await n._setRedirectUser(null,e)),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D_=10*60*1e3;class U_{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!B_(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!$0(e)){const s=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";r.onError(zt(this.auth,s))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=D_&&this.cachedEventUids.clear(),this.cachedEventUids.has(vd(e))}saveEventToCache(e){this.cachedEventUids.add(vd(e)),this.lastProcessedEventTime=Date.now()}}function vd(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function $0({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function B_(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return $0(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F_(t,e={}){return Ar(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H_=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,V_=/^https?/;async function q_(t){if(t.config.emulator)return;const{authorizedDomains:e}=await F_(t);for(const r of e)try{if(z_(r))return}catch{}Dt(t,"unauthorized-domain")}function z_(t){const e=_l(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const i=new URL(t);return i.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&i.hostname===n}if(!V_.test(r))return!1;if(H_.test(t))return n===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W_=new yo(3e4,6e4);function yd(){const t=ir().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function K_(t){return new Promise((e,r)=>{var n,s,o;function i(){yd(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{yd(),r(zt(t,"network-request-failed"))},timeout:W_.get()})}if(!((s=(n=ir().gapi)===null||n===void 0?void 0:n.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((o=ir().gapi)===null||o===void 0)&&o.load)i();else{const a=jw("iframefcb");return ir()[a]=()=>{gapi.load?i():r(zt(t,"network-request-failed"))},m0(`${Mw()}?onload=${a}`).catch(l=>r(l))}}).catch(e=>{throw ei=null,e})}let ei=null;function G_(t){return ei=ei||K_(t),ei}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J_=new yo(5e3,15e3),X_="__/auth/iframe",Y_="emulator/auth/iframe",Q_={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Z_=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ex(t){const e=t.config;be(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?Ec(e,Y_):`https://${t.config.authDomain}/${X_}`,n={apiKey:e.apiKey,appName:t.name,v:vo},s=Z_.get(t.config.apiHost);s&&(n.eid=s);const o=t._getFrameworks();return o.length&&(n.fw=o.join(",")),`${r}?${mo(n).slice(1)}`}async function tx(t){const e=await G_(t),r=ir().gapi;return be(r,t,"internal-error"),e.open({where:document.body,url:ex(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Q_,dontclear:!0},n=>new Promise(async(s,o)=>{await n.restyle({setHideOnLeave:!1});const i=zt(t,"network-request-failed"),a=ir().setTimeout(()=>{o(i)},J_.get());function l(){ir().clearTimeout(a),s(n)}n.ping(l).then(l,()=>{o(i)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rx={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},nx=500,sx=600,ox="_blank",ix="http://localhost";class bd{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function ax(t,e,r,n=nx,s=sx){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),i=Math.max((window.screen.availWidth-n)/2,0).toString();let a="";const l=Object.assign(Object.assign({},rx),{width:n.toString(),height:s.toString(),top:o,left:i}),c=_t().toLowerCase();r&&(a=c0(c)?ox:r),a0(c)&&(e=e||ix,l.scrollbars="yes");const u=Object.entries(l).reduce((f,[p,g])=>`${f}${p}=${g},`,"");if(Cw(c)&&a!=="_self")return lx(e||"",a),new bd(null);const h=window.open(e||"",a,u);be(h,t,"popup-blocked");try{h.focus()}catch{}return new bd(h)}function lx(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cx="__/auth/handler",ux="emulator/auth/handler",dx=encodeURIComponent("fac");async function wd(t,e,r,n,s,o){be(t.config.authDomain,t,"auth-domain-config-required"),be(t.config.apiKey,t,"invalid-api-key");const i={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:vo,eventId:s};if(e instanceof Ac){e.setDefaultLanguage(t.languageCode),i.providerId=e.providerId||"",V1(e.getCustomParameters())||(i.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,h]of Object.entries({}))i[u]=h}if(e instanceof wo){const u=e.getScopes().filter(h=>h!=="");u.length>0&&(i.scopes=u.join(","))}t.tenantId&&(i.tid=t.tenantId);const a=i;for(const u of Object.keys(a))a[u]===void 0&&delete a[u];const l=await t._getAppCheckToken(),c=l?`#${dx}=${encodeURIComponent(l)}`:"";return`${hx(t)}?${mo(a).slice(1)}${c}`}function hx({config:t}){return t.emulator?Ec(t,ux):`https://${t.authDomain}/${cx}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Na="webStorageSupport";class fx{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=T0,this._completeRedirectFn=j_,this._overrideRedirectResult=N_}async _openPopup(e,r,n,s){var o;Sr((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const i=await wd(e,r,n,_l(),s);return ax(e,i,Ic())}async _openRedirect(e,r,n,s){await this._originValidation(e);const o=await wd(e,r,n,_l(),s);return m_(o),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:s,promise:o}=this.eventManagers[r];return s?Promise.resolve(s):(Sr(o,"If manager is not set, promise should be"),o)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await tx(e),n=new U_(e);return r.register("authEvent",s=>(be(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:n.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(Na,{type:Na},s=>{var o;const i=(o=s==null?void 0:s[0])===null||o===void 0?void 0:o[Na];i!==void 0&&r(!!i),Dt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=q_(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return p0()||l0()||Sc()}}const px=fx;var _d="@firebase/auth",xd="1.10.6";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gx{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){be(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mx(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function vx(t){ro(new cs("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:i,authDomain:a}=n.options;be(i&&!i.includes(":"),"invalid-api-key",{appName:n.name});const l={apiKey:i,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:g0(t)},c=new $w(n,s,o,l);return Vw(c,r),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),ro(new cs("auth-internal",e=>{const r=rn(e.getProvider("auth").getImmediate());return(n=>new gx(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),Qn(_d,xd,mx(t)),Qn(_d,xd,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yx=5*60,bx=_p("authIdTokenMaxAge")||yx;let Ed=null;const wx=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>bx)return;const s=r==null?void 0:r.token;Ed!==s&&(Ed=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function $n(t=zb()){const e=Sp(t,"auth");if(e.isInitialized())return e.getImmediate();const r=Hw(t,{popupRedirectResolver:px,persistence:[S_,k0,T0]}),n=_p("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(n,location.origin);if(location.origin===o.origin){const i=wx(o.toString());u_(r,i,()=>i(r.currentUser)),c_(r,a=>i(a))}}const s=C1("auth");return s&&qw(r,`http://${s}`),r}function _x(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}Nw({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=s=>{const o=zt("internal-error");o.customData=s,r(o)},n.type="text/javascript",n.charset="UTF-8",_x().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});vx("Browser");const xx="modulepreload",Ex=function(t,e){return new URL(t,e).href},kd={},Xe=function(e,r,n){let s=Promise.resolve();if(r&&r.length>0){const i=document.getElementsByTagName("link"),a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(r.map(c=>{if(c=Ex(c,n),c in kd)return;kd[c]=!0;const u=c.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(!!n)for(let g=i.length-1;g>=0;g--){const v=i[g];if(v.href===c&&(!u||v.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${c}"]${h}`))return;const p=document.createElement("link");if(p.rel=u?"stylesheet":xx,u||(p.as="script"),p.crossOrigin="",p.href=c,l&&p.setAttribute("nonce",l),document.head.appendChild(p),u)return new Promise((g,v)=>{p.addEventListener("load",g),p.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${c}`)))})}))}function o(i){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=i,window.dispatchEvent(a),!a.defaultPrevented)throw i}return s.then(i=>{for(const a of i||[])a.status==="rejected"&&o(a.reason);return e().catch(o)})};/*!
 * pinia v3.0.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let N0;const Zi=t=>N0=t,L0=Symbol();function Sl(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var Hs;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(Hs||(Hs={}));function kx(){const t=Ah(!0),e=t.run(()=>q({}));let r=[],n=[];const s=lc({install(o){Zi(s),s._a=o,o.provide(L0,s),o.config.globalProperties.$pinia=s,n.forEach(i=>r.push(i)),n=[]},use(o){return this._a?r.push(o):n.push(o),this},_p:r,_a:null,_e:t,_s:new Map,state:e});return s}const M0=()=>{};function Sd(t,e,r,n=M0){t.push(e);const s=()=>{const o=t.indexOf(e);o>-1&&(t.splice(o,1),n())};return!r&&Ih()&&om(s),s}function Mn(t,...e){t.slice().forEach(r=>{r(...e)})}const Sx=t=>t(),Td=Symbol(),La=Symbol();function Tl(t,e){t instanceof Map&&e instanceof Map?e.forEach((r,n)=>t.set(n,r)):t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const r in e){if(!e.hasOwnProperty(r))continue;const n=e[r],s=t[r];Sl(s)&&Sl(n)&&t.hasOwnProperty(r)&&!Je(n)&&!qr(n)?t[r]=Tl(s,n):t[r]=n}return t}const Tx=Symbol();function Cx(t){return!Sl(t)||!Object.prototype.hasOwnProperty.call(t,Tx)}const{assign:$r}=Object;function Ax(t){return!!(Je(t)&&t.effect)}function Ix(t,e,r,n){const{state:s,actions:o,getters:i}=e,a=r.state.value[t];let l;function c(){a||(r.state.value[t]=s?s():{});const u=Am(r.state.value[t]);return $r(u,o,Object.keys(i||{}).reduce((h,f)=>(h[f]=lc(Ae(()=>{Zi(r);const p=r._s.get(t);return i[f].call(p,p)})),h),{}))}return l=j0(t,c,e,r,n,!0),l}function j0(t,e,r={},n,s,o){let i;const a=$r({actions:{}},r),l={deep:!0};let c,u,h=[],f=[],p;const g=n.state.value[t];!o&&!g&&(n.state.value[t]={}),q({});let v;function _(O){let m;c=u=!1,typeof O=="function"?(O(n.state.value[t]),m={type:Hs.patchFunction,storeId:t,events:p}):(Tl(n.state.value[t],O),m={type:Hs.patchObject,payload:O,storeId:t,events:p});const A=v=Symbol();Qr().then(()=>{v===A&&(c=!0)}),u=!0,Mn(h,m,n.state.value[t])}const T=o?function(){const{state:m}=r,A=m?m():{};this.$patch(Q=>{$r(Q,A)})}:M0;function k(){i.stop(),h=[],f=[],n._s.delete(t)}const E=(O,m="")=>{if(Td in O)return O[La]=m,O;const A=function(){Zi(n);const Q=Array.from(arguments),K=[],ie=[];function we(N){K.push(N)}function De(N){ie.push(N)}Mn(f,{args:Q,name:A[La],store:$,after:we,onError:De});let G;try{G=O.apply(this&&this.$id===t?this:$,Q)}catch(N){throw Mn(ie,N),N}return G instanceof Promise?G.then(N=>(Mn(K,N),N)).catch(N=>(Mn(ie,N),Promise.reject(N))):(Mn(K,G),G)};return A[Td]=!0,A[La]=m,A},C={_p:n,$id:t,$onAction:Sd.bind(null,f),$patch:_,$reset:T,$subscribe(O,m={}){const A=Sd(h,O,m.detached,()=>Q()),Q=i.run(()=>_r(()=>n.state.value[t],K=>{(m.flush==="sync"?u:c)&&O({storeId:t,type:Hs.direct,events:p},K)},$r({},l,m)));return A},$dispose:k},$=Ut(C);n._s.set(t,$);const S=(n._a&&n._a.runWithContext||Sx)(()=>n._e.run(()=>(i=Ah()).run(()=>e({action:E}))));for(const O in S){const m=S[O];if(Je(m)&&!Ax(m)||qr(m))o||(g&&Cx(m)&&(Je(m)?m.value=g[O]:Tl(m,g[O])),n.state.value[t][O]=m);else if(typeof m=="function"){const A=E(m,O);S[O]=A,a.actions[O]=m}}return $r($,S),$r(Ee($),S),Object.defineProperty($,"$state",{get:()=>n.state.value[t],set:O=>{_(m=>{$r(m,O)})}}),n._p.forEach(O=>{$r($,i.run(()=>O({store:$,app:n._a,pinia:n,options:a})))}),g&&o&&r.hydrate&&r.hydrate($.$state,g),c=!0,u=!0,$}/*! #__NO_SIDE_EFFECTS__ */function Oc(t,e,r){let n;const s=typeof e=="function";n=s?r:e;function o(i,a){const l=nv();return i=i||(l?Lt(L0,null):null),i&&Zi(i),i=N0,i._s.has(t)||(s?j0(t,e,n,i):Ix(t,n,i)),i._s.get(t)}return o.$id=t,o}const Rx=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class Pc extends Error{constructor(e,r="FunctionsError",n){super(e),this.name=r,this.context=n}}class Ox extends Pc{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Cd extends Pc{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Ad extends Pc{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Cl;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Cl||(Cl={}));class Px{constructor(e,{headers:r={},customFetch:n,region:s=Cl.Any}={}){this.url=e,this.headers=r,this.region=s,this.fetch=Rx(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return ce(this,arguments,void 0,function*(r,n={}){var s;let o,i;try{const{headers:a,method:l,body:c,signal:u,timeout:h}=n;let f={},{region:p}=n;p||(p=this.region);const g=new URL(`${this.url}/${r}`);p&&p!=="any"&&(f["x-region"]=p,g.searchParams.set("forceFunctionRegion",p));let v;c&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)?typeof Blob<"u"&&c instanceof Blob||c instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",v=c):typeof c=="string"?(f["Content-Type"]="text/plain",v=c):typeof FormData<"u"&&c instanceof FormData?v=c:(f["Content-Type"]="application/json",v=JSON.stringify(c)):v=c;let _=u;h&&(i=new AbortController,o=setTimeout(()=>i.abort(),h),u?(_=i.signal,u.addEventListener("abort",()=>i.abort())):_=i.signal);const T=yield this.fetch(g.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),a),body:v,signal:_}).catch($=>{throw new Ox($)}),k=T.headers.get("x-relay-error");if(k&&k==="true")throw new Cd(T);if(!T.ok)throw new Ad(T);let E=((s=T.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),C;return E==="application/json"?C=yield T.json():E==="application/octet-stream"||E==="application/pdf"?C=yield T.blob():E==="text/event-stream"?C=T:E==="multipart/form-data"?C=yield T.formData():C=yield T.text(),{data:C,error:null,response:T}}catch(a){return{data:null,error:a,response:a instanceof Ad||a instanceof Cd?a.context:void 0}}finally{o&&clearTimeout(o)}})}}function $x(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Nx(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var s=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return t[n]}})}),r}var ct={};const ys=Nx(ow);var No={},Lo={},Mo={},jo={},Do={},Uo={},Id;function D0(){if(Id)return Uo;Id=1,Object.defineProperty(Uo,"__esModule",{value:!0});class t extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return Uo.default=t,Uo}var Rd;function U0(){if(Rd)return Do;Rd=1,Object.defineProperty(Do,"__esModule",{value:!0});const e=ys.__importDefault(D0());class r{constructor(s){var o,i;this.shouldThrowOnError=!1,this.method=s.method,this.url=s.url,this.headers=new Headers(s.headers),this.schema=s.schema,this.body=s.body,this.shouldThrowOnError=(o=s.shouldThrowOnError)!==null&&o!==void 0?o:!1,this.signal=s.signal,this.isMaybeSingle=(i=s.isMaybeSingle)!==null&&i!==void 0?i:!1,s.fetch?this.fetch=s.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(s,o){return this.headers=new Headers(this.headers),this.headers.set(s,o),this}then(s,o){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const i=this.fetch;let a=i(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async l=>{var c,u,h,f;let p=null,g=null,v=null,_=l.status,T=l.statusText;if(l.ok){if(this.method!=="HEAD"){const $=await l.text();$===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((c=this.headers.get("Accept"))===null||c===void 0)&&c.includes("application/vnd.pgrst.plan+text"))?g=$:g=JSON.parse($))}const E=(u=this.headers.get("Prefer"))===null||u===void 0?void 0:u.match(/count=(exact|planned|estimated)/),C=(h=l.headers.get("content-range"))===null||h===void 0?void 0:h.split("/");E&&C&&C.length>1&&(v=parseInt(C[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(g)&&(g.length>1?(p={code:"PGRST116",details:`Results contain ${g.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},g=null,v=null,_=406,T="Not Acceptable"):g.length===1?g=g[0]:g=null)}else{const E=await l.text();try{p=JSON.parse(E),Array.isArray(p)&&l.status===404&&(g=[],p=null,_=200,T="OK")}catch{l.status===404&&E===""?(_=204,T="No Content"):p={message:E}}if(p&&this.isMaybeSingle&&(!((f=p==null?void 0:p.details)===null||f===void 0)&&f.includes("0 rows"))&&(p=null,_=200,T="OK"),p&&this.shouldThrowOnError)throw new e.default(p)}return{error:p,data:g,count:v,status:_,statusText:T}});return this.shouldThrowOnError||(a=a.catch(l=>{var c,u,h;return{error:{message:`${(c=l==null?void 0:l.name)!==null&&c!==void 0?c:"FetchError"}: ${l==null?void 0:l.message}`,details:`${(u=l==null?void 0:l.stack)!==null&&u!==void 0?u:""}`,hint:"",code:`${(h=l==null?void 0:l.code)!==null&&h!==void 0?h:""}`},data:null,count:null,status:0,statusText:""}})),a.then(s,o)}returns(){return this}overrideTypes(){return this}}return Do.default=r,Do}var Od;function B0(){if(Od)return jo;Od=1,Object.defineProperty(jo,"__esModule",{value:!0});const e=ys.__importDefault(U0());class r extends e.default{select(s){let o=!1;const i=(s??"*").split("").map(a=>/\s/.test(a)&&!o?"":(a==='"'&&(o=!o),a)).join("");return this.url.searchParams.set("select",i),this.headers.append("Prefer","return=representation"),this}order(s,{ascending:o=!0,nullsFirst:i,foreignTable:a,referencedTable:l=a}={}){const c=l?`${l}.order`:"order",u=this.url.searchParams.get(c);return this.url.searchParams.set(c,`${u?`${u},`:""}${s}.${o?"asc":"desc"}${i===void 0?"":i?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:o,referencedTable:i=o}={}){const a=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(a,`${s}`),this}range(s,o,{foreignTable:i,referencedTable:a=i}={}){const l=typeof a>"u"?"offset":`${a}.offset`,c=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(l,`${s}`),this.url.searchParams.set(c,`${o-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:s=!1,verbose:o=!1,settings:i=!1,buffers:a=!1,wal:l=!1,format:c="text"}={}){var u;const h=[s?"analyze":null,o?"verbose":null,i?"settings":null,a?"buffers":null,l?"wal":null].filter(Boolean).join("|"),f=(u=this.headers.get("Accept"))!==null&&u!==void 0?u:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${c}; for="${f}"; options=${h};`),c==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(s){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${s}`),this}}return jo.default=r,jo}var Pd;function $c(){if(Pd)return Mo;Pd=1,Object.defineProperty(Mo,"__esModule",{value:!0});const e=ys.__importDefault(B0()),r=new RegExp("[,()]");class n extends e.default{eq(o,i){return this.url.searchParams.append(o,`eq.${i}`),this}neq(o,i){return this.url.searchParams.append(o,`neq.${i}`),this}gt(o,i){return this.url.searchParams.append(o,`gt.${i}`),this}gte(o,i){return this.url.searchParams.append(o,`gte.${i}`),this}lt(o,i){return this.url.searchParams.append(o,`lt.${i}`),this}lte(o,i){return this.url.searchParams.append(o,`lte.${i}`),this}like(o,i){return this.url.searchParams.append(o,`like.${i}`),this}likeAllOf(o,i){return this.url.searchParams.append(o,`like(all).{${i.join(",")}}`),this}likeAnyOf(o,i){return this.url.searchParams.append(o,`like(any).{${i.join(",")}}`),this}ilike(o,i){return this.url.searchParams.append(o,`ilike.${i}`),this}ilikeAllOf(o,i){return this.url.searchParams.append(o,`ilike(all).{${i.join(",")}}`),this}ilikeAnyOf(o,i){return this.url.searchParams.append(o,`ilike(any).{${i.join(",")}}`),this}is(o,i){return this.url.searchParams.append(o,`is.${i}`),this}in(o,i){const a=Array.from(new Set(i)).map(l=>typeof l=="string"&&r.test(l)?`"${l}"`:`${l}`).join(",");return this.url.searchParams.append(o,`in.(${a})`),this}contains(o,i){return typeof i=="string"?this.url.searchParams.append(o,`cs.${i}`):Array.isArray(i)?this.url.searchParams.append(o,`cs.{${i.join(",")}}`):this.url.searchParams.append(o,`cs.${JSON.stringify(i)}`),this}containedBy(o,i){return typeof i=="string"?this.url.searchParams.append(o,`cd.${i}`):Array.isArray(i)?this.url.searchParams.append(o,`cd.{${i.join(",")}}`):this.url.searchParams.append(o,`cd.${JSON.stringify(i)}`),this}rangeGt(o,i){return this.url.searchParams.append(o,`sr.${i}`),this}rangeGte(o,i){return this.url.searchParams.append(o,`nxl.${i}`),this}rangeLt(o,i){return this.url.searchParams.append(o,`sl.${i}`),this}rangeLte(o,i){return this.url.searchParams.append(o,`nxr.${i}`),this}rangeAdjacent(o,i){return this.url.searchParams.append(o,`adj.${i}`),this}overlaps(o,i){return typeof i=="string"?this.url.searchParams.append(o,`ov.${i}`):this.url.searchParams.append(o,`ov.{${i.join(",")}}`),this}textSearch(o,i,{config:a,type:l}={}){let c="";l==="plain"?c="pl":l==="phrase"?c="ph":l==="websearch"&&(c="w");const u=a===void 0?"":`(${a})`;return this.url.searchParams.append(o,`${c}fts${u}.${i}`),this}match(o){return Object.entries(o).forEach(([i,a])=>{this.url.searchParams.append(i,`eq.${a}`)}),this}not(o,i,a){return this.url.searchParams.append(o,`not.${i}.${a}`),this}or(o,{foreignTable:i,referencedTable:a=i}={}){const l=a?`${a}.or`:"or";return this.url.searchParams.append(l,`(${o})`),this}filter(o,i,a){return this.url.searchParams.append(o,`${i}.${a}`),this}}return Mo.default=n,Mo}var $d;function F0(){if($d)return Lo;$d=1,Object.defineProperty(Lo,"__esModule",{value:!0});const e=ys.__importDefault($c());class r{constructor(s,{headers:o={},schema:i,fetch:a}){this.url=s,this.headers=new Headers(o),this.schema=i,this.fetch=a}select(s,o){const{head:i=!1,count:a}=o??{},l=i?"HEAD":"GET";let c=!1;const u=(s??"*").split("").map(h=>/\s/.test(h)&&!c?"":(h==='"'&&(c=!c),h)).join("");return this.url.searchParams.set("select",u),a&&this.headers.append("Prefer",`count=${a}`),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(s,{count:o,defaultToNull:i=!0}={}){var a;const l="POST";if(o&&this.headers.append("Prefer",`count=${o}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const c=s.reduce((u,h)=>u.concat(Object.keys(h)),[]);if(c.length>0){const u=[...new Set(c)].map(h=>`"${h}"`);this.url.searchParams.set("columns",u.join(","))}}return new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}upsert(s,{onConflict:o,ignoreDuplicates:i=!1,count:a,defaultToNull:l=!0}={}){var c;const u="POST";if(this.headers.append("Prefer",`resolution=${i?"ignore":"merge"}-duplicates`),o!==void 0&&this.url.searchParams.set("on_conflict",o),a&&this.headers.append("Prefer",`count=${a}`),l||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const h=s.reduce((f,p)=>f.concat(Object.keys(p)),[]);if(h.length>0){const f=[...new Set(h)].map(p=>`"${p}"`);this.url.searchParams.set("columns",f.join(","))}}return new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}update(s,{count:o}={}){var i;const a="PATCH";return o&&this.headers.append("Prefer",`count=${o}`),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}delete({count:s}={}){var o;const i="DELETE";return s&&this.headers.append("Prefer",`count=${s}`),new e.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}}return Lo.default=r,Lo}var Nd;function Lx(){if(Nd)return No;Nd=1,Object.defineProperty(No,"__esModule",{value:!0});const t=ys,e=t.__importDefault(F0()),r=t.__importDefault($c());class n{constructor(o,{headers:i={},schema:a,fetch:l}={}){this.url=o,this.headers=new Headers(i),this.schemaName=a,this.fetch=l}from(o){const i=new URL(`${this.url}/${o}`);return new e.default(i,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(o){return new n(this.url,{headers:this.headers,schema:o,fetch:this.fetch})}rpc(o,i={},{head:a=!1,get:l=!1,count:c}={}){var u;let h;const f=new URL(`${this.url}/rpc/${o}`);let p;a||l?(h=a?"HEAD":"GET",Object.entries(i).filter(([v,_])=>_!==void 0).map(([v,_])=>[v,Array.isArray(_)?`{${_.join(",")}}`:`${_}`]).forEach(([v,_])=>{f.searchParams.append(v,_)})):(h="POST",p=i);const g=new Headers(this.headers);return c&&g.set("Prefer",`count=${c}`),new r.default({method:h,url:f,headers:g,schema:this.schemaName,body:p,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}}return No.default=n,No}var Ld;function Mx(){if(Ld)return ct;Ld=1,Object.defineProperty(ct,"__esModule",{value:!0}),ct.PostgrestError=ct.PostgrestBuilder=ct.PostgrestTransformBuilder=ct.PostgrestFilterBuilder=ct.PostgrestQueryBuilder=ct.PostgrestClient=void 0;const t=ys,e=t.__importDefault(Lx());ct.PostgrestClient=e.default;const r=t.__importDefault(F0());ct.PostgrestQueryBuilder=r.default;const n=t.__importDefault($c());ct.PostgrestFilterBuilder=n.default;const s=t.__importDefault(B0());ct.PostgrestTransformBuilder=s.default;const o=t.__importDefault(U0());ct.PostgrestBuilder=o.default;const i=t.__importDefault(D0());return ct.PostgrestError=i.default,ct.default={PostgrestClient:e.default,PostgrestQueryBuilder:r.default,PostgrestFilterBuilder:n.default,PostgrestTransformBuilder:s.default,PostgrestBuilder:o.default,PostgrestError:i.default},ct}var H0=Mx();const V0=$x(H0),jx=zg({__proto__:null,default:V0},[H0]),{PostgrestClient:Dx,PostgrestQueryBuilder:y5,PostgrestFilterBuilder:b5,PostgrestTransformBuilder:w5,PostgrestBuilder:_5,PostgrestError:x5}=V0||jx;class Ux{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,s=parseInt(n.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let r=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(r+=`

Suggested solution: ${e.workaround}`),new Error(r)}static createWebSocket(e,r){const n=this.getWebSocketConstructor();return new n(e,r)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const Bx="2.81.1",Fx=`realtime-js/${Bx}`,q0="1.0.0",Hx="2.0.0",Md=q0,Al=1e4,Vx=1e3,qx=100;var vn;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(vn||(vn={}));var tt;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(tt||(tt={}));var Pt;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Pt||(Pt={}));var Il;(function(t){t.websocket="websocket"})(Il||(Il={}));var yn;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(yn||(yn={}));class zx{constructor(){this.HEADER_LENGTH=1,this.META_LENGTH=4,this.USER_BROADCAST_PUSH_META_LENGTH=5,this.KINDS={push:0,reply:1,broadcast:2,userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST="broadcast"}encode(e,r){if(this._isArrayBuffer(e.payload))return r(this._binaryEncodePush(e));if(e.event===this.BROADCAST&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(e));let n=[e.join_ref,e.ref,e.topic,e.event,e.payload];return r(JSON.stringify(n))}_binaryEncodePush(e){const{join_ref:r,ref:n,event:s,topic:o,payload:i}=e,a=this.META_LENGTH+r.length+n.length+o.length+s.length,l=new ArrayBuffer(this.HEADER_LENGTH+a);let c=new DataView(l),u=0;c.setUint8(u++,this.KINDS.push),c.setUint8(u++,r.length),c.setUint8(u++,n.length),c.setUint8(u++,o.length),c.setUint8(u++,s.length),Array.from(r,f=>c.setUint8(u++,f.charCodeAt(0))),Array.from(n,f=>c.setUint8(u++,f.charCodeAt(0))),Array.from(o,f=>c.setUint8(u++,f.charCodeAt(0))),Array.from(s,f=>c.setUint8(u++,f.charCodeAt(0)));var h=new Uint8Array(l.byteLength+i.byteLength);return h.set(new Uint8Array(l),0),h.set(new Uint8Array(i),l.byteLength),h.buffer}_binaryEncodeUserBroadcastPush(e){var r;return this._isArrayBuffer((r=e.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var r,n;const{join_ref:s,ref:o,topic:i}=e,a=e.payload.event,l=(n=(r=e.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:new ArrayBuffer(0),c=this.USER_BROADCAST_PUSH_META_LENGTH+s.length+o.length+i.length+a.length,u=new ArrayBuffer(this.HEADER_LENGTH+c);let h=new DataView(u),f=0;h.setUint8(f++,this.KINDS.userBroadcastPush),h.setUint8(f++,s.length),h.setUint8(f++,o.length),h.setUint8(f++,i.length),h.setUint8(f++,a.length),h.setUint8(f++,this.BINARY_ENCODING),Array.from(s,g=>h.setUint8(f++,g.charCodeAt(0))),Array.from(o,g=>h.setUint8(f++,g.charCodeAt(0))),Array.from(i,g=>h.setUint8(f++,g.charCodeAt(0))),Array.from(a,g=>h.setUint8(f++,g.charCodeAt(0)));var p=new Uint8Array(u.byteLength+l.byteLength);return p.set(new Uint8Array(u),0),p.set(new Uint8Array(l),u.byteLength),p.buffer}_encodeJsonUserBroadcastPush(e){var r,n;const{join_ref:s,ref:o,topic:i}=e,a=e.payload.event,l=(n=(r=e.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:{},u=new TextEncoder().encode(JSON.stringify(l)).buffer,h=this.USER_BROADCAST_PUSH_META_LENGTH+s.length+o.length+i.length+a.length,f=new ArrayBuffer(this.HEADER_LENGTH+h);let p=new DataView(f),g=0;p.setUint8(g++,this.KINDS.userBroadcastPush),p.setUint8(g++,s.length),p.setUint8(g++,o.length),p.setUint8(g++,i.length),p.setUint8(g++,a.length),p.setUint8(g++,this.JSON_ENCODING),Array.from(s,_=>p.setUint8(g++,_.charCodeAt(0))),Array.from(o,_=>p.setUint8(g++,_.charCodeAt(0))),Array.from(i,_=>p.setUint8(g++,_.charCodeAt(0))),Array.from(a,_=>p.setUint8(g++,_.charCodeAt(0)));var v=new Uint8Array(f.byteLength+u.byteLength);return v.set(new Uint8Array(f),0),v.set(new Uint8Array(u),f.byteLength),v.buffer}decode(e,r){if(this._isArrayBuffer(e)){let n=this._binaryDecode(e);return r(n)}if(typeof e=="string"){const n=JSON.parse(e),[s,o,i,a,l]=n;return r({join_ref:s,ref:o,topic:i,event:a,payload:l})}return r({})}_binaryDecode(e){const r=new DataView(e),n=r.getUint8(0),s=new TextDecoder;switch(n){case this.KINDS.push:return this._decodePush(e,r,s);case this.KINDS.reply:return this._decodeReply(e,r,s);case this.KINDS.broadcast:return this._decodeBroadcast(e,r,s);case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,r,s)}}_decodePush(e,r,n){const s=r.getUint8(1),o=r.getUint8(2),i=r.getUint8(3);let a=this.HEADER_LENGTH+this.META_LENGTH-1;const l=n.decode(e.slice(a,a+s));a=a+s;const c=n.decode(e.slice(a,a+o));a=a+o;const u=n.decode(e.slice(a,a+i));a=a+i;const h=JSON.parse(n.decode(e.slice(a,e.byteLength)));return{join_ref:l,ref:null,topic:c,event:u,payload:h}}_decodeReply(e,r,n){const s=r.getUint8(1),o=r.getUint8(2),i=r.getUint8(3),a=r.getUint8(4);let l=this.HEADER_LENGTH+this.META_LENGTH;const c=n.decode(e.slice(l,l+s));l=l+s;const u=n.decode(e.slice(l,l+o));l=l+o;const h=n.decode(e.slice(l,l+i));l=l+i;const f=n.decode(e.slice(l,l+a));l=l+a;const p=JSON.parse(n.decode(e.slice(l,e.byteLength))),g={status:f,response:p};return{join_ref:c,ref:u,topic:h,event:Pt.reply,payload:g}}_decodeBroadcast(e,r,n){const s=r.getUint8(1),o=r.getUint8(2);let i=this.HEADER_LENGTH+2;const a=n.decode(e.slice(i,i+s));i=i+s;const l=n.decode(e.slice(i,i+o));i=i+o;const c=JSON.parse(n.decode(e.slice(i,e.byteLength)));return{join_ref:null,ref:null,topic:a,event:l,payload:c}}_decodeUserBroadcast(e,r,n){const s=r.getUint8(1),o=r.getUint8(2),i=r.getUint8(3),a=r.getUint8(4);let l=this.HEADER_LENGTH+4;const c=n.decode(e.slice(l,l+s));l=l+s;const u=n.decode(e.slice(l,l+o));l=l+o;const h=n.decode(e.slice(l,l+i));l=l+i;const f=e.slice(l,e.byteLength),p=a===this.JSON_ENCODING?JSON.parse(n.decode(f)):f,g={type:this.BROADCAST,event:u,payload:p};return i>0&&(g.meta=JSON.parse(h)),{join_ref:null,ref:null,topic:c,event:this.BROADCAST,payload:g}}_isArrayBuffer(e){var r;return e instanceof ArrayBuffer||((r=e==null?void 0:e.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}}class z0{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ve;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Ve||(Ve={}));const jd=(t,e,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return e?Object.keys(e).reduce((o,i)=>(o[i]=Wx(i,t,e,s),o),{}):{}},Wx=(t,e,r,n)=>{const s=e.find(a=>a.name===t),o=s==null?void 0:s.type,i=r[t];return o&&!n.includes(o)?W0(o,i):Rl(i)},W0=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return Xx(e,r)}switch(t){case Ve.bool:return Kx(e);case Ve.float4:case Ve.float8:case Ve.int2:case Ve.int4:case Ve.int8:case Ve.numeric:case Ve.oid:return Gx(e);case Ve.json:case Ve.jsonb:return Jx(e);case Ve.timestamp:return Yx(e);case Ve.abstime:case Ve.date:case Ve.daterange:case Ve.int4range:case Ve.int8range:case Ve.money:case Ve.reltime:case Ve.text:case Ve.time:case Ve.timestamptz:case Ve.timetz:case Ve.tsrange:case Ve.tstzrange:return Rl(e);default:return Rl(e)}},Rl=t=>t,Kx=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},Gx=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},Jx=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},Xx=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,n=t[r];if(t[0]==="{"&&n==="}"){let o;const i=t.slice(1,r);try{o=JSON.parse("["+i+"]")}catch{o=i?i.split(","):[]}return o.map(a=>W0(e,a))}return t},Yx=t=>typeof t=="string"?t.replace(" ","T"):t,K0=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Ma{constructor(e,r,n={},s=Al){this.channel=e,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var n;return this._hasReceived(e)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Dd;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Dd||(Dd={}));class Vs{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:o,onLeave:i,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Vs.syncState(this.state,s,o,i),this.pendingDiffs.forEach(l=>{this.state=Vs.syncDiff(this.state,l,o,i)}),this.pendingDiffs=[],a()}),this.channel._on(n.diff,{},s=>{const{onJoin:o,onLeave:i,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Vs.syncDiff(this.state,s,o,i),a())}),this.onJoin((s,o,i)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:o,newPresences:i})}),this.onLeave((s,o,i)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:o,leftPresences:i})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,n,s){const o=this.cloneDeep(e),i=this.transformState(r),a={},l={};return this.map(o,(c,u)=>{i[c]||(l[c]=u)}),this.map(i,(c,u)=>{const h=o[c];if(h){const f=u.map(_=>_.presence_ref),p=h.map(_=>_.presence_ref),g=u.filter(_=>p.indexOf(_.presence_ref)<0),v=h.filter(_=>f.indexOf(_.presence_ref)<0);g.length>0&&(a[c]=g),v.length>0&&(l[c]=v)}else a[c]=u}),this.syncDiff(o,{joins:a,leaves:l},n,s)}static syncDiff(e,r,n,s){const{joins:o,leaves:i}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(o,(a,l)=>{var c;const u=(c=e[a])!==null&&c!==void 0?c:[];if(e[a]=this.cloneDeep(l),u.length>0){const h=e[a].map(p=>p.presence_ref),f=u.filter(p=>h.indexOf(p.presence_ref)<0);e[a].unshift(...f)}n(a,u,l)}),this.map(i,(a,l)=>{let c=e[a];if(!c)return;const u=l.map(h=>h.presence_ref);c=c.filter(h=>u.indexOf(h.presence_ref)<0),e[a]=c,s(a,c,l),c.length===0&&delete e[a]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(n=>r(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,n)=>{const s=e[n];return"metas"in s?r[n]=s.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):r[n]=s,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Ud;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Ud||(Ud={}));var qs;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(qs||(qs={}));var pr;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(pr||(pr={}));class Nc{constructor(e,r={config:{}},n){var s,o;if(this.topic=e,this.params=r,this.socket=n,this.bindings={},this.state=tt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Ma(this,Pt.join,this.params,this.timeout),this.rejoinTimer=new z0(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=tt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=tt.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=tt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=tt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=tt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Pt.reply,{},(i,a)=>{this._trigger(this._replyEventName(a),i)}),this.presence=new Vs(this),this.broadcastEndpointURL=K0(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((o=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||o===void 0)&&o.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,r=this.timeout){var n,s,o;if(this.socket.isConnected()||this.socket.connect(),this.state==tt.closed){const{config:{broadcast:i,presence:a,private:l}}=this.params,c=(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(p=>p.filter))!==null&&s!==void 0?s:[],u=!!this.bindings[qs.PRESENCE]&&this.bindings[qs.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,h={},f={broadcast:i,presence:Object.assign(Object.assign({},a),{enabled:u}),postgres_changes:c,private:l};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(p=>e==null?void 0:e(pr.CHANNEL_ERROR,p)),this._onClose(()=>e==null?void 0:e(pr.CLOSED)),this.updateJoinPayload(Object.assign({config:f},h)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:p})=>{var g;if(this.socket.setAuth(),p===void 0){e==null||e(pr.SUBSCRIBED);return}else{const v=this.bindings.postgres_changes,_=(g=v==null?void 0:v.length)!==null&&g!==void 0?g:0,T=[];for(let k=0;k<_;k++){const E=v[k],{filter:{event:C,schema:$,table:R,filter:S}}=E,O=p&&p[k];if(O&&O.event===C&&O.schema===$&&O.table===R&&O.filter===S)T.push(Object.assign(Object.assign({},E),{id:O.id}));else{this.unsubscribe(),this.state=tt.errored,e==null||e(pr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=T,e&&e(pr.SUBSCRIBED);return}}).receive("error",p=>{this.state=tt.errored,e==null||e(pr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(pr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,n){return this.state===tt.joined&&e===qs.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,r,n)}async httpSend(e,r,n={}){var s;const o=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(r==null)return Promise.reject("Payload is required for httpSend()");const i={method:"POST",headers:{Authorization:o,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:r,private:this.private}]})},a=await this._fetchWithTimeout(this.broadcastEndpointURL,i,(s=n.timeout)!==null&&s!==void 0?s:this.timeout);if(a.status===202)return{success:!0};let l=a.statusText;try{const c=await a.json();l=c.error||c.message||l}catch{}return Promise.reject(new Error(l))}async send(e,r={}){var n,s;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:o,payload:i}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:i,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=c.body)===null||s===void 0?void 0:s.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var i,a,l;const c=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(i=this.params)===null||i===void 0?void 0:i.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&o("ok"),c.receive("ok",()=>o("ok")),c.receive("error",()=>o("error")),c.receive("timeout",()=>o("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=tt.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Pt.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new Ma(this,Pt.leave,{},e),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=tt.closed,this.bindings={}}async _fetchWithTimeout(e,r,n){const s=new AbortController,o=setTimeout(()=>s.abort(),n),i=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(o),i}_push(e,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Ma(this,e,r,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>qx){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(e,r,n){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,n){var s,o;const i=e.toLocaleLowerCase(),{close:a,error:l,leave:c,join:u}=Pt;if(n&&[a,l,c,u].indexOf(i)>=0&&n!==this._joinRef())return;let f=this._onMessage(i,r,n);if(r&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(i)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(p=>{var g,v,_;return((g=p.filter)===null||g===void 0?void 0:g.event)==="*"||((_=(v=p.filter)===null||v===void 0?void 0:v.event)===null||_===void 0?void 0:_.toLocaleLowerCase())===i}).map(p=>p.callback(f,n)):(o=this.bindings[i])===null||o===void 0||o.filter(p=>{var g,v,_,T,k,E;if(["broadcast","presence","postgres_changes"].includes(i))if("id"in p){const C=p.id,$=(g=p.filter)===null||g===void 0?void 0:g.event;return C&&((v=r.ids)===null||v===void 0?void 0:v.includes(C))&&($==="*"||($==null?void 0:$.toLocaleLowerCase())===((_=r.data)===null||_===void 0?void 0:_.type.toLocaleLowerCase()))}else{const C=(k=(T=p==null?void 0:p.filter)===null||T===void 0?void 0:T.event)===null||k===void 0?void 0:k.toLocaleLowerCase();return C==="*"||C===((E=r==null?void 0:r.event)===null||E===void 0?void 0:E.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===i}).map(p=>{if(typeof f=="object"&&"ids"in f){const g=f.data,{schema:v,table:_,commit_timestamp:T,type:k,errors:E}=g;f=Object.assign(Object.assign({},{schema:v,table:_,commit_timestamp:T,eventType:k,new:{},old:{},errors:E}),this._getPayloadRecords(g))}p.callback(f,n)})}_isClosed(){return this.state===tt.closed}_isJoined(){return this.state===tt.joined}_isJoining(){return this.state===tt.joining}_isLeaving(){return this.state===tt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,n){const s=e.toLocaleLowerCase(),o={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(o):this.bindings[s]=[o],this}_off(e,r){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(s=>{var o;return!(((o=s.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===n&&Nc.isEqual(s.filter,r))})),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const n in e)if(e[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Pt.close,{},e)}_onError(e){this._on(Pt.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=tt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=jd(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=jd(e.columns,e.old_record)),r}}const ja=()=>{},Bo={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Qx=[1e3,2e3,5e3,1e4],Zx=1e4,e2=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class t2{constructor(e,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Al,this.transport=null,this.heartbeatIntervalMs=Bo.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=ja,this.ref=0,this.reconnectTimer=null,this.vsn=Md,this.logger=ja,this.conn=null,this.sendBuffer=[],this.serializer=new zx,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>s?(...o)=>s(...o):(...o)=>fetch(...o),!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${e}/${Il.websocket}`,this.httpEndpoint=K0(e),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Ux.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const r=e.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,r,n){this.logger(e,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case vn.connecting:return yn.Connecting;case vn.open:return yn.Open;case vn.closing:return yn.Closing;default:return yn.Closed}}isConnected(){return this.connectionState()===yn.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,r={config:{}}){const n=`realtime:${e}`,s=this.getChannels().find(o=>o.topic===n);if(s)return s;{const o=new Nc(`realtime:${e}`,r,this);return this.channels.push(o),o}}push(e){const{topic:r,event:n,payload:s,ref:o}=e,i=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${r} ${n} (${o})`,s),this.isConnected()?i():this.sendBuffer.push(i)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(Vx,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Bo.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(c){this.log("error","error in heartbeat callback",c)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:s,payload:o,ref:i}=r,a=i?`(${i})`:"",l=o.status||"";this.log("receive",`${l} ${n} ${s} ${a}`.trim(),o),this.channels.filter(c=>c._isMember(n)).forEach(c=>c._trigger(s,o,i)),this._triggerStateCallbacks("message",r)})}_clearTimer(e){var r;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){if(this.conn){if(this.conn.readyState===vn.open||this.conn.readyState===vn.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var r;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Pt.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const n=e.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${e}${n}${s}`}_workerObjectUrl(e){let r;if(e)r=e;else{const n=new Blob([e2],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(e,r=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(e=null){let r;e?r=e:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const s={access_token:r,version:Fx};r&&n.updateJoinPayload(s),n.joinedOnce&&n._isJoined()&&n._push(Pt.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${e}`,r)})}_triggerStateCallbacks(e,r){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(r)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(n){this.log("error",`error triggering ${e} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new z0(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Bo.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var r,n,s,o,i,a,l,c,u,h,f,p;switch(this.transport=(r=e==null?void 0:e.transport)!==null&&r!==void 0?r:null,this.timeout=(n=e==null?void 0:e.timeout)!==null&&n!==void 0?n:Al,this.heartbeatIntervalMs=(s=e==null?void 0:e.heartbeatIntervalMs)!==null&&s!==void 0?s:Bo.HEARTBEAT_INTERVAL,this.worker=(o=e==null?void 0:e.worker)!==null&&o!==void 0?o:!1,this.accessToken=(i=e==null?void 0:e.accessToken)!==null&&i!==void 0?i:null,this.heartbeatCallback=(a=e==null?void 0:e.heartbeatCallback)!==null&&a!==void 0?a:ja,this.vsn=(l=e==null?void 0:e.vsn)!==null&&l!==void 0?l:Md,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=e==null?void 0:e.reconnectAfterMs)!==null&&c!==void 0?c:g=>Qx[g-1]||Zx,this.vsn){case q0:this.encode=(u=e==null?void 0:e.encode)!==null&&u!==void 0?u:(g,v)=>v(JSON.stringify(g)),this.decode=(h=e==null?void 0:e.decode)!==null&&h!==void 0?h:(g,v)=>v(JSON.parse(g));break;case Hx:this.encode=(f=e==null?void 0:e.encode)!==null&&f!==void 0?f:this.serializer.encode.bind(this.serializer),this.decode=(p=e==null?void 0:e.decode)!==null&&p!==void 0?p:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class Lc extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function We(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class r2 extends Lc{constructor(e,r,n){super(e),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Ol extends Lc{constructor(e,r){super(e),this.name="StorageUnknownError",this.originalError=r}}const Mc=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),n2=()=>Response,Pl=t=>{if(Array.isArray(t))return t.map(r=>Pl(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));e[s]=Pl(n)}),e},s2=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Da=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},o2=(t,e,r)=>ce(void 0,void 0,void 0,function*(){const n=yield n2();t instanceof n&&!(r!=null&&r.noResolveJson)?t.json().then(s=>{const o=t.status||500,i=(s==null?void 0:s.statusCode)||o+"";e(new r2(Da(s),o,i))}).catch(s=>{e(new Ol(Da(s),s))}):e(new Ol(Da(t),t))}),i2=(t,e,r,n)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!n?s:(s2(n)?(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(n)):s.body=n,e!=null&&e.duplex&&(s.duplex=e.duplex),Object.assign(Object.assign({},s),r))};function Eo(t,e,r,n,s,o){return ce(this,void 0,void 0,function*(){return new Promise((i,a)=>{t(r,i2(e,n,s,o)).then(l=>{if(!l.ok)throw l;return n!=null&&n.noResolveJson?l:l.json()}).then(l=>i(l)).catch(l=>o2(l,a,n))})})}function oo(t,e,r,n){return ce(this,void 0,void 0,function*(){return Eo(t,"GET",e,r,n)})}function Ht(t,e,r,n,s){return ce(this,void 0,void 0,function*(){return Eo(t,"POST",e,n,s,r)})}function $l(t,e,r,n,s){return ce(this,void 0,void 0,function*(){return Eo(t,"PUT",e,n,s,r)})}function a2(t,e,r,n){return ce(this,void 0,void 0,function*(){return Eo(t,"HEAD",e,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function jc(t,e,r,n,s){return ce(this,void 0,void 0,function*(){return Eo(t,"DELETE",e,n,s,r)})}class l2{constructor(e,r){this.downloadFn=e,this.shouldThrowOnError=r}then(e,r){return this.execute().then(e,r)}execute(){return ce(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(We(e))return{data:null,error:e};throw e}})}}var G0;class c2{constructor(e,r){this.downloadFn=e,this.shouldThrowOnError=r,this[G0]="BlobDownloadBuilder",this.promise=null}asStream(){return new l2(this.downloadFn,this.shouldThrowOnError)}then(e,r){return this.getPromise().then(e,r)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return ce(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(We(e))return{data:null,error:e};throw e}})}}G0=Symbol.toStringTag;const u2={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Bd={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class d2{constructor(e,r={},n,s){this.shouldThrowOnError=!1,this.url=e,this.headers=r,this.bucketId=n,this.fetch=Mc(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,r,n,s){return ce(this,void 0,void 0,function*(){try{let o;const i=Object.assign(Object.assign({},Bd),s);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(i.upsert)});const l=i.metadata;typeof Blob<"u"&&n instanceof Blob?(o=new FormData,o.append("cacheControl",i.cacheControl),l&&o.append("metadata",this.encodeMetadata(l)),o.append("",n)):typeof FormData<"u"&&n instanceof FormData?(o=n,o.has("cacheControl")||o.append("cacheControl",i.cacheControl),l&&!o.has("metadata")&&o.append("metadata",this.encodeMetadata(l))):(o=n,a["cache-control"]=`max-age=${i.cacheControl}`,a["content-type"]=i.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l))),(typeof ReadableStream<"u"&&o instanceof ReadableStream||o&&typeof o=="object"&&"pipe"in o&&typeof o.pipe=="function")&&!i.duplex&&(i.duplex="half")),s!=null&&s.headers&&(a=Object.assign(Object.assign({},a),s.headers));const c=this._removeEmptyFolders(r),u=this._getFinalPath(c),h=yield(e=="PUT"?$l:Ht)(this.fetch,`${this.url}/object/${u}`,o,Object.assign({headers:a},i!=null&&i.duplex?{duplex:i.duplex}:{}));return{data:{path:c,id:h.Id,fullPath:h.Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(We(o))return{data:null,error:o};throw o}})}upload(e,r,n){return ce(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,r,n)})}uploadToSignedUrl(e,r,n,s){return ce(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(e),i=this._getFinalPath(o),a=new URL(this.url+`/object/upload/sign/${i}`);a.searchParams.set("token",r);try{let l;const c=Object.assign({upsert:Bd.upsert},s),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",c.cacheControl)):(l=n,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType);const h=yield $l(this.fetch,a.toString(),l,{headers:u});return{data:{path:o,fullPath:h.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(We(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,r){return ce(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const s=Object.assign({},this.headers);r!=null&&r.upsert&&(s["x-upsert"]="true");const o=yield Ht(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),i=new URL(this.url+o.url),a=i.searchParams.get("token");if(!a)throw new Lc("No token returned by API");return{data:{signedUrl:i.toString(),path:e,token:a},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(We(n))return{data:null,error:n};throw n}})}update(e,r,n){return ce(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,r,n)})}move(e,r,n){return ce(this,void 0,void 0,function*(){try{return{data:yield Ht(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(We(s))return{data:null,error:s};throw s}})}copy(e,r,n){return ce(this,void 0,void 0,function*(){try{return{data:{path:(yield Ht(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(We(s))return{data:null,error:s};throw s}})}createSignedUrl(e,r,n){return ce(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),o=yield Ht(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${i}`)},{data:o,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(We(s))return{data:null,error:s};throw s}})}createSignedUrls(e,r,n){return ce(this,void 0,void 0,function*(){try{const s=yield Ht(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:e},{headers:this.headers}),o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(i=>Object.assign(Object.assign({},i),{signedUrl:i.signedURL?encodeURI(`${this.url}${i.signedURL}${o}`):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(We(s))return{data:null,error:s};throw s}})}download(e,r){const s=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),i=o?`?${o}`:"",a=this._getFinalPath(e),l=()=>oo(this.fetch,`${this.url}/${s}/${a}${i}`,{headers:this.headers,noResolveJson:!0});return new c2(l,this.shouldThrowOnError)}info(e){return ce(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{const n=yield oo(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Pl(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(We(n))return{data:null,error:n};throw n}})}exists(e){return ce(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{return yield a2(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(We(n)&&n instanceof Ol){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,r){const n=this._getFinalPath(e),s=[],o=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";o!==""&&s.push(o);const a=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});l!==""&&s.push(l);let c=s.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${n}${c}`)}}}remove(e){return ce(this,void 0,void 0,function*(){try{return{data:yield jc(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(We(r))return{data:null,error:r};throw r}})}list(e,r,n){return ce(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},u2),r),{prefix:e||""});return{data:yield Ht(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(We(s))return{data:null,error:s};throw s}})}listV2(e,r){return ce(this,void 0,void 0,function*(){try{const n=Object.assign({},e);return{data:yield Ht(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(We(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const r=[];return e.width&&r.push(`width=${e.width}`),e.height&&r.push(`height=${e.height}`),e.resize&&r.push(`resize=${e.resize}`),e.format&&r.push(`format=${e.format}`),e.quality&&r.push(`quality=${e.quality}`),r.join("&")}}const J0="2.81.1",X0={"X-Client-Info":`storage-js/${J0}`};class h2{constructor(e,r={},n,s){this.shouldThrowOnError=!1;const o=new URL(e);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},X0),r),this.fetch=Mc(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return ce(this,void 0,void 0,function*(){try{const r=this.listBucketOptionsToQueryString(e);return{data:yield oo(this.fetch,`${this.url}/bucket${r}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(We(r))return{data:null,error:r};throw r}})}getBucket(e){return ce(this,void 0,void 0,function*(){try{return{data:yield oo(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(We(r))return{data:null,error:r};throw r}})}createBucket(e){return ce(this,arguments,void 0,function*(r,n={public:!1}){try{return{data:yield Ht(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(We(s))return{data:null,error:s};throw s}})}updateBucket(e,r){return ce(this,void 0,void 0,function*(){try{return{data:yield $l(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(We(n))return{data:null,error:n};throw n}})}emptyBucket(e){return ce(this,void 0,void 0,function*(){try{return{data:yield Ht(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(We(r))return{data:null,error:r};throw r}})}deleteBucket(e){return ce(this,void 0,void 0,function*(){try{return{data:yield jc(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(We(r))return{data:null,error:r};throw r}})}listBucketOptionsToQueryString(e){const r={};return e&&("limit"in e&&(r.limit=String(e.limit)),"offset"in e&&(r.offset=String(e.offset)),e.search&&(r.search=e.search),e.sortColumn&&(r.sortColumn=e.sortColumn),e.sortOrder&&(r.sortOrder=e.sortOrder)),Object.keys(r).length>0?"?"+new URLSearchParams(r).toString():""}}class f2{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},X0),r),this.fetch=Mc(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return ce(this,void 0,void 0,function*(){try{return{data:yield Ht(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(We(r))return{data:null,error:r};throw r}})}listBuckets(e){return ce(this,void 0,void 0,function*(){try{const r=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&r.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&r.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&r.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&r.set("sortOrder",e.sortOrder),e!=null&&e.search&&r.set("search",e.search);const n=r.toString(),s=n?`${this.url}/bucket?${n}`:`${this.url}/bucket`;return{data:yield oo(this.fetch,s,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(We(r))return{data:null,error:r};throw r}})}deleteBucket(e){return ce(this,void 0,void 0,function*(){try{return{data:yield jc(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(We(r))return{data:null,error:r};throw r}})}}const Dc={"X-Client-Info":`storage-js/${J0}`,"Content-Type":"application/json"};class Y0 extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Ct(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}class Ua extends Y0{constructor(e,r,n){super(e),this.name="StorageVectorsApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class p2 extends Y0{constructor(e,r){super(e),this.name="StorageVectorsUnknownError",this.originalError=r}}var Fd;(function(t){t.InternalError="InternalError",t.S3VectorConflictException="S3VectorConflictException",t.S3VectorNotFoundException="S3VectorNotFoundException",t.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",t.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",t.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(Fd||(Fd={}));const Uc=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),g2=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Hd=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),m2=(t,e,r)=>ce(void 0,void 0,void 0,function*(){if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(r!=null&&r.noResolveJson)){const s=t.status||500,o=t;if(typeof o.json=="function")o.json().then(i=>{const a=(i==null?void 0:i.statusCode)||(i==null?void 0:i.code)||s+"";e(new Ua(Hd(i),s,a))}).catch(()=>{const i=s+"",a=o.statusText||`HTTP ${s} error`;e(new Ua(a,s,i))});else{const i=s+"",a=o.statusText||`HTTP ${s} error`;e(new Ua(a,s,i))}}else e(new p2(Hd(t),t))}),v2=(t,e,r,n)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return n?(g2(n)?(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(n)):s.body=n,Object.assign(Object.assign({},s),r)):s};function y2(t,e,r,n,s,o){return ce(this,void 0,void 0,function*(){return new Promise((i,a)=>{t(r,v2(e,n,s,o)).then(l=>{if(!l.ok)throw l;if(n!=null&&n.noResolveJson)return l;const c=l.headers.get("content-type");return!c||!c.includes("application/json")?{}:l.json()}).then(l=>i(l)).catch(l=>m2(l,a,n))})})}function At(t,e,r,n,s){return ce(this,void 0,void 0,function*(){return y2(t,"POST",e,n,s,r)})}class b2{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Dc),r),this.fetch=Uc(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return ce(this,void 0,void 0,function*(){try{return{data:(yield At(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ct(r))return{data:null,error:r};throw r}})}getIndex(e,r){return ce(this,void 0,void 0,function*(){try{return{data:yield At(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:r},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ct(n))return{data:null,error:n};throw n}})}listIndexes(e){return ce(this,void 0,void 0,function*(){try{return{data:yield At(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ct(r))return{data:null,error:r};throw r}})}deleteIndex(e,r){return ce(this,void 0,void 0,function*(){try{return{data:(yield At(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:r},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ct(n))return{data:null,error:n};throw n}})}}class w2{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Dc),r),this.fetch=Uc(n)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return ce(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield At(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ct(r))return{data:null,error:r};throw r}})}getVectors(e){return ce(this,void 0,void 0,function*(){try{return{data:yield At(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ct(r))return{data:null,error:r};throw r}})}listVectors(e){return ce(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield At(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ct(r))return{data:null,error:r};throw r}})}queryVectors(e){return ce(this,void 0,void 0,function*(){try{return{data:yield At(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ct(r))return{data:null,error:r};throw r}})}deleteVectors(e){return ce(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield At(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ct(r))return{data:null,error:r};throw r}})}}class _2{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Dc),r),this.fetch=Uc(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return ce(this,void 0,void 0,function*(){try{return{data:(yield At(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ct(r))return{data:null,error:r};throw r}})}getBucket(e){return ce(this,void 0,void 0,function*(){try{return{data:yield At(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ct(r))return{data:null,error:r};throw r}})}listBuckets(){return ce(this,arguments,void 0,function*(e={}){try{return{data:yield At(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ct(r))return{data:null,error:r};throw r}})}deleteBucket(e){return ce(this,void 0,void 0,function*(){try{return{data:(yield At(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ct(r))return{data:null,error:r};throw r}})}}class x2 extends _2{constructor(e,r={}){super(e,r.headers||{},r.fetch)}from(e){return new E2(this.url,this.headers,e,this.fetch)}}class E2 extends b2{constructor(e,r,n,s){super(e,r,s),this.vectorBucketName=n}createIndex(e){const r=Object.create(null,{createIndex:{get:()=>super.createIndex}});return ce(this,void 0,void 0,function*(){return r.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return ce(this,arguments,void 0,function*(r={}){return e.listIndexes.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const r=Object.create(null,{getIndex:{get:()=>super.getIndex}});return ce(this,void 0,void 0,function*(){return r.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const r=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return ce(this,void 0,void 0,function*(){return r.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new k2(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class k2 extends w2{constructor(e,r,n,s,o){super(e,r,o),this.vectorBucketName=n,this.indexName=s}putVectors(e){const r=Object.create(null,{putVectors:{get:()=>super.putVectors}});return ce(this,void 0,void 0,function*(){return r.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const r=Object.create(null,{getVectors:{get:()=>super.getVectors}});return ce(this,void 0,void 0,function*(){return r.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return ce(this,arguments,void 0,function*(r={}){return e.listVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const r=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return ce(this,void 0,void 0,function*(){return r.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const r=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return ce(this,void 0,void 0,function*(){return r.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class S2 extends h2{constructor(e,r={},n,s){super(e,r,n,s)}from(e){return new d2(this.url,this.headers,e,this.fetch)}get vectors(){return new x2(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new f2(this.url+"/iceberg",this.headers,this.fetch)}}const T2="2.81.1";let Os="";typeof Deno<"u"?Os="deno":typeof document<"u"?Os="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Os="react-native":Os="node";const C2={"X-Client-Info":`supabase-js-${Os}/${T2}`},A2={headers:C2},I2={schema:"public"},R2={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},O2={},P2=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),$2=()=>Headers,N2=(t,e,r)=>{const n=P2(r),s=$2();return async(o,i)=>{var a;const l=(a=await e())!==null&&a!==void 0?a:t;let c=new s(i==null?void 0:i.headers);return c.has("apikey")||c.set("apikey",t),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),n(o,Object.assign(Object.assign({},i),{headers:c}))}};function L2(t){return t.endsWith("/")?t:t+"/"}function M2(t,e){var r,n;const{db:s,auth:o,realtime:i,global:a}=t,{db:l,auth:c,realtime:u,global:h}=e,f={db:Object.assign(Object.assign({},l),s),auth:Object.assign(Object.assign({},c),o),realtime:Object.assign(Object.assign({},u),i),storage:{},global:Object.assign(Object.assign(Object.assign({},h),a),{headers:Object.assign(Object.assign({},(r=h==null?void 0:h.headers)!==null&&r!==void 0?r:{}),(n=a==null?void 0:a.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return t.accessToken?f.accessToken=t.accessToken:delete f.accessToken,f}function j2(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(L2(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Q0="2.81.1",zn=30*1e3,Nl=3,Ba=Nl*zn,D2="http://localhost:9999",U2="supabase.auth.token",B2={"X-Client-Info":`gotrue-js/${Q0}`},Ll="X-Supabase-Api-Version",Z0={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},F2=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,H2=10*60*1e3;class io extends Error{constructor(e,r,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function he(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class V2 extends io{constructor(e,r,n){super(e,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function q2(t){return he(t)&&t.name==="AuthApiError"}class bn extends io{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class nn extends io{constructor(e,r,n,s){super(e,n,s),this.name=r,this.status=n}}class Bt extends nn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function z2(t){return he(t)&&t.name==="AuthSessionMissingError"}class jn extends nn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Fo extends nn{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Ho extends nn{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function W2(t){return he(t)&&t.name==="AuthImplicitGrantRedirectError"}class Vd extends nn{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Ml extends nn{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function Fa(t){return he(t)&&t.name==="AuthRetryableFetchError"}class qd extends nn{constructor(e,r,n){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class jl extends nn{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Ai="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),zd=` 	
\r=`.split(""),K2=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<zd.length;e+=1)t[zd[e].charCodeAt(0)]=-2;for(let e=0;e<Ai.length;e+=1)t[Ai[e].charCodeAt(0)]=e;return t})();function Wd(t,e,r){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(Ai[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(Ai[n]),e.queuedBits-=6}}function eg(t,e,r){const n=K2[t];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Kd(t){const e=[],r=i=>{e.push(String.fromCodePoint(i))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},o=i=>{X2(i,n,r)};for(let i=0;i<t.length;i+=1)eg(t.charCodeAt(i),s,o);return e.join("")}function G2(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function J2(t,e){for(let r=0;r<t.length;r+=1){let n=t.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(t.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}G2(n,e)}}function X2(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let n=1;n<6;n+=1)if((t>>7-n&1)===0){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function rs(t){const e=[],r={queue:0,queuedBits:0},n=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)eg(t.charCodeAt(s),r,n);return new Uint8Array(e)}function Y2(t){const e=[];return J2(t,r=>e.push(r)),new Uint8Array(e)}function xn(t){const e=[],r={queue:0,queuedBits:0},n=s=>{e.push(s)};return t.forEach(s=>Wd(s,r,n)),Wd(null,r,n),e.join("")}function Q2(t){return Math.round(Date.now()/1e3)+t}function Z2(){return Symbol("auth-callback")}const it=()=>typeof window<"u"&&typeof document<"u",un={tested:!1,writable:!1},tg=()=>{if(!it())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(un.tested)return un.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),un.tested=!0,un.writable=!0}catch{un.tested=!0,un.writable=!1}return un.writable};function e4(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,o)=>{e[o]=s})}catch{}return r.searchParams.forEach((n,s)=>{e[s]=n}),e}const rg=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),t4=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Wn=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},dn=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Or=async(t,e)=>{await t.removeItem(e)};class ea{constructor(){this.promise=new ea.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}ea.promiseConstructor=Promise;function Ha(t){const e=t.split(".");if(e.length!==3)throw new jl("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!F2.test(e[n]))throw new jl("JWT not in base64url format");return{header:JSON.parse(Kd(e[0])),payload:JSON.parse(Kd(e[1])),signature:rs(e[2]),raw:{header:e[0],payload:e[1]}}}async function r4(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function n4(t,e){return new Promise((n,s)=>{(async()=>{for(let o=0;o<1/0;o++)try{const i=await t(o);if(!e(o,null,i)){n(i);return}}catch(i){if(!e(o,i)){s(i);return}}})()})}function s4(t){return("0"+t.toString(16)).substr(-2)}function o4(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let o=0;o<56;o++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(e),Array.from(e,s4).join("")}async function i4(t){const r=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(o=>String.fromCharCode(o)).join("")}async function a4(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await i4(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Dn(t,e,r=!1){const n=o4();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await Wn(t,`${e}-code-verifier`,s);const o=await a4(n);return[o,n===o?"plain":"s256"]}const l4=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function c4(t){const e=t.headers.get(Ll);if(!e||!e.match(l4))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function u4(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function d4(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const h4=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Un(t){if(!h4.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Va(){const t={};return new Proxy(t,{get:(e,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function f4(t,e){return new Proxy(t,{get:(r,n,s)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const o=n.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)"||o==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,s)}return!e.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(r,n,s)}})}function Gd(t){return JSON.parse(JSON.stringify(t))}const gn=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),p4=[502,503,504];async function Jd(t){var e;if(!t4(t))throw new Ml(gn(t),0);if(p4.includes(t.status))throw new Ml(gn(t),t.status);let r;try{r=await t.json()}catch(o){throw new bn(gn(o),o)}let n;const s=c4(t);if(s&&s.getTime()>=Z0["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new qd(gn(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new Bt}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((o,i)=>o&&typeof i=="string",!0))throw new qd(gn(r),t.status,r.weak_password.reasons);throw new V2(gn(r),t.status||500,n)}const g4=(t,e,r,n)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function _e(t,e,r,n){var s;const o=Object.assign({},n==null?void 0:n.headers);o[Ll]||(o[Ll]=Z0["2024-01-01"].name),n!=null&&n.jwt&&(o.Authorization=`Bearer ${n.jwt}`);const i=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(i.redirect_to=n.redirectTo);const a=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",l=await m4(t,e,r+a,{headers:o,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(l):{data:Object.assign({},l),error:null}}async function m4(t,e,r,n,s,o){const i=g4(e,n,s,o);let a;try{a=await t(r,Object.assign({},i))}catch(l){throw console.error(l),new Ml(gn(l),0)}if(a.ok||await Jd(a),n!=null&&n.noResolveJson)return a;try{return await a.json()}catch(l){await Jd(l)}}function Ft(t){var e;let r=null;b4(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=Q2(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:n},error:null}}function Xd(t){const e=Ft(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Hr(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function v4(t){return{data:t,error:null}}function y4(t){const{action_link:e,email_otp:r,hashed_token:n,redirect_to:s,verification_type:o}=t,i=Cr(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:r,hashed_token:n,redirect_to:s,verification_type:o},l=Object.assign({},i);return{data:{properties:a,user:l},error:null}}function Yd(t){return t}function b4(t){return t.access_token&&t.refresh_token&&t.expires_in}const qa=["global","local","others"];class w4{constructor({url:e="",headers:r={},fetch:n}){this.url=e,this.headers=r,this.fetch=rg(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,r=qa[0]){if(qa.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${qa.join(", ")}`);try{return await _e(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(he(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,r={}){try{return await _e(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Hr})}catch(n){if(he(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:r}=e,n=Cr(e,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await _e(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:y4,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(he(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await _e(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Hr})}catch(r){if(he(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,n,s,o,i,a,l;try{const c={nextPage:null,lastPage:0,total:0},u=await _e(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(o=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&o!==void 0?o:""},xform:Yd});if(u.error)throw u.error;const h=await u.json(),f=(i=u.headers.get("x-total-count"))!==null&&i!==void 0?i:0,p=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(g=>{const v=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(g.split(";")[1].split("=")[1]);c[`${_}Page`]=v}),c.total=parseInt(f)),{data:Object.assign(Object.assign({},h),c),error:null}}catch(c){if(he(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){Un(e);try{return await _e(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Hr})}catch(r){if(he(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){Un(e);try{return await _e(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:Hr})}catch(n){if(he(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,r=!1){Un(e);try{return await _e(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:Hr})}catch(n){if(he(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){Un(e.userId);try{const{data:r,error:n}=await _e(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(he(r))return{data:null,error:r};throw r}}async _deleteFactor(e){Un(e.userId),Un(e.id);try{return{data:await _e(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(he(r))return{data:null,error:r};throw r}}async _listOAuthClients(e){var r,n,s,o,i,a,l;try{const c={nextPage:null,lastPage:0,total:0},u=await _e(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(o=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&o!==void 0?o:""},xform:Yd});if(u.error)throw u.error;const h=await u.json(),f=(i=u.headers.get("x-total-count"))!==null&&i!==void 0?i:0,p=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(g=>{const v=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(g.split(";")[1].split("=")[1]);c[`${_}Page`]=v}),c.total=parseInt(f)),{data:Object.assign(Object.assign({},h),c),error:null}}catch(c){if(he(c))return{data:{clients:[]},error:c};throw c}}async _createOAuthClient(e){try{return await _e(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(he(r))return{data:null,error:r};throw r}}async _getOAuthClient(e){try{return await _e(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(he(r))return{data:null,error:r};throw r}}async _updateOAuthClient(e,r){try{return await _e(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(he(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(e){try{return await _e(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(he(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(e){try{return await _e(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(he(r))return{data:null,error:r};throw r}}}function Qd(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}const Bn={debug:!!(globalThis&&tg()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class ng extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class _4 extends ng{}async function x4(t,e,r){Bn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),Bn.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){Bn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await r()}finally{Bn.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw Bn.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new _4(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Bn.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function E4(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function sg(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function k4(t){return parseInt(t,16)}function S4(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,n=>n.toString(16).padStart(2,"0")).join("")}function T4(t){var e;const{chainId:r,domain:n,expirationTime:s,issuedAt:o=new Date,nonce:i,notBefore:a,requestId:l,resources:c,scheme:u,uri:h,version:f}=t;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(i&&i.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${i}`);if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(f!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${f}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const p=sg(t.address),g=u?`${u}://${n}`:n,v=t.statement?`${t.statement}
`:"",_=`${g} wants you to sign in with your Ethereum account:
${p}

${v}`;let T=`URI: ${h}
Version: ${f}
Chain ID: ${r}${i?`
Nonce: ${i}`:""}
Issued At: ${o.toISOString()}`;if(s&&(T+=`
Expiration Time: ${s.toISOString()}`),a&&(T+=`
Not Before: ${a.toISOString()}`),l&&(T+=`
Request ID: ${l}`),c){let k=`
Resources:`;for(const E of c){if(!E||typeof E!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${E}`);k+=`
- ${E}`}T+=k}return`${_}
${T}`}class Qe extends Error{constructor({message:e,code:r,cause:n,name:s}){var o;super(e,{cause:n}),this.__isWebAuthnError=!0,this.name=(o=s??(n instanceof Error?n.name:void 0))!==null&&o!==void 0?o:"Unknown Error",this.code=r}}class Ii extends Qe{constructor(e,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:e}),this.name="WebAuthnUnknownError",this.originalError=r}}function C4({error:t,options:e}){var r,n,s;const{publicKey:o}=e;if(!o)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Qe({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((r=o.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new Qe({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((n=o.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new Qe({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((s=o.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new Qe({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new Qe({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new Qe({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return o.pubKeyCredParams.filter(a=>a.type==="public-key").length===0?new Qe({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new Qe({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const i=window.location.hostname;if(og(i)){if(o.rp.id!==i)return new Qe({message:`The RP ID "${o.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Qe({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new Qe({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new Qe({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Qe({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function A4({error:t,options:e}){const{publicKey:r}=e;if(!r)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Qe({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new Qe({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const n=window.location.hostname;if(og(n)){if(r.rpId!==n)return new Qe({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Qe({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new Qe({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Qe({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class I4{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const R4=new I4;function O4(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:r,excludeCredentials:n}=t,s=Cr(t,["challenge","user","excludeCredentials"]),o=rs(e).buffer,i=Object.assign(Object.assign({},r),{id:rs(r.id).buffer}),a=Object.assign(Object.assign({},s),{challenge:o,user:i});if(n&&n.length>0){a.excludeCredentials=new Array(n.length);for(let l=0;l<n.length;l++){const c=n[l];a.excludeCredentials[l]=Object.assign(Object.assign({},c),{id:rs(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return a}function P4(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:r}=t,n=Cr(t,["challenge","allowCredentials"]),s=rs(e).buffer,o=Object.assign(Object.assign({},n),{challenge:s});if(r&&r.length>0){o.allowCredentials=new Array(r.length);for(let i=0;i<r.length;i++){const a=r[i];o.allowCredentials[i]=Object.assign(Object.assign({},a),{id:rs(a.id).buffer,type:a.type||"public-key",transports:a.transports})}}return o}function $4(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t;return{id:t.id,rawId:t.id,response:{attestationObject:xn(new Uint8Array(t.response.attestationObject)),clientDataJSON:xn(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function N4(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t,n=t.getClientExtensionResults(),s=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:xn(new Uint8Array(s.authenticatorData)),clientDataJSON:xn(new Uint8Array(s.clientDataJSON)),signature:xn(new Uint8Array(s.signature)),userHandle:s.userHandle?xn(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function og(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function Zd(){var t,e;return!!(it()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function L4(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Ii("Browser returned unexpected credential type",e)}:{data:null,error:new Ii("Empty credential response",e)}}catch(e){return{data:null,error:C4({error:e,options:t})}}}async function M4(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Ii("Browser returned unexpected credential type",e)}:{data:null,error:new Ii("Empty credential response",e)}}catch(e){return{data:null,error:A4({error:e,options:t})}}}const j4={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},D4={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Ri(...t){const e=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),r=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),n={};for(const s of t)if(s)for(const o in s){const i=s[o];if(i!==void 0)if(Array.isArray(i))n[o]=i;else if(r(i))n[o]=i;else if(e(i)){const a=n[o];e(a)?n[o]=Ri(a,i):n[o]=Ri(i)}else n[o]=i}return n}function U4(t,e){return Ri(j4,t,e||{})}function B4(t,e){return Ri(D4,t,e||{})}class F4{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:r,friendlyName:n,signal:s},o){try{const{data:i,error:a}=await this.client.mfa.challenge({factorId:e,webauthn:r});if(!i)return{data:null,error:a};const l=s??R4.createNewAbortSignal();if(i.webauthn.type==="create"){const{user:c}=i.webauthn.credential_options.publicKey;c.name||(c.name=`${c.id}:${n}`),c.displayName||(c.displayName=c.name)}switch(i.webauthn.type){case"create":{const c=U4(i.webauthn.credential_options.publicKey,o==null?void 0:o.create),{data:u,error:h}=await L4({publicKey:c,signal:l});return u?{data:{factorId:e,challengeId:i.id,webauthn:{type:i.webauthn.type,credential_response:u}},error:null}:{data:null,error:h}}case"request":{const c=B4(i.webauthn.credential_options.publicKey,o==null?void 0:o.request),{data:u,error:h}=await M4(Object.assign(Object.assign({},i.webauthn.credential_options),{publicKey:c,signal:l}));return u?{data:{factorId:e,challengeId:i.id,webauthn:{type:i.webauthn.type,credential_response:u}},error:null}:{data:null,error:h}}}}catch(i){return he(i)?{data:null,error:i}:{data:null,error:new bn("Unexpected error in challenge",i)}}}async _verify({challengeId:e,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:e,webauthn:n})}async _authenticate({factorId:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},o){if(!r)return{data:null,error:new io("rpId is required for WebAuthn authentication")};try{if(!Zd())return{data:null,error:new bn("Browser does not support WebAuthn",null)};const{data:i,error:a}=await this.challenge({factorId:e,webauthn:{rpId:r,rpOrigins:n},signal:s},{request:o});if(!i)return{data:null,error:a};const{webauthn:l}=i;return this._verify({factorId:e,challengeId:i.challengeId,webauthn:{type:l.type,rpId:r,rpOrigins:n,credential_response:l.credential_response}})}catch(i){return he(i)?{data:null,error:i}:{data:null,error:new bn("Unexpected error in authenticate",i)}}}async _register({friendlyName:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},o){if(!r)return{data:null,error:new io("rpId is required for WebAuthn registration")};try{if(!Zd())return{data:null,error:new bn("Browser does not support WebAuthn",null)};const{data:i,error:a}=await this._enroll({friendlyName:e});if(!i)return await this.client.mfa.listFactors().then(u=>{var h;return(h=u.data)===null||h===void 0?void 0:h.all.find(f=>f.factor_type==="webauthn"&&f.friendly_name===e&&f.status!=="unverified")}).then(u=>u?this.client.mfa.unenroll({factorId:u==null?void 0:u.id}):void 0),{data:null,error:a};const{data:l,error:c}=await this._challenge({factorId:i.id,friendlyName:i.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:s},{create:o});return l?this._verify({factorId:i.id,challengeId:l.challengeId,webauthn:{rpId:r,rpOrigins:n,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:c}}catch(i){return he(i)?{data:null,error:i}:{data:null,error:new bn("Unexpected error in register",i)}}}}E4();const H4={url:D2,storageKey:U2,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:B2,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function eh(t,e,r){return await r()}const Fn={};class ao{get jwks(){var e,r;return(r=(e=Fn[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(e){Fn[this.storageKey]=Object.assign(Object.assign({},Fn[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,r;return(r=(e=Fn[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Fn[this.storageKey]=Object.assign(Object.assign({},Fn[this.storageKey]),{cachedAt:e})}constructor(e){var r,n,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const o=Object.assign(Object.assign({},H4),e);if(this.storageKey=o.storageKey,this.instanceID=(r=ao.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,ao.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.instanceID>0&&it()){const i=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(i),this.logDebugMessages&&console.trace(i)}if(this.persistSession=o.persistSession,this.autoRefreshToken=o.autoRefreshToken,this.admin=new w4({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=rg(o.fetch),this.lock=o.lock||eh,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,this.throwOnError=o.throwOnError,o.lock?this.lock=o.lock:it()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=x4:this.lock=eh,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new F4(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this)},this.persistSession?(o.storage?this.storage=o.storage:tg()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Qd(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=Qd(this.memoryStorage)),it()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Q0}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let r={},n="none";if(it()&&(r=e4(window.location.href),this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce")),it()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:o}=await this._getSessionFromURL(r,n);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),W2(o)){const l=(e=o.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:i,redirectType:a}=s;return this._debug("#_initialize()","detected session in URL",i,"redirect type",a),await this._saveSession(i),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return he(r)?this._returnResult({error:r}):this._returnResult({error:new bn("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,n,s;try{const o=await _e(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:Ft}),{data:i,error:a}=o;if(a||!i)return this._returnResult({data:{user:null,session:null},error:a});const l=i.session,c=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(o){if(he(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signUp(e){var r,n,s;try{let o;if("email"in e){const{email:u,password:h,options:f}=e;let p=null,g=null;this.flowType==="pkce"&&([p,g]=await Dn(this.storage,this.storageKey)),o=await _e(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:u,password:h,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:p,code_challenge_method:g},xform:Ft})}else if("phone"in e){const{phone:u,password:h,options:f}=e;o=await _e(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},channel:(s=f==null?void 0:f.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Ft})}else throw new Fo("You must provide either an email or phone number and a password");const{data:i,error:a}=o;if(a||!i)return this._returnResult({data:{user:null,session:null},error:a});const l=i.session,c=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(o){if(he(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithPassword(e){try{let r;if("email"in e){const{email:o,password:i,options:a}=e;r=await _e(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Xd})}else if("phone"in e){const{phone:o,password:i,options:a}=e;r=await _e(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Xd})}else throw new Fo("You must provide either an email or phone number and a password");const{data:n,error:s}=r;if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!n||!n.session||!n.user){const o=new jn;return this._returnResult({data:{user:null,session:null},error:o})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(he(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(e){var r,n,s,o;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:r}=e;switch(r){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(e){var r,n,s,o,i,a,l,c,u,h,f;let p,g;if("message"in e)p=e.message,g=e.signature;else{const{chain:v,wallet:_,statement:T,options:k}=e;let E;if(it())if(typeof _=="object")E=_;else{const m=window;if("ethereum"in m&&typeof m.ethereum=="object"&&"request"in m.ethereum&&typeof m.ethereum.request=="function")E=m.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof _!="object"||!(k!=null&&k.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");E=_}const C=new URL((r=k==null?void 0:k.url)!==null&&r!==void 0?r:window.location.href),$=await E.request({method:"eth_requestAccounts"}).then(m=>m).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!$||$.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const R=sg($[0]);let S=(n=k==null?void 0:k.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!S){const m=await E.request({method:"eth_chainId"});S=k4(m)}const O={domain:C.host,address:R,statement:T,uri:C.href,version:"1",chainId:S,nonce:(s=k==null?void 0:k.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(i=(o=k==null?void 0:k.signInWithEthereum)===null||o===void 0?void 0:o.issuedAt)!==null&&i!==void 0?i:new Date,expirationTime:(a=k==null?void 0:k.signInWithEthereum)===null||a===void 0?void 0:a.expirationTime,notBefore:(l=k==null?void 0:k.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(c=k==null?void 0:k.signInWithEthereum)===null||c===void 0?void 0:c.requestId,resources:(u=k==null?void 0:k.signInWithEthereum)===null||u===void 0?void 0:u.resources};p=T4(O),g=await E.request({method:"personal_sign",params:[S4(p),R]})}try{const{data:v,error:_}=await _e(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:p,signature:g},!((h=e.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(f=e.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:Ft});if(_)throw _;if(!v||!v.session||!v.user){const T=new jn;return this._returnResult({data:{user:null,session:null},error:T})}return v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),this._returnResult({data:Object.assign({},v),error:_})}catch(v){if(he(v))return this._returnResult({data:{user:null,session:null},error:v});throw v}}async signInWithSolana(e){var r,n,s,o,i,a,l,c,u,h,f,p;let g,v;if("message"in e)g=e.message,v=e.signature;else{const{chain:_,wallet:T,statement:k,options:E}=e;let C;if(it())if(typeof T=="object")C=T;else{const R=window;if("solana"in R&&typeof R.solana=="object"&&("signIn"in R.solana&&typeof R.solana.signIn=="function"||"signMessage"in R.solana&&typeof R.solana.signMessage=="function"))C=R.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof T!="object"||!(E!=null&&E.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");C=T}const $=new URL((r=E==null?void 0:E.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in C&&C.signIn){const R=await C.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},E==null?void 0:E.signInWithSolana),{version:"1",domain:$.host,uri:$.href}),k?{statement:k}:null));let S;if(Array.isArray(R)&&R[0]&&typeof R[0]=="object")S=R[0];else if(R&&typeof R=="object"&&"signedMessage"in R&&"signature"in R)S=R;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in S&&"signature"in S&&(typeof S.signedMessage=="string"||S.signedMessage instanceof Uint8Array)&&S.signature instanceof Uint8Array)g=typeof S.signedMessage=="string"?S.signedMessage:new TextDecoder().decode(S.signedMessage),v=S.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in C)||typeof C.signMessage!="function"||!("publicKey"in C)||typeof C!="object"||!C.publicKey||!("toBase58"in C.publicKey)||typeof C.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");g=[`${$.host} wants you to sign in with your Solana account:`,C.publicKey.toBase58(),...k?["",k,""]:[""],"Version: 1",`URI: ${$.href}`,`Issued At: ${(s=(n=E==null?void 0:E.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((o=E==null?void 0:E.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${E.signInWithSolana.notBefore}`]:[],...!((i=E==null?void 0:E.signInWithSolana)===null||i===void 0)&&i.expirationTime?[`Expiration Time: ${E.signInWithSolana.expirationTime}`]:[],...!((a=E==null?void 0:E.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${E.signInWithSolana.chainId}`]:[],...!((l=E==null?void 0:E.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${E.signInWithSolana.nonce}`]:[],...!((c=E==null?void 0:E.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${E.signInWithSolana.requestId}`]:[],...!((h=(u=E==null?void 0:E.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||h===void 0)&&h.length?["Resources",...E.signInWithSolana.resources.map(S=>`- ${S}`)]:[]].join(`
`);const R=await C.signMessage(new TextEncoder().encode(g),"utf8");if(!R||!(R instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");v=R}}try{const{data:_,error:T}=await _e(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:g,signature:xn(v)},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(p=e.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:Ft});if(T)throw T;if(!_||!_.session||!_.user){const k=new jn;return this._returnResult({data:{user:null,session:null},error:k})}return _.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),this._returnResult({data:Object.assign({},_),error:T})}catch(_){if(he(_))return this._returnResult({data:{user:null,session:null},error:_});throw _}}async _exchangeCodeForSession(e){const r=await dn(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{const{data:o,error:i}=await _e(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:Ft});if(await Or(this.storage,`${this.storageKey}-code-verifier`),i)throw i;if(!o||!o.session||!o.user){const a=new jn;return this._returnResult({data:{user:null,session:null,redirectType:null},error:a})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:Object.assign(Object.assign({},o),{redirectType:s??null}),error:i})}catch(o){if(he(o))return this._returnResult({data:{user:null,session:null,redirectType:null},error:o});throw o}}async signInWithIdToken(e){try{const{options:r,provider:n,token:s,access_token:o,nonce:i}=e,a=await _e(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:o,nonce:i,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Ft}),{data:l,error:c}=a;if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l||!l.session||!l.user){const u=new jn;return this._returnResult({data:{user:null,session:null},error:u})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:l,error:c})}catch(r){if(he(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(e){var r,n,s,o,i;try{if("email"in e){const{email:a,options:l}=e;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await Dn(this.storage,this.storageKey));const{error:h}=await _e(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(r=l==null?void 0:l.data)!==null&&r!==void 0?r:{},create_user:(n=l==null?void 0:l.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}if("phone"in e){const{phone:a,options:l}=e,{data:c,error:u}=await _e(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(o=l==null?void 0:l.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(i=l==null?void 0:l.channel)!==null&&i!==void 0?i:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:u})}throw new Fo("You must provide either an email or phone number.")}catch(a){if(he(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async verifyOtp(e){var r,n;try{let s,o;"options"in e&&(s=(r=e.options)===null||r===void 0?void 0:r.redirectTo,o=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:i,error:a}=await _e(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:s,xform:Ft});if(a)throw a;if(!i)throw new Error("An error occurred on token verification.");const l=i.session,c=i.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(s){if(he(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithSSO(e){var r,n,s,o,i;try{let a=null,l=null;this.flowType==="pkce"&&([a,l]=await Dn(this.storage,this.storageKey));const c=await _e(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:l}),headers:this.headers,xform:v4});return!((o=c.data)===null||o===void 0)&&o.url&&it()&&!(!((i=e.options)===null||i===void 0)&&i.skipBrowserRedirect)&&window.location.assign(c.data.url),this._returnResult(c)}catch(a){if(he(a))return this._returnResult({data:null,error:a});throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;if(n)throw n;if(!r)throw new Bt;const{error:s}=await _e(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:s})})}catch(e){if(he(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:n,type:s,options:o}=e,{error:i}=await _e(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:i})}else if("phone"in e){const{phone:n,type:s,options:o}=e,{data:i,error:a}=await _e(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:i==null?void 0:i.message_id},error:a})}throw new Fo("You must provide either an email or phone number and a type")}catch(r){if(he(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await dn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<Ba:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const i=await dn(this.userStorage,this.storageKey+"-user");i!=null&&i.user?e.user=i.user:e.user=Va()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const i={value:this.suppressGetSessionWarning};e.user=f4(e.user,i),i.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:s,error:o}=await this._callRefreshToken(e.refresh_token);return o?this._returnResult({data:{session:null},error:o}):this._returnResult({data:{session:s},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await _e(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Hr}):await this._useSession(async r=>{var n,s,o;const{data:i,error:a}=r;if(a)throw a;return!(!((n=i.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Bt}:await _e(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(s=i.session)===null||s===void 0?void 0:s.access_token)!==null&&o!==void 0?o:void 0,xform:Hr})})}catch(r){if(he(r))return z2(r)&&(await this._removeSession(),await Or(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async n=>{const{data:s,error:o}=n;if(o)throw o;if(!s.session)throw new Bt;const i=s.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await Dn(this.storage,this.storageKey));const{data:c,error:u}=await _e(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:i.access_token,xform:Hr});if(u)throw u;return i.user=c.user,await this._saveSession(i),await this._notifyAllSubscribers("USER_UPDATED",i),this._returnResult({data:{user:i.user},error:null})})}catch(n){if(he(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Bt;const r=Date.now()/1e3;let n=r,s=!0,o=null;const{payload:i}=Ha(e.access_token);if(i.exp&&(n=i.exp,s=n<=r),s){const{data:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!a)return{data:{user:null,session:null},error:null};o=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;o={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return this._returnResult({data:{user:o.user,session:o},error:null})}catch(r){if(he(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var n;if(!e){const{data:i,error:a}=r;if(a)throw a;e=(n=i.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new Bt;const{data:s,error:o}=await this._callRefreshToken(e.refresh_token);return o?this._returnResult({data:{user:null,session:null},error:o}):s?this._returnResult({data:{user:s.user,session:s},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(he(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(e,r){try{if(!it())throw new Ho("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Ho(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Vd("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ho("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Vd("No code detected.");const{data:k,error:E}=await this._exchangeCodeForSession(e.code);if(E)throw E;const C=new URL(window.location.href);return C.searchParams.delete("code"),window.history.replaceState(window.history.state,"",C.toString()),{data:{session:k.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:o,refresh_token:i,expires_in:a,expires_at:l,token_type:c}=e;if(!o||!a||!i||!c)throw new Ho("No session defined in URL");const u=Math.round(Date.now()/1e3),h=parseInt(a);let f=u+h;l&&(f=parseInt(l));const p=f-u;p*1e3<=zn&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${h}s`);const g=f-h;u-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,f,u):u-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",g,f,u);const{data:v,error:_}=await this._getUser(o);if(_)throw _;const T={provider_token:n,provider_refresh_token:s,access_token:o,expires_in:h,expires_at:f,refresh_token:i,token_type:c,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:T,redirectType:e.type},error:null})}catch(n){if(he(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await dn(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:o}=r;if(o)return this._returnResult({error:o});const i=(n=s.session)===null||n===void 0?void 0:n.access_token;if(i){const{error:a}=await this.admin.signOut(i,e);if(a&&!(q2(a)&&(a.status===404||a.status===401||a.status===403)))return this._returnResult({error:a})}return e!=="others"&&(await this._removeSession(),await Or(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const r=Z2(),n={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async r=>{var n,s;try{const{data:{session:o},error:i}=r;if(i)throw i;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await Dn(this.storage,this.storageKey,!0));try{return await _e(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(o){if(he(o))return this._returnResult({data:null,error:o});throw o}}async getUserIdentities(){var e;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(r){if(he(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var r;try{const{data:n,error:s}=await this._useSession(async o=>{var i,a,l,c,u;const{data:h,error:f}=o;if(f)throw f;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(i=e.options)===null||i===void 0?void 0:i.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await _e(this.fetch,"GET",p,{headers:this.headers,jwt:(u=(c=h.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(s)throw s;return it()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),this._returnResult({data:{provider:e.provider,url:n==null?void 0:n.url},error:null})}catch(n){if(he(n))return this._returnResult({data:{provider:e.provider,url:null},error:n});throw n}}async linkIdentityIdToken(e){return await this._useSession(async r=>{var n;try{const{error:s,data:{session:o}}=r;if(s)throw s;const{options:i,provider:a,token:l,access_token:c,nonce:u}=e,h=await _e(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=o==null?void 0:o.access_token)!==null&&n!==void 0?n:void 0,body:{provider:a,id_token:l,access_token:c,nonce:u,link_identity:!0,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},xform:Ft}),{data:f,error:p}=h;return p?this._returnResult({data:{user:null,session:null},error:p}):!f||!f.session||!f.user?this._returnResult({data:{user:null,session:null},error:new jn}):(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("USER_UPDATED",f.session)),this._returnResult({data:f,error:p}))}catch(s){if(he(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}async unlinkIdentity(e){try{return await this._useSession(async r=>{var n,s;const{data:o,error:i}=r;if(i)throw i;return await _e(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(n=o.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(he(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await n4(async s=>(s>0&&await r4(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await _e(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Ft})),(s,o)=>{const i=200*Math.pow(2,s);return o&&Fa(o)&&Date.now()+i-n<zn})}catch(n){if(this._debug(r,"error",n),he(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",n),it()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await dn(this.storage,this.storageKey);if(s&&this.userStorage){let i=await dn(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!i&&(i={user:s.user},await Wn(this.userStorage,this.storageKey+"-user",i)),s.user=(e=i==null?void 0:i.user)!==null&&e!==void 0?e:Va()}else if(s&&!s.user&&!s.user){const i=await dn(this.storage,this.storageKey+"-user");i&&(i!=null&&i.user)?(s.user=i.user,await Or(this.storage,this.storageKey+"-user"),await Wn(this.storage,this.storageKey,s)):s.user=Va()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const o=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Ba;if(this._debug(n,`session has${o?"":" not"} expired with margin of ${Ba}s`),o){if(this.autoRefreshToken&&s.refresh_token){const{error:i}=await this._callRefreshToken(s.refresh_token);i&&(console.error(i),Fa(i)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:i,error:a}=await this._getUser(s.access_token);!a&&(i!=null&&i.user)?(s.user=i.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(i){console.error("Error getting user data:",i),this._debug(n,"error getting user data, skipping SIGNED_IN notification",i)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var r,n;if(!e)throw new Bt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new ea;const{data:o,error:i}=await this._refreshAccessToken(e);if(i)throw i;if(!o.session)throw new Bt;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const a={data:o.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(o){if(this._debug(s,"error",o),he(o)){const i={data:null,error:o};return Fa(o)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(i),i}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(o),o}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,r,n=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:r});const o=[],i=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,r)}catch(l){o.push(l)}});if(await Promise.all(i),o.length>0){for(let a=0;a<o.length;a+=1)console.error(o[a]);throw o[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const r=Object.assign({},e),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await Wn(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const o=Gd(s);await Wn(this.storage,this.storageKey,o)}else{const s=Gd(r);await Wn(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await Or(this.storage,this.storageKey),await Or(this.storage,this.storageKey+"-code-verifier"),await Or(this.storage,this.storageKey+"-user"),this.userStorage&&await Or(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&it()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),zn);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-e)/zn);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${zn}ms, refresh threshold is ${Nl} ticks`),s<=Nl&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof ng)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!it()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[o,i]=await Dn(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(i)}`});s.push(a.toString())}if(n!=null&&n.queryParams){const o=new URLSearchParams(n.queryParams);s.push(o.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var n;const{data:s,error:o}=r;return o?this._returnResult({data:null,error:o}):await _e(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(he(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(e){try{return await this._useSession(async r=>{var n,s;const{data:o,error:i}=r;if(i)return this._returnResult({data:null,error:i});const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:l,error:c}=await _e(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(n=o==null?void 0:o.session)===null||n===void 0?void 0:n.access_token});return c?this._returnResult({data:null,error:c}):(e.factorType==="totp"&&l.type==="totp"&&(!((s=l==null?void 0:l.totp)===null||s===void 0)&&s.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),this._returnResult({data:l,error:null}))})}catch(r){if(he(r))return this._returnResult({data:null,error:r});throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:o}=r;if(o)return this._returnResult({data:null,error:o});const i=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?$4(e.webauthn.credential_response):N4(e.webauthn.credential_response)})}:{code:e.code}),{data:a,error:l}=await _e(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:i,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return l?this._returnResult({data:null,error:l}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),this._returnResult({data:a,error:l}))})}catch(r){if(he(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:o}=r;if(o)return this._returnResult({data:null,error:o});const i=await _e(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});if(i.error)return i;const{data:a}=i;if(a.type!=="webauthn")return{data:a,error:null};switch(a.webauthn.type){case"create":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:O4(a.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:P4(a.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(he(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(e){const{data:r,error:n}=await this._challenge({factorId:e.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){var e;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const s={all:[],phone:[],totp:[],webauthn:[]};for(const o of(e=r==null?void 0:r.factors)!==null&&e!==void 0?e:[])s.all.push(o),o.status==="verified"&&s[o.factor_type].push(o);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){var e,r;const{data:{session:n},error:s}=await this.getSession();if(s)return this._returnResult({data:null,error:s});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Ha(n.access_token);let i=null;o.aal&&(i=o.aal);let a=i;((r=(e=n.user.factors)===null||e===void 0?void 0:e.filter(u=>u.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(a="aal2");const c=o.amr||[];return{data:{currentLevel:i,nextLevel:a,currentAuthenticationMethods:c},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async r=>{const{data:{session:n},error:s}=r;return s?this._returnResult({data:null,error:s}):n?await _e(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:n.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new Bt})})}catch(r){if(he(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(e,r){try{return await this._useSession(async n=>{const{data:{session:s},error:o}=n;if(o)return this._returnResult({data:null,error:o});if(!s)return this._returnResult({data:null,error:new Bt});const i=await _e(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:a=>({data:a,error:null})});return i.data&&i.data.redirect_url&&it()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(i.data.redirect_url),i})}catch(n){if(he(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(e,r){try{return await this._useSession(async n=>{const{data:{session:s},error:o}=n;if(o)return this._returnResult({data:null,error:o});if(!s)return this._returnResult({data:null,error:new Bt});const i=await _e(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:a=>({data:a,error:null})});return i.data&&i.data.redirect_url&&it()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(i.data.redirect_url),i})}catch(n){if(he(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(e,r={keys:[]}){let n=r.keys.find(a=>a.kid===e);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(a=>a.kid===e),n&&this.jwks_cached_at+H2>s)return n;const{data:o,error:i}=await _e(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=s,n=o.keys.find(a=>a.kid===e),!n)?null:n}async getClaims(e,r={}){try{let n=e;if(!n){const{data:p,error:g}=await this.getSession();if(g||!p.session)return this._returnResult({data:null,error:g});n=p.session.access_token}const{header:s,payload:o,signature:i,raw:{header:a,payload:l}}=Ha(n);r!=null&&r.allowExpired||u4(o.exp);const c=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!c){const{error:p}=await this.getUser(n);if(p)throw p;return{data:{claims:o,header:s,signature:i},error:null}}const u=d4(s.alg),h=await crypto.subtle.importKey("jwk",c,u,!0,["verify"]);if(!await crypto.subtle.verify(u,h,i,Y2(`${a}.${l}`)))throw new jl("Invalid JWT signature");return{data:{claims:o,header:s,signature:i},error:null}}catch(n){if(he(n))return this._returnResult({data:null,error:n});throw n}}}ao.nextInstanceID={};const V4=ao;class q4 extends V4{constructor(e){super(e)}}class z4{constructor(e,r,n){var s,o,i;this.supabaseUrl=e,this.supabaseKey=r;const a=j2(e);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);const l=`sb-${a.hostname.split(".")[0]}-auth-token`,c={db:I2,realtime:O2,auth:Object.assign(Object.assign({},R2),{storageKey:l}),global:A2},u=M2(n??{},c);this.storageKey=(s=u.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(o=u.global.headers)!==null&&o!==void 0?o:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(h,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((i=u.auth)!==null&&i!==void 0?i:{},this.headers,u.global.fetch),this.fetch=N2(r,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.accessToken&&this.accessToken().then(h=>this.realtime.setAuth(h)).catch(h=>console.warn("Failed to set initial Realtime auth token:",h)),this.rest=new Dx(new URL("rest/v1",a).href,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),this.storage=new S2(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),u.accessToken||this._listenForAuthEvents()}get functions(){return new Px(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,r={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,r,n)}channel(e,r={config:{}}){return this.realtime.channel(e,r)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,r;if(this.accessToken)return await this.accessToken();const{data:n}=await this.auth.getSession();return(r=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&r!==void 0?r:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:s,userStorage:o,storageKey:i,flowType:a,lock:l,debug:c,throwOnError:u},h,f){const p={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new q4({url:this.authUrl.href,headers:Object.assign(Object.assign({},p),h),storageKey:i,autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:s,userStorage:o,flowType:a,lock:l,debug:c,throwOnError:u,fetch:f,hasCustomAuthorizationHeader:Object.keys(this.headers).some(g=>g.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new t2(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,r,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const W4=(t,e,r)=>new z4(t,e,r);function K4(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}K4()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const th="https://hganinmpourhfimksydd.supabase.co",rh="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhnYW5pbm1wb3VyaGZpbWtzeWRkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjI2Njk3NDAsImV4cCI6MjA3ODI0NTc0MH0.L0-LLStOhod_M4kKOQGGDJaq_BPAZkyS0af4aiZL8_U",G4=t=>{try{return new URL(t),!0}catch{return!1}};let Dl=null;!G4(th)||rh==="your_supabase_key"?(console.warn(" Supabase cha c cu hnh. Mt s tnh nng c th khng hot ng."),Dl={auth:{signUp:()=>Promise.reject(new Error("Supabase not configured")),signInWithPassword:()=>Promise.reject(new Error("Supabase not configured")),signOut:()=>Promise.reject(new Error("Supabase not configured")),getSession:()=>Promise.resolve({data:{session:null},error:null}),onAuthStateChange:()=>({data:{subscription:{unsubscribe:()=>{}}}})},from:()=>({select:()=>Promise.resolve({data:[],error:null}),insert:()=>Promise.reject(new Error("Supabase not configured")),update:()=>Promise.reject(new Error("Supabase not configured")),delete:()=>Promise.reject(new Error("Supabase not configured"))})}):Dl=W4(th,rh);const J4=Oc("category",{state:()=>({categories:[],loading:!1,error:null}),actions:{async getCategory(){this.loading=!0,this.error=null,console.log("CategoryStore: Bt u fetch genres t bng movies...");try{const{data:t,error:e}=await Dl.from("movies").select("genres");if(e)throw e;let r=new Set;t&&t.forEach(n=>{n.genres&&Array.isArray(n.genres)&&n.genres.forEach(s=>{typeof s=="string"&&s.trim()!==""&&r.add(s.trim())})}),this.categories=Array.from(r).map(n=>({name:n,slug:n.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"")})).sort((n,s)=>n.name.localeCompare(s.name)),console.log("CategoryStore: Genres fetched thnh cng (t bng movies). S lng:",this.categories.length,"D liu:",this.categories)}catch(t){this.error=t.message,console.error("CategoryStore: Li khi fetch genres (t bng movies):",t.message)}finally{this.loading=!1,console.log("CategoryStore: Kt thc fetch genres. Loading:",this.loading)}}},getters:{getAllCategories:t=>t.categories,getLoading:t=>t.loading,getError:t=>t.error}});function ig(t,e){return function(){return t.apply(e,arguments)}}const{toString:X4}=Object.prototype,{getPrototypeOf:Bc}=Object,{iterator:ta,toStringTag:ag}=Symbol,ra=(t=>e=>{const r=X4.call(e);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),Yt=t=>(t=t.toLowerCase(),e=>ra(e)===t),na=t=>e=>typeof e===t,{isArray:bs}=Array,lo=na("undefined");function Y4(t){return t!==null&&!lo(t)&&t.constructor!==null&&!lo(t.constructor)&&kt(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const lg=Yt("ArrayBuffer");function Q4(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&lg(t.buffer),e}const Z4=na("string"),kt=na("function"),cg=na("number"),sa=t=>t!==null&&typeof t=="object",eE=t=>t===!0||t===!1,ti=t=>{if(ra(t)!=="object")return!1;const e=Bc(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(ag in t)&&!(ta in t)},tE=Yt("Date"),rE=Yt("File"),nE=Yt("Blob"),sE=Yt("FileList"),oE=t=>sa(t)&&kt(t.pipe),iE=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||kt(t.append)&&((e=ra(t))==="formdata"||e==="object"&&kt(t.toString)&&t.toString()==="[object FormData]"))},aE=Yt("URLSearchParams"),[lE,cE,uE,dE]=["ReadableStream","Request","Response","Headers"].map(Yt),hE=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ko(t,e,{allOwnKeys:r=!1}={}){if(t===null||typeof t>"u")return;let n,s;if(typeof t!="object"&&(t=[t]),bs(t))for(n=0,s=t.length;n<s;n++)e.call(null,t[n],n,t);else{const o=r?Object.getOwnPropertyNames(t):Object.keys(t),i=o.length;let a;for(n=0;n<i;n++)a=o[n],e.call(null,t[a],a,t)}}function ug(t,e){e=e.toLowerCase();const r=Object.keys(t);let n=r.length,s;for(;n-- >0;)if(s=r[n],e===s.toLowerCase())return s;return null}const En=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,dg=t=>!lo(t)&&t!==En;function Ul(){const{caseless:t}=dg(this)&&this||{},e={},r=(n,s)=>{const o=t&&ug(e,s)||s;ti(e[o])&&ti(n)?e[o]=Ul(e[o],n):ti(n)?e[o]=Ul({},n):bs(n)?e[o]=n.slice():e[o]=n};for(let n=0,s=arguments.length;n<s;n++)arguments[n]&&ko(arguments[n],r);return e}const fE=(t,e,r,{allOwnKeys:n}={})=>(ko(e,(s,o)=>{r&&kt(s)?t[o]=ig(s,r):t[o]=s},{allOwnKeys:n}),t),pE=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),gE=(t,e,r,n)=>{t.prototype=Object.create(e.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),r&&Object.assign(t.prototype,r)},mE=(t,e,r,n)=>{let s,o,i;const a={};if(e=e||{},t==null)return e;do{for(s=Object.getOwnPropertyNames(t),o=s.length;o-- >0;)i=s[o],(!n||n(i,t,e))&&!a[i]&&(e[i]=t[i],a[i]=!0);t=r!==!1&&Bc(t)}while(t&&(!r||r(t,e))&&t!==Object.prototype);return e},vE=(t,e,r)=>{t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=e.length;const n=t.indexOf(e,r);return n!==-1&&n===r},yE=t=>{if(!t)return null;if(bs(t))return t;let e=t.length;if(!cg(e))return null;const r=new Array(e);for(;e-- >0;)r[e]=t[e];return r},bE=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&Bc(Uint8Array)),wE=(t,e)=>{const n=(t&&t[ta]).call(t);let s;for(;(s=n.next())&&!s.done;){const o=s.value;e.call(t,o[0],o[1])}},_E=(t,e)=>{let r;const n=[];for(;(r=t.exec(e))!==null;)n.push(r);return n},xE=Yt("HTMLFormElement"),EE=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,s){return n.toUpperCase()+s}),nh=(({hasOwnProperty:t})=>(e,r)=>t.call(e,r))(Object.prototype),kE=Yt("RegExp"),hg=(t,e)=>{const r=Object.getOwnPropertyDescriptors(t),n={};ko(r,(s,o)=>{let i;(i=e(s,o,t))!==!1&&(n[o]=i||s)}),Object.defineProperties(t,n)},SE=t=>{hg(t,(e,r)=>{if(kt(t)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=t[r];if(kt(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},TE=(t,e)=>{const r={},n=s=>{s.forEach(o=>{r[o]=!0})};return bs(t)?n(t):n(String(t).split(e)),r},CE=()=>{},AE=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function IE(t){return!!(t&&kt(t.append)&&t[ag]==="FormData"&&t[ta])}const RE=t=>{const e=new Array(10),r=(n,s)=>{if(sa(n)){if(e.indexOf(n)>=0)return;if(!("toJSON"in n)){e[s]=n;const o=bs(n)?[]:{};return ko(n,(i,a)=>{const l=r(i,s+1);!lo(l)&&(o[a]=l)}),e[s]=void 0,o}}return n};return r(t,0)},OE=Yt("AsyncFunction"),PE=t=>t&&(sa(t)||kt(t))&&kt(t.then)&&kt(t.catch),fg=((t,e)=>t?setImmediate:e?((r,n)=>(En.addEventListener("message",({source:s,data:o})=>{s===En&&o===r&&n.length&&n.shift()()},!1),s=>{n.push(s),En.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",kt(En.postMessage)),$E=typeof queueMicrotask<"u"?queueMicrotask.bind(En):typeof process<"u"&&process.nextTick||fg,NE=t=>t!=null&&kt(t[ta]),L={isArray:bs,isArrayBuffer:lg,isBuffer:Y4,isFormData:iE,isArrayBufferView:Q4,isString:Z4,isNumber:cg,isBoolean:eE,isObject:sa,isPlainObject:ti,isReadableStream:lE,isRequest:cE,isResponse:uE,isHeaders:dE,isUndefined:lo,isDate:tE,isFile:rE,isBlob:nE,isRegExp:kE,isFunction:kt,isStream:oE,isURLSearchParams:aE,isTypedArray:bE,isFileList:sE,forEach:ko,merge:Ul,extend:fE,trim:hE,stripBOM:pE,inherits:gE,toFlatObject:mE,kindOf:ra,kindOfTest:Yt,endsWith:vE,toArray:yE,forEachEntry:wE,matchAll:_E,isHTMLForm:xE,hasOwnProperty:nh,hasOwnProp:nh,reduceDescriptors:hg,freezeMethods:SE,toObjectSet:TE,toCamelCase:EE,noop:CE,toFiniteNumber:AE,findKey:ug,global:En,isContextDefined:dg,isSpecCompliantForm:IE,toJSONObject:RE,isAsyncFn:OE,isThenable:PE,setImmediate:fg,asap:$E,isIterable:NE};function Ce(t,e,r,n,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),r&&(this.config=r),n&&(this.request=n),s&&(this.response=s,this.status=s.status?s.status:null)}L.inherits(Ce,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:L.toJSONObject(this.config),code:this.code,status:this.status}}});const pg=Ce.prototype,gg={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{gg[t]={value:t}});Object.defineProperties(Ce,gg);Object.defineProperty(pg,"isAxiosError",{value:!0});Ce.from=(t,e,r,n,s,o)=>{const i=Object.create(pg);return L.toFlatObject(t,i,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),Ce.call(i,t.message,e,r,n,s),i.cause=t,i.name=t.name,o&&Object.assign(i,o),i};const LE=null;function Bl(t){return L.isPlainObject(t)||L.isArray(t)}function mg(t){return L.endsWith(t,"[]")?t.slice(0,-2):t}function sh(t,e,r){return t?t.concat(e).map(function(s,o){return s=mg(s),!r&&o?"["+s+"]":s}).join(r?".":""):e}function ME(t){return L.isArray(t)&&!t.some(Bl)}const jE=L.toFlatObject(L,{},null,function(e){return/^is[A-Z]/.test(e)});function oa(t,e,r){if(!L.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,r=L.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(v,_){return!L.isUndefined(_[v])});const n=r.metaTokens,s=r.visitor||u,o=r.dots,i=r.indexes,l=(r.Blob||typeof Blob<"u"&&Blob)&&L.isSpecCompliantForm(e);if(!L.isFunction(s))throw new TypeError("visitor must be a function");function c(g){if(g===null)return"";if(L.isDate(g))return g.toISOString();if(!l&&L.isBlob(g))throw new Ce("Blob is not supported. Use a Buffer instead.");return L.isArrayBuffer(g)||L.isTypedArray(g)?l&&typeof Blob=="function"?new Blob([g]):Buffer.from(g):g}function u(g,v,_){let T=g;if(g&&!_&&typeof g=="object"){if(L.endsWith(v,"{}"))v=n?v:v.slice(0,-2),g=JSON.stringify(g);else if(L.isArray(g)&&ME(g)||(L.isFileList(g)||L.endsWith(v,"[]"))&&(T=L.toArray(g)))return v=mg(v),T.forEach(function(E,C){!(L.isUndefined(E)||E===null)&&e.append(i===!0?sh([v],C,o):i===null?v:v+"[]",c(E))}),!1}return Bl(g)?!0:(e.append(sh(_,v,o),c(g)),!1)}const h=[],f=Object.assign(jE,{defaultVisitor:u,convertValue:c,isVisitable:Bl});function p(g,v){if(!L.isUndefined(g)){if(h.indexOf(g)!==-1)throw Error("Circular reference detected in "+v.join("."));h.push(g),L.forEach(g,function(T,k){(!(L.isUndefined(T)||T===null)&&s.call(e,T,L.isString(k)?k.trim():k,v,f))===!0&&p(T,v?v.concat(k):[k])}),h.pop()}}if(!L.isObject(t))throw new TypeError("data must be an object");return p(t),e}function oh(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function Fc(t,e){this._pairs=[],t&&oa(t,this,e)}const vg=Fc.prototype;vg.append=function(e,r){this._pairs.push([e,r])};vg.toString=function(e){const r=e?function(n){return e.call(this,n,oh)}:oh;return this._pairs.map(function(s){return r(s[0])+"="+r(s[1])},"").join("&")};function DE(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function yg(t,e,r){if(!e)return t;const n=r&&r.encode||DE;L.isFunction(r)&&(r={serialize:r});const s=r&&r.serialize;let o;if(s?o=s(e,r):o=L.isURLSearchParams(e)?e.toString():new Fc(e,r).toString(n),o){const i=t.indexOf("#");i!==-1&&(t=t.slice(0,i)),t+=(t.indexOf("?")===-1?"?":"&")+o}return t}class ih{constructor(){this.handlers=[]}use(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){L.forEach(this.handlers,function(n){n!==null&&e(n)})}}const bg={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},UE=typeof URLSearchParams<"u"?URLSearchParams:Fc,BE=typeof FormData<"u"?FormData:null,FE=typeof Blob<"u"?Blob:null,HE={isBrowser:!0,classes:{URLSearchParams:UE,FormData:BE,Blob:FE},protocols:["http","https","file","blob","url","data"]},Hc=typeof window<"u"&&typeof document<"u",Fl=typeof navigator=="object"&&navigator||void 0,VE=Hc&&(!Fl||["ReactNative","NativeScript","NS"].indexOf(Fl.product)<0),qE=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",zE=Hc&&window.location.href||"http://localhost",WE=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Hc,hasStandardBrowserEnv:VE,hasStandardBrowserWebWorkerEnv:qE,navigator:Fl,origin:zE},Symbol.toStringTag,{value:"Module"})),ft={...WE,...HE};function KE(t,e){return oa(t,new ft.classes.URLSearchParams,Object.assign({visitor:function(r,n,s,o){return ft.isNode&&L.isBuffer(r)?(this.append(n,r.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},e))}function GE(t){return L.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function JE(t){const e={},r=Object.keys(t);let n;const s=r.length;let o;for(n=0;n<s;n++)o=r[n],e[o]=t[o];return e}function wg(t){function e(r,n,s,o){let i=r[o++];if(i==="__proto__")return!0;const a=Number.isFinite(+i),l=o>=r.length;return i=!i&&L.isArray(s)?s.length:i,l?(L.hasOwnProp(s,i)?s[i]=[s[i],n]:s[i]=n,!a):((!s[i]||!L.isObject(s[i]))&&(s[i]=[]),e(r,n,s[i],o)&&L.isArray(s[i])&&(s[i]=JE(s[i])),!a)}if(L.isFormData(t)&&L.isFunction(t.entries)){const r={};return L.forEachEntry(t,(n,s)=>{e(GE(n),s,r,0)}),r}return null}function XE(t,e,r){if(L.isString(t))try{return(e||JSON.parse)(t),L.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}const So={transitional:bg,adapter:["xhr","http","fetch"],transformRequest:[function(e,r){const n=r.getContentType()||"",s=n.indexOf("application/json")>-1,o=L.isObject(e);if(o&&L.isHTMLForm(e)&&(e=new FormData(e)),L.isFormData(e))return s?JSON.stringify(wg(e)):e;if(L.isArrayBuffer(e)||L.isBuffer(e)||L.isStream(e)||L.isFile(e)||L.isBlob(e)||L.isReadableStream(e))return e;if(L.isArrayBufferView(e))return e.buffer;if(L.isURLSearchParams(e))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(o){if(n.indexOf("application/x-www-form-urlencoded")>-1)return KE(e,this.formSerializer).toString();if((a=L.isFileList(e))||n.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return oa(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return o||s?(r.setContentType("application/json",!1),XE(e)):e}],transformResponse:[function(e){const r=this.transitional||So.transitional,n=r&&r.forcedJSONParsing,s=this.responseType==="json";if(L.isResponse(e)||L.isReadableStream(e))return e;if(e&&L.isString(e)&&(n&&!this.responseType||s)){const i=!(r&&r.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(a){if(i)throw a.name==="SyntaxError"?Ce.from(a,Ce.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ft.classes.FormData,Blob:ft.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};L.forEach(["delete","get","head","post","put","patch"],t=>{So.headers[t]={}});const YE=L.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),QE=t=>{const e={};let r,n,s;return t&&t.split(`
`).forEach(function(i){s=i.indexOf(":"),r=i.substring(0,s).trim().toLowerCase(),n=i.substring(s+1).trim(),!(!r||e[r]&&YE[r])&&(r==="set-cookie"?e[r]?e[r].push(n):e[r]=[n]:e[r]=e[r]?e[r]+", "+n:n)}),e},ah=Symbol("internals");function Ss(t){return t&&String(t).trim().toLowerCase()}function ri(t){return t===!1||t==null?t:L.isArray(t)?t.map(ri):String(t)}function ZE(t){const e=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(t);)e[n[1]]=n[2];return e}const ek=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function za(t,e,r,n,s){if(L.isFunction(n))return n.call(this,e,r);if(s&&(e=r),!!L.isString(e)){if(L.isString(n))return e.indexOf(n)!==-1;if(L.isRegExp(n))return n.test(e)}}function tk(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,r,n)=>r.toUpperCase()+n)}function rk(t,e){const r=L.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(t,n+r,{value:function(s,o,i){return this[n].call(this,e,s,o,i)},configurable:!0})})}let St=class{constructor(e){e&&this.set(e)}set(e,r,n){const s=this;function o(a,l,c){const u=Ss(l);if(!u)throw new Error("header name must be a non-empty string");const h=L.findKey(s,u);(!h||s[h]===void 0||c===!0||c===void 0&&s[h]!==!1)&&(s[h||l]=ri(a))}const i=(a,l)=>L.forEach(a,(c,u)=>o(c,u,l));if(L.isPlainObject(e)||e instanceof this.constructor)i(e,r);else if(L.isString(e)&&(e=e.trim())&&!ek(e))i(QE(e),r);else if(L.isObject(e)&&L.isIterable(e)){let a={},l,c;for(const u of e){if(!L.isArray(u))throw TypeError("Object iterator must return a key-value pair");a[c=u[0]]=(l=a[c])?L.isArray(l)?[...l,u[1]]:[l,u[1]]:u[1]}i(a,r)}else e!=null&&o(r,e,n);return this}get(e,r){if(e=Ss(e),e){const n=L.findKey(this,e);if(n){const s=this[n];if(!r)return s;if(r===!0)return ZE(s);if(L.isFunction(r))return r.call(this,s,n);if(L.isRegExp(r))return r.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,r){if(e=Ss(e),e){const n=L.findKey(this,e);return!!(n&&this[n]!==void 0&&(!r||za(this,this[n],n,r)))}return!1}delete(e,r){const n=this;let s=!1;function o(i){if(i=Ss(i),i){const a=L.findKey(n,i);a&&(!r||za(n,n[a],a,r))&&(delete n[a],s=!0)}}return L.isArray(e)?e.forEach(o):o(e),s}clear(e){const r=Object.keys(this);let n=r.length,s=!1;for(;n--;){const o=r[n];(!e||za(this,this[o],o,e,!0))&&(delete this[o],s=!0)}return s}normalize(e){const r=this,n={};return L.forEach(this,(s,o)=>{const i=L.findKey(n,o);if(i){r[i]=ri(s),delete r[o];return}const a=e?tk(o):String(o).trim();a!==o&&delete r[o],r[a]=ri(s),n[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const r=Object.create(null);return L.forEach(this,(n,s)=>{n!=null&&n!==!1&&(r[s]=e&&L.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,r])=>e+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...r){const n=new this(e);return r.forEach(s=>n.set(s)),n}static accessor(e){const n=(this[ah]=this[ah]={accessors:{}}).accessors,s=this.prototype;function o(i){const a=Ss(i);n[a]||(rk(s,i),n[a]=!0)}return L.isArray(e)?e.forEach(o):o(e),this}};St.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);L.reduceDescriptors(St.prototype,({value:t},e)=>{let r=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(n){this[r]=n}}});L.freezeMethods(St);function Wa(t,e){const r=this||So,n=e||r,s=St.from(n.headers);let o=n.data;return L.forEach(t,function(a){o=a.call(r,o,s.normalize(),e?e.status:void 0)}),s.normalize(),o}function _g(t){return!!(t&&t.__CANCEL__)}function ws(t,e,r){Ce.call(this,t??"canceled",Ce.ERR_CANCELED,e,r),this.name="CanceledError"}L.inherits(ws,Ce,{__CANCEL__:!0});function xg(t,e,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?t(r):e(new Ce("Request failed with status code "+r.status,[Ce.ERR_BAD_REQUEST,Ce.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function nk(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function sk(t,e){t=t||10;const r=new Array(t),n=new Array(t);let s=0,o=0,i;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),u=n[o];i||(i=c),r[s]=l,n[s]=c;let h=o,f=0;for(;h!==s;)f+=r[h++],h=h%t;if(s=(s+1)%t,s===o&&(o=(o+1)%t),c-i<e)return;const p=u&&c-u;return p?Math.round(f*1e3/p):void 0}}function ok(t,e){let r=0,n=1e3/e,s,o;const i=(c,u=Date.now())=>{r=u,s=null,o&&(clearTimeout(o),o=null),t.apply(null,c)};return[(...c)=>{const u=Date.now(),h=u-r;h>=n?i(c,u):(s=c,o||(o=setTimeout(()=>{o=null,i(s)},n-h)))},()=>s&&i(s)]}const Oi=(t,e,r=3)=>{let n=0;const s=sk(50,250);return ok(o=>{const i=o.loaded,a=o.lengthComputable?o.total:void 0,l=i-n,c=s(l),u=i<=a;n=i;const h={loaded:i,total:a,progress:a?i/a:void 0,bytes:l,rate:c||void 0,estimated:c&&a&&u?(a-i)/c:void 0,event:o,lengthComputable:a!=null,[e?"download":"upload"]:!0};t(h)},r)},lh=(t,e)=>{const r=t!=null;return[n=>e[0]({lengthComputable:r,total:t,loaded:n}),e[1]]},ch=t=>(...e)=>L.asap(()=>t(...e)),ik=ft.hasStandardBrowserEnv?((t,e)=>r=>(r=new URL(r,ft.origin),t.protocol===r.protocol&&t.host===r.host&&(e||t.port===r.port)))(new URL(ft.origin),ft.navigator&&/(msie|trident)/i.test(ft.navigator.userAgent)):()=>!0,ak=ft.hasStandardBrowserEnv?{write(t,e,r,n,s,o){const i=[t+"="+encodeURIComponent(e)];L.isNumber(r)&&i.push("expires="+new Date(r).toGMTString()),L.isString(n)&&i.push("path="+n),L.isString(s)&&i.push("domain="+s),o===!0&&i.push("secure"),document.cookie=i.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function lk(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function ck(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function Eg(t,e,r){let n=!lk(e);return t&&(n||r==!1)?ck(t,e):e}const uh=t=>t instanceof St?{...t}:t;function Nn(t,e){e=e||{};const r={};function n(c,u,h,f){return L.isPlainObject(c)&&L.isPlainObject(u)?L.merge.call({caseless:f},c,u):L.isPlainObject(u)?L.merge({},u):L.isArray(u)?u.slice():u}function s(c,u,h,f){if(L.isUndefined(u)){if(!L.isUndefined(c))return n(void 0,c,h,f)}else return n(c,u,h,f)}function o(c,u){if(!L.isUndefined(u))return n(void 0,u)}function i(c,u){if(L.isUndefined(u)){if(!L.isUndefined(c))return n(void 0,c)}else return n(void 0,u)}function a(c,u,h){if(h in e)return n(c,u);if(h in t)return n(void 0,c)}const l={url:o,method:o,data:o,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:a,headers:(c,u,h)=>s(uh(c),uh(u),h,!0)};return L.forEach(Object.keys(Object.assign({},t,e)),function(u){const h=l[u]||s,f=h(t[u],e[u],u);L.isUndefined(f)&&h!==a||(r[u]=f)}),r}const kg=t=>{const e=Nn({},t);let{data:r,withXSRFToken:n,xsrfHeaderName:s,xsrfCookieName:o,headers:i,auth:a}=e;e.headers=i=St.from(i),e.url=yg(Eg(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),a&&i.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let l;if(L.isFormData(r)){if(ft.hasStandardBrowserEnv||ft.hasStandardBrowserWebWorkerEnv)i.setContentType(void 0);else if((l=i.getContentType())!==!1){const[c,...u]=l?l.split(";").map(h=>h.trim()).filter(Boolean):[];i.setContentType([c||"multipart/form-data",...u].join("; "))}}if(ft.hasStandardBrowserEnv&&(n&&L.isFunction(n)&&(n=n(e)),n||n!==!1&&ik(e.url))){const c=s&&o&&ak.read(o);c&&i.set(s,c)}return e},uk=typeof XMLHttpRequest<"u",dk=uk&&function(t){return new Promise(function(r,n){const s=kg(t);let o=s.data;const i=St.from(s.headers).normalize();let{responseType:a,onUploadProgress:l,onDownloadProgress:c}=s,u,h,f,p,g;function v(){p&&p(),g&&g(),s.cancelToken&&s.cancelToken.unsubscribe(u),s.signal&&s.signal.removeEventListener("abort",u)}let _=new XMLHttpRequest;_.open(s.method.toUpperCase(),s.url,!0),_.timeout=s.timeout;function T(){if(!_)return;const E=St.from("getAllResponseHeaders"in _&&_.getAllResponseHeaders()),$={data:!a||a==="text"||a==="json"?_.responseText:_.response,status:_.status,statusText:_.statusText,headers:E,config:t,request:_};xg(function(S){r(S),v()},function(S){n(S),v()},$),_=null}"onloadend"in _?_.onloadend=T:_.onreadystatechange=function(){!_||_.readyState!==4||_.status===0&&!(_.responseURL&&_.responseURL.indexOf("file:")===0)||setTimeout(T)},_.onabort=function(){_&&(n(new Ce("Request aborted",Ce.ECONNABORTED,t,_)),_=null)},_.onerror=function(){n(new Ce("Network Error",Ce.ERR_NETWORK,t,_)),_=null},_.ontimeout=function(){let C=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const $=s.transitional||bg;s.timeoutErrorMessage&&(C=s.timeoutErrorMessage),n(new Ce(C,$.clarifyTimeoutError?Ce.ETIMEDOUT:Ce.ECONNABORTED,t,_)),_=null},o===void 0&&i.setContentType(null),"setRequestHeader"in _&&L.forEach(i.toJSON(),function(C,$){_.setRequestHeader($,C)}),L.isUndefined(s.withCredentials)||(_.withCredentials=!!s.withCredentials),a&&a!=="json"&&(_.responseType=s.responseType),c&&([f,g]=Oi(c,!0),_.addEventListener("progress",f)),l&&_.upload&&([h,p]=Oi(l),_.upload.addEventListener("progress",h),_.upload.addEventListener("loadend",p)),(s.cancelToken||s.signal)&&(u=E=>{_&&(n(!E||E.type?new ws(null,t,_):E),_.abort(),_=null)},s.cancelToken&&s.cancelToken.subscribe(u),s.signal&&(s.signal.aborted?u():s.signal.addEventListener("abort",u)));const k=nk(s.url);if(k&&ft.protocols.indexOf(k)===-1){n(new Ce("Unsupported protocol "+k+":",Ce.ERR_BAD_REQUEST,t));return}_.send(o||null)})},hk=(t,e)=>{const{length:r}=t=t?t.filter(Boolean):[];if(e||r){let n=new AbortController,s;const o=function(c){if(!s){s=!0,a();const u=c instanceof Error?c:this.reason;n.abort(u instanceof Ce?u:new ws(u instanceof Error?u.message:u))}};let i=e&&setTimeout(()=>{i=null,o(new Ce(`timeout ${e} of ms exceeded`,Ce.ETIMEDOUT))},e);const a=()=>{t&&(i&&clearTimeout(i),i=null,t.forEach(c=>{c.unsubscribe?c.unsubscribe(o):c.removeEventListener("abort",o)}),t=null)};t.forEach(c=>c.addEventListener("abort",o));const{signal:l}=n;return l.unsubscribe=()=>L.asap(a),l}},fk=function*(t,e){let r=t.byteLength;if(r<e){yield t;return}let n=0,s;for(;n<r;)s=n+e,yield t.slice(n,s),n=s},pk=async function*(t,e){for await(const r of gk(t))yield*fk(r,e)},gk=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:r,value:n}=await e.read();if(r)break;yield n}}finally{await e.cancel()}},dh=(t,e,r,n)=>{const s=pk(t,e);let o=0,i,a=l=>{i||(i=!0,n&&n(l))};return new ReadableStream({async pull(l){try{const{done:c,value:u}=await s.next();if(c){a(),l.close();return}let h=u.byteLength;if(r){let f=o+=h;r(f)}l.enqueue(new Uint8Array(u))}catch(c){throw a(c),c}},cancel(l){return a(l),s.return()}},{highWaterMark:2})},ia=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Sg=ia&&typeof ReadableStream=="function",mk=ia&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),Tg=(t,...e)=>{try{return!!t(...e)}catch{return!1}},vk=Sg&&Tg(()=>{let t=!1;const e=new Request(ft.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),hh=64*1024,Hl=Sg&&Tg(()=>L.isReadableStream(new Response("").body)),Pi={stream:Hl&&(t=>t.body)};ia&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Pi[e]&&(Pi[e]=L.isFunction(t[e])?r=>r[e]():(r,n)=>{throw new Ce(`Response type '${e}' is not supported`,Ce.ERR_NOT_SUPPORT,n)})})})(new Response);const yk=async t=>{if(t==null)return 0;if(L.isBlob(t))return t.size;if(L.isSpecCompliantForm(t))return(await new Request(ft.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(L.isArrayBufferView(t)||L.isArrayBuffer(t))return t.byteLength;if(L.isURLSearchParams(t)&&(t=t+""),L.isString(t))return(await mk(t)).byteLength},bk=async(t,e)=>{const r=L.toFiniteNumber(t.getContentLength());return r??yk(e)},wk=ia&&(async t=>{let{url:e,method:r,data:n,signal:s,cancelToken:o,timeout:i,onDownloadProgress:a,onUploadProgress:l,responseType:c,headers:u,withCredentials:h="same-origin",fetchOptions:f}=kg(t);c=c?(c+"").toLowerCase():"text";let p=hk([s,o&&o.toAbortSignal()],i),g;const v=p&&p.unsubscribe&&(()=>{p.unsubscribe()});let _;try{if(l&&vk&&r!=="get"&&r!=="head"&&(_=await bk(u,n))!==0){let $=new Request(e,{method:"POST",body:n,duplex:"half"}),R;if(L.isFormData(n)&&(R=$.headers.get("content-type"))&&u.setContentType(R),$.body){const[S,O]=lh(_,Oi(ch(l)));n=dh($.body,hh,S,O)}}L.isString(h)||(h=h?"include":"omit");const T="credentials"in Request.prototype;g=new Request(e,{...f,signal:p,method:r.toUpperCase(),headers:u.normalize().toJSON(),body:n,duplex:"half",credentials:T?h:void 0});let k=await fetch(g);const E=Hl&&(c==="stream"||c==="response");if(Hl&&(a||E&&v)){const $={};["status","statusText","headers"].forEach(m=>{$[m]=k[m]});const R=L.toFiniteNumber(k.headers.get("content-length")),[S,O]=a&&lh(R,Oi(ch(a),!0))||[];k=new Response(dh(k.body,hh,S,()=>{O&&O(),v&&v()}),$)}c=c||"text";let C=await Pi[L.findKey(Pi,c)||"text"](k,t);return!E&&v&&v(),await new Promise(($,R)=>{xg($,R,{data:C,headers:St.from(k.headers),status:k.status,statusText:k.statusText,config:t,request:g})})}catch(T){throw v&&v(),T&&T.name==="TypeError"&&/Load failed|fetch/i.test(T.message)?Object.assign(new Ce("Network Error",Ce.ERR_NETWORK,t,g),{cause:T.cause||T}):Ce.from(T,T&&T.code,t,g)}}),Vl={http:LE,xhr:dk,fetch:wk};L.forEach(Vl,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const fh=t=>`- ${t}`,_k=t=>L.isFunction(t)||t===null||t===!1,Cg={getAdapter:t=>{t=L.isArray(t)?t:[t];const{length:e}=t;let r,n;const s={};for(let o=0;o<e;o++){r=t[o];let i;if(n=r,!_k(r)&&(n=Vl[(i=String(r)).toLowerCase()],n===void 0))throw new Ce(`Unknown adapter '${i}'`);if(n)break;s[i||"#"+o]=n}if(!n){const o=Object.entries(s).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let i=e?o.length>1?`since :
`+o.map(fh).join(`
`):" "+fh(o[0]):"as no adapter specified";throw new Ce("There is no suitable adapter to dispatch the request "+i,"ERR_NOT_SUPPORT")}return n},adapters:Vl};function Ka(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new ws(null,t)}function ph(t){return Ka(t),t.headers=St.from(t.headers),t.data=Wa.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Cg.getAdapter(t.adapter||So.adapter)(t).then(function(n){return Ka(t),n.data=Wa.call(t,t.transformResponse,n),n.headers=St.from(n.headers),n},function(n){return _g(n)||(Ka(t),n&&n.response&&(n.response.data=Wa.call(t,t.transformResponse,n.response),n.response.headers=St.from(n.response.headers))),Promise.reject(n)})}const Ag="1.9.0",aa={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{aa[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});const gh={};aa.transitional=function(e,r,n){function s(o,i){return"[Axios v"+Ag+"] Transitional option '"+o+"'"+i+(n?". "+n:"")}return(o,i,a)=>{if(e===!1)throw new Ce(s(i," has been removed"+(r?" in "+r:"")),Ce.ERR_DEPRECATED);return r&&!gh[i]&&(gh[i]=!0,console.warn(s(i," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(o,i,a):!0}};aa.spelling=function(e){return(r,n)=>(console.warn(`${n} is likely a misspelling of ${e}`),!0)};function xk(t,e,r){if(typeof t!="object")throw new Ce("options must be an object",Ce.ERR_BAD_OPTION_VALUE);const n=Object.keys(t);let s=n.length;for(;s-- >0;){const o=n[s],i=e[o];if(i){const a=t[o],l=a===void 0||i(a,o,t);if(l!==!0)throw new Ce("option "+o+" must be "+l,Ce.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new Ce("Unknown option "+o,Ce.ERR_BAD_OPTION)}}const ni={assertOptions:xk,validators:aa},er=ni.validators;let Tn=class{constructor(e){this.defaults=e||{},this.interceptors={request:new ih,response:new ih}}async request(e,r){try{return await this._request(e,r)}catch(n){if(n instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const o=s.stack?s.stack.replace(/^.+\n/,""):"";try{n.stack?o&&!String(n.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+o):n.stack=o}catch{}}throw n}}_request(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=Nn(this.defaults,r);const{transitional:n,paramsSerializer:s,headers:o}=r;n!==void 0&&ni.assertOptions(n,{silentJSONParsing:er.transitional(er.boolean),forcedJSONParsing:er.transitional(er.boolean),clarifyTimeoutError:er.transitional(er.boolean)},!1),s!=null&&(L.isFunction(s)?r.paramsSerializer={serialize:s}:ni.assertOptions(s,{encode:er.function,serialize:er.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),ni.assertOptions(r,{baseUrl:er.spelling("baseURL"),withXsrfToken:er.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let i=o&&L.merge(o.common,o[r.method]);o&&L.forEach(["delete","get","head","post","put","patch","common"],g=>{delete o[g]}),r.headers=St.concat(i,o);const a=[];let l=!0;this.interceptors.request.forEach(function(v){typeof v.runWhen=="function"&&v.runWhen(r)===!1||(l=l&&v.synchronous,a.unshift(v.fulfilled,v.rejected))});const c=[];this.interceptors.response.forEach(function(v){c.push(v.fulfilled,v.rejected)});let u,h=0,f;if(!l){const g=[ph.bind(this),void 0];for(g.unshift.apply(g,a),g.push.apply(g,c),f=g.length,u=Promise.resolve(r);h<f;)u=u.then(g[h++],g[h++]);return u}f=a.length;let p=r;for(h=0;h<f;){const g=a[h++],v=a[h++];try{p=g(p)}catch(_){v.call(this,_);break}}try{u=ph.call(this,p)}catch(g){return Promise.reject(g)}for(h=0,f=c.length;h<f;)u=u.then(c[h++],c[h++]);return u}getUri(e){e=Nn(this.defaults,e);const r=Eg(e.baseURL,e.url,e.allowAbsoluteUrls);return yg(r,e.params,e.paramsSerializer)}};L.forEach(["delete","get","head","options"],function(e){Tn.prototype[e]=function(r,n){return this.request(Nn(n||{},{method:e,url:r,data:(n||{}).data}))}});L.forEach(["post","put","patch"],function(e){function r(n){return function(o,i,a){return this.request(Nn(a||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:o,data:i}))}}Tn.prototype[e]=r(),Tn.prototype[e+"Form"]=r(!0)});let Ek=class Ig{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(o){r=o});const n=this;this.promise.then(s=>{if(!n._listeners)return;let o=n._listeners.length;for(;o-- >0;)n._listeners[o](s);n._listeners=null}),this.promise.then=s=>{let o;const i=new Promise(a=>{n.subscribe(a),o=a}).then(s);return i.cancel=function(){n.unsubscribe(o)},i},e(function(o,i,a){n.reason||(n.reason=new ws(o,i,a),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const r=this._listeners.indexOf(e);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const e=new AbortController,r=n=>{e.abort(n)};return this.subscribe(r),e.signal.unsubscribe=()=>this.unsubscribe(r),e.signal}static source(){let e;return{token:new Ig(function(s){e=s}),cancel:e}}};function kk(t){return function(r){return t.apply(null,r)}}function Sk(t){return L.isObject(t)&&t.isAxiosError===!0}const ql={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(ql).forEach(([t,e])=>{ql[e]=t});function Rg(t){const e=new Tn(t),r=ig(Tn.prototype.request,e);return L.extend(r,Tn.prototype,e,{allOwnKeys:!0}),L.extend(r,e,null,{allOwnKeys:!0}),r.create=function(s){return Rg(Nn(t,s))},r}const me=Rg(So);me.Axios=Tn;me.CanceledError=ws;me.CancelToken=Ek;me.isCancel=_g;me.VERSION=Ag;me.toFormData=oa;me.AxiosError=Ce;me.Cancel=me.CanceledError;me.all=function(e){return Promise.all(e)};me.spread=kk;me.isAxiosError=Sk;me.mergeConfig=Nn;me.AxiosHeaders=St;me.formToJSON=t=>wg(L.isHTMLForm(t)?new FormData(t):t);me.getAdapter=Cg.getAdapter;me.HttpStatusCode=ql;me.default=me;const{Axios:Tk,AxiosError:Ck,CanceledError:Ak,isCancel:Ik,CancelToken:Rk,VERSION:Ok,all:Pk,Cancel:$k,isAxiosError:Nk,spread:Lk,toFormData:Mk,AxiosHeaders:jk,HttpStatusCode:Dk,formToJSON:Uk,getAdapter:Bk,mergeConfig:Fk}=me,Hk=Object.freeze(Object.defineProperty({__proto__:null,Axios:Tk,AxiosError:Ck,AxiosHeaders:jk,Cancel:$k,CancelToken:Rk,CanceledError:Ak,HttpStatusCode:Dk,VERSION:Ok,all:Pk,default:me,formToJSON:Uk,getAdapter:Bk,isAxiosError:Nk,isCancel:Ik,mergeConfig:Fk,spread:Lk,toFormData:Mk},Symbol.toStringTag,{value:"Module"}));class Vk{constructor(e={}){this.cache=new Map,this.defaultTTL=e.defaultTTL||5*60*1e3,this.maxSize=e.maxSize||100}generateKey(e,r={}){const n=Object.keys(r).sort().map(s=>`${s}=${JSON.stringify(r[s])}`).join("&");return`${e}?${n}`}get(e){const r=this.cache.get(e);if(!r)return null;const s=Date.now()-r.timestamp;return{data:r.data,age:s,isStale:s>r.ttl,isFresh:s<=r.ttl}}set(e,r,n=this.defaultTTL){if(this.cache.size>=this.maxSize){const s=this.cache.keys().next().value;this.cache.delete(s)}this.cache.set(e,{data:r,timestamp:Date.now(),ttl:n})}delete(e){this.cache.delete(e)}clear(){this.cache.clear()}clearExpired(){const e=Date.now();for(const[r,n]of this.cache.entries())e-n.timestamp>n.ttl*2&&this.cache.delete(r)}getStats(){return{size:this.cache.size,maxSize:this.maxSize,keys:Array.from(this.cache.keys())}}}const Nr=new Vk({defaultTTL:5*60*1e3,maxSize:100}),qk={async get(t,e,r=5*60*1e3){const n=Nr.get(t);if(n&&n.isFresh)return console.log(` Cache HIT (fresh): ${t}`),n.data;if(n&&n.isStale){console.log(` Cache HIT (stale): ${t} - Revalidating...`);const s=n.data;return e().then(o=>{Nr.set(t,o,r),console.log(` Cache UPDATED: ${t}`)}).catch(o=>{console.error(` Cache revalidation failed: ${t}`,o)}),s}console.log(` Cache MISS: ${t}`);try{const s=await e();return Nr.set(t,s,r),s}catch(s){if(n)return console.warn(` Fetch failed, returning stale data: ${t}`),n.data;throw s}},invalidate(t){const r=Nr.getStats().keys.filter(n=>n.includes(t));r.forEach(n=>{Nr.delete(n)}),console.log(` Invalidated ${r.length} cache entries matching: ${t}`)},clear(){Nr.clear(),console.log(" All cache cleared")},getStats(){return Nr.getStats()}};setInterval(()=>{Nr.clearExpired(),console.log(" Cleared expired cache")},10*60*1e3);const sn="http://localhost/HTHREE_film/backend/api",S5=async(t=!0)=>{try{const e=`${sn}/plans.php?active_only=${t}`;return await qk.get(e,async()=>(await me.get(e)).data,10*60*1e3)}catch(e){throw console.error("Error fetching plans:",e),e}},zk=async t=>{try{return(await me.get(`${sn}/cart.php`,{params:{user_id:t}})).data}catch(e){throw console.error("Error fetching cart:",e),e}},Wk=async(t,e,r=1,n=1)=>{try{return(await me.post(`${sn}/cart.php`,{user_id:t,plan_id:e,quantity:r,duration_months:n})).data}catch(s){throw console.error("Error adding to cart:",s),s}},Kk=async(t,e)=>{try{return(await me.put(`${sn}/cart.php`,{cart_id:t,quantity:e})).data}catch(r){throw console.error("Error updating cart:",r),r}},Gk=async t=>{try{return(await me.delete(`${sn}/cart.php`,{params:{cart_id:t}})).data}catch(e){throw console.error("Error removing from cart:",e),e}},Jk=async t=>{try{return(await me.delete(`${sn}/cart.php`,{params:{user_id:t}})).data}catch(e){throw console.error("Error clearing cart:",e),e}},T5=async t=>{try{return(await me.post(`${sn}/orders.php`,t)).data}catch(e){throw console.error("Error creating order:",e),e}},C5=async(t,e,r=null)=>{try{return(await me.post(`${sn}/coupons.php`,{code:t,order_value:e,user_id:r})).data}catch(n){throw console.error("Error validating coupon:",n),n}},Xk=()=>"https://your-production-domain.com/backend/api",la={BACKEND_URL:Xk(),MOVIE_API_URL:"https://phimapi.com/v1/api",USE_PHP_BACKEND:!1},mh=la.BACKEND_URL;class Yk{async register(e,r,n,s){try{return(await me.post(`${mh}/auth/register.php`,{username:e,email:r,password:n,full_name:s})).data}catch(o){throw console.error("Register error:",o),o}}async login(e,r){try{const n=await me.post(`${mh}/auth/login.php`,{username:e,password:r});return n.data.status&&(localStorage.setItem("user",JSON.stringify(n.data.user)),localStorage.setItem("token",n.data.token)),n.data}catch(n){throw console.error("Login error:",n),n}}logout(){localStorage.removeItem("user"),localStorage.removeItem("token")}getCurrentUser(){const e=localStorage.getItem("user");return e?JSON.parse(e):null}isLoggedIn(){return!!localStorage.getItem("token")}getToken(){return localStorage.getItem("token")}}const zs=new Yk,si=Oc("auth",{state:()=>({user:null,loading:!0,error:null}),getters:{isAuthenticated:t=>!!t.user,userId:t=>{var e,r;return((e=t.user)==null?void 0:e.id)||((r=t.user)==null?void 0:r.uid)||null},userEmail:t=>{var e;return((e=t.user)==null?void 0:e.email)||null},userName:t=>t.user?t.user.full_name||t.user.displayName||t.user.username||"User":null,userAvatar:t=>t.user&&(t.user.avatar||t.user.photoURL)||null},actions:{async initAuth(){this.loading=!0;try{const t=$n();return new Promise(e=>{_o(t,r=>{if(r)this.user={id:r.uid,uid:r.uid,email:r.email,displayName:r.displayName,photoURL:r.photoURL,emailVerified:r.emailVerified},console.log(" AuthStore - Firebase user loaded:",r.email);else{const n=zs.getCurrentUser();n?(this.user=n,console.log(" AuthStore - PHP user loaded:",n.email)):(this.user=null,console.log(" AuthStore - No user logged in"))}this.loading=!1,e(this.user)})})}catch(t){return console.error("Error initializing auth:",t),this.error=t.message,this.loading=!1,null}},setUser(t){this.user=t,this.error=null},clearUser(){this.user=null,this.error=null},async logout(){try{await $n().signOut(),zs.logout(),this.clearUser(),console.log(" AuthStore - User logged out")}catch(t){throw console.error("Error logging out:",t),this.error=t.message,t}}}}),Qk=Oc("cart",{state:()=>({items:[],total:0,count:0,loading:!1,error:null}),getters:{cartCount:t=>t.count,cartTotal:t=>t.total,cartTotalFormatted:t=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(t.total),isEmpty:t=>t.items.length===0},actions:{async fetchCart(){var r,n;const t=si(),e=((r=t.user)==null?void 0:r.id)||((n=t.user)==null?void 0:n.uid);if(!e){this.items=[],this.total=0,this.count=0;return}this.loading=!0,this.error=null;try{const s=await zk(e);s.success&&(this.items=s.data.items,this.total=s.data.total,this.count=s.data.count)}catch(s){this.error=s.message,console.error("Error fetching cart:",s)}finally{this.loading=!1}},async addItem(t,e=1,r=1){var o,i;const n=si(),s=((o=n.user)==null?void 0:o.id)||((i=n.user)==null?void 0:i.uid);if(!s)throw new Error("Vui lng ng nhp  thm vo gi hng");this.loading=!0,this.error=null;try{console.log("Adding to cart:",{userId:s,planId:t,quantity:e,durationMonths:r});const a=await Wk(s,t,e,r);if(a.success)return await this.fetchCart(),a}catch(a){throw console.error("Error adding to cart:",a),this.error=a.message,a}finally{this.loading=!1}},async updateQuantity(t,e){this.loading=!0,this.error=null;try{const r=await Kk(t,e);if(r.success)return await this.fetchCart(),r}catch(r){throw this.error=r.message,r}finally{this.loading=!1}},async removeItem(t){this.loading=!0,this.error=null;try{const e=await Gk(t);if(e.success)return await this.fetchCart(),e}catch(e){throw this.error=e.message,e}finally{this.loading=!1}},async clear(){var r,n;const t=si(),e=((r=t.user)==null?void 0:r.id)||((n=t.user)==null?void 0:n.uid);if(e){this.loading=!0,this.error=null;try{(await Jk(e)).success&&(this.items=[],this.total=0,this.count=0)}catch(s){throw this.error=s.message,s}finally{this.loading=!1}}},hasItem(t){return this.items.some(e=>e.plan_id===t)},getItem(t){return this.items.find(e=>e.plan_id===t)}}}),To={TOP_LEFT:"top-left",TOP_RIGHT:"top-right",TOP_CENTER:"top-center",BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",BOTTOM_CENTER:"bottom-center"},hs={LIGHT:"light",DARK:"dark",COLORED:"colored",AUTO:"auto"},xt={INFO:"info",SUCCESS:"success",WARNING:"warning",ERROR:"error",DEFAULT:"default"},Zk={BOUNCE:"bounce",SLIDE:"slide",FLIP:"flip",ZOOM:"zoom",NONE:"none"},eS={dangerouslyHTMLString:!1,multiple:!0,position:To.TOP_RIGHT,autoClose:5e3,transition:"bounce",hideProgressBar:!1,pauseOnHover:!0,pauseOnFocusLoss:!0,closeOnClick:!0,className:"",bodyClassName:"",style:{},progressClassName:"",progressStyle:{},role:"alert",theme:"light"},tS={rtl:!1,newestOnTop:!1,toastClassName:""},Og={...eS,...tS};xt.DEFAULT;var je=(t=>(t[t.COLLAPSE_DURATION=300]="COLLAPSE_DURATION",t[t.DEBOUNCE_DURATION=50]="DEBOUNCE_DURATION",t.CSS_NAMESPACE="Toastify",t))(je||{}),zl=(t=>(t.ENTRANCE_ANIMATION_END="d",t))(zl||{});const rS={enter:"Toastify--animate Toastify__bounce-enter",exit:"Toastify--animate Toastify__bounce-exit",appendPosition:!0},nS={enter:"Toastify--animate Toastify__slide-enter",exit:"Toastify--animate Toastify__slide-exit",appendPosition:!0},sS={enter:"Toastify--animate Toastify__zoom-enter",exit:"Toastify--animate Toastify__zoom-exit"},oS={enter:"Toastify--animate Toastify__flip-enter",exit:"Toastify--animate Toastify__flip-exit"},vh="Toastify--animate Toastify__none-enter";function Pg(t,e=!1){var r;let n=rS;if(!t||typeof t=="string")switch(t){case"flip":n=oS;break;case"zoom":n=sS;break;case"slide":n=nS;break}else n=t;if(e)n.enter=vh;else if(n.enter===vh){const s=(r=n.exit.split("__")[1])==null?void 0:r.split("-")[0];n.enter=`Toastify--animate Toastify__${s}-enter`}return n}function iS(t){return t.containerId||String(t.position)}const ca="will-unmount";function aS(t=To.TOP_RIGHT){return!!document.querySelector(`.${je.CSS_NAMESPACE}__toast-container--${t}`)}function lS(t=To.TOP_RIGHT){return`${je.CSS_NAMESPACE}__toast-container--${t}`}function cS(t,e,r=!1){const n=[`${je.CSS_NAMESPACE}__toast-container`,`${je.CSS_NAMESPACE}__toast-container--${t}`,r?`${je.CSS_NAMESPACE}__toast-container--rtl`:null].filter(Boolean).join(" ");return ns(e)?e({position:t,rtl:r,defaultClassName:n}):`${n} ${e||""}`}function uS(t){var e;const{position:r,containerClassName:n,rtl:s=!1,style:o={}}=t,i=je.CSS_NAMESPACE,a=lS(r),l=document.querySelector(`.${i}`),c=document.querySelector(`.${a}`),u=!!c&&!((e=c.className)!=null&&e.includes(ca)),h=l||document.createElement("div"),f=document.createElement("div");f.className=cS(r,n,s),f.dataset.testid=`${je.CSS_NAMESPACE}__toast-container--${r}`,f.id=iS(t);for(const p in o)if(Object.prototype.hasOwnProperty.call(o,p)){const g=o[p];f.style[p]=g}return l||(h.className=je.CSS_NAMESPACE,document.body.appendChild(h)),u||h.appendChild(f),f}function Wl(t){var e,r,n;const s=typeof t=="string"?t:((e=t.currentTarget)==null?void 0:e.id)||((r=t.target)==null?void 0:r.id),o=document.getElementById(s);o&&o.removeEventListener("animationend",Wl,!1);try{co[s].unmount(),(n=document.getElementById(s))==null||n.remove(),delete co[s],delete at[s]}catch{}}const co=Ut({});function dS(t,e){const r=document.getElementById(String(e));r&&(co[r.id]=t)}function Kl(t,e=!0){const r=String(t);if(!co[r])return;const n=document.getElementById(r);n&&n.classList.add(ca),e?(fS(t),n&&n.addEventListener("animationend",Wl,!1)):Wl(r),lr.items=lr.items.filter(s=>s.containerId!==t)}function hS(t){for(const e in co)Kl(e,t);lr.items=[]}function $g(t,e){const r=document.getElementById(t.toastId);if(r){let n=t;n={...n,...Pg(n.transition)};const s=n.appendPosition?`${n.exit}--${n.position}`:n.exit;r.className+=` ${s}`,e&&e(r)}}function fS(t){for(const e in at)if(e===t)for(const r of at[e]||[])$g(r)}function pS(t){const e=fs().find(r=>r.toastId===t);return e==null?void 0:e.containerId}function Vc(t){return document.getElementById(t)}function gS(t){const e=Vc(t.containerId);return e&&e.classList.contains(ca)}function yh(t){var e;const r=Rn(t.content)?Ee(t.content.props):null;return r??Ee((e=t.data)!=null?e:{})}function mS(t){return t?lr.items.filter(e=>e.containerId===t).length>0:lr.items.length>0}function vS(){if(lr.items.length>0){const t=lr.items.shift();oi(t==null?void 0:t.toastContent,t==null?void 0:t.toastProps)}}const at=Ut({}),lr=Ut({items:[]});function fs(){const t=Ee(at);return Object.values(t).reduce((e,r)=>[...e,...r],[])}function yS(t){return fs().find(e=>e.toastId===t)}function oi(t,e={}){if(gS(e)){const r=Vc(e.containerId);r&&r.addEventListener("animationend",Gl.bind(null,t,e),!1)}else Gl(t,e)}function Gl(t,e={}){const r=Vc(e.containerId);r&&r.removeEventListener("animationend",Gl.bind(null,t,e),!1);const n=at[e.containerId]||[],s=n.length>0;if(!s&&!aS(e.position)){const o=uS(e),i=Xf(DS,e);e.useHandler&&e.useHandler(i),i.mount(o),dS(i,o.id)}s&&!e.updateId&&(e.position=n[0].position),Qr(()=>{e.updateId?Tt.update(e):Tt.add(t,e)})}const Tt={add(t,e){const{containerId:r=""}=e;r&&(at[r]=at[r]||[],at[r].find(n=>n.toastId===e.toastId)||setTimeout(()=>{var n,s;e.newestOnTop?(n=at[r])==null||n.unshift(e):(s=at[r])==null||s.push(e),e.onOpen&&e.onOpen(yh(e))},e.delay||0))},remove(t){if(t){const e=pS(t);if(e){const r=at[e];let n=r.find(s=>s.toastId===t);at[e]=r.filter(s=>s.toastId!==t),!at[e].length&&!mS(e)&&Kl(e,!1),vS(),Qr(()=>{n!=null&&n.onClose&&(n.onClose(yh(n)),n=void 0)})}}},update(t={}){const{containerId:e=""}=t;if(e&&t.updateId){at[e]=at[e]||[];const r=at[e].find(o=>o.toastId===t.toastId),n=(r==null?void 0:r.position)!==t.position||(r==null?void 0:r.transition)!==t.transition,s={...t,disabledEnterTransition:!n,updateId:void 0};Tt.dismissForce(t==null?void 0:t.toastId),setTimeout(()=>{Pe(s.content,s)},t.delay||0)}},clear(t,e=!0){t?Kl(t,e):hS(e)},dismissCallback(t){var e;const r=(e=t.currentTarget)==null?void 0:e.id,n=document.getElementById(r);n&&(n.removeEventListener("animationend",Tt.dismissCallback,!1),setTimeout(()=>{Tt.remove(r)}))},dismiss(t){if(t){const e=fs();for(const r of e)if(r.toastId===t){$g(r,n=>{n.addEventListener("animationend",Tt.dismissCallback,!1)});break}}},dismissForce(t){if(t){const e=fs();for(const r of e)if(r.toastId===t){const n=document.getElementById(t);n&&(n.remove(),n.removeEventListener("animationend",Tt.dismissCallback,!1),Tt.remove(t));break}}}},bS=Ut({useHandler:void 0}),Ng=Ut({}),$i=Ut({});function Lg(){return Math.random().toString(36).substring(2,9)}function wS(t){return typeof t=="number"&&!isNaN(t)}function Jl(t){return typeof t=="string"}function ns(t){return typeof t=="function"}function ua(...t){return cr(...t)}function ii(t){return typeof t=="object"&&(!!(t!=null&&t.render)||!!(t!=null&&t.setup)||typeof(t==null?void 0:t.type)=="object")}function _S(t={}){Ng[`${je.CSS_NAMESPACE}-default-options`]=t}function xS(){return Ng[`${je.CSS_NAMESPACE}-default-options`]||Og}function ES(){const t=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches;return document.documentElement.classList.contains("dark")||t?"dark":"light"}var ai=(t=>(t[t.Enter=0]="Enter",t[t.Exit=1]="Exit",t))(ai||{});const Mg={containerId:{type:[String,Number],required:!1,default:""},clearOnUrlChange:{type:Boolean,required:!1,default:!0},disabledEnterTransition:{type:Boolean,required:!1,default:!1},dangerouslyHTMLString:{type:Boolean,required:!1,default:!1},multiple:{type:Boolean,required:!1,default:!0},limit:{type:Number,required:!1,default:void 0},position:{type:String,required:!1,default:To.TOP_LEFT},bodyClassName:{type:String,required:!1,default:""},autoClose:{type:[Number,Boolean],required:!1,default:!1},closeButton:{type:[Boolean,Function,Object],required:!1,default:void 0},transition:{type:[String,Object],required:!1,default:"bounce"},hideProgressBar:{type:Boolean,required:!1,default:!1},pauseOnHover:{type:Boolean,required:!1,default:!0},pauseOnFocusLoss:{type:Boolean,required:!1,default:!0},closeOnClick:{type:Boolean,required:!1,default:!0},progress:{type:Number,required:!1,default:void 0},progressClassName:{type:String,required:!1,default:""},toastStyle:{type:Object,required:!1,default(){return{}}},progressStyle:{type:Object,required:!1,default(){return{}}},role:{type:String,required:!1,default:"alert"},theme:{type:String,required:!1,default:hs.AUTO},content:{type:[String,Object,Function],required:!1,default:""},toastId:{type:[String,Number],required:!1,default:""},data:{type:[Object,String],required:!1,default(){return{}}},type:{type:String,required:!1,default:xt.DEFAULT},icon:{type:[Boolean,String,Number,Object,Function],required:!1,default:void 0},delay:{type:Number,required:!1,default:void 0},onOpen:{type:Function,required:!1,default:void 0},onClose:{type:Function,required:!1,default:void 0},onClick:{type:Function,required:!1,default:void 0},isLoading:{type:Boolean,required:!1,default:void 0},rtl:{type:Boolean,required:!1,default:!1},toastClassName:{type:String,required:!1,default:""},updateId:{type:[String,Number],required:!1,default:""},contentProps:{type:Object,required:!1,default:null},expandCustomProps:{type:Boolean,required:!1,default:!1}},kS={autoClose:{type:[Number,Boolean],required:!0},isRunning:{type:Boolean,required:!1,default:void 0},type:{type:String,required:!1,default:xt.DEFAULT},theme:{type:String,required:!1,default:hs.AUTO},hide:{type:Boolean,required:!1,default:void 0},className:{type:[String,Function],required:!1,default:""},controlledProgress:{type:Boolean,required:!1,default:void 0},rtl:{type:Boolean,required:!1,default:void 0},isIn:{type:Boolean,required:!1,default:void 0},progress:{type:Number,required:!1,default:void 0},closeToast:{type:Function,required:!1,default:void 0}},SS=ms({name:"ProgressBar",props:kS,setup(t,{attrs:e}){const r=q(),n=Ae(()=>t.hide?"true":"false"),s=Ae(()=>({...e.style||{},animationDuration:`${t.autoClose===!0?5e3:t.autoClose}ms`,animationPlayState:t.isRunning?"running":"paused",opacity:t.hide||t.autoClose===!1?0:1,transform:t.controlledProgress?`scaleX(${t.progress})`:"none"})),o=Ae(()=>[`${je.CSS_NAMESPACE}__progress-bar`,t.controlledProgress?`${je.CSS_NAMESPACE}__progress-bar--controlled`:`${je.CSS_NAMESPACE}__progress-bar--animated`,`${je.CSS_NAMESPACE}__progress-bar-theme--${t.theme}`,`${je.CSS_NAMESPACE}__progress-bar--${t.type}`,t.rtl?`${je.CSS_NAMESPACE}__progress-bar--rtl`:null].filter(Boolean).join(" ")),i=Ae(()=>`${o.value} ${(e==null?void 0:e.class)||""}`),a=()=>{r.value&&(r.value.onanimationend=null,r.value.ontransitionend=null)},l=()=>{t.isIn&&t.closeToast&&t.autoClose!==!1&&(t.closeToast(),a())},c=Ae(()=>t.controlledProgress?null:l),u=Ae(()=>t.controlledProgress?l:null);return Ko(()=>{r.value&&(a(),r.value.onanimationend=c.value,r.value.ontransitionend=u.value)}),()=>V("div",{ref:r,role:"progressbar","aria-hidden":n.value,"aria-label":"notification timer",class:i.value,style:s.value},null)}}),TS=ms({name:"CloseButton",inheritAttrs:!1,props:{theme:{type:String,required:!1,default:hs.AUTO},type:{type:String,required:!1,default:hs.LIGHT},ariaLabel:{type:String,required:!1,default:"close"},closeToast:{type:Function,required:!1,default:void 0}},setup(t){return()=>V("button",{class:`${je.CSS_NAMESPACE}__close-button ${je.CSS_NAMESPACE}__close-button--${t.theme}`,type:"button",onClick:e=>{e.stopPropagation(),t.closeToast&&t.closeToast(e)},"aria-label":t.ariaLabel},[V("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},[V("path",{"fill-rule":"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"},null)])])}}),da=({theme:t,type:e,path:r,...n})=>V("svg",cr({viewBox:"0 0 24 24",width:"100%",height:"100%",fill:t==="colored"?"currentColor":`var(--toastify-icon-color-${e})`},n),[V("path",{d:r},null)]);function CS(t){return V(da,cr(t,{path:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}),null)}function AS(t){return V(da,cr(t,{path:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}),null)}function IS(t){return V(da,cr(t,{path:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}),null)}function RS(t){return V(da,cr(t,{path:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}),null)}function OS(){return V("div",{class:`${je.CSS_NAMESPACE}__spinner`},null)}const li={info:AS,warning:CS,success:IS,error:RS,spinner:OS},PS=t=>t in li;function $S({theme:t,type:e,isLoading:r,icon:n}){let s;const o=!!r||e==="loading",i={theme:t,type:e};if(o&&(n===void 0||typeof n=="boolean"))return li.spinner();if(n!==!1){if(ii(n))s=Ee(n);else if(ns(n)){const a=n;i.type=o?"loading":e,s=a(i),s=!s&&o?li.spinner():s}else Rn(n)?s=Er(n,i):Jl(n)||wS(n)?s=n:PS(e)&&(s=li[e](i));return s}}const NS=()=>{};function LS(t,e,r=je.COLLAPSE_DURATION){const{scrollHeight:n,style:s}=t,o=r;requestAnimationFrame(()=>{s.minHeight="initial",s.height=n+"px",s.transition=`all ${o}ms`,requestAnimationFrame(()=>{s.height="0",s.padding="0",s.margin="0",setTimeout(e,o)})})}function MS(t){const e=q(!1),r=q(!1),n=q(!1),s=q(ai.Enter),o=Ut({...t,appendPosition:t.appendPosition||!1,collapse:typeof t.collapse>"u"?!0:t.collapse,collapseDuration:t.collapseDuration||je.COLLAPSE_DURATION}),i=o.done||NS,a=Ae(()=>o.appendPosition?`${o.enter}--${o.position}`:o.enter),l=Ae(()=>o.appendPosition?`${o.exit}--${o.position}`:o.exit),c=Ae(()=>t.pauseOnHover?{onMouseenter:_,onMouseleave:v}:{});function u(){const k=a.value.split(" ");f().addEventListener(zl.ENTRANCE_ANIMATION_END,v,{once:!0});const E=$=>{const R=f();$.target===R&&(R.dispatchEvent(new Event(zl.ENTRANCE_ANIMATION_END)),R.removeEventListener("animationend",E),R.removeEventListener("animationcancel",E),s.value===ai.Enter&&$.type!=="animationcancel"&&R.classList.remove(...k))},C=()=>{const $=f();$.classList.add(...k),$.addEventListener("animationend",E),$.addEventListener("animationcancel",E)};t.pauseOnFocusLoss&&p(),C()}function h(){if(!f())return;const k=()=>{const C=f();C.removeEventListener("animationend",k),o.collapse?LS(C,i,o.collapseDuration):i()},E=()=>{const C=f();s.value=ai.Exit,C&&(C.className+=` ${l.value}`,C.addEventListener("animationend",k))};r.value||(n.value?k():setTimeout(E))}function f(){return t.toastRef.value}function p(){document.hasFocus()||_(),window.addEventListener("focus",v),window.addEventListener("blur",_)}function g(){window.removeEventListener("focus",v),window.removeEventListener("blur",_)}function v(){(!t.loading.value||t.isLoading===void 0)&&(e.value=!0)}function _(){e.value=!1}function T(k){k&&(k.stopPropagation(),k.preventDefault()),r.value=!1}return Ko(h),Ko(()=>{const k=fs();r.value=k.findIndex(E=>E.toastId===o.toastId)>-1}),Ko(()=>{t.isLoading!==void 0&&(t.loading.value?_():v())}),Et(u),Jt(()=>{t.pauseOnFocusLoss&&g()}),{isIn:r,isRunning:e,hideToast:T,eventHandlers:c}}const jS=ms({name:"ToastItem",inheritAttrs:!1,props:Mg,setup(t){const e=q(),r=Ae(()=>!!t.isLoading),n=Ae(()=>t.progress!==void 0&&t.progress!==null),s=Ae(()=>$S(t)),o=Ae(()=>[`${je.CSS_NAMESPACE}__toast`,`${je.CSS_NAMESPACE}__toast-theme--${t.theme}`,`${je.CSS_NAMESPACE}__toast--${t.type}`,t.rtl?`${je.CSS_NAMESPACE}__toast--rtl`:void 0,t.toastClassName||""].filter(Boolean).join(" ")),{isRunning:i,isIn:a,hideToast:l,eventHandlers:c}=MS({toastRef:e,loading:r,done:()=>{Tt.remove(t.toastId)},...Pg(t.transition,t.disabledEnterTransition),...t});return()=>V("div",cr({id:t.toastId,class:o.value,style:t.toastStyle||{},ref:e,"data-testid":`toast-item-${t.toastId}`,onClick:u=>{t.closeOnClick&&l(),t.onClick&&t.onClick(u)}},c.value),[V("div",{role:t.role,"data-testid":"toast-body",class:`${je.CSS_NAMESPACE}__toast-body ${t.bodyClassName||""}`},[s.value!=null&&V("div",{"data-testid":`toast-icon-${t.type}`,class:[`${je.CSS_NAMESPACE}__toast-icon`,t.isLoading?"":`${je.CSS_NAMESPACE}--animate-icon ${je.CSS_NAMESPACE}__zoom-enter`].join(" ")},[ii(s.value)?wn(Ee(s.value),{theme:t.theme,type:t.type}):ns(s.value)?s.value({theme:t.theme,type:t.type}):s.value]),V("div",{"data-testid":"toast-content"},[ii(t.content)?wn(Ee(t.content),{toastProps:Ee(t),closeToast:l,data:t.data,...t.expandCustomProps?t.contentProps:{contentProps:t.contentProps||{}}}):ns(t.content)?t.content({toastProps:Ee(t),closeToast:l,data:t.data}):t.dangerouslyHTMLString?wn("div",{innerHTML:t.content}):t.content])]),(t.closeButton===void 0||t.closeButton===!0)&&V(TS,{theme:t.theme,closeToast:u=>{u.stopPropagation(),u.preventDefault(),l()}},null),ii(t.closeButton)?wn(Ee(t.closeButton),{closeToast:l,type:t.type,theme:t.theme}):ns(t.closeButton)?t.closeButton({closeToast:l,type:t.type,theme:t.theme}):null,V(SS,{className:t.progressClassName,style:t.progressStyle,rtl:t.rtl,theme:t.theme,isIn:a.value,type:t.type,hide:t.hideProgressBar,isRunning:i.value,autoClose:t.autoClose,controlledProgress:n.value,progress:t.progress,closeToast:t.isLoading?void 0:l},null)])}});let Ws=0;function jg(){typeof window>"u"||(Ws&&window.cancelAnimationFrame(Ws),Ws=window.requestAnimationFrame(jg),$i.lastUrl!==window.location.href&&($i.lastUrl=window.location.href,Tt.clear()))}const DS=ms({name:"ToastifyContainer",inheritAttrs:!1,props:Mg,setup(t){const e=Ae(()=>t.containerId),r=Ae(()=>at[e.value]||[]),n=Ae(()=>r.value.filter(s=>s.position===t.position));return Et(()=>{typeof window<"u"&&t.clearOnUrlChange&&window.requestAnimationFrame(jg)}),Jt(()=>{typeof window<"u"&&Ws&&(window.cancelAnimationFrame(Ws),$i.lastUrl="")}),()=>V(ve,null,[n.value.map(s=>{const{toastId:o=""}=s;return V(jS,cr({key:o},s),null)})])}});let Ga=!1;const Dg={isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1};function Ug(){const t=[];return fs().forEach(e=>{const r=document.getElementById(e.containerId);r&&!r.classList.contains(ca)&&t.push(e)}),t}function US(t){const e=Ug().length,r=t??0;return r>0&&e+lr.items.length>=r}function BS(t){US(t.limit)&&!t.updateId&&lr.items.push({toastId:t.toastId,containerId:t.containerId,toastContent:t.content,toastProps:t})}function on(t,e,r={}){if(Ga)return;r=ua(xS(),{type:e},Ee(r)),(!r.toastId||typeof r.toastId!="string"&&typeof r.toastId!="number")&&(r.toastId=Lg()),r={...r,...r.type==="loading"?Dg:{},content:t,containerId:r.containerId||String(r.position)};const n=Number(r==null?void 0:r.progress);return!isNaN(n)&&n<0&&(r.progress=0),n>1&&(r.progress=1),r.theme==="auto"&&(r.theme=ES()),BS(r),$i.lastUrl=window.location.href,r.multiple?lr.items.length?r.updateId&&oi(t,r):oi(t,r):(Ga=!0,Pe.clearAll(void 0,!1),setTimeout(()=>{oi(t,r)},0),setTimeout(()=>{Ga=!1},390)),r.toastId}const Pe=(t,e)=>on(t,xt.DEFAULT,e);Pe.info=(t,e)=>on(t,xt.DEFAULT,{...e,type:xt.INFO});Pe.error=(t,e)=>on(t,xt.DEFAULT,{...e,type:xt.ERROR});Pe.warning=(t,e)=>on(t,xt.DEFAULT,{...e,type:xt.WARNING});Pe.warn=Pe.warning;Pe.success=(t,e)=>on(t,xt.DEFAULT,{...e,type:xt.SUCCESS});Pe.loading=(t,e)=>on(t,xt.DEFAULT,ua(e,Dg));Pe.dark=(t,e)=>on(t,xt.DEFAULT,ua(e,{theme:hs.DARK}));Pe.remove=t=>{t?Tt.dismiss(t):Tt.clear()};Pe.clearAll=(t,e)=>{Qr(()=>{Tt.clear(t,e)})};Pe.isActive=t=>{let e=!1;return e=Ug().findIndex(r=>r.toastId===t)>-1,e};Pe.update=(t,e={})=>{setTimeout(()=>{const r=yS(t);if(r){const n=Ee(r),{content:s}=n,o={...n,...e,toastId:e.toastId||t,updateId:Lg()},i=o.render||s;delete o.render,on(i,o.type,o)}},0)};Pe.done=t=>{Pe.update(t,{isLoading:!1,progress:1})};Pe.promise=FS;function FS(t,{pending:e,error:r,success:n},s){var o,i,a;let l;const c={...s||{},autoClose:!1};e&&(l=Jl(e)?Pe.loading(e,c):Pe.loading(e.render,{...c,...e}));const u={autoClose:(o=s==null?void 0:s.autoClose)!=null?o:!0,closeOnClick:(i=s==null?void 0:s.closeOnClick)!=null?i:!0,closeButton:(a=s==null?void 0:s.autoClose)!=null?a:null,isLoading:void 0,draggable:null,delay:100},h=(p,g,v)=>{if(g==null){Pe.remove(l);return}const _={type:p,...u,...s,data:v},T=Jl(g)?{render:g}:g;return l?Pe.update(l,{..._,...T,isLoading:!1}):Pe(T.render,{..._,...T,isLoading:!1}),v},f=ns(t)?t():t;return f.then(p=>{h("success",n,p)}).catch(p=>{h("error",r,p)}),f}Pe.POSITION=To;Pe.THEME=hs;Pe.TYPE=xt;Pe.TRANSITIONS=Zk;const HS={install(t,e={}){bS.useHandler=e.useHandler||(()=>{}),VS(e)}};typeof window<"u"&&(window.Vue3Toastify=HS);function VS(t={}){const e=ua(Og,t);_S(e)}const pt=(t,e)=>{const r=t.__vccOpts||t;for(const[n,s]of e)r[n]=s;return r},qS={class:"space-y-1"},zS=["for"],WS={key:0,class:"text-red-400"},KS={class:"relative"},GS=["id","type","value","placeholder","required","disabled"],JS={key:0,class:"absolute right-3 top-1/2 -translate-y-1/2"},XS={key:1,class:"absolute right-3 top-1/2 -translate-y-1/2"},YS={key:0,class:"text-sm text-red-400 flex items-center gap-1 animate-slide-in"},QS={key:1,class:"text-sm text-gray-400"},ZS={__name:"FormInput",props:{id:String,label:String,type:{type:String,default:"text"},modelValue:[String,Number],placeholder:String,required:Boolean,disabled:Boolean,helperText:String,validation:Function,validateOnInput:{type:Boolean,default:!1}},emits:["update:modelValue","validate"],setup(t,{expose:e,emit:r}){const n=t,s=r,o=q(!1),i=q(""),a=Ae(()=>o.value&&!i.value&&n.modelValue&&n.modelValue.length>0),l=h=>{const f=h.target.value;s("update:modelValue",f),n.validateOnInput&&o.value&&u(f)},c=h=>{o.value=!0,u(h.target.value)},u=h=>{if(i.value="",n.required&&!h)return i.value="Trng ny l bt buc",s("validate",!1),!1;if(n.validation){const f=n.validation(h);if(f!==!0)return i.value=f,s("validate",!1),!1}return n.type==="email"&&h&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(h)?(i.value="Email khng hp l",s("validate",!1),!1):(s("validate",!0),!0)};return e({validate:u}),(h,f)=>(y(),x("div",qS,[t.label?(y(),x("label",{key:0,for:t.id,class:"block text-sm font-medium text-gray-300"},[le(j(t.label)+" ",1),t.required?(y(),x("span",WS,"*")):z("",!0)],8,zS)):z("",!0),d("div",KS,[d("input",{id:t.id,type:t.type,value:t.modelValue,onInput:l,onBlur:c,placeholder:t.placeholder,required:t.required,disabled:t.disabled,class:Te(["w-full px-4 py-2.5 rounded-lg bg-gray-800 text-white placeholder-gray-500 border transition-all","focus:outline-none focus:ring-2",i.value?"border-red-500 focus:border-red-500 focus:ring-red-500/50":a.value?"border-green-500 focus:border-green-500 focus:ring-green-500/50":"border-gray-700 focus:border-yellow-400 focus:ring-yellow-400/50",t.disabled&&"opacity-50 cursor-not-allowed"])},null,42,GS),a.value&&!i.value?(y(),x("div",JS,f[0]||(f[0]=[d("svg",{class:"w-5 h-5 text-green-500 animate-scale-in",fill:"currentColor",viewBox:"0 0 20 20"},[d("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})],-1)]))):z("",!0),i.value?(y(),x("div",XS,f[1]||(f[1]=[d("svg",{class:"w-5 h-5 text-red-500 animate-shake",fill:"currentColor",viewBox:"0 0 20 20"},[d("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})],-1)]))):z("",!0)]),V(lt,{name:"slide-down"},{default:fe(()=>[i.value?(y(),x("p",YS,[f[2]||(f[2]=d("svg",{class:"w-4 h-4 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20"},[d("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1)),le(" "+j(i.value),1)])):z("",!0)]),_:1}),t.helperText&&!i.value?(y(),x("p",QS,j(t.helperText),1)):z("",!0)]))}},Ts=pt(ZS,[["__scopeId","data-v-15cf11d7"]]),eT=["type","disabled"],tT={key:0,class:"absolute inset-0 flex items-center justify-center"},rT={__name:"LoadingButton",props:{loading:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},variant:{type:String,default:"primary",validator:t=>["primary","secondary","danger","success","ghost"].includes(t)},size:{type:String,default:"md",validator:t=>["xs","sm","md","lg","xl"].includes(t)},type:{type:String,default:"button"}},setup(t){const e=t,r=Ae(()=>({xs:"px-2 py-1 text-xs rounded",sm:"px-3 py-1.5 text-sm rounded-lg",md:"px-4 py-2 text-base rounded-lg",lg:"px-6 py-3 text-lg rounded-lg",xl:"px-8 py-4 text-xl rounded-xl"})[e.size]),n=Ae(()=>({xs:"w-3 h-3",sm:"w-4 h-4",md:"w-5 h-5",lg:"w-6 h-6",xl:"w-8 h-8"})[e.size]),s=Ae(()=>({primary:"bg-yellow-500 text-black hover:bg-yellow-600 focus:ring-yellow-400 shadow-lg",secondary:"bg-gray-700 text-white hover:bg-gray-600 focus:ring-gray-500",danger:"bg-red-500 text-white hover:bg-red-600 focus:ring-red-400",success:"bg-green-500 text-white hover:bg-green-600 focus:ring-green-400",ghost:"bg-transparent text-white border border-gray-600 hover:bg-gray-800 focus:ring-gray-500"})[e.variant]);return(o,i)=>(y(),x("button",cr({type:t.type,disabled:t.loading||t.disabled,class:["relative inline-flex items-center justify-center gap-2 font-semibold transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2",r.value,s.value,t.loading||t.disabled?"cursor-not-allowed opacity-70":"hover:scale-105"]},o.$attrs),[t.loading?(y(),x("div",tT,[(y(),x("svg",{class:Te(["animate-spin",n.value]),fill:"none",viewBox:"0 0 24 24"},i[0]||(i[0]=[d("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),d("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]),2))])):z("",!0),d("span",{class:Te({invisible:t.loading})},[yf(o.$slots,"default")],2)],16,eT))}},nT={class:"relative w-full max-w-5xl bg-gray-900 rounded-2xl shadow-2xl overflow-hidden transform transition-all"},sT={class:"grid md:grid-cols-2 min-h-[600px]"},oT={class:"p-6 md:p-8 overflow-y-auto max-h-[600px] scrollbar-hide"},iT={class:"text-2xl font-bold text-white mb-1"},aT={class:"text-sm text-gray-400 mb-4"},lT={key:0,class:"mb-4 p-3 bg-red-500/20 border border-red-500/50 rounded-lg text-red-400 text-sm"},cT={key:1,class:"mb-4 p-3 bg-green-500/20 border border-green-500/50 rounded-lg text-green-400 text-sm"},uT=["disabled"],dT={class:"relative"},hT={key:0,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},fT={key:1,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},pT={key:2,class:"relative"},gT={key:0,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},mT={key:1,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},vT={class:"mt-4 text-center"},yT={class:"font-semibold"},bT={__name:"AuthModal",props:{modelValue:Boolean},emits:["update:modelValue","success"],setup(t,{emit:e}){const r=e,n=$n(),s=new yr;s.setCustomParameters({prompt:"select_account"});const o=q(!0),i=q(""),a=q(""),l=q(""),c=q(""),u=q(""),h=q(!1),f=q(!1),p=q(""),g=q(""),v=q(!1),_=O=>O?O.length<3?"Tn ng nhp phi c t nht 3 k t":/^[a-zA-Z0-9_]+$/.test(O)?!0:"Ch c dng ch, s v du gch di":"Tn ng nhp l bt buc",T=O=>O?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(O)?!0:"Email khng hp l":"Email l bt buc",k=O=>O?O.length<6?"Mt khu phi c t nht 6 k t":!0:"Mt khu l bt buc",E=()=>{r("update:modelValue",!1),setTimeout(()=>{p.value="",g.value="",i.value="",a.value="",l.value="",c.value="",u.value=""},300)},C=()=>{o.value=!o.value,p.value="",g.value=""},$=async()=>{v.value=!0,p.value="",g.value="";try{if(o.value){const m=(await o_(n,a.value,l.value)).user,A=await m.getIdToken();await R(m,A),console.log(" Saved to localStorage:",{user:localStorage.getItem("user"),token:localStorage.getItem("token")}),g.value="ng nhp thnh cng!",Pe.success("ng nhp thnh cng!"),await new Promise(Q=>setTimeout(Q,500)),r("success"),E(),window.location.reload()}else{if(l.value!==c.value){p.value="Mt khu xc nhn khng khp",Pe.error("Mt khu xc nhn khng khp"),v.value=!1;return}const m=(await s_(n,a.value,l.value)).user;await a_(m,{displayName:u.value||i.value});const A=await m.getIdToken();await R(m,A),g.value="ng k thnh cng! Vui lng ng nhp li.",Pe.success("ng k thnh cng!");const Q=a.value;setTimeout(()=>{o.value=!0,a.value=Q,l.value="",c.value="",i.value="",u.value="",g.value="",p.value=""},1500)}}catch(O){console.error("Firebase auth error:",O);const m={"auth/user-not-found":"Khng tm thy ti khon vi email ny","auth/wrong-password":"Mt khu khng ng","auth/email-already-in-use":"Email  c s dng","auth/weak-password":"Mt khu qu yu (ti thiu 6 k t)","auth/invalid-email":"Email khng hp l","auth/invalid-credential":"Email hoc mt khu khng ng","auth/too-many-requests":"Qu nhiu ln th. Vui lng th li sau"};p.value=m[O.code]||"C li xy ra. Vui lng th li",Pe.error(p.value)}finally{v.value=!1}},R=async(O,m)=>{let A=null;try{const we=await(await fetch("http://localhost/HTHREE_film/backend/api/auth/sync_user.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({firebase_uid:O.uid,email:O.email,username:O.displayName||O.email.split("@")[0],full_name:O.displayName})})).json();A=we.success?we.user_id:null,console.log(" MySQL sync result:",we)}catch(K){console.error("Failed to sync user to MySQL:",K)}const Q={id:A||O.uid,firebase_uid:O.uid,username:O.displayName||O.email.split("@")[0],email:O.email,full_name:O.displayName,avatar:O.photoURL};localStorage.setItem("user",JSON.stringify(Q)),localStorage.setItem("token",m),console.log(" Saved to localStorage:",Q)},S=async()=>{v.value=!0,p.value="";try{const m=(await R_(n,s)).user;let A=null;try{const ie=await(await fetch("http://localhost/HTHREE_film/backend/api/auth/sync_user.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({firebase_uid:m.uid,email:m.email,username:m.displayName||m.email.split("@")[0],full_name:m.displayName,avatar:m.photoURL})})).json();ie.success&&ie.user_id&&(A=ie.user_id)}catch(Q){console.error("Failed to sync user to MySQL:",Q)}localStorage.setItem("user",JSON.stringify({id:A||m.uid,firebase_uid:m.uid,username:m.displayName,email:m.email,full_name:m.displayName,avatar:m.photoURL})),localStorage.setItem("token",m.accessToken),Pe.success("ng nhp Google thnh cng!"),setTimeout(()=>{r("success"),E(),window.location.reload()},1e3)}catch(O){console.error("Google auth error:",O),p.value="ng nhp Google tht bi",Pe.error(p.value)}finally{v.value=!1}};return(O,m)=>(y(),Ie(lt,{name:"modal"},{default:fe(()=>[t.modelValue?(y(),x("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/70 backdrop-blur-sm",onClick:Rt(E,["self"])},[d("div",nT,[d("button",{onClick:E,class:"absolute top-4 right-4 z-10 text-gray-400 hover:text-white transition-colors"},m[7]||(m[7]=[d("svg",{class:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])),d("div",sT,[m[16]||(m[16]=d("div",{class:"hidden md:block relative overflow-hidden"},[d("img",{src:"https://images.unsplash.com/photo-1536440136628-849c177e76a1?w=800&q=80",alt:"Cinema",class:"absolute inset-0 w-full h-full object-cover"}),d("div",{class:"absolute inset-0 bg-gradient-to-r from-transparent to-gray-900/50"}),d("div",{class:"absolute inset-0 flex flex-col justify-end p-8 text-white"},[d("div",{class:"flex items-center gap-2 mb-4"},[d("svg",{class:"w-12 h-12 text-yellow-400",fill:"currentColor",viewBox:"0 0 20 20"},[d("path",{d:"M2 6a2 2 0 012-2h6a2 2 0 012 2v8a2 2 0 01-2 2H4a2 2 0 01-2-2V6zM14.553 7.106A1 1 0 0014 8v4a1 1 0 00.553.894l2 1A1 1 0 0018 13V7a1 1 0 00-1.447-.894l-2 1z"})]),d("span",{class:"text-3xl font-bold text-yellow-400"},"HTHREE")]),d("h2",{class:"text-3xl font-bold mb-2"},"Cho mng tr li!"),d("p",{class:"text-gray-300"},"Khm ph hng ngn b phim hay nht")])],-1)),d("div",oT,[m[13]||(m[13]=d("div",{class:"md:hidden flex justify-center mb-6"},[d("div",{class:"flex items-center gap-2"},[d("svg",{class:"w-10 h-10 text-yellow-400",fill:"currentColor",viewBox:"0 0 20 20"},[d("path",{d:"M2 6a2 2 0 012-2h6a2 2 0 012 2v8a2 2 0 01-2 2H4a2 2 0 01-2-2V6zM14.553 7.106A1 1 0 0014 8v4a1 1 0 00.553.894l2 1A1 1 0 0018 13V7a1 1 0 00-1.447-.894l-2 1z"})]),d("span",{class:"text-3xl font-bold text-yellow-400"},"HTHREE")])],-1)),d("h2",iT,j(o.value?"ng Nhp":"ng K"),1),d("p",aT,j(o.value?"Cho mng bn tr li!":"To ti khon mi"),1),p.value?(y(),x("div",lT,j(p.value),1)):z("",!0),g.value?(y(),x("div",cT,j(g.value),1)):z("",!0),d("button",{onClick:S,type:"button",disabled:v.value,class:"w-full flex items-center justify-center gap-2 bg-white hover:bg-gray-100 text-gray-800 font-medium py-2.5 rounded-lg transition-all mb-4 text-sm"},[m[8]||(m[8]=d("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg",alt:"Google",class:"w-4 h-4"},null,-1)),le(" "+j(o.value?"ng nhp":"ng k")+" vi Google ",1)],8,uT),m[14]||(m[14]=d("div",{class:"relative mb-4"},[d("div",{class:"absolute inset-0 flex items-center"},[d("div",{class:"w-full border-t border-gray-700"})]),d("div",{class:"relative flex justify-center text-xs"},[d("span",{class:"px-3 bg-gray-900 text-gray-400"},"Hoc")])],-1)),d("form",{onSubmit:Rt($,["prevent"]),class:"space-y-3"},[o.value?z("",!0):(y(),Ie(Ts,{key:0,id:"username",modelValue:i.value,"onUpdate:modelValue":m[0]||(m[0]=A=>i.value=A),placeholder:"Tn ng nhp",required:!0,"validate-on-input":!0,validation:_,"helper-text":"Ti thiu 3 k t, ch ch v s"},null,8,["modelValue"])),o.value?z("",!0):(y(),Ie(Ts,{key:1,id:"fullName",modelValue:u.value,"onUpdate:modelValue":m[1]||(m[1]=A=>u.value=A),placeholder:"H v tn","helper-text":"Ty chn"},null,8,["modelValue"])),V(Ts,{id:"email",modelValue:a.value,"onUpdate:modelValue":m[2]||(m[2]=A=>a.value=A),type:o.value?"text":"email",placeholder:o.value?"Tn ng nhp hoc Email":"Email",required:!0,"validate-on-input":!o.value,validation:o.value?null:T},null,8,["modelValue","type","placeholder","validate-on-input","validation"]),d("div",dT,[V(Ts,{id:"password",modelValue:l.value,"onUpdate:modelValue":m[3]||(m[3]=A=>l.value=A),type:h.value?"text":"password",placeholder:"Mt khu",required:!0,"validate-on-input":!o.value,validation:k,"helper-text":"Ti thiu 6 k t"},null,8,["modelValue","type","validate-on-input"]),d("button",{type:"button",onClick:m[4]||(m[4]=A=>h.value=!h.value),class:"absolute right-3 top-[14px] text-gray-400 hover:text-white z-10"},[h.value?(y(),x("svg",fT,m[10]||(m[10]=[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"},null,-1)]))):(y(),x("svg",hT,m[9]||(m[9]=[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)])))])]),o.value?z("",!0):(y(),x("div",pT,[V(Ts,{id:"confirmPassword",modelValue:c.value,"onUpdate:modelValue":m[5]||(m[5]=A=>c.value=A),type:f.value?"text":"password",placeholder:"Nhp li mt khu",required:!0,"validate-on-input":!0,validation:A=>A?A!==l.value?"Mt khu khng khp":!0:"Vui lng nhp li mt khu"},null,8,["modelValue","type","validation"]),d("button",{type:"button",onClick:m[6]||(m[6]=A=>f.value=!f.value),class:"absolute right-3 top-[14px] text-gray-400 hover:text-white z-10"},[f.value?(y(),x("svg",mT,m[12]||(m[12]=[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"},null,-1)]))):(y(),x("svg",gT,m[11]||(m[11]=[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)])))])])),V(rT,{type:"submit",loading:v.value,variant:"primary",size:"md",class:"w-full"},{default:fe(()=>[le(j(o.value?"ng Nhp":"ng K"),1)]),_:1},8,["loading"])],32),d("div",vT,[d("button",{onClick:C,class:"text-sm text-gray-400 hover:text-yellow-400"},[le(j(o.value?"Cha c ti khon?":" c ti khon?")+" ",1),d("span",yT,j(o.value?"ng k ngay":"ng nhp"),1)])]),m[15]||(m[15]=d("div",{class:"mt-4 p-3 bg-gray-800/50 rounded-lg border border-gray-700"},[d("p",{class:"text-xs text-gray-400 mb-1.5"},"Ti khon demo:"),d("div",{class:"space-y-0.5 text-xs text-gray-500"},[d("p",null," admin / 123456"),d("p",null," user1 / 123456")])],-1))])])])])):z("",!0)]),_:1}))}},wT=pt(bT,[["__scopeId","data-v-dec472b5"]]);let hr=null;function _T(t){hr=t}function ha(){return{success:(t,e=3e3)=>{hr&&hr.success(t,e)},error:(t,e=3e3)=>{hr&&hr.error(t,e)},warning:(t,e=3e3)=>{hr&&hr.warning(t,e)},info:(t,e=3e3)=>{hr&&hr.info(t,e)}}}function xT(t=10){const e="recent_searches",n=q((()=>{try{const c=localStorage.getItem(e);return c?JSON.parse(c):[]}catch(c){return console.error("Failed to load recent searches:",c),[]}})()),s=()=>{try{localStorage.setItem(e,JSON.stringify(n.value))}catch(c){console.error("Failed to save recent searches:",c)}};return{recentSearches:n,addSearch:c=>{if(!c||!c.trim())return;const u=c.trim();n.value=n.value.filter(h=>h.toLowerCase()!==u.toLowerCase()),n.value.unshift(u),n.value.length>t&&(n.value=n.value.slice(0,t)),s()},removeSearch:c=>{n.value=n.value.filter(u=>u!==c),s()},clearSearches:()=>{n.value=[],localStorage.removeItem(e)},getFilteredSearches:c=>{if(!c)return n.value;const u=c.toLowerCase();return n.value.filter(h=>h.toLowerCase().includes(u))}}}const ET={class:"flex items-center justify-between px-4 md:px-8 py-3 max-w-[1920px] mx-auto"},kT={class:"flex items-center gap-6 flex-1 max-w-4xl mx-6"},ST={class:"relative flex-1 max-w-md"},TT={key:0,class:"absolute right-10 top-1/2 -translate-y-1/2"},CT={key:1,class:"absolute top-full left-0 right-0 mt-2 bg-gray-800 rounded-lg shadow-2xl border border-gray-700 overflow-hidden z-50"},AT={key:0},IT={class:"px-3 py-2 bg-gray-900 border-b border-gray-700 flex items-center justify-between"},RT=["onMousedown"],OT={class:"text-white text-sm"},PT={key:1},$T=["onMousedown"],NT=["src","alt"],LT={class:"flex-1 min-w-0"},MT={class:"text-white font-medium truncate"},jT={class:"text-gray-400 text-xs truncate mb-1"},DT={class:"flex gap-2 flex-wrap"},UT={key:0,class:"text-xs bg-gray-700 px-2 py-0.5 rounded"},BT={key:1,class:"text-xs bg-yellow-600 text-black px-2 py-0.5 rounded font-semibold"},FT={key:2,class:"text-xs bg-blue-600 text-white px-2 py-0.5 rounded"},HT={class:"p-2 bg-gray-900 text-center border-t border-gray-700"},VT={class:"hidden lg:flex items-center gap-4 text-sm font-medium"},qT={class:"relative group"},zT={class:"relative group"},WT={class:"relative group"},KT={class:"hidden group-hover:block absolute top-full left-0 pt-2 w-48 z-50"},GT={class:"bg-gray-800 rounded-lg shadow-xl max-h-96 overflow-y-auto border border-gray-700"},JT={class:"relative group"},XT={class:"flex items-center gap-3 flex-shrink-0"},YT={key:0,class:"absolute -top-1 -right-1 bg-red-600 text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center","aria-label":"`${cartStore.count} items trong gi`"},QT={class:"relative group"},ZT=["title"],eC=["src","alt"],tC={key:1,class:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},rC={class:"text-sm font-medium text-white hidden md:block"},nC={class:"absolute top-full right-0 mt-3 w-64 bg-gray-900 rounded-xl shadow-2xl opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-500 ease-out transform group-hover:translate-y-0 -translate-y-4 group-hover:scale-100 scale-95 border border-yellow-400/30 overflow-hidden backdrop-blur-xl"},sC={key:0,class:"bg-gradient-to-br from-gray-800 to-gray-900 px-4 py-3 border-b border-yellow-400/20"},oC={class:"flex items-center gap-2.5 mb-2.5"},iC=["src","alt"],aC={class:"flex-1 min-w-0"},lC={class:"flex items-center gap-1.5"},cC={class:"text-white font-bold truncate text-sm"},uC={class:"text-gray-400 text-[10px] truncate"},dC={key:1,class:"w-full bg-gradient-to-r from-purple-600 to-purple-700 text-white px-3 py-2 rounded-lg font-bold text-xs flex items-center justify-center gap-1.5"},hC={key:1,class:"px-4 py-2.5 bg-gray-800/50 border-b border-gray-700/50"},fC={class:"py-1.5"},pC={key:2,class:"border-t border-gray-700/50 my-1.5"},gC=["aria-expanded"],mC={key:0,class:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},vC={key:1,class:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},yC={key:0,class:"lg:hidden bg-gray-900/98 backdrop-blur-lg border-t border-gray-800 shadow-2xl fixed left-0 right-0 top-[64px] z-40 max-h-[calc(100vh-64px)] overflow-y-auto"},bC={class:"px-4 py-6 space-y-2"},wC={class:"space-y-1"},_C={key:0,class:"pl-4 space-y-1 max-h-64 overflow-y-auto"},xC={class:"space-y-1"},EC={key:0,class:"pl-4 space-y-1"},kC={key:2,class:"px-4 py-3"},SC={key:3,class:"px-4 py-3 space-y-2"},TC={class:"flex items-center gap-3 mb-3"},CC=["src","alt"],AC={class:"text-white font-bold"},IC={class:"text-gray-400 text-sm"},RC={__name:"NetflixNavbar",setup(t){const e=Zr(),r=Gi(),n=J4(),s=Qk(),o=$n(),i=ha(),{recentSearches:a,addSearch:l,clearSearches:c}=xT(),u=q(!1),h=q(""),f=q(null),p=q(!1),g=q([]),v=q(!1),_=q(!1),T=q(!1),k=q(!1),E=q(!1),C=q([{name:" Vit Nam",slug:"viet-nam"},{name:" Hn Quc",slug:"han-quoc"},{name:" Trung Quc",slug:"trung-quoc"},{name:" M",slug:"au-my"},{name:" Thi Lan",slug:"thai-lan"},{name:" Nht Bn",slug:"nhat-ban"},{name:" n ",slug:"an-do"},{name:" Anh",slug:"anh"},{name:" Php",slug:"phap"},{name:" c",slug:"duc"}]),$=re=>r.path.startsWith(re),R=()=>{p.value=!p.value,console.log(" Mobile menu toggled:",p.value),p.value?document.body.style.overflow="hidden":document.body.style.overflow=""};n.getCategory();const S=()=>{const re=o.currentUser;if(re){f.value=re,console.log(" Navbar - Firebase user:",re.email);return}const P=zs.getCurrentUser();P&&(f.value=P,console.log(" Navbar - PHP user:",P.email)),_o(o,ae=>{if(ae)f.value=ae,console.log(" Navbar - Firebase auth changed:",ae.email);else{const F=zs.getCurrentUser();F?f.value=F:f.value=null}})},O=Ae(()=>{var re;return((re=n.getAllCategories)==null?void 0:re.slice(0,8))||[]}),m=Ae(()=>{var re;return(((re=n.getAllCategories)==null?void 0:re.length)||0)>8}),A=Ae(()=>f.value?f.value.role==="admin"?!0:["hient7182@gmail.com","admin@hthree.com"].includes(f.value.email):!1),Q=()=>{u.value=window.scrollY>50},K=re=>re?re.startsWith("http")?re:`https://phimimg.com/${re}`:"https://placehold.co/50x75/1a1a1a/fff?text=No+Image";let ie=null;const we=async()=>{var P;const re=h.value.trim();if(re.length<2){g.value=[],v.value=!1;return}_.value=!0;try{const{searchMovies:ae}=await Xe(async()=>{const{searchMovies:ye}=await import("./movieApi-DOm6b_3X.js");return{searchMovies:ye}},[],import.meta.url),F=await ae(re,{limit:5});(F.status==="success"||F.status===!0)&&((P=F.data)!=null&&P.items)?(g.value=F.data.items.slice(0,5),v.value=!0):(g.value=[],v.value=!1)}catch(ae){console.error("Error fetching suggestions:",ae),g.value=[]}finally{_.value=!1}},De=()=>{clearTimeout(ie),ie=setTimeout(()=>{we()},300)},G=re=>{v.value=!1,l(re.name),e.push(`/film/${re.slug}`)},N=()=>{if(console.log(" handleSearch called, searchQuery:",h.value),v.value=!1,h.value.trim()){const re=h.value.trim();console.log(" Navigating to /search?q="+re),l(re),e.push(`/search?q=${encodeURIComponent(re)}`)}else console.warn(" Search query is empty")},de=()=>{setTimeout(()=>{v.value=!1},200)},ue=async()=>{const{useConfirm:re}=await Xe(async()=>{const{useConfirm:F}=await Promise.resolve().then(()=>ZC);return{useConfirm:F}},void 0,import.meta.url),{confirm:P}=re();if(await P({title:"ng xut ti khon?",message:"Bn c chc chn mun ng xut khi ti khon?",type:"warning",confirmText:"ng xut",cancelText:"Hy"}))try{await d_(o),zs.logout(),f.value=null,i.success("  ng xut thnh cng!"),setTimeout(()=>{window.location.reload()},1e3)}catch(F){console.error("Logout error:",F),i.error(" Li khi ng xut. Vui lng th li!")}};return Et(async()=>{var re;window.addEventListener("scroll",Q),(re=n.getAllCategories)!=null&&re.length||await n.getCategory(),S(),await s.fetchCart()}),Jt(()=>{window.removeEventListener("scroll",Q),document.body.style.overflow=""}),(re,P)=>{var F,ye,ze,Ue,M,te,Z,se,ne,b,w,I,D,H,U,ee,X,J,W,Y;const ae=Hi("router-link");return y(),x(ve,null,[d("nav",{class:Te(["fixed top-0 left-0 right-0 z-50 transition-all duration-300",u.value?"bg-gray-900/95 backdrop-blur-sm shadow-lg":"bg-black/30 backdrop-blur-sm"])},[d("div",ET,[V(ae,{to:"/home",class:"flex items-center gap-2 flex-shrink-0"},{default:fe(()=>P[19]||(P[19]=[d("svg",{class:"w-8 h-8 text-yellow-400",fill:"currentColor",viewBox:"0 0 20 20"},[d("path",{d:"M2 6a2 2 0 012-2h6a2 2 0 012 2v8a2 2 0 01-2 2H4a2 2 0 01-2-2V6zM14.553 7.106A1 1 0 0014 8v4a1 1 0 00.553.894l2 1A1 1 0 0018 13V7a1 1 0 00-1.447-.894l-2 1z"})],-1),d("span",{class:"text-yellow-400 text-xl font-bold"},"HTHREE",-1)])),_:1}),d("div",kT,[d("div",ST,[uc(d("input",{"onUpdate:modelValue":P[0]||(P[0]=B=>h.value=B),type:"text",placeholder:"Tm kim phim, din vin",class:"w-full bg-gray-800 border border-gray-700 rounded-lg px-4 py-2 pl-10 text-sm text-white placeholder-gray-400 focus:outline-none focus:border-yellow-400 focus:ring-1 focus:ring-yellow-400 transition",title:"Nhp tn phim hoc din vin  tm kim","aria-label":"Tm kim phim",onInput:De,onKeyup:Kn(N,["enter"]),onBlur:de,onFocus:P[1]||(P[1]=B=>h.value.length>=2?we():v.value=!0)},null,544),[[Zs,h.value]]),P[23]||(P[23]=d("svg",{class:"w-5 h-5 text-gray-400 absolute left-3 top-1/2 -translate-y-1/2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1)),_.value?(y(),x("div",TT,P[20]||(P[20]=[d("svg",{class:"animate-spin h-4 w-4 text-yellow-400",fill:"none",viewBox:"0 0 24 24"},[d("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),d("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):z("",!0),v.value&&(g.value.length>0||h.value.length===0&&Le(a).length>0)?(y(),x("div",CT,[h.value.length===0&&Le(a).length>0?(y(),x("div",AT,[d("div",IT,[P[21]||(P[21]=d("span",{class:"text-gray-400 text-xs font-medium"},"Tm kim gn y",-1)),d("button",{onMousedown:P[2]||(P[2]=(...B)=>Le(c)&&Le(c)(...B)),class:"text-gray-500 hover:text-red-400 text-xs transition-colors"}," Xa tt c ",32)]),(y(!0),x(ve,null,$e(Le(a),(B,oe)=>(y(),x("div",{key:oe,onMousedown:pe=>{h.value=B,N()},class:"flex items-center gap-3 px-4 py-2.5 hover:bg-gray-700 cursor-pointer transition-colors border-b border-gray-700 last:border-b-0"},[P[22]||(P[22]=d("svg",{class:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),d("span",OT,j(B),1)],40,RT))),128))])):z("",!0),h.value.length>0&&g.value.length>0?(y(),x("div",PT,[(y(!0),x(ve,null,$e(g.value,B=>(y(),x("div",{key:B.slug,onMousedown:oe=>G(B),class:"flex items-center gap-3 p-3 hover:bg-gray-700 cursor-pointer transition-colors border-b border-gray-700 last:border-b-0"},[d("img",{src:K(B.poster_url),alt:B.name,class:"w-12 h-16 object-cover rounded flex-shrink-0",onError:P[3]||(P[3]=oe=>oe.target.src="https://placehold.co/50x75/1a1a1a/fff?text=Error")},null,40,NT),d("div",LT,[d("p",MT,j(B.name),1),d("p",jT,j(B.origin_name),1),d("div",DT,[B.year?(y(),x("span",UT,j(B.year),1)):z("",!0),B.quality?(y(),x("span",BT,j(B.quality),1)):z("",!0),B.lang?(y(),x("span",FT,j(B.lang),1)):z("",!0)])])],40,$T))),128)),d("div",HT,[d("button",{onMousedown:N,class:"text-yellow-400 text-sm hover:text-yellow-300 font-medium transition-colors"},' Xem tt c kt qu cho "'+j(h.value)+'"  ',33)])])):z("",!0)])):z("",!0)]),d("ul",VT,[d("li",qT,[V(ae,{to:"/list/phim-le/page/1",class:Te([[u.value?"text-white hover:text-yellow-400":"text-white/90 hover:text-white",$("/list/phim-le")?"text-yellow-400":""],"transition-all duration-300 px-2 py-1 block relative no-underline"]),style:{"text-decoration":"none !important"}},{default:fe(()=>[P[24]||(P[24]=le(" Phim L ")),d("span",{class:Te(["absolute bottom-0 left-0 h-0.5 bg-yellow-400 transition-all duration-300",$("/list/phim-le")?"w-full":"w-0 group-hover:w-full"])},null,2)]),_:1},8,["class"])]),d("li",zT,[V(ae,{to:"/list/phim-bo/page/1",class:Te([[u.value?"text-white hover:text-yellow-400":"text-white/90 hover:text-white",$("/list/phim-bo")?"text-yellow-400":""],"transition-all duration-300 px-2 py-1 block relative no-underline"]),style:{"text-decoration":"none !important"}},{default:fe(()=>[P[25]||(P[25]=le(" Phim B ")),d("span",{class:Te(["absolute bottom-0 left-0 h-0.5 bg-yellow-400 transition-all duration-300",$("/list/phim-bo")?"w-full":"w-0 group-hover:w-full"])},null,2)]),_:1},8,["class"])]),d("li",WT,[d("button",{class:Te([u.value?"text-white hover:text-yellow-400":"text-white/90 hover:text-white","transition-all duration-300 flex items-center gap-1 px-2 py-1 relative"])},P[26]||(P[26]=[le(" Th loi "),d("svg",{class:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20"},[d("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1),d("span",{class:"absolute bottom-0 left-0 w-0 h-0.5 bg-yellow-400 transition-all duration-300 group-hover:w-full pointer-events-none"},null,-1)]),2),d("div",KT,[d("div",GT,[(y(!0),x(ve,null,$e(O.value,B=>(y(),Ie(ae,{key:B.slug,to:`/category/${B.slug}/page/1`,class:"block px-4 py-2 text-white hover:bg-gray-700 hover:text-yellow-400 transition-colors text-sm"},{default:fe(()=>[le(j(B.name),1)]),_:2},1032,["to"]))),128)),m.value?(y(),Ie(ae,{key:0,to:"/categories",class:"block px-4 py-2 text-yellow-400 hover:bg-gray-700 hover:text-yellow-300 transition-colors text-sm font-medium border-t border-gray-700"},{default:fe(()=>P[27]||(P[27]=[le(" Xem tt c th loi  ")])),_:1})):z("",!0)])])]),d("li",JT,[d("button",{class:Te([u.value?"text-white hover:text-yellow-400":"text-white/90 hover:text-white","transition-all duration-300 flex items-center gap-1 px-2 py-1 relative"])},P[28]||(P[28]=[le(" Quc gia "),d("svg",{class:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20"},[d("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1),d("span",{class:"absolute bottom-0 left-0 w-0 h-0.5 bg-yellow-400 transition-all duration-300 group-hover:w-full pointer-events-none"},null,-1)]),2),P[29]||(P[29]=ar('<div class="hidden group-hover:block absolute top-full left-0 pt-2 w-48 z-50" data-v-9b99f078><div class="bg-gray-800 rounded-lg shadow-xl max-h-96 overflow-y-auto border border-gray-700" data-v-9b99f078><a href="#" class="block px-4 py-2 text-white hover:bg-gray-700 hover:text-yellow-400 transition-colors text-sm" data-v-9b99f078>Vit Nam</a><a href="#" class="block px-4 py-2 text-white hover:bg-gray-700 hover:text-yellow-400 transition-colors text-sm" data-v-9b99f078>Hn Quc</a><a href="#" class="block px-4 py-2 text-white hover:bg-gray-700 hover:text-yellow-400 transition-colors text-sm" data-v-9b99f078>Trung Quc</a><a href="#" class="block px-4 py-2 text-white hover:bg-gray-700 hover:text-yellow-400 transition-colors text-sm" data-v-9b99f078>M</a><a href="#" class="block px-4 py-2 text-white hover:bg-gray-700 hover:text-yellow-400 transition-colors text-sm" data-v-9b99f078>Thi Lan</a></div></div>',1))])])]),d("div",XT,[f.value&&!A.value?(y(),Ie(ae,{key:0,to:"/pricing",class:Te(["hidden md:flex items-center gap-2 px-4 py-2 rounded-lg font-semibold text-sm transition-all hover:scale-105 shadow-lg",$("/pricing")?"bg-gradient-to-r from-yellow-500 to-yellow-600 text-black ring-2 ring-yellow-400":"bg-gradient-to-r from-yellow-400 to-yellow-500 text-black hover:from-yellow-500 hover:to-yellow-600"]),title:"Nng cp ti khon VIP"},{default:fe(()=>P[30]||(P[30]=[d("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[d("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})],-1),le(" Nng cp VIP ")])),_:1},8,["class"])):z("",!0),f.value&&(f.value.email==="hient7182@gmail.com"||f.value.email==="admin@hthree.com"||f.value.role==="admin")?(y(),Ie(ae,{key:1,to:"/admin",class:"p-2 bg-purple-600 rounded-lg hover:bg-purple-700 transition-colors",title:"Qun tr h thng","aria-label":"Admin Panel"},{default:fe(()=>P[31]||(P[31]=[d("svg",{class:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})],-1)])),_:1})):z("",!0),f.value&&!A.value?(y(),Ie(ae,{key:2,to:"/cart",class:"relative p-2 bg-gray-800 rounded-lg hover:bg-gray-700 transition-colors",title:`Gi hng${Le(s).count>0?` (${Le(s).count} gi)`:""}`,"aria-label":"Gi hng"},{default:fe(()=>[P[32]||(P[32]=d("svg",{class:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})],-1)),Le(s).count>0?(y(),x("span",YT,j(Le(s).count),1)):z("",!0)]),_:1},8,["title"])):z("",!0),d("div",QT,[d("button",{class:"flex items-center gap-2 bg-gray-800 px-3 py-2 rounded-lg hover:bg-gray-700 hover:scale-105 transition-all duration-300",title:f.value?`Ti khon: ${f.value.displayName||f.value.username||f.value.email}`:"ng nhp / ng k","aria-label":"Menu ti khon"},[f.value?(y(),x("img",{key:0,src:((F=f.value)==null?void 0:F.avatar)||((ye=f.value)==null?void 0:ye.photoURL)||`https://ui-avatars.com/api/?name=${encodeURIComponent(((ze=f.value)==null?void 0:ze.full_name)||((Ue=f.value)==null?void 0:Ue.displayName)||((M=f.value)==null?void 0:M.username)||"User")}&background=f59e0b&color=000`,class:"w-7 h-7 rounded-full border-2 border-yellow-400 shadow-lg",alt:((te=f.value)==null?void 0:te.full_name)||((Z=f.value)==null?void 0:Z.displayName)||((se=f.value)==null?void 0:se.username)||"User"},null,8,eC)):(y(),x("svg",tC,P[33]||(P[33]=[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"},null,-1)]))),d("span",rC,j(f.value&&(f.value.displayName||f.value.username)||"Thnh vin"),1)],8,ZT),d("div",nC,[f.value?(y(),x("div",sC,[d("div",oC,[d("img",{src:((ne=f.value)==null?void 0:ne.avatar)||((b=f.value)==null?void 0:b.photoURL)||`https://ui-avatars.com/api/?name=${encodeURIComponent(((w=f.value)==null?void 0:w.full_name)||((I=f.value)==null?void 0:I.displayName)||((D=f.value)==null?void 0:D.username)||"User")}&background=f59e0b&color=000`,class:"w-11 h-11 rounded-full border-2 border-yellow-400 shadow-lg",alt:((H=f.value)==null?void 0:H.full_name)||((U=f.value)==null?void 0:U.displayName)||((ee=f.value)==null?void 0:ee.username)||"User"},null,8,iC),d("div",aC,[d("div",lC,[d("p",cC,j(((X=f.value)==null?void 0:X.full_name)||((J=f.value)==null?void 0:J.displayName)||((W=f.value)==null?void 0:W.username)),1),P[34]||(P[34]=d("svg",{class:"w-3.5 h-3.5 text-yellow-400 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20"},[d("path",{"fill-rule":"evenodd",d:"M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})],-1))]),d("p",uC,j((Y=f.value)==null?void 0:Y.email),1)])]),A.value?(y(),x("div",dC,P[36]||(P[36]=[d("svg",{class:"w-3.5 h-3.5",fill:"currentColor",viewBox:"0 0 20 20"},[d("path",{"fill-rule":"evenodd",d:"M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})],-1),d("span",null,"Qun tr vin",-1)]))):(y(),Ie(ae,{key:0,to:"/pricing",class:"w-full bg-gradient-to-r from-yellow-400 to-yellow-500 text-black px-3 py-2 rounded-lg font-bold text-xs hover:from-yellow-500 hover:to-yellow-600 hover:scale-105 hover:shadow-xl hover:shadow-yellow-400/50 transition-all duration-300 shadow-lg flex items-center justify-center gap-1.5 group/upgrade"},{default:fe(()=>P[35]||(P[35]=[d("svg",{class:"w-3.5 h-3.5 group-hover/upgrade:rotate-12 transition-transform duration-300",fill:"currentColor",viewBox:"0 0 20 20"},[d("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})],-1),d("span",{class:"group-hover/upgrade:tracking-wider transition-all duration-300"},"Nng cp ngay",-1)])),_:1}))])):z("",!0),f.value?(y(),x("div",hC,P[37]||(P[37]=[ar('<div class="flex items-center justify-between text-xs" data-v-9b99f078><div class="flex items-center gap-1.5" data-v-9b99f078><svg class="w-3.5 h-3.5 text-gray-400" fill="currentColor" viewBox="0 0 20 20" data-v-9b99f078><path d="M4 3a2 2 0 100 4h12a2 2 0 100-4H4z" data-v-9b99f078></path><path fill-rule="evenodd" d="M3 8h14v7a2 2 0 01-2 2H5a2 2 0 01-2-2V8zm5 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" clip-rule="evenodd" data-v-9b99f078></path></svg><span class="text-gray-300" data-v-9b99f078>S d</span></div><div class="flex items-center gap-1.5" data-v-9b99f078><span class="text-white font-bold" data-v-9b99f078>0</span><span class="text-yellow-400 font-bold text-xs" data-v-9b99f078></span><button class="bg-gray-700 hover:bg-gray-600 hover:scale-110 text-white px-2 py-0.5 rounded text-[10px] font-medium transition-all duration-300" data-v-9b99f078> + Np </button></div></div>',1)]))):z("",!0),d("div",fC,[f.value?(y(),Ie(ae,{key:0,to:"/library",class:Te(["flex items-center gap-2.5 px-4 py-2.5 text-white hover:bg-gray-800 hover:pl-5 transition-all duration-300 group/item",$("/library")?"bg-gray-800 border-l-2 border-yellow-400":""]),title:"Yu thch, Danh sch, Xem tip"},{default:fe(()=>[(y(),x("svg",{class:Te(["w-4 h-4 transition-all duration-300 group-hover/item:scale-110",$("/library")?"text-yellow-400":"text-gray-400 group-hover/item:text-yellow-400"]),fill:"currentColor",viewBox:"0 0 20 20"},P[38]||(P[38]=[d("path",{d:"M9 4.804A7.968 7.968 0 005.5 4c-1.255 0-2.443.29-3.5.804v10A7.969 7.969 0 015.5 14c1.669 0 3.218.51 4.5 1.385A7.962 7.962 0 0114.5 14c1.255 0 2.443.29 3.5.804v-10A7.968 7.968 0 0014.5 4c-1.255 0-2.443.29-3.5.804V12a1 1 0 11-2 0V4.804z"},null,-1)]),2)),P[39]||(P[39]=d("span",{class:"font-medium text-sm"},"Th vin ca ti",-1))]),_:1},8,["class"])):z("",!0),f.value?(y(),Ie(ae,{key:1,to:"/account",class:Te(["flex items-center gap-2.5 px-4 py-2.5 text-white hover:bg-gray-800 hover:pl-5 transition-all duration-300 group/item",$("/account")?"bg-gray-800 border-l-2 border-yellow-400":""])},{default:fe(()=>[(y(),x("svg",{class:Te(["w-4 h-4 transition-all duration-300 group-hover/item:scale-110",$("/account")?"text-yellow-400":"text-gray-400 group-hover/item:text-yellow-400"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},P[40]||(P[40]=[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"},null,-1)]),2)),P[41]||(P[41]=d("span",{class:"font-medium text-sm"},"Ti khon",-1))]),_:1},8,["class"])):z("",!0),f.value?(y(),x("div",pC)):z("",!0),f.value?(y(),x("button",{key:3,onClick:ue,class:"flex items-center gap-2.5 w-full px-4 py-2.5 text-white hover:bg-red-500/20 hover:text-red-400 hover:pl-5 transition-all duration-300 group/item"},P[42]||(P[42]=[d("svg",{class:"w-4 h-4 text-gray-400 group-hover/item:text-red-400 transition-all duration-300 group-hover/item:scale-110 group-hover/item:rotate-12",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})],-1),d("span",{class:"font-medium text-sm"},"Thot",-1)]))):(y(),x("button",{key:4,onClick:P[4]||(P[4]=B=>T.value=!0),class:"flex items-center gap-2.5 w-full px-4 py-2.5 text-white hover:bg-gray-800 hover:text-yellow-400 hover:pl-5 transition-all duration-300 group/item"},P[43]||(P[43]=[d("svg",{class:"w-4 h-4 text-gray-400 group-hover/item:text-yellow-400 transition-all duration-300 group-hover/item:scale-110",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"})],-1),d("span",{class:"font-medium text-sm"},"ng nhp",-1)])))])])]),d("button",{onClick:R,class:"lg:hidden p-2 rounded-lg hover:bg-gray-800 transition-colors relative z-50","aria-label":"Menu iu hng","aria-expanded":p.value},[p.value?(y(),x("svg",vC,P[45]||(P[45]=[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},null,-1)]))):(y(),x("svg",mC,P[44]||(P[44]=[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"},null,-1)])))],8,gC)])]),V(lt,{name:"fade"},{default:fe(()=>[p.value?(y(),x("div",{key:0,onClick:P[5]||(P[5]=B=>p.value=!1),class:"lg:hidden fixed inset-0 bg-black/50 backdrop-blur-sm z-30 top-[64px]"})):z("",!0)]),_:1}),V(lt,{name:"slide-down"},{default:fe(()=>{var B,oe,pe,Se,Oe,Re,Ze,et,ot,gt,Qt,Ge;return[p.value?(y(),x("div",yC,[d("div",bC,[V(ae,{to:"/home",onClick:P[6]||(P[6]=xe=>p.value=!1),class:Te(["block px-4 py-3 rounded-lg transition-all font-medium",$("/home")?"bg-gray-800 text-yellow-400":"text-white hover:bg-gray-800 hover:text-yellow-400"])},{default:fe(()=>P[46]||(P[46]=[d("div",{class:"flex items-center gap-3"},[d("svg",{class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20"},[d("path",{d:"M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z"})]),le(" Trang ch ")],-1)])),_:1},8,["class"]),V(ae,{to:"/list/phim-le/page/1",onClick:P[7]||(P[7]=xe=>p.value=!1),class:Te(["block px-4 py-3 rounded-lg transition-all font-medium",$("/list/phim-le")?"bg-gray-800 text-yellow-400":"text-white hover:bg-gray-800 hover:text-yellow-400"])},{default:fe(()=>P[47]||(P[47]=[d("div",{class:"flex items-center gap-3"},[d("svg",{class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20"},[d("path",{d:"M2 6a2 2 0 012-2h6a2 2 0 012 2v8a2 2 0 01-2 2H4a2 2 0 01-2-2V6zM14.553 7.106A1 1 0 0014 8v4a1 1 0 00.553.894l2 1A1 1 0 0018 13V7a1 1 0 00-1.447-.894l-2 1z"})]),le(" Phim L ")],-1)])),_:1},8,["class"]),V(ae,{to:"/list/phim-bo/page/1",onClick:P[8]||(P[8]=xe=>p.value=!1),class:Te(["block px-4 py-3 rounded-lg transition-all font-medium",$("/list/phim-bo")?"bg-gray-800 text-yellow-400":"text-white hover:bg-gray-800 hover:text-yellow-400"])},{default:fe(()=>P[48]||(P[48]=[d("div",{class:"flex items-center gap-3"},[d("svg",{class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20"},[d("path",{"fill-rule":"evenodd",d:"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z","clip-rule":"evenodd"})]),le(" Phim B ")],-1)])),_:1},8,["class"]),d("div",wC,[d("button",{onClick:P[9]||(P[9]=xe=>k.value=!k.value),class:"w-full flex items-center justify-between px-4 py-3 text-white hover:bg-gray-800 hover:text-yellow-400 rounded-lg transition-all font-medium"},[P[50]||(P[50]=d("div",{class:"flex items-center gap-3"},[d("svg",{class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20"},[d("path",{d:"M7 3a1 1 0 000 2h6a1 1 0 100-2H7zM4 7a1 1 0 011-1h10a1 1 0 110 2H5a1 1 0 01-1-1zM2 11a2 2 0 012-2h12a2 2 0 012 2v4a2 2 0 01-2 2H4a2 2 0 01-2-2v-4z"})]),le(" Th loi ")],-1)),(y(),x("svg",{class:Te(["w-4 h-4 transition-transform duration-300",k.value?"rotate-180":""]),fill:"currentColor",viewBox:"0 0 20 20"},P[49]||(P[49]=[d("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]),2))]),V(lt,{name:"accordion"},{default:fe(()=>[k.value?(y(),x("div",_C,[(y(!0),x(ve,null,$e(O.value,xe=>(y(),Ie(ae,{key:xe.slug,to:`/category/${xe.slug}/page/1`,onClick:P[10]||(P[10]=Ye=>p.value=!1),class:"block px-4 py-2 text-sm text-gray-300 hover:bg-gray-800 hover:text-yellow-400 rounded-lg transition-all"},{default:fe(()=>[le(j(xe.name),1)]),_:2},1032,["to"]))),128)),m.value?(y(),Ie(ae,{key:0,to:"/categories",onClick:P[11]||(P[11]=xe=>p.value=!1),class:"block px-4 py-2 text-sm text-yellow-400 hover:bg-gray-800 rounded-lg transition-all font-medium"},{default:fe(()=>P[51]||(P[51]=[le(" Xem tt c th loi  ")])),_:1})):z("",!0)])):z("",!0)]),_:1})]),d("div",xC,[d("button",{onClick:P[12]||(P[12]=xe=>E.value=!E.value),class:"w-full flex items-center justify-between px-4 py-3 text-white hover:bg-gray-800 hover:text-yellow-400 rounded-lg transition-all font-medium"},[P[53]||(P[53]=d("div",{class:"flex items-center gap-3"},[d("svg",{class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20"},[d("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM4.332 8.027a6.012 6.012 0 011.912-2.706C6.512 5.73 6.974 6 7.5 6A1.5 1.5 0 019 7.5V8a2 2 0 004 0 2 2 0 011.523-1.943A5.977 5.977 0 0116 10c0 .34-.028.675-.083 1H15a2 2 0 00-2 2v2.197A5.973 5.973 0 0110 16v-2a2 2 0 00-2-2 2 2 0 01-2-2 2 2 0 00-1.668-1.973z","clip-rule":"evenodd"})]),le(" Quc gia ")],-1)),(y(),x("svg",{class:Te(["w-4 h-4 transition-transform duration-300",E.value?"rotate-180":""]),fill:"currentColor",viewBox:"0 0 20 20"},P[52]||(P[52]=[d("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]),2))]),V(lt,{name:"accordion"},{default:fe(()=>[E.value?(y(),x("div",EC,[(y(!0),x(ve,null,$e(C.value,xe=>(y(),Ie(ae,{key:xe.slug,to:`/country/${xe.slug}/page/1`,onClick:P[13]||(P[13]=Ye=>p.value=!1),class:"block px-4 py-2 text-sm text-gray-300 hover:bg-gray-800 hover:text-yellow-400 rounded-lg transition-all"},{default:fe(()=>[le(j(xe.name),1)]),_:2},1032,["to"]))),128))])):z("",!0)]),_:1})]),f.value?(y(),Ie(ae,{key:0,to:"/library",onClick:P[14]||(P[14]=xe=>p.value=!1),class:Te(["block px-4 py-3 rounded-lg transition-all font-medium",$("/library")?"bg-gray-800 text-yellow-400":"text-white hover:bg-gray-800 hover:text-yellow-400"])},{default:fe(()=>P[54]||(P[54]=[d("div",{class:"flex items-center gap-3"},[d("svg",{class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20"},[d("path",{d:"M9 4.804A7.968 7.968 0 005.5 4c-1.255 0-2.443.29-3.5.804v10A7.969 7.969 0 015.5 14c1.669 0 3.218.51 4.5 1.385A7.962 7.962 0 0114.5 14c1.255 0 2.443.29 3.5.804v-10A7.968 7.968 0 0014.5 4c-1.255 0-2.443.29-3.5.804V12a1 1 0 11-2 0V4.804z"})]),le(" Th vin ca ti ")],-1)])),_:1},8,["class"])):z("",!0),f.value&&!A.value?(y(),Ie(ae,{key:1,to:"/pricing",onClick:P[15]||(P[15]=xe=>p.value=!1),class:Te(["block px-4 py-3 rounded-lg transition-all font-medium",$("/pricing")?"bg-gray-800 text-yellow-400":"text-white hover:bg-gray-800 hover:text-yellow-400"])},{default:fe(()=>P[55]||(P[55]=[d("div",{class:"flex items-center gap-3"},[d("svg",{class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20"},[d("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})]),le(" Nng cp VIP ")],-1)])),_:1},8,["class"])):z("",!0),P[58]||(P[58]=d("div",{class:"border-t border-gray-800 my-4"},null,-1)),f.value?(y(),x("div",SC,[d("div",TC,[d("img",{src:((B=f.value)==null?void 0:B.avatar)||((oe=f.value)==null?void 0:oe.photoURL)||`https://ui-avatars.com/api/?name=${encodeURIComponent(((pe=f.value)==null?void 0:pe.full_name)||((Se=f.value)==null?void 0:Se.displayName)||((Oe=f.value)==null?void 0:Oe.username)||"User")}&background=f59e0b&color=000`,class:"w-12 h-12 rounded-full border-2 border-yellow-400",alt:((Re=f.value)==null?void 0:Re.full_name)||((Ze=f.value)==null?void 0:Ze.displayName)||((et=f.value)==null?void 0:et.username)||"User"},null,8,CC),d("div",null,[d("p",AC,j(((ot=f.value)==null?void 0:ot.full_name)||((gt=f.value)==null?void 0:gt.displayName)||((Qt=f.value)==null?void 0:Qt.username)),1),d("p",IC,j((Ge=f.value)==null?void 0:Ge.email),1)])]),d("button",{onClick:P[17]||(P[17]=xe=>{ue(),p.value=!1}),class:"w-full bg-gray-800 text-white px-4 py-3 rounded-lg font-medium hover:bg-gray-700 transition-all flex items-center justify-center gap-2"},P[57]||(P[57]=[d("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})],-1),le(" ng xut ")]))])):(y(),x("div",kC,[d("button",{onClick:P[16]||(P[16]=xe=>{T.value=!0,p.value=!1}),class:"w-full bg-yellow-400 text-black px-4 py-3 rounded-lg font-bold hover:bg-yellow-500 transition-all flex items-center justify-center gap-2"},P[56]||(P[56]=[d("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"})],-1),le(" ng nhp ")]))]))])])):z("",!0)]}),_:1}),V(lt,{name:"fade"},{default:fe(()=>[p.value?(y(),x("div",{key:0,onClick:R,class:"lg:hidden fixed inset-0 bg-black/50 z-30 top-[64px]","aria-hidden":"true"})):z("",!0)]),_:1})],2),V(wT,{modelValue:T.value,"onUpdate:modelValue":P[18]||(P[18]=B=>T.value=B),onSuccess:S},null,8,["modelValue"])],64)}}},OC=pt(RC,[["__scopeId","data-v-9b99f078"]]),PC={key:0,class:"fixed inset-0 z-[9999] flex items-center justify-center bg-gradient-to-br from-gray-900 via-black to-gray-900"},$C={__name:"SplashScreen",setup(t){const e=q(!0);return Et(()=>{setTimeout(()=>{e.value=!1},2500)}),(r,n)=>(y(),Ie(lt,{name:"fade"},{default:fe(()=>[e.value?(y(),x("div",PC,n[0]||(n[0]=[d("div",{class:"text-center"},[d("div",{class:"mb-6 animate-bounce-slow"},[d("svg",{class:"w-24 h-24 mx-auto text-yellow-400",fill:"currentColor",viewBox:"0 0 20 20"},[d("path",{d:"M2 6a2 2 0 012-2h6a2 2 0 012 2v8a2 2 0 01-2 2H4a2 2 0 01-2-2V6zM14.553 7.106A1 1 0 0014 8v4a1 1 0 00.553.894l2 1A1 1 0 0018 13V7a1 1 0 00-1.447-.894l-2 1z"})])]),d("h1",{class:"text-5xl font-black text-white mb-2 tracking-wider",style:{"text-shadow":"0 0 20px rgba(250, 204, 21, 0.5)"}}," HTHREE-FILM "),d("p",{class:"text-gray-400 text-lg mb-8 font-medium"}," Xem Phim Min Ph Cc Nhanh, Cht Lng Cao V Cp Nht Lin Tc "),d("div",{class:"flex justify-center gap-2"},[d("div",{class:"w-3 h-3 bg-yellow-400 rounded-full animate-bounce",style:{"animation-delay":"0s"}}),d("div",{class:"w-3 h-3 bg-yellow-400 rounded-full animate-bounce",style:{"animation-delay":"0.2s"}}),d("div",{class:"w-3 h-3 bg-yellow-400 rounded-full animate-bounce",style:{"animation-delay":"0.4s"}})])],-1)]))):z("",!0)]),_:1}))}},NC=pt($C,[["__scopeId","data-v-605b96cb"]]),LC={class:"fixed top-4 right-4 z-[99999] flex flex-col gap-3 pointer-events-none"},MC={class:"flex items-start gap-3 p-4 pt-5"},jC={key:0,class:"w-6 h-6 text-green-400",fill:"currentColor",viewBox:"0 0 20 20"},DC={key:1,class:"w-6 h-6 text-red-400",fill:"currentColor",viewBox:"0 0 20 20"},UC={key:2,class:"w-6 h-6 text-yellow-400",fill:"currentColor",viewBox:"0 0 20 20"},BC={key:3,class:"w-6 h-6 text-blue-400",fill:"currentColor",viewBox:"0 0 20 20"},FC={class:"flex-1 min-w-0"},HC={class:"text-sm text-gray-300 leading-relaxed"},VC=["onClick"],qC={__name:"CustomToast",setup(t,{expose:e}){const r=q([]);let n=0;const s=(i,a,l,c=3e3)=>{const u=++n,h={id:u,type:i,title:a,message:l,progress:100};r.value.push(h);const f=Date.now(),p=setInterval(()=>{const g=Date.now()-f,v=Math.max(0,100-g/c*100),_=r.value.findIndex(T=>T.id===u);_!==-1&&(r.value[_].progress=v),v===0&&clearInterval(p)},50);return setTimeout(()=>{o(u)},c),u},o=i=>{const a=r.value.findIndex(l=>l.id===i);a!==-1&&r.value.splice(a,1)};return e({success:(i,a)=>s("success","Thnh cng",i,a),error:(i,a)=>s("error","Li",i,a),warning:(i,a)=>s("warning","Cnh bo",i,a),info:(i,a)=>s("info","Thng tin",i,a)}),(i,a)=>(y(),Ie(gs,{to:"body"},[d("div",LC,[V(Gf,{name:"toast"},{default:fe(()=>[(y(!0),x(ve,null,$e(r.value,l=>(y(),x("div",{key:l.id,class:Te(["toast-item pointer-events-auto min-w-[320px] max-w-[400px] bg-gray-900/95 backdrop-blur-xl border rounded-xl shadow-2xl overflow-hidden",[l.type==="success"?"border-green-500/50 shadow-green-500/20":l.type==="error"?"border-red-500/50 shadow-red-500/20":l.type==="warning"?"border-yellow-500/50 shadow-yellow-500/20":"border-blue-500/50 shadow-blue-500/20"]])},[d("div",{class:Te(["absolute top-0 left-0 h-1 transition-all duration-100 ease-linear",[l.type==="success"?"bg-green-500":l.type==="error"?"bg-red-500":l.type==="warning"?"bg-yellow-500":"bg-blue-500"]]),style:Kr({width:`${l.progress}%`})},null,6),d("div",MC,[d("div",{class:Te(["flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center",[l.type==="success"?"bg-green-500/20":l.type==="error"?"bg-red-500/20":l.type==="warning"?"bg-yellow-500/20":"bg-blue-500/20"]])},[l.type==="success"?(y(),x("svg",jC,a[0]||(a[0]=[d("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)]))):l.type==="error"?(y(),x("svg",DC,a[1]||(a[1]=[d("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"},null,-1)]))):l.type==="warning"?(y(),x("svg",UC,a[2]||(a[2]=[d("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"},null,-1)]))):(y(),x("svg",BC,a[3]||(a[3]=[d("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"},null,-1)])))],2),d("div",FC,[d("p",{class:Te(["text-sm font-semibold mb-1",[l.type==="success"?"text-green-400":l.type==="error"?"text-red-400":l.type==="warning"?"text-yellow-400":"text-blue-400"]])},j(l.title),3),d("p",HC,j(l.message),1)]),d("button",{onClick:c=>o(l.id),class:"flex-shrink-0 w-6 h-6 rounded-full hover:bg-white/10 flex items-center justify-center transition-colors"},a[4]||(a[4]=[d("svg",{class:"w-4 h-4 text-gray-400 hover:text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,VC)])],2))),128))]),_:1})])]))}},zC=pt(qC,[["__scopeId","data-v-a1e17cb9"]]),WC={class:"bg-gradient-to-b from-gray-900 to-black text-white border-t border-gray-800 mt-0 w-full"},KC={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},GC={class:"grid grid-cols-1 md:grid-cols-4 gap-8 mb-6"},JC={class:"space-y-2"},XC={class:"space-y-2"},YC={class:"space-y-2"},QC={__name:"FooterComponent",setup(t){return(e,r)=>{const n=Hi("router-link");return y(),x("footer",WC,[d("div",KC,[d("div",GC,[r[17]||(r[17]=ar('<div class="col-span-1 md:col-span-1"><div class="flex items-center gap-2 mb-4"><svg class="w-10 h-10 text-yellow-400" fill="currentColor" viewBox="0 0 20 20"><path d="M2 6a2 2 0 012-2h6a2 2 0 012 2v8a2 2 0 01-2 2H4a2 2 0 01-2-2V6zM14.553 7.106A1 1 0 0014 8v4a1 1 0 00.553.894l2 1A1 1 0 0018 13V7a1 1 0 00-1.447-.894l-2 1z"></path></svg><span class="text-2xl font-bold text-yellow-400">HTHREE</span></div><p class="text-gray-400 text-sm leading-relaxed"> Phim hay c ri - Trang xem phim online cht lng cao min ph, Vietsub, thuyt minh, b ting full HD. </p><div class="flex gap-3 mt-4"><a href="#" class="w-9 h-9 bg-gray-800 hover:bg-yellow-400 rounded-full flex items-center justify-center transition-all duration-300 hover:scale-110 group"><svg class="w-4 h-4 text-gray-400 group-hover:text-black transition-colors" fill="currentColor" viewBox="0 0 24 24"><path d="M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z"></path></svg></a><a href="#" class="w-9 h-9 bg-gray-800 hover:bg-yellow-400 rounded-full flex items-center justify-center transition-all duration-300 hover:scale-110 group"><svg class="w-4 h-4 text-gray-400 group-hover:text-black transition-colors" fill="currentColor" viewBox="0 0 24 24"><path d="M9 8h-3v4h3v12h5v-12h3.642l.358-4h-4v-1.667c0-.955.192-1.333 1.115-1.333h2.885v-5h-3.808c-3.596 0-5.192 1.583-5.192 4.615v3.385z"></path></svg></a><a href="#" class="w-9 h-9 bg-gray-800 hover:bg-yellow-400 rounded-full flex items-center justify-center transition-all duration-300 hover:scale-110 group"><svg class="w-4 h-4 text-gray-400 group-hover:text-black transition-colors" fill="currentColor" viewBox="0 0 24 24"><path d="M19.615 3.184c-3.604-.246-11.631-.245-15.23 0-3.897.266-4.356 2.62-4.385 8.816.029 6.185.484 8.549 4.385 8.816 3.6.245 11.626.246 15.23 0 3.897-.266 4.356-2.62 4.385-8.816-.029-6.185-.484-8.549-4.385-8.816zm-10.615 12.816v-8l8 3.993-8 4.007z"></path></svg></a><a href="#" class="w-9 h-9 bg-gray-800 hover:bg-yellow-400 rounded-full flex items-center justify-center transition-all duration-300 hover:scale-110 group"><svg class="w-4 h-4 text-gray-400 group-hover:text-black transition-colors" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"></path></svg></a></div></div>',1)),d("div",null,[r[6]||(r[6]=d("h3",{class:"text-white font-semibold text-lg mb-4 flex items-center gap-2"},[d("svg",{class:"w-5 h-5 text-yellow-400",fill:"currentColor",viewBox:"0 0 20 20"},[d("path",{d:"M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z"})]),le(" iu hng ")],-1)),d("ul",JC,[d("li",null,[V(n,{to:"/home",class:"text-gray-400 hover:text-yellow-400 transition-colors text-sm flex items-center gap-1"},{default:fe(()=>r[0]||(r[0]=[d("svg",{class:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20"},[d("path",{"fill-rule":"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd"})],-1),le(" Trang ch ")])),_:1})]),d("li",null,[V(n,{to:"/list/phim-le/page/1",class:"text-gray-400 hover:text-yellow-400 transition-colors text-sm flex items-center gap-1"},{default:fe(()=>r[1]||(r[1]=[d("svg",{class:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20"},[d("path",{"fill-rule":"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd"})],-1),le(" Phim L ")])),_:1})]),d("li",null,[V(n,{to:"/list/phim-bo/page/1",class:"text-gray-400 hover:text-yellow-400 transition-colors text-sm flex items-center gap-1"},{default:fe(()=>r[2]||(r[2]=[d("svg",{class:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20"},[d("path",{"fill-rule":"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd"})],-1),le(" Phim B ")])),_:1})]),d("li",null,[V(n,{to:"/categories",class:"text-gray-400 hover:text-yellow-400 transition-colors text-sm flex items-center gap-1"},{default:fe(()=>r[3]||(r[3]=[d("svg",{class:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20"},[d("path",{"fill-rule":"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd"})],-1),le(" Tt c th loi ")])),_:1})]),d("li",null,[V(n,{to:"/library",class:"text-gray-400 hover:text-yellow-400 transition-colors text-sm flex items-center gap-1"},{default:fe(()=>r[4]||(r[4]=[d("svg",{class:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20"},[d("path",{"fill-rule":"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd"})],-1),le(" Th vin ca ti ")])),_:1})]),d("li",null,[V(n,{to:"/pricing",class:"text-gray-400 hover:text-yellow-400 transition-colors text-sm flex items-center gap-1"},{default:fe(()=>r[5]||(r[5]=[d("svg",{class:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20"},[d("path",{"fill-rule":"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd"})],-1),le(" Gi dch v ")])),_:1})])])]),d("div",null,[r[13]||(r[13]=d("h3",{class:"text-white font-semibold text-lg mb-4 flex items-center gap-2"},[d("svg",{class:"w-5 h-5 text-yellow-400",fill:"currentColor",viewBox:"0 0 20 20"},[d("path",{d:"M7 3a1 1 0 000 2h6a1 1 0 100-2H7zM4 7a1 1 0 011-1h10a1 1 0 110 2H5a1 1 0 01-1-1zM2 11a2 2 0 012-2h12a2 2 0 012 2v4a2 2 0 01-2 2H4a2 2 0 01-2-2v-4z"})]),le(" Th Loi ")],-1)),d("ul",XC,[d("li",null,[V(n,{to:"/category/hanh-dong/page/1",class:"text-gray-400 hover:text-yellow-400 transition-colors text-sm"},{default:fe(()=>r[7]||(r[7]=[le("Hnh ng")])),_:1})]),d("li",null,[V(n,{to:"/category/hai-huoc/page/1",class:"text-gray-400 hover:text-yellow-400 transition-colors text-sm"},{default:fe(()=>r[8]||(r[8]=[le("Hi Hc")])),_:1})]),d("li",null,[V(n,{to:"/category/kinh-di/page/1",class:"text-gray-400 hover:text-yellow-400 transition-colors text-sm"},{default:fe(()=>r[9]||(r[9]=[le("Kinh D")])),_:1})]),d("li",null,[V(n,{to:"/category/tinh-cam/page/1",class:"text-gray-400 hover:text-yellow-400 transition-colors text-sm"},{default:fe(()=>r[10]||(r[10]=[le("Tnh Cm")])),_:1})]),d("li",null,[V(n,{to:"/category/khoa-hoc-vien-tuong/page/1",class:"text-gray-400 hover:text-yellow-400 transition-colors text-sm"},{default:fe(()=>r[11]||(r[11]=[le("Khoa Hc Vin Tng")])),_:1})]),d("li",null,[V(n,{to:"/category/hoat-hinh/page/1",class:"text-gray-400 hover:text-yellow-400 transition-colors text-sm"},{default:fe(()=>r[12]||(r[12]=[le("Hot Hnh")])),_:1})])])]),d("div",null,[r[16]||(r[16]=d("h3",{class:"text-white font-semibold text-lg mb-4 flex items-center gap-2"},[d("svg",{class:"w-5 h-5 text-yellow-400",fill:"currentColor",viewBox:"0 0 20 20"},[d("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"})]),le(" H Tr ")],-1)),d("ul",YC,[d("li",null,[V(n,{to:"/contact",class:"text-gray-400 hover:text-yellow-400 transition-colors text-sm"},{default:fe(()=>r[14]||(r[14]=[le(" Lin h")])),_:1})]),r[15]||(r[15]=ar('<li><a href="#" class="text-gray-400 hover:text-yellow-400 transition-colors text-sm"> iu khon s dng</a></li><li><a href="#" class="text-gray-400 hover:text-yellow-400 transition-colors text-sm"> Chnh sch bo mt</a></li><li><a href="#" class="text-gray-400 hover:text-yellow-400 transition-colors text-sm"> Gii thiu</a></li><li><a href="#" class="text-gray-400 hover:text-yellow-400 transition-colors text-sm"> Cu hi thng gp</a></li><li><a href="#" class="text-gray-400 hover:text-yellow-400 transition-colors text-sm"> Hng dn thanh ton</a></li>',5))])])]),r[18]||(r[18]=d("div",{class:"border-t border-gray-800 pt-4"},[d("div",{class:"flex flex-col md:flex-row items-center justify-between gap-4"},[d("p",{class:"text-gray-500 text-sm"}," 2024 HTHREE Film. All rights reserved."),d("div",{class:"flex items-center gap-4 text-xs text-gray-500"},[d("span",null,"v1.0.0")])])],-1))])])}}},Cs=q(!1),bh=q({title:"",message:"",confirmText:"Xc nhn",cancelText:"Hy",type:"warning",onConfirm:null,onCancel:null});function Bg(){return{isOpen:Cs,confirmData:bh,confirm:({title:r="Xc nhn",message:n="Bn c chc chn mun thc hin hnh ng ny?",confirmText:s="Xc nhn",cancelText:o="Hy",type:i="warning"})=>new Promise(a=>{bh.value={title:r,message:n,confirmText:s,cancelText:o,type:i,onConfirm:()=>{Cs.value=!1,a(!0)},onCancel:()=>{Cs.value=!1,a(!1)}},Cs.value=!0}),close:()=>{Cs.value=!1}}}const ZC=Object.freeze(Object.defineProperty({__proto__:null,useConfirm:Bg},Symbol.toStringTag,{value:"Module"})),e3=["aria-labelledby"],t3={class:"flex justify-center pt-6 pb-4"},r3={key:0,class:"w-8 h-8 text-yellow-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n3={key:1,class:"w-8 h-8 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},s3={key:2,class:"w-8 h-8 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},o3={class:"px-6 pb-6 text-center"},i3=["id"],a3={class:"text-gray-400 text-sm leading-relaxed"},l3={class:"flex items-center justify-center gap-3 px-6 pb-6"},c3={__name:"ConfirmDialog",setup(t){const{isOpen:e,confirmData:r}=Bg(),n=()=>{r.value.onConfirm&&r.value.onConfirm()},s=()=>{r.value.onCancel&&r.value.onCancel()};return(o,i)=>(y(),Ie(gs,{to:"body"},[V(lt,{name:"fade"},{default:fe(()=>[Le(e)?(y(),x("div",{key:0,class:"fixed inset-0 z-[9999] flex items-center justify-center p-4",onClick:Rt(s,["self"])},[i[3]||(i[3]=d("div",{class:"absolute inset-0 bg-black/70 backdrop-blur-sm"},null,-1)),V(lt,{name:"scale"},{default:fe(()=>[Le(e)?(y(),x("div",{key:0,class:"relative bg-gray-900 rounded-2xl shadow-2xl max-w-md w-full border border-gray-700 overflow-hidden",role:"dialog","aria-modal":"true","aria-labelledby":"dialog-title-"+Date.now()},[d("div",t3,[d("div",{class:Te(["w-16 h-16 rounded-full flex items-center justify-center",{"bg-yellow-500/20":Le(r).type==="warning","bg-red-500/20":Le(r).type==="danger","bg-blue-500/20":Le(r).type==="info"}])},[Le(r).type==="warning"?(y(),x("svg",r3,i[0]||(i[0]=[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"},null,-1)]))):Le(r).type==="danger"?(y(),x("svg",n3,i[1]||(i[1]=[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"},null,-1)]))):(y(),x("svg",s3,i[2]||(i[2]=[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])))],2)]),d("div",o3,[d("h3",{id:"dialog-title-"+Date.now(),class:"text-xl font-bold text-white mb-2"},j(Le(r).title),9,i3),d("p",a3,j(Le(r).message),1)]),d("div",l3,[d("button",{onClick:s,class:"flex-1 px-4 py-3 bg-gray-800 text-white rounded-lg font-medium hover:bg-gray-700 transition-all focus:outline-none focus:ring-2 focus:ring-gray-600 flex items-center justify-center"},j(Le(r).cancelText),1),d("button",{onClick:n,class:Te(["flex-1 px-4 py-3 rounded-lg font-medium transition-all focus:outline-none focus:ring-2 flex items-center justify-center",{"bg-yellow-500 text-black hover:bg-yellow-600 focus:ring-yellow-400":Le(r).type==="warning","bg-red-500 text-white hover:bg-red-600 focus:ring-red-400":Le(r).type==="danger","bg-blue-500 text-white hover:bg-blue-600 focus:ring-blue-400":Le(r).type==="info"}])},j(Le(r).confirmText),3)])],8,e3)):z("",!0)]),_:1})])):z("",!0)]),_:1})]))}},u3=pt(c3,[["__scopeId","data-v-cc897611"]]),d3={__name:"ScrollToTop",setup(t){const e=q(!1);q(0);const r=()=>{const s=window.pageYOffset||document.documentElement.scrollTop;document.documentElement.scrollHeight-document.documentElement.clientHeight,e.value=s>300},n=()=>{window.scrollTo({top:0,behavior:"smooth"})};return Et(()=>{window.addEventListener("scroll",r),r()}),Jt(()=>{window.removeEventListener("scroll",r)}),(s,o)=>(y(),Ie(lt,{name:"slide-up"},{default:fe(()=>[e.value?(y(),x("button",{key:0,onClick:n,class:"fixed bottom-6 right-6 z-50 w-12 h-12 bg-yellow-500 hover:bg-yellow-600 text-black rounded-full shadow-2xl hover:shadow-yellow-500/50 transition-all duration-300 hover:scale-110 focus:outline-none focus:ring-4 focus:ring-yellow-400/50 group","aria-label":"Quay li u trang",title:"Quay li u trang"},o[0]||(o[0]=[d("svg",{class:"w-6 h-6 mx-auto group-hover:-translate-y-1 transition-transform duration-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2.5",d:"M5 10l7-7m0 0l7 7m-7-7v18"})],-1)]))):z("",!0)]),_:1}))}},h3=pt(d3,[["__scopeId","data-v-19df53e0"]]),f3={class:"bg-gray-900 rounded-2xl max-w-2xl w-full border border-gray-700 shadow-2xl overflow-hidden"},p3={class:"p-4 border-b border-gray-700"},g3={class:"relative"},m3=["onKeydown"],v3={class:"max-h-[400px] overflow-y-auto"},y3={key:0,class:"p-8 text-center"},b3={key:1},w3={class:"px-4 py-2 text-xs font-semibold text-gray-500 uppercase tracking-wider"},_3=["onClick","onMouseenter"],x3={class:"flex items-center gap-3"},E3={key:1,class:"text-lg"},k3={class:"text-white font-medium text-sm"},S3={key:0,class:"text-gray-400 text-xs"},T3={key:0,class:"px-2 py-1 bg-gray-700 text-gray-300 rounded text-xs font-mono"},C3={class:"px-4 py-3 bg-gray-800/50 border-t border-gray-700 flex items-center justify-between text-xs text-gray-400"},A3={__name:"CommandPalette",props:{show:{type:Boolean,default:!1}},emits:["close"],setup(t,{emit:e}){const r=t,n=e,s=Zr(),o=ha(),i=q(null),a=q(""),l=q(0),c=q([{id:"nav-home",label:"Trang ch",description:"V trang ch",emoji:"",group:"iu hng",action:()=>s.push("/home"),shortcut:"G+H"},{id:"nav-library",label:"Th vin",description:"Th vin ca ti",emoji:"",group:"iu hng",action:()=>s.push("/library"),shortcut:"G+L"},{id:"nav-pricing",label:"Gi dch v",description:"Xem cc gi",emoji:"",group:"iu hng",action:()=>s.push("/pricing"),shortcut:"G+P"},{id:"nav-cart",label:"Gi hng",description:"Xem gi hng",emoji:"",group:"iu hng",action:()=>s.push("/cart"),shortcut:"G+C"},{id:"nav-account",label:"Ti khon",description:"Qun l ti khon",emoji:"",group:"iu hng",action:()=>s.push("/account")},{id:"action-search",label:"Tm kim phim",description:"M thanh tm kim",emoji:"",group:"Hnh ng",action:()=>T(),shortcut:"/"},{id:"action-shortcuts",label:"Phm tt",description:"Xem danh sch phm tt",emoji:"",group:"Hnh ng",action:()=>k(),shortcut:"?"},{id:"action-theme",label:"Chuyn theme",description:"Sng/Ti",emoji:"",group:"Hnh ng",action:()=>E()},{id:"quick-buy-basic",label:"Mua gi Basic",description:"Thm gi Basic vo gi",emoji:"",group:"Mua nhanh",action:()=>C("basic")},{id:"quick-buy-premium",label:"Mua gi Premium",description:"Thm gi Premium vo gi",emoji:"",group:"Mua nhanh",action:()=>C("premium")},{id:"quick-buy-vip",label:"Mua gi VIP",description:"Thm gi VIP vo gi",emoji:"",group:"Mua nhanh",action:()=>C("vip")}]),u=Ae(()=>{if(!a.value)return c.value;const R=a.value.toLowerCase();return c.value.filter(S=>{var O;return S.label.toLowerCase().includes(R)||((O=S.description)==null?void 0:O.toLowerCase().includes(R))||S.group.toLowerCase().includes(R)})}),h=Ae(()=>{const R={};return u.value.forEach(S=>{R[S.group]||(R[S.group]=[]),R[S.group].push(S)}),R}),f=(R,S)=>{let O=0;for(const[m,A]of Object.entries(h.value)){if(m===R)return O+S;O+=A.length}return 0},p=()=>{l.value=Math.min(l.value+1,u.value.length-1)},g=()=>{l.value=Math.max(l.value-1,0)},v=()=>{const R=u.value[l.value];R&&_(R)},_=R=>{R.action(),$(),o.success(` ${R.label}`)},T=()=>{const R=document.querySelector('input[placeholder*="Tm kim"]');R&&R.focus()},k=()=>{window.dispatchEvent(new CustomEvent("show-shortcuts"))},E=()=>{document.documentElement.classList.toggle("dark"),o.info("Theme  c thay i")},C=R=>{s.push(`/pricing?plan=${R}`)},$=()=>{a.value="",l.value=0,n("close")};return _r(()=>r.show,R=>{R&&Qr(()=>{var S;(S=i.value)==null||S.focus()})}),(R,S)=>(y(),Ie(gs,{to:"body"},[V(lt,{name:"fade"},{default:fe(()=>[t.show?(y(),x("div",{key:0,class:"fixed inset-0 z-[9999] flex items-start justify-center pt-[15vh] p-4 bg-black/80 backdrop-blur-sm",onClick:Rt($,["self"])},[d("div",f3,[d("div",p3,[d("div",g3,[S[1]||(S[1]=d("svg",{class:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1)),uc(d("input",{ref_key:"searchInput",ref:i,"onUpdate:modelValue":S[0]||(S[0]=O=>a.value=O),type:"text",placeholder:"Tm kim hnh ng, trang, phim...",class:"w-full pl-12 pr-4 py-3 bg-gray-800 text-white rounded-lg border border-gray-700 focus:border-yellow-400 focus:outline-none focus:ring-2 focus:ring-yellow-400/20 transition-all",onKeydown:[Kn(Rt(p,["prevent"]),["down"]),Kn(Rt(g,["prevent"]),["up"]),Kn(Rt(v,["prevent"]),["enter"]),Kn($,["esc"])]},null,40,m3),[[Zs,a.value]])])]),d("div",v3,[u.value.length===0?(y(),x("div",y3,S[2]||(S[2]=[d("svg",{class:"w-16 h-16 mx-auto mb-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),d("p",{class:"text-gray-400"},"Khng tm thy kt qu",-1)]))):(y(),x("div",b3,[(y(!0),x(ve,null,$e(h.value,(O,m)=>(y(),x("div",{key:m,class:"py-2"},[d("div",w3,j(m),1),(y(!0),x(ve,null,$e(O,(A,Q)=>(y(),x("button",{key:A.id,onClick:K=>_(A),onMouseenter:K=>l.value=f(m,Q),class:Te(["w-full px-4 py-3 flex items-center justify-between hover:bg-gray-800 transition-colors text-left",{"bg-gray-800":l.value===f(m,Q)}])},[d("div",x3,[d("div",{class:Te(["w-8 h-8 rounded-lg flex items-center justify-center",A.iconBg||"bg-gray-700"])},[A.icon?(y(),Ie(mf(A.icon),{key:0,class:Te(["w-4 h-4",A.iconColor||"text-white"])},null,8,["class"])):(y(),x("span",E3,j(A.emoji),1))],2),d("div",null,[d("p",k3,j(A.label),1),A.description?(y(),x("p",S3,j(A.description),1)):z("",!0)])]),A.shortcut?(y(),x("kbd",T3,j(A.shortcut),1)):z("",!0)],42,_3))),128))]))),128))]))]),d("div",C3,[S[3]||(S[3]=d("div",{class:"flex items-center gap-4"},[d("span",{class:"flex items-center gap-1"},[d("kbd",{class:"px-1.5 py-0.5 bg-gray-700 rounded"},""),le(" iu hng ")]),d("span",{class:"flex items-center gap-1"},[d("kbd",{class:"px-1.5 py-0.5 bg-gray-700 rounded"},"Enter"),le(" Chn ")]),d("span",{class:"flex items-center gap-1"},[d("kbd",{class:"px-1.5 py-0.5 bg-gray-700 rounded"},"Esc"),le(" ng ")])],-1)),d("span",null,j(u.value.length)+" kt qu",1)])])])):z("",!0)]),_:1})]))}},I3=pt(A3,[["__scopeId","data-v-0b170577"]]);function R3(t={}){const e=r=>{const n=[];(r.ctrlKey||r.metaKey)&&n.push("ctrl"),r.shiftKey&&n.push("shift"),r.altKey&&n.push("alt"),n.push(r.key.toLowerCase());const s=n.join("+"),o=t[s];o&&(r.preventDefault(),r.stopPropagation(),o(r))};return Et(()=>{window.addEventListener("keydown",e)}),Jt(()=>{window.removeEventListener("keydown",e)}),{handleKeyDown:e}}const O3={"ctrl+k":"Focus search",escape:"Close modal/dialog","/":"Quick search","ctrl+z":"Undo last action","ctrl+shift+z":"Redo last action","ctrl+s":"Save (where applicable)","ctrl+f":"Find in page","?":"Show keyboard shortcuts help"};function hn(){const t=document.activeElement,e=t==null?void 0:t.tagName.toLowerCase();return["input","textarea","select"].includes(e)||(t==null?void 0:t.isContentEditable)}function P3(t){return t.split("+").map(e=>({ctrl:"",shift:"",alt:"",escape:"Esc",arrowleft:"",arrowright:"",arrowup:"",arrowdown:""})[e.toLowerCase()]||e.toUpperCase()).join(" + ")}const $3={class:"flex items-center justify-between p-3 bg-gray-800/50 rounded-lg hover:bg-gray-800 transition-colors"},N3={class:"text-gray-300 text-sm"},L3={class:"flex items-center gap-1"},ut={__name:"ShortcutItem",props:{shortcut:{type:String,required:!0},description:{type:String,required:!0}},setup(t){const e=t,r=Ae(()=>P3(e.shortcut).split(" + "));return(n,s)=>(y(),x("div",$3,[d("span",N3,j(t.description),1),d("div",L3,[(y(!0),x(ve,null,$e(r.value,(o,i)=>(y(),x("kbd",{key:i,class:"px-2 py-1 bg-gray-700 text-white rounded text-xs font-mono min-w-[28px] text-center"},j(o),1))),128))])]))}},M3={class:"bg-gray-900 rounded-2xl max-w-3xl w-full max-h-[80vh] overflow-hidden border border-gray-700 shadow-2xl"},j3={class:"bg-gradient-to-r from-yellow-500 to-red-600 p-6 flex items-center justify-between"},D3={class:"p-6 overflow-y-auto max-h-[calc(80vh-120px)]"},U3={class:"mb-8"},B3={class:"grid grid-cols-1 md:grid-cols-2 gap-3"},F3={class:"mb-8"},H3={class:"grid grid-cols-1 md:grid-cols-2 gap-3"},V3={class:"mb-8"},q3={class:"grid grid-cols-1 md:grid-cols-2 gap-3"},z3={class:"grid grid-cols-1 md:grid-cols-2 gap-3"},W3={__name:"KeyboardShortcutsHelp",props:{show:{type:Boolean,default:!1}},emits:["close"],setup(t){const e=O3;return(r,n)=>(y(),Ie(gs,{to:"body"},[V(lt,{name:"fade"},{default:fe(()=>[t.show?(y(),x("div",{key:0,class:"fixed inset-0 z-[9999] flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm",onClick:n[1]||(n[1]=Rt(s=>r.$emit("close"),["self"]))},[d("div",M3,[d("div",j3,[n[3]||(n[3]=d("div",{class:"flex items-center gap-3"},[d("div",{class:"w-10 h-10 rounded-lg bg-white/20 flex items-center justify-center"},[d("svg",{class:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"})])]),d("div",null,[d("h2",{class:"text-2xl font-bold text-white"},"Phm tt"),d("p",{class:"text-white/80 text-sm"},"Thao tc nhanh hn vi bn phm")])],-1)),d("button",{onClick:n[0]||(n[0]=s=>r.$emit("close")),class:"w-8 h-8 rounded-lg bg-white/20 hover:bg-white/30 flex items-center justify-center transition-colors"},n[2]||(n[2]=[d("svg",{class:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),d("div",D3,[d("div",U3,[n[4]||(n[4]=d("h3",{class:"text-lg font-bold text-white mb-4 flex items-center gap-2"},[d("svg",{class:"w-5 h-5 text-yellow-400",fill:"currentColor",viewBox:"0 0 20 20"},[d("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V7z","clip-rule":"evenodd"})]),le(" Phm tt chung ")],-1)),d("div",B3,[(y(!0),x(ve,null,$e(Le(e),(s,o)=>(y(),Ie(ut,{key:o,shortcut:o,description:s},null,8,["shortcut","description"]))),128))])]),d("div",F3,[n[5]||(n[5]=d("h3",{class:"text-lg font-bold text-white mb-4 flex items-center gap-2"},[d("svg",{class:"w-5 h-5 text-blue-400",fill:"currentColor",viewBox:"0 0 20 20"},[d("path",{d:"M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z"})]),le(" iu hng ")],-1)),d("div",H3,[V(ut,{shortcut:"g+h",description:"V trang ch"}),V(ut,{shortcut:"g+l",description:"Th vin ca ti"}),V(ut,{shortcut:"g+p",description:"Gi dch v"}),V(ut,{shortcut:"g+c",description:"Gi hng"})])]),d("div",V3,[n[6]||(n[6]=d("h3",{class:"text-lg font-bold text-white mb-4 flex items-center gap-2"},[d("svg",{class:"w-5 h-5 text-purple-400",fill:"currentColor",viewBox:"0 0 20 20"},[d("path",{d:"M9 4.804A7.968 7.968 0 005.5 4c-1.255 0-2.443.29-3.5.804v10A7.969 7.969 0 015.5 14c1.669 0 3.218.51 4.5 1.385A7.962 7.962 0 0114.5 14c1.255 0 2.443.29 3.5.804v-10A7.968 7.968 0 0014.5 4c-1.255 0-2.443.29-3.5.804V12a1 1 0 11-2 0V4.804z"})]),le(" Th vin ")],-1)),d("div",q3,[V(ut,{shortcut:"f",description:"Lc yu thch"}),V(ut,{shortcut:"w",description:"Lc danh sch xem"}),V(ut,{shortcut:"c",description:"Lc ang xem"}),V(ut,{shortcut:"delete",description:"Xa mc  chn"})])]),d("div",null,[n[7]||(n[7]=d("h3",{class:"text-lg font-bold text-white mb-4 flex items-center gap-2"},[d("svg",{class:"w-5 h-5 text-red-400",fill:"currentColor",viewBox:"0 0 20 20"},[d("path",{d:"M2 6a2 2 0 012-2h6a2 2 0 012 2v8a2 2 0 01-2 2H4a2 2 0 01-2-2V6zM14.553 7.106A1 1 0 0014 8v4a1 1 0 00.553.894l2 1A1 1 0 0018 13V7a1 1 0 00-1.447-.894l-2 1z"})]),le(" Trnh pht video ")],-1)),d("div",z3,[V(ut,{shortcut:"space",description:"Pht/Tm dng"}),V(ut,{shortcut:"f",description:"Ton mn hnh"}),V(ut,{shortcut:"m",description:"Tt/Bt ting"}),V(ut,{shortcut:"",description:"Tua li 10s"}),V(ut,{shortcut:"",description:"Tua ti 10s"}),V(ut,{shortcut:"",description:"Tng m lng"}),V(ut,{shortcut:"",description:"Gim m lng"})])])]),n[8]||(n[8]=d("div",{class:"bg-gray-800/50 px-6 py-4 border-t border-gray-700"},[d("p",{class:"text-gray-400 text-sm text-center"},[le(" Nhn "),d("kbd",{class:"px-2 py-1 bg-gray-700 rounded text-xs"},"?"),le(" bt c lc no  xem phm tt ")])],-1))])])):z("",!0)]),_:1})]))}},K3=pt(W3,[["__scopeId","data-v-b775cdea"]]),G3={class:"flex flex-col min-h-screen m-0 p-0 bg-black"},J3={key:1,class:"flex flex-col items-center justify-center flex-grow bg-gradient-to-br from-indigo-100 to-gray-50"},X3={key:2,class:"flex-grow"},Y3={__name:"App",setup(t){const e=Gi(),r=Zr(),n=q(void 0),s=$n(),o=q(null),i=ha();Ae(()=>e.path==="/home");const a=Ae(()=>e.path.startsWith("/admin")),l=q(!1),c=q(!1);return R3({"ctrl+k":u=>{hn()||(l.value=!0)},"/":u=>{if(!hn()){const h=document.querySelector('input[placeholder*="Tm kim"]');h&&h.focus()}},"?":u=>{hn()||(c.value=!0)},escape:()=>{l.value=!1,c.value=!1},"g+h":()=>{hn()||r.push("/home")},"g+l":()=>{hn()||r.push("/library")},"g+p":()=>{hn()||r.push("/pricing")},"g+c":()=>{hn()||r.push("/cart")}}),Et(()=>{o.value&&_T(o.value);let u=null,h=!1;const f=_o(s,p=>{h=!0,n.value=p,u&&(clearTimeout(u),u=null)});return u=setTimeout(()=>{!h&&n.value===void 0&&(n.value=null,i.error("Khng th kim tra trng thi ng nhp. Vui lng th li!"))},1e4),()=>{f(),u&&clearTimeout(u)}}),(u,h)=>{const f=Hi("router-view");return y(),x(ve,null,[V(NC),V(I3,{show:l.value,onClose:h[0]||(h[0]=p=>l.value=!1)},null,8,["show"]),V(K3,{show:c.value,onClose:h[1]||(h[1]=p=>c.value=!1)},null,8,["show"]),d("div",G3,[a.value?z("",!0):(y(),Ie(OC,{key:0})),n.value===void 0?(y(),x("div",J3,h[2]||(h[2]=[ar('<div class="text-center"><svg class="animate-spin h-12 w-12 text-indigo-600 mx-auto mb-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg><p class="text-xl font-semibold text-gray-700">ang kim tra ng nhp...</p></div>',1)]))):(y(),x("main",X3,[V(f,null,{default:fe(({Component:p,route:g})=>[V(lt,{name:g.meta.transition||"fade",mode:"out-in"},{default:fe(()=>[(y(),Ie(mf(p),{key:g.path}))]),_:2},1032,["name"])]),_:1})])),a.value?z("",!0):(y(),Ie(QC,{key:3}))]),V(h3),V(zC,{ref_key:"toastRef",ref:o},null,512),V(u3)],64)}}},Q3={class:"min-h-screen bg-black relative overflow-hidden flex items-center justify-center p-4 sm:p-6 lg:p-8"},Z3={__name:"WelcomePage",setup(t){const e=Zr(),r=()=>{e.push("/home")};return(n,s)=>(y(),x("div",Q3,[s[3]||(s[3]=ar('<div class="absolute inset-0 opacity-20" data-v-ee78f763><div class="absolute top-0 left-0 w-96 h-96 bg-yellow-400 rounded-full filter blur-3xl animate-blob" data-v-ee78f763></div><div class="absolute top-0 right-0 w-96 h-96 bg-yellow-600 rounded-full filter blur-3xl animate-blob animation-delay-2000" data-v-ee78f763></div><div class="absolute bottom-0 left-1/2 w-96 h-96 bg-yellow-500 rounded-full filter blur-3xl animate-blob animation-delay-4000" data-v-ee78f763></div></div><div class="absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-transparent via-yellow-400 to-transparent" data-v-ee78f763></div><div class="absolute bottom-0 left-0 w-full h-2 bg-gradient-to-r from-transparent via-yellow-400 to-transparent" data-v-ee78f763></div>',3)),d("main",{class:"relative z-10 bg-gray-900/80 backdrop-blur-xl p-6 sm:p-8 rounded-2xl shadow-2xl border border-yellow-400/20 max-w-2xl w-full text-center transform opacity-0 scale-95 animate-fade-in-up"},[d("div",{class:"space-y-5"},[s[1]||(s[1]=ar('<div class="flex justify-center mb-3" data-v-ee78f763><div class="relative" data-v-ee78f763><svg class="w-12 h-12 text-yellow-400 animate-pulse-slow" fill="currentColor" viewBox="0 0 20 20" data-v-ee78f763><path d="M2 6a2 2 0 012-2h6a2 2 0 012 2v8a2 2 0 01-2 2H4a2 2 0 01-2-2V6zM14.553 7.106A1 1 0 0014 8v4a1 1 0 00.553.894l2 1A1 1 0 0018 13V7a1 1 0 00-1.447-.894l-2 1z" data-v-ee78f763></path></svg><div class="absolute -inset-2 bg-yellow-400/20 rounded-full blur-xl" data-v-ee78f763></div></div></div><div class="space-y-2" data-v-ee78f763><p class="text-[10px] sm:text-xs font-medium text-gray-400 uppercase tracking-[0.2em]" data-v-ee78f763>y Ban Nhn Dn</p><p class="text-xs sm:text-sm font-medium text-gray-300 uppercase tracking-[0.15em]" data-v-ee78f763>S Gio Dc v o To</p><h1 class="text-sm sm:text-base font-bold text-white uppercase tracking-wide" data-v-ee78f763> Trng Cao ng Kinh T TP.HCM </h1><p class="text-xs sm:text-sm text-yellow-400 font-semibold italic" data-v-ee78f763>D n Web Thng Mi in T</p></div><div class="grid grid-cols-1 sm:grid-cols-2 gap-5 mt-6 border-t border-b border-yellow-400/20 py-6" data-v-ee78f763><div class="text-left space-y-2" data-v-ee78f763><div class="flex items-center gap-2 mb-2" data-v-ee78f763><svg class="w-4 h-4 text-yellow-400" fill="currentColor" viewBox="0 0 20 20" data-v-ee78f763><path d="M10.394 2.08a1 1 0 00-.788 0l-7 3a1 1 0 000 1.84L5.25 8.051a.999.999 0 01.356-.257l4-1.714a1 1 0 11.788 1.838L7.667 9.088l1.94.831a1 1 0 00.787 0l7-3a1 1 0 000-1.838l-7-3zM3.31 9.397L5 10.12v4.102a8.969 8.969 0 00-1.05-.174 1 1 0 01-.89-.89 11.115 11.115 0 01.25-3.762zM9.3 16.573A9.026 9.026 0 007 14.935v-3.957l1.818.78a3 3 0 002.364 0l5.508-2.361a11.026 11.026 0 01.25 3.762 1 1 0 01-.89.89 8.968 8.968 0 00-5.35 2.524 1 1 0 01-1.4 0zM6 18a1 1 0 001-1v-2.065a8.935 8.935 0 00-2-.712V17a1 1 0 001 1z" data-v-ee78f763></path></svg><p class="text-xs sm:text-sm font-bold text-yellow-400 uppercase" data-v-ee78f763>Ging Vin Hng Dn</p></div><p class="text-xs sm:text-sm text-gray-200 hover:text-yellow-400 transition-colors cursor-pointer pl-6" data-v-ee78f763>Phm ng Phng</p></div><div class="text-left space-y-2" data-v-ee78f763><div class="flex items-center gap-2 mb-2" data-v-ee78f763><svg class="w-4 h-4 text-yellow-400" fill="currentColor" viewBox="0 0 20 20" data-v-ee78f763><path d="M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015 5v1H1v-1a5 5 0 015-5z" data-v-ee78f763></path></svg><p class="text-xs sm:text-sm font-bold text-yellow-400 uppercase" data-v-ee78f763>Sinh Vin Thc Hin</p></div><p class="text-xs sm:text-sm text-gray-200 hover:text-yellow-400 transition-colors cursor-pointer pl-6" data-v-ee78f763>Phm Trung Tun</p><p class="text-xs sm:text-sm text-gray-200 hover:text-yellow-400 transition-colors cursor-pointer pl-6" data-v-ee78f763>L Anh Vn</p><p class="text-xs sm:text-sm text-gray-200 hover:text-yellow-400 transition-colors cursor-pointer pl-6" data-v-ee78f763>Trn Lc Kh T</p><p class="text-xs sm:text-sm text-gray-200 hover:text-yellow-400 transition-colors cursor-pointer pl-6" data-v-ee78f763>Nguyn L Anh Th</p></div></div><div class="pt-4" data-v-ee78f763><h2 class="text-4xl sm:text-5xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-yellow-400 via-yellow-500 to-yellow-600 drop-shadow-2xl tracking-tight" data-v-ee78f763> HTHREE </h2><p class="text-base sm:text-lg text-yellow-400/80 font-light tracking-[0.4em] mt-1" data-v-ee78f763>FILM</p></div>',4)),d("button",{onClick:r,class:"mt-8 px-8 py-3 bg-yellow-400 text-black font-bold text-base rounded-full shadow-xl shadow-yellow-400/50 transition-all duration-300 transform hover:scale-105 hover:shadow-2xl hover:shadow-yellow-400/70 active:scale-95 focus:outline-none focus:ring-4 focus:ring-yellow-400/50 relative overflow-hidden group","aria-label":"Vo Trang Web Chnh"},s[0]||(s[0]=[d("span",{class:"relative z-10 flex items-center justify-center gap-2"},[d("svg",{class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20"},[d("path",{d:"M6.3 2.841A1.5 1.5 0 004 4.11V15.89a1.5 1.5 0 002.3 1.269l9.344-5.89a1.5 1.5 0 000-2.538L6.3 2.84z"})]),le(" Khm Ph Ngay ")],-1),d("span",{class:"absolute inset-0 bg-yellow-500 opacity-0 group-hover:opacity-100 transition-opacity duration-300"},null,-1)])),s[2]||(s[2]=d("p",{class:"text-[10px] text-gray-500 mt-6"}," 2025 HTHREE Film",-1))])])]))}},eA=pt(Z3,[["__scopeId","data-v-ee78f763"]]),tA={class:"comment-form bg-gray-800 rounded-xl p-6 border border-gray-700"},rA={key:0,class:"flex items-center gap-3 mb-4"},nA=["src","alt"],sA={class:"text-white font-medium text-sm"},oA={class:"text-gray-400 text-xs"},iA=["disabled","placeholder"],aA={class:"flex items-center justify-between mt-2"},lA={class:"text-xs text-gray-500"},cA=["disabled"],uA={key:0,class:"animate-spin h-4 w-4",fill:"none",viewBox:"0 0 24 24"},dA={key:1,class:"mt-4 p-4 bg-gray-900 rounded-lg border border-gray-700"},hA={key:2,class:"mt-4 p-4 bg-green-900/50 border border-green-500 rounded-lg flex items-center gap-3 animate-fade-in"},fA={__name:"CommentForm",props:{movieSlug:{type:String,default:null}},emits:["comment-added","login"],setup(t,{emit:e}){const r=ha(),n=t,s=e,o=$n(),i=q(null),a=()=>{var E;const T=o.currentUser;if(T){i.value=T,console.log(" CommentForm - Firebase user:",T.email);return}const k=localStorage.getItem("user");if(k)try{i.value=JSON.parse(k),console.log(" CommentForm - PHP user:",(E=i.value)==null?void 0:E.email)}catch(C){console.error("Error parsing PHP user:",C)}};Et(()=>{a(),_o(o,T=>{T?(i.value=T,console.log(" CommentForm - Firebase auth changed:",T.email)):a()}),window.addEventListener("storage",a)});const l=q(""),c=q(!1),u=q(!1),h=q(!1),f=la.BACKEND_URL,p=()=>{var k,E,C,$;if(h.value||!i.value){const R=((k=i.value)==null?void 0:k.displayName)||((C=(E=i.value)==null?void 0:E.email)==null?void 0:C.split("@")[0])||"User";return`https://ui-avatars.com/api/?name=${encodeURIComponent(R)}&background=f59e0b&color=000&size=128`}if(i.value.photoURL)return i.value.photoURL;const T=i.value.displayName||(($=i.value.email)==null?void 0:$.split("@")[0])||"User";return`https://ui-avatars.com/api/?name=${encodeURIComponent(T)}&background=f59e0b&color=000&size=128`},g=T=>{var E,C,$;h.value=!0;const k=((E=i.value)==null?void 0:E.displayName)||(($=(C=i.value)==null?void 0:C.email)==null?void 0:$.split("@")[0])||"User";T.target.src=`https://ui-avatars.com/api/?name=${encodeURIComponent(k)}&background=f59e0b&color=000&size=128`},v=T=>{T.shiftKey||(T.preventDefault(),_())},_=async()=>{if(!(!i.value||!l.value.trim())){c.value=!0;try{const T=!!i.value.uid,k=!!i.value.id;console.log(" Submitting comment...",{type:T?"Firebase":"PHP",email:i.value.email,displayName:i.value.displayName||i.value.full_name,uid:i.value.uid,id:i.value.id});let E;if(T){let $=`https://ui-avatars.com/api/?name=${encodeURIComponent(i.value.displayName||i.value.email.split("@")[0])}&background=f59e0b&color=000&size=128`;if(i.value.photoURL)try{const S=await me.post(`${f}/upload_avatar.php`,{firebase_uid:i.value.uid,photo_url:i.value.photoURL});S.data.success&&($=S.data.avatar_url,console.log(" Avatar uploaded:",$))}catch{console.log(" Avatar upload failed, using fallback")}const R=await me.post(`${f}/users.php`,{firebase_uid:i.value.uid,email:i.value.email,username:i.value.email.split("@")[0],full_name:i.value.displayName||i.value.email.split("@")[0],avatar:$});if(console.log(" Firebase user response:",R.data),!R.data.success)throw new Error("Failed to register/get user");E=R.data.user.id}else if(k)E=i.value.id,console.log(" PHP user ID:",E);else throw new Error("Invalid user type");const C=await me.post(`${f}/comments.php`,{user_id:E,movie_slug:n.movieSlug,content:l.value.trim()});if(C.data.success)u.value=!0,setTimeout(()=>{u.value=!1},3e3),l.value="",s("comment-added"),r.success("Bnh lun  c gi!");else throw new Error(C.data.message||"Failed to submit comment")}catch(T){console.error("Error submitting comment:",T),r.error("Khng th gi bnh lun. Vui lng th li!")}finally{c.value=!1}}};return(T,k)=>{var E;return y(),x("div",tA,[k[5]||(k[5]=d("h3",{class:"text-xl font-bold text-white mb-4 flex items-center gap-2"},[d("span",null,""),le(" Bnh lun ca bn ")],-1)),i.value?(y(),x("div",rA,[d("img",{src:p(),alt:i.value.displayName||i.value.email,class:"w-10 h-10 rounded-full border-2 border-yellow-400 object-cover",onError:g},null,40,nA),d("div",null,[d("p",sA,j(i.value.displayName||((E=i.value.email)==null?void 0:E.split("@")[0])),1),d("p",oA,j(i.value.email),1)])])):z("",!0),uc(d("textarea",{"onUpdate:modelValue":k[0]||(k[0]=C=>l.value=C),disabled:!i.value,placeholder:i.value?"Chia s suy ngh ca bn... (Enter  gi, Shift+Enter  xung dng)":"Vui lng ng nhp  bnh lun",class:"w-full bg-gray-900 border border-gray-700 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-yellow-400 focus:ring-1 focus:ring-yellow-400 transition resize-none",rows:"4",maxlength:"500",onKeydown:Kn(v,["enter"])},null,40,iA),[[Zs,l.value]]),d("div",aA,[d("span",lA,j(l.value.length)+"/500 k t",1),d("button",{onClick:_,disabled:!i.value||!l.value.trim()||c.value,class:"px-6 py-2 bg-yellow-400 text-black font-bold rounded-lg hover:bg-yellow-500 disabled:!bg-gray-600 disabled:!text-gray-400 disabled:cursor-not-allowed transition-all duration-300 hover:scale-105 disabled:hover:scale-100 flex items-center gap-2"},[c.value?(y(),x("svg",uA,k[2]||(k[2]=[d("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),d("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):z("",!0),d("span",null,j(c.value?"ang gi...":"Gi bnh lun"),1)],8,cA)]),i.value?z("",!0):(y(),x("div",dA,[k[3]||(k[3]=d("p",{class:"text-gray-400 text-sm mb-3"},"Bn cn ng nhp  bnh lun",-1)),d("button",{onClick:k[1]||(k[1]=C=>T.$emit("login")),class:"w-full px-4 py-2 bg-gradient-to-r from-yellow-400 to-yellow-500 text-black font-bold rounded-lg hover:from-yellow-500 hover:to-yellow-600 transition-all duration-300 hover:scale-105"}," ng nhp ngay ")])),u.value?(y(),x("div",hA,k[4]||(k[4]=[d("svg",{class:"w-5 h-5 text-green-400",fill:"currentColor",viewBox:"0 0 20 20"},[d("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})],-1),d("span",{class:"text-green-400 text-sm font-medium"},"Bnh lun ca bn  c gi thnh cng! ",-1)]))):z("",!0)])}}},Fg=pt(fA,[["__scopeId","data-v-ea02517d"]]),pA={class:"relative w-full max-w-3xl bg-[#181818] rounded-lg shadow-2xl overflow-hidden"},gA={key:0,class:"flex items-center justify-center h-96"},mA={key:1,class:"relative w-full aspect-video bg-black"},vA=["src"],yA=["src"],bA=["src"],wA={key:3,class:"w-full h-full flex items-center justify-center bg-gray-800"},_A={class:"absolute bottom-0 left-0 right-0 p-6"},xA={class:"text-2xl font-bold text-white mb-3"},EA={class:"flex gap-2"},kA={key:0,class:"w-5 h-5 text-white group-hover:text-black transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},SA={key:1,class:"w-5 h-5 text-white group-hover:text-black transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},TA={class:"p-6 bg-[#181818]"},CA={class:"grid grid-cols-3 gap-6 mb-5"},AA={class:"col-span-2"},IA={class:"flex items-center gap-3 text-sm mb-3"},RA={class:"text-green-400 font-semibold"},OA={class:"text-white"},PA={class:"px-2 py-0.5 border border-gray-500 text-gray-300 text-xs"},$A={class:"space-y-2 text-xs"},NA={key:0},LA={class:"text-white"},MA={key:1},jA={class:"text-white"},DA={key:2},UA={class:"text-white"},BA={key:3},FA={class:"text-white"},HA={key:0,class:"mb-6 border-t border-gray-700 pt-5"},VA={class:"flex items-center justify-between mb-4"},qA={class:"text-gray-400 text-sm"},zA={class:"space-y-3 max-h-96 overflow-y-auto scrollbar-hide"},WA=["onClick"],KA={class:"text-3xl font-bold w-10 flex-shrink-0 text-gray-500 group-hover:text-white transition-colors"},GA={class:"relative w-36 h-20 flex-shrink-0 rounded overflow-hidden bg-gray-700"},JA=["src","alt"],XA={class:"flex-1 min-w-0"},YA={class:"font-bold mb-2 text-base text-white group-hover:text-yellow-400 transition-colors"},QA={class:"text-gray-400 text-sm leading-relaxed line-clamp-2"},ZA={class:"text-gray-400 text-sm flex-shrink-0"},eI={key:1,class:"mb-6 border-t border-gray-700 pt-5"},tI={class:"grid grid-cols-3 gap-4"},rI=["onClick"],nI={class:"relative aspect-video bg-gray-800"},sI=["src","alt"],oI={key:0,class:"absolute top-3 right-3"},iI={class:"px-2 py-1 bg-black/80 text-white text-xs font-bold rounded"},aI={class:"p-4"},lI={class:"flex items-start justify-between mb-3"},cI={class:"flex items-center gap-2 flex-wrap flex-1"},uI={key:0,class:"px-2 py-0.5 bg-yellow-600 text-white text-[10px] font-bold rounded"},dI={key:1,class:"px-2 py-0.5 bg-yellow-600 text-white text-[10px] font-bold rounded"},hI={key:2,class:"px-2 py-0.5 bg-blue-600 text-white text-[10px] font-bold rounded"},fI={key:3,class:"px-2 py-0.5 bg-blue-600 text-white text-[10px] font-bold rounded"},pI={key:4,class:"px-2 py-0.5 bg-gray-700 text-white text-[10px] font-semibold rounded"},gI={key:5,class:"px-2 py-0.5 bg-purple-600 text-white text-[10px] font-bold rounded"},mI={key:6,class:"px-2 py-0.5 bg-green-600 text-white text-[10px] font-bold rounded"},vI={class:"text-gray-300 text-sm leading-relaxed line-clamp-3 mb-2"},yI={class:"flex items-center justify-between text-xs"},bI={key:0,class:"text-gray-500 italic line-clamp-1"},wI={class:"border-t border-gray-700 pt-5"},_I={key:0,class:"mt-6 space-y-4"},xI=["src","alt"],EI={class:"flex-1"},kI={class:"flex items-center gap-2 mb-1"},SI={class:"text-white font-semibold text-sm"},TI={class:"text-gray-500 text-xs"},CI={class:"text-gray-300 text-sm leading-relaxed"},AI={key:1,class:"mt-6 text-center py-8 bg-[#2a2a2a] rounded-lg"},II={class:"border-t border-gray-700 pt-5 mt-6"},RI={class:"text-xl font-bold text-white mb-4"},OI={class:"space-y-2 text-sm text-gray-400"},PI={key:0},$I={class:"text-white"},NI={key:1},LI={class:"text-white"},MI={key:2},jI={class:"text-white"},DI={key:3},UI={class:"text-white"},BI={__name:"MovieDetailModal",props:{isOpen:Boolean,movieSlug:String},emits:["close","open-movie"],setup(t,{emit:e}){const r=t,n=e,s=q(null),o=q([]),i=q([]),a=q([]),l=q(!1),c=q(!1),u=q(!1),h=q(!0),f=la.BACKEND_URL,p=Ae(()=>l.value?i.value:i.value.slice(0,6)),g=()=>{n("close")},v=()=>{l.value=!l.value},_=q(null),T=G=>{var N;return G&&((N=G.match(/(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/\s]{11})/))==null?void 0:N[1])||""},k=G=>{if(!G)return"";const N=T(G);return N?`https://www.youtube.com/embed/${N}?autoplay=1&mute=1&controls=0&showinfo=0&modestbranding=1&rel=0&iv_load_policy=3&disablekb=1&fs=0&enablejsapi=1&origin=${window.location.origin}`:G},E=()=>{var N;h.value=!h.value;const G=_.value;if(!(!G||!((N=s.value)!=null&&N.trailer_url)))try{const de=h.value?"mute":"unMute";G.contentWindow.postMessage(JSON.stringify({event:"command",func:de,args:[]}),"*"),console.log(` ${h.value?"Muted":"Unmuted"} video`)}catch(de){console.error(" Error toggling mute:",de)}},C=G=>G?G.map(N=>N.name).join(", "):"",$=G=>G?G.map(N=>N.name).join(", "):"",R=G=>G?G.startsWith("http")?G:`https://phimimg.com/${G}`:"",S=G=>{console.error("Image load error:",G.target.src),G.target.src="https://placehold.co/800x450/1a1a1a/fff?text=No+Image"},O=async()=>{var G,N,de,ue,re,P;if(!r.movieSlug){console.error("No movie slug provided");return}console.log(" Fetching movie details for:",r.movieSlug),u.value=!0;try{const F=await(await fetch(`https://phimapi.com/phim/${r.movieSlug}`)).json();console.log(" API Response:",F),console.log(" Response status:",F.status),console.log(" Response movie:",F.movie),F.status==="success"&&F.movie?(s.value=F.movie,o.value=((N=(G=F.episodes)==null?void 0:G[0])==null?void 0:N.server_data)||[],console.log(" Movie data loaded:",s.value.name),console.log(" Episodes:",o.value.length)):F.status===!0&&F.movie?(s.value=F.movie,o.value=((ue=(de=F.episodes)==null?void 0:de[0])==null?void 0:ue.server_data)||[],console.log(" Movie data loaded (alt):",s.value.name)):F.movie?(s.value=F.movie,o.value=((P=(re=F.episodes)==null?void 0:re[0])==null?void 0:P.server_data)||[],console.log(" Movie data loaded (no status):",s.value.name)):(console.error(" Invalid API response:",F),console.error(" Available keys:",Object.keys(F))),await Promise.all([m(),A()])}catch(ae){console.error(" Error fetching movie details:",ae)}finally{u.value=!1}},m=async()=>{var G,N,de;try{console.log(" Fetching similar movies...");const re=await(await fetch("https://phimapi.com/danh-sach/phim-moi-cap-nhat?page=1")).json();console.log(" Similar movies response:",re);let P=[];if((re.status==="success"||re.status===!0)&&re.items?P=re.items.sort(()=>.5-Math.random()).slice(0,12):(G=re.data)!=null&&G.items&&(P=re.data.items.sort(()=>.5-Math.random()).slice(0,12)),P.length===0){console.error(" No items found in response"),i.value=[];return}console.log(" Similar movies loaded:",P.length);const ae=await Promise.all(P.map(async F=>{try{const ze=await(await fetch(`https://phimapi.com/phim/${F.slug}`)).json();return ze.movie?{...F,content:ze.movie.content||F.content,description:ze.movie.description||F.description,thumb_url:ze.movie.thumb_url||F.thumb_url,poster_url:ze.movie.poster_url||F.poster_url}:F}catch{return console.log(" Could not fetch details for:",F.slug),F}}));i.value=ae,console.log(" Similar movies with details loaded:",i.value.length),console.log(" First movie thumb_url:",(N=ae[0])==null?void 0:N.thumb_url),console.log(" First movie poster_url:",(de=ae[0])==null?void 0:de.poster_url)}catch(ue){console.error(" Error fetching similar movies:",ue),i.value=[]}},A=async()=>{if(r.movieSlug)try{const G=await me.get(`${f}/comments.php`,{params:{type:"movie",movie_slug:r.movieSlug,limit:50}});G.data.success&&(a.value=G.data.comments||[],console.log(" Comments loaded:",a.value.length))}catch(G){console.error(" Error fetching comments:",G),a.value=[]}},Q=G=>{const N=new Date(G),ue=Math.floor((new Date-N)/1e3);return ue<60?"Va xong":ue<3600?`${Math.floor(ue/60)} pht trc`:ue<86400?`${Math.floor(ue/3600)} gi trc`:ue<604800?`${Math.floor(ue/86400)} ngy trc`:N.toLocaleDateString("vi-VN")},K=G=>{G!=null&&G.slug&&(console.log(" Opening similar movie:",G.name),n("close"),setTimeout(()=>{n("open-movie",G.slug)},100))},ie=(G=null)=>{var de;if(!((de=s.value)!=null&&de.slug))return;let N="full";if(G){const ue=G.match(/\d+/);N=ue?ue[0]:G}else if(o.value.length>0){const ue=o.value[0].name,re=ue.match(/\d+/);N=re?re[0]:ue}n("close"),Xe(async()=>{const{useRouter:ue}=await Promise.resolve().then(()=>y1);return{useRouter:ue}},void 0,import.meta.url).then(({useRouter:ue})=>{ue().push(`/film/${s.value.slug}/tap/${encodeURIComponent(N)}`)})},we=()=>{ie()},De=(G,N)=>{ie(G.name)};return _r(()=>r.isOpen,G=>{G?(console.log(" Modal opened with slug:",r.movieSlug),r.movieSlug?O():console.error(" No movie slug provided!"),document.body.style.overflow="hidden"):(document.body.style.overflow="",s.value=null,o.value=[],i.value=[],a.value=[],l.value=!1,c.value=!1,h.value=!0)},{immediate:!0}),(G,N)=>(y(),Ie(gs,{to:"body"},[V(lt,{name:"modal"},{default:fe(()=>{var de,ue,re,P,ae,F,ye,ze,Ue,M,te,Z,se,ne,b,w,I,D,H,U,ee,X,J,W;return[t.isOpen?(y(),x("div",{key:0,class:"fixed inset-0 z-[100] flex items-start justify-center overflow-y-auto bg-black/95 pt-8 pb-8 px-4",onClick:Rt(g,["self"])},[d("div",pA,[d("button",{onClick:g,class:"absolute top-4 right-4 z-50 w-10 h-10 bg-[#181818] hover:bg-yellow-400 rounded-full flex items-center justify-center transition-all duration-300 hover:scale-110 group"},N[2]||(N[2]=[d("svg",{class:"w-6 h-6 text-white group-hover:text-black transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])),u.value?(y(),x("div",gA,N[3]||(N[3]=[d("div",{class:"text-center"},[d("svg",{class:"animate-spin h-12 w-12 text-yellow-400 mx-auto mb-4",fill:"none",viewBox:"0 0 24 24"},[d("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),d("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]),d("p",{class:"text-white"},"ang ti thng tin phim...")],-1)]))):(y(),x("div",mA,[(de=s.value)!=null&&de.trailer_url?(y(),x("iframe",{ref_key:"youtubePlayer",ref:_,key:T(s.value.trailer_url),src:k(s.value.trailer_url),class:"w-full h-full",frameborder:"0",allow:"autoplay; encrypted-media",allowfullscreen:""},null,8,vA)):(ue=s.value)!=null&&ue.thumb_url?(y(),x("img",{key:1,src:R((re=s.value)==null?void 0:re.thumb_url),class:"w-full h-full object-cover",alt:"Movie banner",onError:S},null,40,yA)):(P=s.value)!=null&&P.poster_url?(y(),x("img",{key:2,src:R((ae=s.value)==null?void 0:ae.poster_url),class:"w-full h-full object-cover",alt:"Movie poster",onError:S},null,40,bA)):(y(),x("div",wA,N[4]||(N[4]=[d("p",{class:"text-gray-400"},"Khng c nh",-1)]))),N[10]||(N[10]=d("div",{class:"absolute inset-0 bg-gradient-to-t from-[#181818] via-transparent to-transparent"},null,-1)),d("div",_A,[d("h2",xA,j(((F=s.value)==null?void 0:F.name)||"ang ti..."),1),d("div",EA,[d("button",{onClick:we,class:"px-6 py-2 bg-white text-black font-bold rounded flex items-center gap-2 hover:bg-yellow-400 transition-colors"},N[5]||(N[5]=[d("svg",{class:"w-7 h-7",fill:"currentColor",viewBox:"0 0 24 24"},[d("path",{d:"M8 5v14l11-7z","stroke-linejoin":"round","stroke-linecap":"round"})],-1),le(" Pht ")])),N[8]||(N[8]=d("button",{class:"w-10 h-10 bg-[#2a2a2a] hover:bg-yellow-400 hover:border-yellow-400 rounded-full flex items-center justify-center transition-colors border-2 border-gray-500 group"},[d("svg",{class:"w-5 h-5 text-white group-hover:text-black transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})])],-1)),N[9]||(N[9]=d("button",{class:"w-10 h-10 bg-[#2a2a2a] hover:bg-yellow-400 hover:border-yellow-400 rounded-full flex items-center justify-center transition-colors border-2 border-gray-500 group"},[d("svg",{class:"w-5 h-5 text-white group-hover:text-black transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M14 10h4.764a2 2 0 011.789 2.894l-3.5 7A2 2 0 0115.263 21h-4.017c-.163 0-.326-.02-.485-.06L7 20m7-10V5a2 2 0 00-2-2h-.095c-.5 0-.905.405-.905.905 0 .714-.211 1.412-.608 2.006L7 11v9m7-10h-2M7 20H5a2 2 0 01-2-2v-6a2 2 0 012-2h2.5"})])],-1)),d("button",{onClick:E,class:"ml-auto w-10 h-10 bg-[#2a2a2a] hover:bg-yellow-400 hover:border-yellow-400 rounded-full flex items-center justify-center transition-colors border-2 border-gray-500 group"},[h.value?(y(),x("svg",kA,N[6]||(N[6]=[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z","clip-rule":"evenodd"},null,-1),d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2"},null,-1)]))):(y(),x("svg",SA,N[7]||(N[7]=[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z"},null,-1)])))])])])])),d("div",TA,[d("div",CA,[d("div",AA,[d("div",IA,[d("span",RA,j((ye=s.value)==null?void 0:ye.year),1),d("span",OA,j(((ze=s.value)==null?void 0:ze.episode_current)||"Full"),1),d("span",PA,j(((Ue=s.value)==null?void 0:Ue.quality)||"HD"),1)]),d("div",null,[d("p",{class:Te(["text-white text-sm leading-relaxed",{"line-clamp-3":!c.value}])},j(((M=s.value)==null?void 0:M.content)||((te=s.value)==null?void 0:te.description)),3),((ne=((Z=s.value)==null?void 0:Z.content)||((se=s.value)==null?void 0:se.description))==null?void 0:ne.length)>200?(y(),x("button",{key:0,onClick:N[0]||(N[0]=Y=>c.value=!c.value),class:"text-gray-400 hover:text-white text-xs mt-2 flex items-center gap-1 transition-colors"},[d("span",null,j(c.value?"Thu gn":"Xem thm"),1),(y(),x("svg",{class:Te(["w-4 h-4 transition-transform duration-300",{"rotate-180":c.value}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},N[11]||(N[11]=[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))])):z("",!0)])]),d("div",$A,[(b=s.value)!=null&&b.actor&&s.value.actor.length?(y(),x("div",NA,[N[12]||(N[12]=d("span",{class:"text-gray-400"},"Din vin: ",-1)),d("span",LA,j(s.value.actor.slice(0,3).join(", ")),1)])):z("",!0),(w=s.value)!=null&&w.category?(y(),x("div",MA,[N[13]||(N[13]=d("span",{class:"text-gray-400"},"Th loi: ",-1)),d("span",jA,j(C(s.value.category)),1)])):z("",!0),(I=s.value)!=null&&I.country?(y(),x("div",DA,[N[14]||(N[14]=d("span",{class:"text-gray-400"},"Quc gia: ",-1)),d("span",UA,j($(s.value.country)),1)])):z("",!0),(D=s.value)!=null&&D.director&&s.value.director.length?(y(),x("div",BA,[N[15]||(N[15]=d("span",{class:"text-gray-400"},"o din: ",-1)),d("span",FA,j(s.value.director.join(", ")),1)])):z("",!0)])]),o.value&&o.value.length>0?(y(),x("div",HA,[d("div",VA,[N[16]||(N[16]=d("h3",{class:"text-xl font-bold text-white"},"Tp",-1)),d("span",qA,j((H=s.value)==null?void 0:H.name),1)]),d("div",zA,[(y(!0),x(ve,null,$e(o.value,(Y,B)=>{var oe,pe,Se,Oe,Re;return y(),x("div",{key:B,onClick:Ze=>De(Y,B),class:"flex items-start gap-4 p-4 bg-[#2a2a2a] hover:bg-[#3a3a3a] rounded cursor-pointer transition-all group border-l-4 border-transparent hover:border-yellow-500"},[d("span",KA,j(B+1),1),d("div",GA,[d("img",{src:R(((oe=s.value)==null?void 0:oe.thumb_url)||((pe=s.value)==null?void 0:pe.poster_url)),class:"w-full h-full object-cover",alt:`Episode ${B+1}`,onError:S},null,40,JA),N[17]||(N[17]=d("div",{class:"absolute inset-0 bg-black/50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity"},[d("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-8 w-8 text-white",viewBox:"0 0 20 20",fill:"currentColor"},[d("path",{d:"M6.3 2.841A1.5 1.5 0 004 4.11V15.89a1.5 1.5 0 002.3 1.269l9.344-5.89a1.5 1.5 0 000-2.538L6.3 2.84z"})])],-1))]),d("div",XA,[d("h4",YA,j(Y.name||`Tp ${B+1}`),1),d("p",QA,j(((Oe=(Se=s.value)==null?void 0:Se.content)==null?void 0:Oe.substring(0,150))||"Xem ngay  khm ph ni dung hp dn ca tp phim ny."),1)]),d("span",ZA,j(((Re=s.value)==null?void 0:Re.time)||"56 pht"),1)],8,WA)}),128))])])):z("",!0),i.value.length>0?(y(),x("div",eI,[N[21]||(N[21]=d("h3",{class:"text-xl font-bold text-white mb-4"},"Ni dung tng t",-1)),d("div",tI,[(y(!0),x(ve,null,$e(p.value,(Y,B)=>(y(),x("div",{key:Y._id||Y.slug||B,onClick:oe=>K(Y),class:"bg-[#2a2a2a] rounded-lg overflow-hidden hover:bg-[#3a3a3a] transition-all duration-300 cursor-pointer group"},[d("div",nI,[d("img",{src:R(Y.thumb_url),alt:Y.name,class:"w-full h-full object-cover object-center",style:{"object-position":"center 20%"},onError:S},null,40,sI),Y.episode_current?(y(),x("div",oI,[d("span",iI,j(Y.episode_current),1)])):z("",!0),N[18]||(N[18]=d("div",{class:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center"},[d("div",{class:"w-12 h-12 bg-white/90 rounded-full flex items-center justify-center"},[d("svg",{class:"w-6 h-6 text-black ml-1",fill:"currentColor",viewBox:"0 0 20 20"},[d("path",{d:"M6.3 2.841A1.5 1.5 0 004 4.11V15.89a1.5 1.5 0 002.3 1.269l9.344-5.89a1.5 1.5 0 000-2.538L6.3 2.84z"})])])],-1))]),d("div",aI,[d("div",lI,[d("div",cI,[Y.quality?(y(),x("span",uI,j(Y.quality),1)):(y(),x("span",dI,"HD")),Y.lang?(y(),x("span",hI,j(Y.lang),1)):(y(),x("span",fI,"Vietsub")),Y.year?(y(),x("span",pI,j(Y.year),1)):z("",!0),Y.type==="series"?(y(),x("span",gI,"Phim b")):Y.type==="single"?(y(),x("span",mI,"Phim l")):z("",!0)]),d("button",{onClick:N[1]||(N[1]=Rt(()=>{},["stop"])),class:"w-7 h-7 border-2 border-gray-500 hover:border-yellow-400 hover:bg-yellow-400 rounded-full flex items-center justify-center transition-colors flex-shrink-0 ml-2 group"},N[19]||(N[19]=[d("svg",{class:"w-4 h-4 text-gray-400 group-hover:text-black transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)]))]),d("p",vI,j(Y.content||Y.description||"Mt b phim hp dn ang ch bn khm ph. Hy xem ngay  bit thm chi tit v ct truyn v dn din vin."),1),d("div",yI,[Y.origin_name?(y(),x("span",bI,j(Y.origin_name),1)):z("",!0)])])],8,rI))),128))]),i.value.length>6?(y(),x("button",{key:0,onClick:v,class:"mt-6 mx-auto w-12 h-12 border-2 border-gray-500 hover:border-yellow-400 hover:bg-yellow-400 rounded-full flex items-center justify-center transition-all duration-300 hover:scale-110 group"},[(y(),x("svg",{class:Te(["w-6 h-6 text-gray-400 group-hover:text-black transition-all duration-300",{"rotate-180":l.value}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},N[20]||(N[20]=[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))])):z("",!0)])):z("",!0),d("div",wI,[N[23]||(N[23]=d("h3",{class:"text-lg font-bold text-white mb-4"},"Bnh lun",-1)),V(Fg,{"movie-slug":r.movieSlug,onCommentAdded:A},null,8,["movie-slug"]),a.value.length>0?(y(),x("div",_I,[(y(!0),x(ve,null,$e(a.value,Y=>(y(),x("div",{key:Y.id,class:"flex gap-3 p-4 bg-[#2a2a2a] rounded-lg"},[d("img",{src:Y.avatar||`https://ui-avatars.com/api/?name=${encodeURIComponent(Y.full_name||"User")}&background=f59e0b&color=000`,alt:Y.full_name,class:"w-10 h-10 rounded-full flex-shrink-0"},null,8,xI),d("div",EI,[d("div",kI,[d("span",SI,j(Y.full_name),1),d("span",TI,j(Q(Y.created_at)),1)]),d("p",CI,j(Y.content),1)])]))),128))])):(y(),x("div",AI,N[22]||(N[22]=[d("p",{class:"text-gray-400 text-sm"},"Cha c bnh lun no. Hy l ngi u tin!",-1)])))]),d("div",II,[d("h3",RI,"Gii thiu v "+j((U=s.value)==null?void 0:U.name),1),d("div",OI,[(ee=s.value)!=null&&ee.actor&&s.value.actor.length?(y(),x("div",PI,[N[24]||(N[24]=d("span",{class:"text-gray-500"},"Din vin: ",-1)),d("span",$I,j(s.value.actor.join(", ")),1)])):z("",!0),(X=s.value)!=null&&X.category?(y(),x("div",NI,[N[25]||(N[25]=d("span",{class:"text-gray-500"},"Th loi: ",-1)),d("span",LI,j(C(s.value.category)),1)])):z("",!0),(J=s.value)!=null&&J.country?(y(),x("div",MI,[N[26]||(N[26]=d("span",{class:"text-gray-500"},"Series ny: ",-1)),d("span",jI,j($(s.value.country)),1)])):z("",!0),N[28]||(N[28]=d("div",null,[d("span",{class:"text-gray-500"},"Xp hng  tui: "),d("span",{class:"px-2 py-0.5 border border-gray-500 text-white text-xs rounded"},"T18"),d("span",{class:"text-gray-400"}," khoa thn, t hi, bo hnh tnh dc, bo lc")],-1)),(W=s.value)!=null&&W.director&&s.value.director.length?(y(),x("div",DI,[N[27]||(N[27]=d("span",{class:"text-gray-500"},"o din: ",-1)),d("span",UI,j(s.value.director.join(", ")),1)])):z("",!0)])])])])])):z("",!0)]}),_:1})]))}},Hg=pt(BI,[["__scopeId","data-v-2485324c"]]),FI={class:"flex items-center gap-3 mb-6"},HI={class:"text-2xl md:text-3xl font-bold bg-gradient-to-r from-white to-gray-400 bg-clip-text text-transparent"},VI={class:"relative group/row"},qI=["onMouseenter","onClick"],zI={class:"relative rounded-xl overflow-hidden shadow-lg transition-all duration-300 group-hover/card:scale-105 group-hover/card:shadow-2xl group-hover/card:shadow-yellow-400/20"},WI=["src","alt"],KI={class:"absolute bottom-0 left-0 right-0 p-4 transform translate-y-2 group-hover/card:translate-y-0 transition-transform duration-300"},GI={class:"text-sm md:text-base font-bold mb-2 line-clamp-2 text-white"},JI={class:"flex items-center gap-2 text-xs mb-2 opacity-0 group-hover/card:opacity-100 transition-opacity duration-300"},XI={key:0,class:"px-2 py-1 bg-gray-700/80 backdrop-blur-sm rounded text-white font-medium"},YI={key:1,class:"px-2 py-1 bg-yellow-500 rounded text-black font-bold"},QI={class:"flex gap-1 flex-wrap opacity-0 group-hover/card:opacity-100 transition-opacity duration-300 delay-100"},ZI={class:"bg-gray-900 rounded-lg overflow-hidden shadow-2xl shadow-yellow-400/20 border border-yellow-400/30 transform transition-all duration-300 hover:scale-105 hover:shadow-yellow-400/40"},eR={class:"relative h-[160px] bg-black group/image"},tR=["src","alt"],rR={key:0,class:"absolute top-2 right-2 bg-gradient-to-r from-yellow-400 to-yellow-500 text-black px-2 py-1 rounded text-[10px] font-bold shadow-lg"},nR={class:"p-3"},sR={class:"text-base font-bold text-white mb-0.5 line-clamp-1"},oR={class:"text-xs text-yellow-400 mb-2 line-clamp-1"},iR={class:"flex gap-1.5 mb-2"},aR={class:"flex gap-1.5 mb-2 flex-wrap"},lR={key:0,class:"bg-yellow-500 text-black px-1.5 py-0.5 rounded text-[10px] font-bold uppercase"},cR={key:1,class:"bg-blue-600 text-white px-1.5 py-0.5 rounded text-[10px] font-bold uppercase"},uR={key:2,class:"bg-blue-600 text-white px-1.5 py-0.5 rounded text-[10px] font-bold uppercase"},dR={key:3,class:"bg-blue-600 text-white px-1.5 py-0.5 rounded text-[10px] font-bold uppercase"},hR={key:4,class:"bg-gray-700 text-white px-1.5 py-0.5 rounded text-[10px] font-bold"},fR={key:5,class:"bg-gray-700 text-white px-1.5 py-0.5 rounded text-[10px] font-bold"},pR={key:6,class:"bg-gray-700 text-white px-1.5 py-0.5 rounded text-[10px] font-bold"},gR={key:7,class:"bg-purple-600 text-white px-1.5 py-0.5 rounded text-[10px] font-bold capitalize"},mR={key:8,class:"bg-green-600 text-white px-1.5 py-0.5 rounded text-[10px] font-bold"},vR={key:0,class:"text-[10px] text-gray-400 mb-1.5"},yR={key:0},bR={class:"text-[11px] text-gray-300 line-clamp-2 leading-relaxed"},wR={__name:"MovieRow",props:{title:{type:String,required:!0},movies:{type:Array,default:()=>[]}},setup(t){const e=Zr(),r=q(null),n=q(null),s=q(!1),o=q(!1),i=q(null),a=q({}),l=q(!1),c=q(!1),u=q("");let h=null,f=null;const p=m=>{console.log(" Opening movie detail for:",m),m!=null&&m.slug?(console.log(" Movie slug:",m.slug),u.value=m.slug,c.value=!0,S()):console.error(" No slug found for movie:",m)},g=m=>{console.log(" Opening new movie from modal:",m),u.value=m,c.value=!0},v=m=>{if(m.poster_url){const A=m.poster_url.startsWith("http")?m.poster_url:`https://phimimg.com/${m.poster_url}`;return console.log(" Using poster_url:",A),A}if(m.thumb_url){const A=m.thumb_url.startsWith("http")?m.thumb_url:`https://phimimg.com/${m.thumb_url}`;return console.log(" Using thumb_url:",A),A}return m.backdrop_path?(console.log(" Using backdrop_path:",m.backdrop_path),m.backdrop_path):(console.log(" No image found, using placeholder"),"https://placehold.co/250x350/1a1a1a/fff?text=No+Image")},_=m=>{if(m.thumb_url){const A=m.thumb_url.startsWith("http")?m.thumb_url:`https://phimimg.com/${m.thumb_url}`;return console.log(" Preview using thumb_url:",A),A}return m.poster_url?m.poster_url.startsWith("http")?m.poster_url:`https://phimimg.com/${m.poster_url}`:m.backdrop_path?m.backdrop_path:"https://placehold.co/320x160/1a1a1a/fff?text=No+Image"},T=m=>m.category&&Array.isArray(m.category)?m.category.map(A=>typeof A=="object"?A.name:A):m.genres&&Array.isArray(m.genres)?m.genres.map(A=>typeof A=="object"?A.name:A):[],k=m=>{m.slug&&e.push(`/film/${m.slug}`)},E=()=>{r.value&&r.value.scrollBy({left:-800,behavior:"smooth"})},C=()=>{r.value&&r.value.scrollBy({left:800,behavior:"smooth"})},$=async(m,A)=>{console.log(" Mouse enter:",m.name),clearTimeout(h);const K=A.currentTarget.getBoundingClientRect();h=setTimeout(async()=>{var De,G;console.log(" Showing preview for:",m.name);let ie=K.top-60,we=K.left-30;if(we<20&&(we=20),we+320>window.innerWidth&&(we=window.innerWidth-340),ie<20&&(ie=20),ie+400>window.innerHeight&&(ie=window.innerHeight-420),a.value={top:`${ie}px`,left:`${we}px`},i.value=m,o.value=!0,m.slug&&(!m.quality||!m.lang||!m.content))try{const N=(await Xe(async()=>{const{default:P}=await Promise.resolve().then(()=>Hk);return{default:P}},void 0,import.meta.url)).default,de=new AbortController,ue=setTimeout(()=>de.abort(),3e3),re=await N.get(`https://phimapi.com/phim/${m.slug}`,{signal:de.signal});if(clearTimeout(ue),(De=re.data)!=null&&De.movie){const P=re.data.movie,ae={...m,quality:P.quality||m.quality,lang:P.lang||m.lang,content:P.content||m.content,time:P.time||m.time,episode_current:P.episode_current||m.episode_current,type:P.type||m.type,country:P.country||m.country,category:P.category||m.category,chieurap:P.chieurap!==void 0?P.chieurap:m.chieurap,sub_docquyen:P.sub_docquyen!==void 0?P.sub_docquyen:m.sub_docquyen};((G=i.value)==null?void 0:G.slug)===m.slug&&(i.value=ae),Object.assign(m,ae),console.log(" Fetched movie details:",ae.name)}}catch(N){console.log(" Could not fetch movie details:",N.message)}},300)},R=()=>{clearTimeout(h),setTimeout(()=>{l.value||S()},100)},S=()=>{l.value=!1,o.value=!1,i.value=null},O=m=>{console.error(" Image failed to load:",m.target.src),m.target.src="https://placehold.co/320x160/1a1a1a/fff?text=Image+Not+Found"};return Et(()=>{f=new IntersectionObserver(m=>{m.forEach(A=>{A.isIntersecting&&(s.value=!0,f.unobserve(A.target))})},{threshold:.1,rootMargin:"50px"}),n.value&&f.observe(n.value)}),Jt(()=>{f&&n.value&&f.unobserve(n.value)}),(m,A)=>(y(),x(ve,null,[d("div",{ref_key:"movieRowRef",ref:n,class:Te(["movie-row mb-16 px-4 md:px-12 opacity-0 translate-y-10 transition-all duration-700",{"opacity-100 translate-y-0":s.value}])},[d("div",FI,[A[4]||(A[4]=d("div",{class:"w-1 h-8 bg-yellow-400 rounded-full"},null,-1)),d("h2",HI,j(t.title),1)]),d("div",VI,[d("button",{onClick:E,class:"absolute left-2 top-1/2 -translate-y-1/2 z-10 w-14 h-14 bg-gradient-to-r from-yellow-400 to-yellow-500 hover:from-yellow-500 hover:to-yellow-600 rounded-full flex items-center justify-center transition-all duration-300 opacity-0 group-hover/row:opacity-100 shadow-2xl shadow-yellow-400/50 hover:scale-110 hover:shadow-yellow-400/70 group/arrow"},A[5]||(A[5]=[d("svg",{class:"w-7 h-7 text-black group-hover/arrow:-translate-x-0.5 transition-transform duration-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","stroke-width":"3"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 19l-7-7 7-7"})],-1)])),d("button",{onClick:C,class:"absolute right-2 top-1/2 -translate-y-1/2 z-10 w-14 h-14 bg-gradient-to-r from-yellow-400 to-yellow-500 hover:from-yellow-500 hover:to-yellow-600 rounded-full flex items-center justify-center transition-all duration-300 opacity-0 group-hover/row:opacity-100 shadow-2xl shadow-yellow-400/50 hover:scale-110 hover:shadow-yellow-400/70 group/arrow"},A[6]||(A[6]=[d("svg",{class:"w-7 h-7 text-black group-hover/arrow:translate-x-0.5 transition-transform duration-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","stroke-width":"3"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 5l7 7-7 7"})],-1)])),d("div",{ref_key:"scrollContainer",ref:r,class:"flex gap-4 overflow-x-auto scrollbar-hide pb-4 select-none scroll-smooth"},[(y(!0),x(ve,null,$e(t.movies,(Q,K)=>{var ie;return y(),x("div",{key:Q._id||Q.slug,class:Te(["movie-card flex-none w-[160px] md:w-[220px] lg:w-[260px] cursor-pointer group/card opacity-0 translate-x-8 transition-all duration-500",{"opacity-100 translate-x-0":s.value}]),onMouseenter:we=>$(Q,we),onMouseleave:R,onClick:we=>k(Q),style:Kr({transitionDelay:s.value?`${K*50}ms`:"0ms"})},[d("div",zI,[d("img",{src:v(Q),alt:Q.title||Q.name,class:"w-full h-[240px] md:h-[330px] lg:h-[390px] object-cover transition-transform duration-500 group-hover/card:scale-110",onError:O},null,40,WI),A[7]||(A[7]=d("div",{class:"absolute inset-0 bg-gradient-to-t from-black via-black/50 to-transparent opacity-60 group-hover/card:opacity-90 transition-opacity duration-300"},null,-1)),d("div",KI,[d("h3",GI,j(Q.title||Q.name),1),d("div",JI,[Q.year?(y(),x("span",XI,j(Q.year),1)):z("",!0),Q.quality?(y(),x("span",YI,j(Q.quality),1)):z("",!0)]),d("div",QI,[(y(!0),x(ve,null,$e((ie=Q.category||Q.genres)==null?void 0:ie.slice(0,2),we=>(y(),x("span",{key:we.slug||we,class:"text-xs text-gray-300 bg-gray-800/60 backdrop-blur-sm px-2 py-0.5 rounded"},j(we.name||we),1))),128))])]),A[8]||(A[8]=d("div",{class:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 opacity-0 group-hover/card:opacity-100 transition-all duration-300 scale-50 group-hover/card:scale-100"},[d("div",{class:"w-16 h-16 bg-yellow-400 rounded-full flex items-center justify-center shadow-xl"},[d("svg",{class:"w-8 h-8 text-black ml-1",fill:"currentColor",viewBox:"0 0 20 20"},[d("path",{d:"M6.3 2.841A1.5 1.5 0 004 4.11V15.89a1.5 1.5 0 002.3 1.269l9.344-5.89a1.5 1.5 0 000-2.538L6.3 2.84z"})])])],-1))])],46,qI)}),128))],512)])],2),V(Hg,{"is-open":c.value,"movie-slug":u.value,onClose:A[0]||(A[0]=Q=>c.value=!1),onOpenMovie:g},null,8,["is-open","movie-slug"]),(y(),Ie(gs,{to:"body"},[o.value&&i.value?(y(),x("div",{key:0,style:Kr({...a.value,zIndex:99999}),class:"fixed w-[320px] animate-scale-in-smooth pointer-events-auto",onMouseenter:A[3]||(A[3]=Q=>l.value=!0),onMouseleave:S},[d("div",ZI,[d("div",eR,[d("img",{src:_(i.value),alt:i.value.name,class:"w-full h-full object-cover",onError:O},null,40,tR),A[9]||(A[9]=d("div",{class:"absolute inset-0 bg-gradient-to-t from-gray-900 via-transparent to-transparent"},null,-1)),A[10]||(A[10]=d("div",{class:"absolute inset-0 flex items-center justify-center bg-black/40 opacity-0 group-hover/image:opacity-100 transition-all duration-300"},[d("div",{class:"w-14 h-14 bg-yellow-400 rounded-full flex items-center justify-center shadow-2xl transform transition-all duration-300 group-hover/image:scale-110 animate-pulse-slow"},[d("svg",{class:"w-7 h-7 text-black ml-0.5",fill:"currentColor",viewBox:"0 0 20 20"},[d("path",{d:"M6.3 2.841A1.5 1.5 0 004 4.11V15.89a1.5 1.5 0 002.3 1.269l9.344-5.89a1.5 1.5 0 000-2.538L6.3 2.84z"})])])],-1)),i.value.quality?(y(),x("div",rR,j(i.value.quality),1)):z("",!0)]),d("div",nR,[d("h3",sR,j(i.value.name),1),d("p",oR,j(i.value.origin_name),1),d("div",iR,[d("button",{onClick:A[1]||(A[1]=Q=>k(i.value)),class:"flex-1 flex items-center justify-center gap-1.5 bg-yellow-400 text-black px-3 py-1.5 rounded-lg font-bold text-xs hover:bg-yellow-500 hover:scale-105 transition-all duration-300 shadow-lg hover:shadow-yellow-400/50"},A[11]||(A[11]=[d("svg",{class:"w-3.5 h-3.5",fill:"currentColor",viewBox:"0 0 20 20"},[d("path",{d:"M6.3 2.841A1.5 1.5 0 004 4.11V15.89a1.5 1.5 0 002.3 1.269l9.344-5.89a1.5 1.5 0 000-2.538L6.3 2.84z"})],-1),le(" Xem ngay ")])),A[13]||(A[13]=d("button",{class:"w-8 h-8 bg-gray-800 hover:bg-gray-700 hover:scale-110 rounded-lg flex items-center justify-center transition-all duration-300 group/btn"},[d("svg",{class:"w-3.5 h-3.5 text-white group-hover/btn:text-red-400 transition-colors",fill:"currentColor",viewBox:"0 0 20 20"},[d("path",{"fill-rule":"evenodd",d:"M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z","clip-rule":"evenodd"})])],-1)),d("button",{onClick:A[2]||(A[2]=Rt(Q=>p(i.value),["stop"])),class:"w-8 h-8 bg-gray-800 hover:bg-gray-700 hover:scale-110 rounded-lg flex items-center justify-center transition-all duration-300 group/btn",title:"Cc tp & Thng tin"},A[12]||(A[12]=[d("svg",{class:"w-3.5 h-3.5 text-white group-hover/btn:text-yellow-400 transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1)]))]),d("div",aR,[i.value.quality?(y(),x("span",lR,j(i.value.quality),1)):z("",!0),i.value.lang?(y(),x("span",cR,j(i.value.lang),1)):i.value.sub_docquyen?(y(),x("span",uR," Vietsub ")):i.value.chieurap===!1?(y(),x("span",dR," Vietsub ")):z("",!0),i.value.year?(y(),x("span",hR,j(i.value.year),1)):z("",!0),i.value.time?(y(),x("span",fR,j(i.value.time),1)):i.value.episode_current?(y(),x("span",pR,j(i.value.episode_current),1)):z("",!0),i.value.type?(y(),x("span",gR,j(i.value.type==="series"?"Phim b":i.value.type==="single"?"Phim l":i.value.type==="hoathinh"?"Hot hnh":i.value.type),1)):z("",!0),i.value.country&&i.value.country.length>0?(y(),x("span",mR,j(Array.isArray(i.value.country)?i.value.country[0].name||i.value.country[0]:i.value.country),1)):z("",!0)]),T(i.value).length?(y(),x("div",vR,[(y(!0),x(ve,null,$e(T(i.value).slice(0,3),(Q,K)=>(y(),x("span",{key:K},[le(j(Q),1),K<Math.min(2,T(i.value).length-1)?(y(),x("span",yR,"  ")):z("",!0)]))),128))])):z("",!0),d("p",bR,j(i.value.content||"ang cp nht m t..."),1)])])],36)):z("",!0)]))],64))}},Hn=pt(wR,[["__scopeId","data-v-f5b12abc"]]),_R={class:"community-section bg-black py-12 px-4 md:px-12"},xR={class:"max-w-[1920px] mx-auto"},ER={class:"mb-10"},kR={class:"mb-8"},SR={class:"relative group/scroll"},TR={class:"relative z-10"},CR={class:"flex gap-3 mb-3 justify-between"},AR={class:"relative flex-shrink-0"},IR=["src","alt"],RR={key:0,class:"absolute -bottom-0.5 left-1/2 -translate-x-1/2 bg-yellow-400 text-black text-[10px] font-bold px-1.5 py-0.5 rounded-full shadow-lg"},OR={class:"flex-shrink-0"},PR=["src","alt"],$R={class:"mb-2"},NR={class:"flex items-center gap-1.5"},LR={class:"text-white font-bold text-sm drop-shadow-lg"},MR={key:0,class:"text-yellow-400 text-xs"},jR={class:"text-gray-200 text-xs leading-relaxed mb-3 line-clamp-2 drop-shadow-md"},DR={class:"flex items-center gap-4 text-gray-300"},UR={class:"flex items-center gap-1.5 hover:text-green-400 transition-colors"},BR={class:"text-xs font-medium"},FR={class:"flex items-center gap-1.5 hover:text-red-400 transition-colors"},HR={class:"text-xs font-medium"},VR={class:"flex items-center gap-1.5 hover:text-blue-400 transition-colors"},qR={class:"text-xs font-medium"},zR={class:"grid grid-cols-1 lg:grid-cols-3 gap-4"},WR={class:"bg-gray-900/30 rounded-lg p-4 border border-gray-800"},KR={class:"space-y-2 mb-3"},GR={key:0,class:"text-center py-4 text-gray-500 text-xs"},JR={class:"text-yellow-400 font-bold text-xs w-5"},XR=["src"],YR={class:"flex-1 min-w-0"},QR={class:"text-white text-xs font-medium truncate"},ZR={class:"text-gray-400 text-[10px]"},eO={class:"bg-gray-900/30 rounded-lg p-4 border border-gray-800"},tO={class:"space-y-2 mb-3"},rO={key:0,class:"text-center py-4 text-gray-500 text-xs"},nO={class:"text-yellow-400 font-bold text-xs w-5"},sO=["src"],oO={class:"flex-1 min-w-0"},iO={class:"text-white text-xs font-medium truncate"},aO={class:"text-gray-400 text-[10px]"},lO={class:"bg-gray-900/30 rounded-lg p-4 border border-gray-800"},cO={class:"space-y-3 max-h-[400px] overflow-hidden"},uO={class:"flex items-start gap-2 mb-1.5"},dO=["src"],hO={class:"flex-1 min-w-0"},fO={class:"flex items-center gap-1.5"},pO={class:"text-white text-xs font-medium"},gO={key:0,class:"text-green-400 text-[10px] animate-pulse"},mO={class:"text-gray-400 text-[10px]"},vO={class:"text-gray-300 text-[11px] line-clamp-2 leading-relaxed"},yO={class:"flex items-center justify-between p-4 border-b border-gray-800"},bO={class:"p-4 overflow-y-auto max-h-[calc(80vh-80px)] scrollbar-hide"},wO={class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"},_O={class:"relative aspect-[2/3] rounded-lg overflow-hidden mb-2"},xO=["src","alt"],EO={class:"absolute top-2 left-2 bg-yellow-400 text-black text-xs font-bold px-2 py-1 rounded-full"},kO={class:"text-white text-sm font-medium line-clamp-2"},SO={class:"text-gray-400 text-xs"},TO={class:"flex items-center justify-between p-4 border-b border-gray-800"},CO={class:"p-4 overflow-y-auto max-h-[calc(80vh-80px)] scrollbar-hide"},AO={class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"},IO={class:"relative aspect-[2/3] rounded-lg overflow-hidden mb-2"},RO=["src","alt"],OO={class:"absolute top-2 left-2 bg-yellow-400 text-black text-xs font-bold px-2 py-1 rounded-full"},PO={class:"text-white text-sm font-medium line-clamp-2"},$O={class:"text-gray-400 text-xs"},NO={__name:"CommunitySection",setup(t){const e=la.BACKEND_URL,r=q(null),n=q([]),s=q([]),o=q([]),i=q([]),a=q([]),l=q(!1),c=q(!1),u=q([{id:1,name:"Hoang Gang",avatar:"https://ui-avatars.com/api/?name=Hoang&background=f59e0b&color=000",time:"va xong",text:"lun l b phim tuyt vi nht m ti tng xem"},{id:2,name:"Margaret Qualley",avatar:"https://ui-avatars.com/api/?name=Margaret&background=ef4444&color=fff",time:"2 pht trc",text:"Tuyt vi! Din xut qu nh"},{id:3,name:"Tsukii",avatar:"https://ui-avatars.com/api/?name=Tsukii&background=3b82f6&color=fff",time:"5 pht trc",text:"Cm n  chia s!"}]),h=[{name:"Minh Anh",text:"Phim hay qu! Ti  xem 3 ln ri "},{name:"Tun Kit",text:"CGI nh cao, xng ng 5 sao "},{name:"Linh Chi",text:"Cm ng qu, ti  khc khi xem "},{name:"Hong Long",text:"Din vin din xut rt t nhin "},{name:"Phng Anh",text:"Ct truyn hp dn t u n cui!"},{name:"c Anh",text:"Nhc phim hay lm, nghe mi khng chn "},{name:"Mai Ly",text:"Phim ny ng xem, recommend mi ngi!"},{name:"Quang Huy",text:"o din ti nng tht! Mi cnh u  ngha"},{name:"Tho Nguyn",text:"Tuyt vi! Khng th b l b phim ny"},{name:"Vn Ton",text:"Phim hay nhng hi di, nn chia lm 2 phn xem"},{name:"Bo Trm",text:"Cnh quay p mt, mu sc rc r "},{name:"Hi Nam",text:"Ni dung su sc, ng suy ngm "},{name:"Khnh Linh",text:"Phim ny lm ti nh v tui th..."},{name:"Duy Khnh",text:"Xem xong mun xem li ngay! "},{name:"Thu H",text:"Din vin ph cng din rt hay!"},{name:"Minh Tun",text:"Phim Vit ngy cng cht lng "},{name:"Ngc Anh",text:"Cm n  chia s phim hay! "},{name:"Trung Hiu",text:"Phim ny ng gi tng pht xem!"},{name:"Lan Hng",text:"Ti  gii thiu cho bn b xem ri "},{name:"Quc Bo",text:"Phim hay, nhng cn ph  tt hn"},{name:"Anh Tun",text:"Xem lc 2h sng vn khng bun ng! "},{name:"Hng Giang",text:"Phim ny viral trn TikTok ri "},{name:"Bo Ngc",text:"Mnh  khc ht c hp khn giy "},{name:"Thanh Tng",text:"Phim xut sc! Oscar phi trao gii cho phim ny"},{name:"Kim Ngn",text:"Nhc nn qu nh, ai bit tn bi khng?"},{name:"Vit Anh",text:"Phim ny phi xem  rp mi !"},{name:"Thy Linh",text:"Cnh cui lm ti sc nng "},{name:"ng Khoa",text:"Phim hay nht nm nay lun!"},{name:"Phng Tho",text:"Ti  mua v xem 2 ln ri "},{name:"Hu Ngha",text:"Din vin chnh qu p trai! "},{name:"Thanh H",text:"Phim ny ng  ch i!"},{name:"Minh Qun",text:"Xem xong mun i du lch ngay! "},{name:"T Anh",text:"Phim ny lm ti suy ngh nhiu v cuc sng"},{name:"Hoi Nam",text:"Cnh hnh ng mn nhn qu! "},{name:"Bch Ngc",text:"Ti  recommend cho c cng ty xem ri"},{name:"Quang Minh",text:"Phim ny xng ng trending #1! "},{name:"Hnh Nhn",text:"Xem i xem li vn thy hay!"},{name:"Tun V",text:"Phim ny phi vo top 10 nm!"},{name:"Ngc Trinh",text:"Cm xc ln xung nh tu ln! "},{name:"c Thnh",text:"Phim ny lm ti ci v khc!"},{name:"Mai Phng",text:"o din thin ti! Respect! "},{name:"Hng Nhung",text:"Phim ny s l huyn thoi!"},{name:"Trng i",text:"Xem xong ti  tr thnh fan cng!"},{name:"Yn Nhi",text:"Phim ny phi c phn 2 thi! "},{name:"Cng Phng",text:"Ti  xem trailer 10 ln ri!"},{name:"Tho My",text:"Phim ny ng  i c nm!"},{name:"Xun Trng",text:"Cnh chin u qu honh trng! "},{name:"Diu Hng",text:"Ti s mua a Bluray v su tm!"},{name:"Minh Hng",text:"Phim ny lm ti tin vo tnh yu! "},{name:"Tun Hng",text:"m thanh Dolby Atmos qu nh! "}],f=["f59e0b","ef4444","3b82f6","10b981","ec4899","8b5cf6","14b8a6","f97316"];let p=4,g=null;const v=()=>{var R;return(R=r.value)==null?void 0:R.scrollBy({left:-280,behavior:"smooth"})},_=()=>{var R;return(R=r.value)==null?void 0:R.scrollBy({left:280,behavior:"smooth"})};_r([l,c],([R,S])=>{R||S?document.body.style.overflow="hidden":document.body.style.overflow=""});const T=async()=>{var R,S,O;try{const[m,A,Q]=await Promise.all([me.get("https://phimapi.com/danh-sach/phim-moi-cap-nhat",{params:{page:1}}),me.get("https://phimapi.com/danh-sach/phim-moi-cap-nhat",{params:{page:2}}),me.get("https://phimapi.com/danh-sach/phim-moi-cap-nhat",{params:{page:3}})]),K=[...((R=m.data)==null?void 0:R.items)||[],...((S=A.data)==null?void 0:S.items)||[],...((O=Q.data)==null?void 0:O.items)||[]];if(console.log(" API Response - Total movies:",K.length),K.length>0){const ie=K,we=[{name:"N VL",avatar:"https://ui-avatars.com/api/?name=NVL&background=f59e0b&color=000",text:"Tp mt bc mnh nam chnh tht s, tr li cu hi m c ng ng...",likes:1,dislikes:0,replies:4},{name:"Khuong Nguyen",avatar:"https://ui-avatars.com/api/?name=Khuong&background=3b82f6&color=fff",text:"Ci b ny tht s l hay qu, mnh  xem 3 ln ri m vn thy hay!",likes:5,dislikes:0,replies:2},{name:"Doss Nguyen",avatar:"https://ui-avatars.com/api/?name=Doss&background=ef4444&color=fff",text:"Phim hay lm, din xut tuyt vi, cnh quay p mt!",likes:8,dislikes:1,replies:6},{name:"toni_nguyen",avatar:"https://ui-avatars.com/api/?name=Toni&background=10b981&color=fff",text:"Anime nh cao! Miku chan kawaii qu i mt!",likes:12,dislikes:0,replies:8},{name:"Mai Anh",avatar:"https://ui-avatars.com/api/?name=Mai&background=ec4899&color=fff",text:"Cm ng qu! Ti  khc khi xem phn cui...",likes:15,dislikes:0,replies:10},{name:"Hoang Tuan",avatar:"https://ui-avatars.com/api/?name=Hoang&background=8b5cf6&color=fff",text:"CGI nh cao, xng ng 5 sao! Recommend mi ngi xem",likes:20,dislikes:2,replies:12},{name:"Linh Chi",avatar:"https://ui-avatars.com/api/?name=Linh&background=14b8a6&color=fff",text:"Phim hay nhng hi di, nn chia lm 2 phn xem cho  mt",likes:7,dislikes:1,replies:5},{name:"Minh Khoa",avatar:"https://ui-avatars.com/api/?name=Minh&background=f97316&color=fff",text:"o din ti nng tht! Mi cnh quay u  ngha",likes:18,dislikes:0,replies:9}];n.value=ie.slice(0,8).map((ue,re)=>{const P=ue.poster_url||ue.thumb_url||"",ae=P.startsWith("http")?P:`https://phimimg.com/${P}`;return{id:re+1,...we[re],movieTitle:ue.name,moviePoster:ae}});const De=8,G=10;o.value=ie.slice(De,De+G).map(ue=>{const re=ue.poster_url||ue.thumb_url||"";return{title:ue.name,year:ue.year||2024,poster:re.startsWith("http")?re:`https://phimimg.com/${re}`}}),s.value=o.value.slice(0,5);const N=De+G,de=10;a.value=ie.slice(N,N+de).map(ue=>{const re=ue.poster_url||ue.thumb_url||"";return{title:ue.name,year:ue.year||2024,poster:re.startsWith("http")?re:`https://phimimg.com/${re}`}}),i.value=a.value.slice(0,5),console.log(" Total movies from API:",ie.length),console.log(" Trending Movies (display):",s.value.length,s.value),console.log(" Trending Movies (all):",o.value.length),console.log(" Favorite Movies (display):",i.value.length,i.value),console.log(" Favorite Movies (all):",a.value.length),console.log(" Top Comments:",n.value),console.log(" Trending:",s.value),console.log(" Favorites:",i.value)}}catch(m){console.log(" Could not load movies:",m.message)}},k=async()=>{var R;try{const S=await me.get(`${e}/community.php`);if(console.log(" Community data:",S.data),S.data.success){const O=S.data.data;(R=O.recent_comments)!=null&&R.length&&(u.value=O.recent_comments.map(m=>{let A=m.avatar;if(!A||A.includes("ui-avatars.com")){const Q=m.full_name||m.username||"User";A=`https://ui-avatars.com/api/?name=${encodeURIComponent(Q)}&background=f59e0b&color=000&size=128`}return{id:m.id,name:m.full_name||m.username,avatar:A,time:m.time_ago,text:m.content}}),console.log(" Updated recent comments:",u.value.length),u.value.forEach((m,A)=>{console.log(`Comment ${A+1}:`,{name:m.name,avatar:m.avatar,text:m.text.substring(0,30)})}))}}catch(S){console.log(" Could not load community data:",S.message)}},E=()=>{const R=h[Math.floor(Math.random()*h.length)],S=f[Math.floor(Math.random()*f.length)],O={id:p++,name:R.name,avatar:`https://ui-avatars.com/api/?name=${encodeURIComponent(R.name)}&background=${S}&color=fff`,time:"va xong",text:R.text};u.value.unshift(O),u.value.length>10&&u.value.pop(),u.value.forEach((m,A)=>{A===0?m.time="va xong":A===1?m.time="1 pht trc":A===2?m.time="2 pht trc":m.time=`${A+1} pht trc`})},C=()=>{const R=()=>{E();const S=Math.floor(Math.random()*2e3)+2e3;g=setTimeout(R,S)};g=setTimeout(R,2e3)},$=()=>{g&&(clearTimeout(g),g=null)};return Et(()=>{k(),T(),C()}),Jt(()=>{$()}),(R,S)=>(y(),x("div",_R,[d("div",xR,[d("div",ER,[V(Fg,{onCommentAdded:k})]),d("div",kR,[S[19]||(S[19]=d("div",{class:"flex items-center gap-2 mb-4"},[d("div",{class:"w-8 h-8 bg-yellow-400/10 rounded-lg flex items-center justify-center"},[d("span",{class:"text-lg"},"")]),d("h3",{class:"text-base font-bold text-white uppercase tracking-wide"},"TOP BNH LUN")],-1)),d("div",SR,[d("button",{onClick:v,class:"absolute left-1 top-1/2 -translate-y-1/2 z-10 w-8 h-8 bg-gray-900/90 hover:bg-yellow-400 rounded-full flex items-center justify-center transition-all opacity-0 group-hover/scroll:opacity-100"},S[13]||(S[13]=[d("svg",{class:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])),d("button",{onClick:_,class:"absolute right-1 top-1/2 -translate-y-1/2 z-10 w-8 h-8 bg-gray-900/90 hover:bg-yellow-400 rounded-full flex items-center justify-center transition-all opacity-0 group-hover/scroll:opacity-100"},S[14]||(S[14]=[d("svg",{class:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])),d("div",{ref_key:"topScrollRef",ref:r,class:"flex gap-4 overflow-x-auto scrollbar-hide py-4 px-2 scroll-smooth"},[(y(!0),x(ve,null,$e(n.value,(O,m)=>(y(),x("div",{key:O.id,class:"flex-none w-[300px] rounded-xl p-4 border border-gray-700/30 hover:border-yellow-400/50 transition-all duration-300 cursor-pointer hover:scale-[1.01] hover:shadow-lg hover:shadow-yellow-400/20 relative overflow-hidden group"},[d("div",{class:"absolute inset-0 bg-cover bg-center transition-all duration-300",style:Kr({backgroundImage:`url(${O.moviePoster})`})},null,4),S[18]||(S[18]=d("div",{class:"absolute inset-0 bg-black/70 backdrop-blur-sm group-hover:bg-black/60 transition-all duration-300"},null,-1)),d("div",TR,[d("div",CR,[d("div",AR,[d("img",{src:O.avatar,alt:O.name,class:"w-14 h-14 rounded-full border-3 border-gray-700/50 group-hover:border-yellow-400 transition-all shadow-lg"},null,8,IR),m===0?(y(),x("div",RR,"")):z("",!0)]),d("div",OR,[d("img",{src:O.moviePoster,alt:O.movieTitle,class:"w-16 h-24 rounded-md object-cover border border-gray-700/50 group-hover:border-yellow-400/50 transition-all shadow-lg",onError:S[0]||(S[0]=A=>A.target.src="https://placehold.co/64x96/1a1a1a/fff?text=No+Image")},null,40,PR)])]),d("div",$R,[d("div",NR,[d("h4",LR,j(O.name),1),m===0?(y(),x("span",MR,"")):z("",!0)])]),d("p",jR,j(O.text),1),d("div",DR,[d("button",UR,[S[15]||(S[15]=d("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[d("path",{d:"M2 10.5a1.5 1.5 0 113 0v6a1.5 1.5 0 01-3 0v-6zM6 10.333v5.43a2 2 0 001.106 1.79l.05.025A4 4 0 008.943 18h5.416a2 2 0 001.962-1.608l1.2-6A2 2 0 0015.56 8H12V4a2 2 0 00-2-2 1 1 0 00-1 1v.667a4 4 0 01-.8 2.4L6.8 7.933a4 4 0 00-.8 2.4z"})],-1)),d("span",BR,j(O.likes),1)]),d("button",FR,[S[16]||(S[16]=d("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[d("path",{d:"M18 9.5a1.5 1.5 0 11-3 0v-6a1.5 1.5 0 013 0v6zM14 9.667v-5.43a2 2 0 00-1.105-1.79l-.05-.025A4 4 0 0011.055 2H5.64a2 2 0 00-1.962 1.608l-1.2 6A2 2 0 004.44 12H8v4a2 2 0 002 2 1 1 0 001-1v-.667a4 4 0 01.8-2.4l1.4-1.866a4 4 0 00.8-2.4z"})],-1)),d("span",HR,j(O.dislikes),1)]),d("button",VR,[S[17]||(S[17]=d("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[d("path",{"fill-rule":"evenodd",d:"M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z","clip-rule":"evenodd"})],-1)),d("span",qR,j(O.replies),1)])])])]))),128))],512)])]),d("div",zR,[d("div",WR,[S[20]||(S[20]=d("div",{class:"flex items-center gap-2 mb-3"},[d("span",{class:"text-base"},""),d("h3",{class:"text-sm font-bold text-white uppercase"},"SI NI NHT")],-1)),d("div",KR,[s.value.length===0?(y(),x("div",GR," ang ti phim... ")):z("",!0),(y(!0),x(ve,null,$e(s.value,(O,m)=>(y(),x("div",{key:m,class:"flex items-center gap-2 p-1.5 rounded-lg hover:bg-gray-800/50 transition cursor-pointer"},[d("span",JR,j(m+1),1),d("img",{src:O.poster,class:"w-8 h-11 rounded object-cover",onError:S[1]||(S[1]=A=>A.target.src="https://placehold.co/32x44/1a1a1a/fff?text=?")},null,40,XR),d("div",YR,[d("p",QR,j(O.title),1),d("p",ZR,j(O.year),1)])]))),128))]),d("button",{onClick:S[2]||(S[2]=O=>l.value=!0),class:"w-full py-2 text-xs text-yellow-400 hover:text-yellow-300 font-medium transition-colors border-t border-gray-800 pt-3"}," Xem thm  ")]),d("div",eO,[S[21]||(S[21]=d("div",{class:"flex items-center gap-2 mb-3"},[d("span",{class:"text-base"},""),d("h3",{class:"text-sm font-bold text-white uppercase"},"YU THCH NHT")],-1)),d("div",tO,[i.value.length===0?(y(),x("div",rO," ang ti phim... ")):z("",!0),(y(!0),x(ve,null,$e(i.value,(O,m)=>(y(),x("div",{key:m,class:"flex items-center gap-2 p-1.5 rounded-lg hover:bg-gray-800/50 transition cursor-pointer"},[d("span",nO,j(m+1),1),d("img",{src:O.poster,class:"w-8 h-11 rounded object-cover",onError:S[3]||(S[3]=A=>A.target.src="https://placehold.co/32x44/1a1a1a/fff?text=?")},null,40,sO),d("div",oO,[d("p",iO,j(O.title),1),d("p",aO,j(O.year),1)])]))),128))]),d("button",{onClick:S[4]||(S[4]=O=>c.value=!0),class:"w-full py-2 text-xs text-yellow-400 hover:text-yellow-300 font-medium transition-colors border-t border-gray-800 pt-3"}," Xem thm  ")]),d("div",lO,[S[22]||(S[22]=d("div",{class:"flex items-center gap-2 mb-3"},[d("span",{class:"text-base"},""),d("h3",{class:"text-sm font-bold text-white uppercase"},"BNH LUN MI")],-1)),d("div",cO,[V(Gf,{name:"comment-list"},{default:fe(()=>[(y(!0),x(ve,null,$e(u.value.slice(0,5),O=>(y(),x("div",{key:O.id,class:"p-2 rounded-lg hover:bg-gray-800/50 transition cursor-pointer"},[d("div",uO,[d("img",{src:O.avatar,class:"w-7 h-7 rounded-full"},null,8,dO),d("div",hO,[d("div",fO,[d("p",pO,j(O.name),1),O.time==="va xong"?(y(),x("span",gO,"")):z("",!0)]),d("p",mO,j(O.time),1)])]),d("p",vO,j(O.text),1)]))),128))]),_:1})])])])]),V(lt,{name:"modal"},{default:fe(()=>[l.value?(y(),x("div",{key:0,onClick:S[8]||(S[8]=O=>l.value=!1),class:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4"},[d("div",{onClick:S[7]||(S[7]=Rt(()=>{},["stop"])),class:"bg-gray-900 rounded-xl max-w-4xl w-full max-h-[80vh] overflow-hidden border border-gray-800 modal-content"},[d("div",yO,[S[24]||(S[24]=d("div",{class:"flex items-center gap-2"},[d("span",{class:"text-2xl"},""),d("h2",{class:"text-xl font-bold text-white"},"SI NI NHT")],-1)),d("button",{onClick:S[5]||(S[5]=O=>l.value=!1),class:"text-gray-400 hover:text-white transition-colors"},S[23]||(S[23]=[d("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),d("div",bO,[d("div",wO,[(y(!0),x(ve,null,$e(o.value,(O,m)=>(y(),x("div",{key:m,class:"group cursor-pointer"},[d("div",_O,[d("img",{src:O.poster,alt:O.title,class:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300",onError:S[6]||(S[6]=A=>A.target.src="https://placehold.co/200x300/1a1a1a/fff?text=No+Image")},null,40,xO),d("div",EO,j(m+1),1)]),d("p",kO,j(O.title),1),d("p",SO,j(O.year),1)]))),128))])])])])):z("",!0)]),_:1}),V(lt,{name:"modal"},{default:fe(()=>[c.value?(y(),x("div",{key:0,onClick:S[12]||(S[12]=O=>c.value=!1),class:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4"},[d("div",{onClick:S[11]||(S[11]=Rt(()=>{},["stop"])),class:"bg-gray-900 rounded-xl max-w-4xl w-full max-h-[80vh] overflow-hidden border border-gray-800 modal-content"},[d("div",TO,[S[26]||(S[26]=d("div",{class:"flex items-center gap-2"},[d("span",{class:"text-2xl"},""),d("h2",{class:"text-xl font-bold text-white"},"YU THCH NHT")],-1)),d("button",{onClick:S[9]||(S[9]=O=>c.value=!1),class:"text-gray-400 hover:text-white transition-colors"},S[25]||(S[25]=[d("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),d("div",CO,[d("div",AO,[(y(!0),x(ve,null,$e(a.value,(O,m)=>(y(),x("div",{key:m,class:"group cursor-pointer"},[d("div",IO,[d("img",{src:O.poster,alt:O.title,class:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300",onError:S[10]||(S[10]=A=>A.target.src="https://placehold.co/200x300/1a1a1a/fff?text=No+Image")},null,40,RO),d("div",OO,j(m+1),1)]),d("p",PO,j(O.title),1),d("p",$O,j(O.year),1)]))),128))])])])])):z("",!0)]),_:1})]))}},LO=pt(NO,[["__scopeId","data-v-a90a47ad"]]),MO={class:"featured-section"},jO={class:"carousel-container"},DO={class:"card-inner"},UO=["src","alt"],BO={class:"card-overlay"},FO={class:"card-content"},HO={class:"card-title"},VO={class:"card-meta"},qO={class:"card-year"},zO={class:"card-rating"},WO={class:"carousel-indicators"},KO=["onClick"],GO={__name:"FeaturedCarousel",setup(t){const e=q([]),r=q(0),n=q(null),s=q(!1),o=q(0),i=q(0),a=q(0),l=C=>{const $=C-r.value,R=Math.abs($);if(R>5)return{display:"none"};const S=30-R,O=R===0?1.05:1-R*.12,m=1-R*.2,A=$*70+a.value,Q=R*15,K=$*6;return{transform:`translateX(${A}%) translateY(${Q}px) scale(${O}) rotateY(${K}deg)`,zIndex:S,opacity:m,transition:s.value?"none":"all 0.7s cubic-bezier(0.34, 1.56, 0.64, 1)"}},c=()=>{r.value<e.value.length-1?r.value++:r.value=0,h(r.value)},u=()=>{r.value>0?r.value--:r.value=e.value.length-1,h(r.value)},h=C=>{r.value=C,setTimeout(()=>{const $=document.querySelector(".carousel-indicators"),R=document.querySelector(".indicator.active");$&&R&&R.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"})},100)},f=C=>{C.target.src="https://placehold.co/300x450/1a1a1a/fff?text=No+Image"},p=C=>{s.value=!0,o.value=C.clientX,i.value=C.clientX},g=C=>{if(!s.value)return;C.preventDefault(),i.value=C.clientX;const $=i.value-o.value,R=100,S=$/window.innerWidth*300;a.value=Math.max(-100,Math.min(R,S))},v=()=>{if(!s.value)return;const C=i.value-o.value;C>30?u():C<-30&&c(),s.value=!1,a.value=0},_=C=>{s.value=!0,o.value=C.touches[0].clientX,i.value=C.touches[0].clientX},T=C=>{if(!s.value)return;C.preventDefault(),i.value=C.touches[0].clientX;const $=i.value-o.value,R=100,S=$/window.innerWidth*300;a.value=Math.max(-100,Math.min(R,S))},k=()=>{v()},E=async()=>{var C,$;try{const R=await me.get("https://phimapi.com/danh-sach/phim-moi-cap-nhat",{params:{page:1}});($=(C=R.data)==null?void 0:C.items)!=null&&$.length&&(e.value=R.data.items.slice(0,20).map(S=>{var O;return{title:S.name,year:S.year||2024,rating:(Math.random()*2+7).toFixed(1),poster:(O=S.poster_url)!=null&&O.startsWith("http")?S.poster_url:`https://phimimg.com/${S.poster_url}`}}),r.value=Math.floor(e.value.length/2))}catch(R){console.error("Failed to fetch movies:",R)}};return Et(()=>{E(),document.addEventListener("mousemove",g),document.addEventListener("mouseup",v);const C=n.value;C&&(C.addEventListener("touchmove",T),C.addEventListener("touchend",k))}),Jt(()=>{document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",v);const C=n.value;C&&(C.removeEventListener("touchmove",T),C.removeEventListener("touchend",k))}),(C,$)=>(y(),x("div",MO,[$[3]||($[3]=d("div",{class:"section-header"},[d("h2",{class:"section-title"}," Phim  C"),d("p",{class:"section-subtitle"},"Nhng b phim c  xut dnh ring cho bn")],-1)),d("div",jO,[d("div",{class:"cards-wrapper",ref_key:"cardsWrapper",ref:n,onMousedown:p,onTouchstart:_},[(y(!0),x(ve,null,$e(e.value,(R,S)=>(y(),x("div",{key:S,class:"movie-card",style:Kr(l(S))},[d("div",DO,[d("img",{src:R.poster,alt:R.title,class:"card-poster",onError:f},null,40,UO),d("div",BO,[d("div",FO,[d("h3",HO,j(R.title),1),d("div",VO,[d("span",qO,j(R.year),1),d("span",zO," "+j(R.rating),1)]),$[0]||($[0]=d("button",{class:"card-button"},[d("svg",{class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20"},[d("path",{d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z"})]),le(" Xem Ngay ")],-1))])])])],4))),128))],544),d("div",{class:"carousel-controls"},[d("button",{onClick:u,class:"control-btn prev-btn"},$[1]||($[1]=[d("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])),d("button",{onClick:c,class:"control-btn next-btn"},$[2]||($[2]=[d("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)]))]),d("div",WO,[(y(!0),x(ve,null,$e(e.value,(R,S)=>(y(),x("button",{key:S,onClick:O=>h(S),class:Te(["indicator",{active:r.value===S}])},null,10,KO))),128))])])]))}},JO=pt(GO,[["__scopeId","data-v-1f117a6b"]]),XO={class:"animate-pulse"},YO={key:0,class:"bg-gray-800 rounded-xl overflow-hidden"},QO={key:1,class:"relative h-[85vh] bg-gray-800"},ZO={key:2,class:"space-y-4"},eP={class:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4"},tP={key:3,class:"bg-gray-800 rounded-2xl p-6 border-2 border-gray-700"},rP={class:"space-y-3"},nP={key:4,class:"bg-gray-800 rounded-2xl p-6 border border-gray-700"},sP={key:5,class:"space-y-3"},Vo={__name:"LoadingSkeleton",props:{type:{type:String,default:"card",validator:t=>["card","hero","row","pricing","cart","list"].includes(t)},count:{type:Number,default:3}},setup(t){return(e,r)=>(y(),x("div",XO,[t.type==="card"?(y(),x("div",YO,r[0]||(r[0]=[d("div",{class:"aspect-[2/3] bg-gray-700"},null,-1),d("div",{class:"p-3 space-y-2"},[d("div",{class:"h-4 bg-gray-700 rounded w-3/4"}),d("div",{class:"h-3 bg-gray-700 rounded w-1/2"})],-1)]))):t.type==="hero"?(y(),x("div",QO,r[1]||(r[1]=[ar('<div class="absolute inset-0 bg-gradient-to-t from-black via-transparent to-transparent"></div><div class="absolute bottom-20 left-8 space-y-4 max-w-2xl"><div class="h-12 bg-gray-700 rounded w-3/4"></div><div class="h-4 bg-gray-700 rounded w-full"></div><div class="h-4 bg-gray-700 rounded w-5/6"></div><div class="flex gap-3 mt-6"><div class="h-12 w-32 bg-gray-700 rounded-full"></div><div class="h-12 w-32 bg-gray-700 rounded-full"></div></div></div>',2)]))):t.type==="row"?(y(),x("div",ZO,[r[2]||(r[2]=d("div",{class:"h-6 bg-gray-700 rounded w-48"},null,-1)),d("div",eP,[(y(),x(ve,null,$e(6,n=>d("div",{key:n,class:"aspect-[2/3] bg-gray-700 rounded-xl"})),64))])])):t.type==="pricing"?(y(),x("div",tP,[r[3]||(r[3]=d("div",{class:"w-20 h-20 bg-gray-700 rounded-2xl mb-6"},null,-1)),r[4]||(r[4]=d("div",{class:"h-8 bg-gray-700 rounded w-3/4 mb-2"},null,-1)),r[5]||(r[5]=d("div",{class:"h-4 bg-gray-700 rounded w-1/2 mb-6"},null,-1)),r[6]||(r[6]=d("div",{class:"h-12 bg-gray-700 rounded w-full mb-4"},null,-1)),d("div",rP,[(y(),x(ve,null,$e(4,n=>d("div",{key:n,class:"h-4 bg-gray-700 rounded"})),64))]),r[7]||(r[7]=d("div",{class:"h-12 bg-gray-700 rounded-xl mt-6"},null,-1))])):t.type==="cart"?(y(),x("div",nP,r[8]||(r[8]=[ar('<div class="flex gap-6"><div class="w-20 h-20 bg-gray-700 rounded-2xl flex-shrink-0"></div><div class="flex-1 space-y-3"><div class="h-6 bg-gray-700 rounded w-1/2"></div><div class="h-4 bg-gray-700 rounded w-3/4"></div><div class="flex gap-2"><div class="h-6 w-16 bg-gray-700 rounded-full"></div><div class="h-6 w-16 bg-gray-700 rounded-full"></div></div></div></div>',1)]))):t.type==="list"?(y(),x("div",sP,[(y(!0),x(ve,null,$e(t.count,n=>(y(),x("div",{key:n,class:"h-16 bg-gray-700 rounded-xl"}))),128))])):z("",!0)]))}},oP={key:0,class:"min-h-[400px] flex items-center justify-center p-8"},iP={class:"max-w-md w-full text-center"},aP={class:"text-2xl font-bold text-white mb-3"},lP={class:"text-gray-400 mb-6 leading-relaxed"},cP={key:0,class:"mb-6 text-left"},uP={class:"bg-gray-900 text-red-400 p-4 rounded-lg text-xs overflow-auto max-h-40"},dP={class:"flex flex-col sm:flex-row gap-3 justify-center"},hP={__name:"ErrorBoundary",props:{errorTitle:{type:String,default:" c li xy ra"},errorMessage:{type:String,default:"Khng th ti ni dung. Vui lng th li sau."},showDetails:{type:Boolean,default:!1},showHomeButton:{type:Boolean,default:!0},onRetry:{type:Function,default:null}},emits:["retry","error"],setup(t,{expose:e,emit:r}){const n=t,s=r,o=Zr(),i=q(!1),a=q(null);ff((u,h,f)=>{var p;return console.error("ErrorBoundary caught error:",u),i.value=!0,a.value=`${u.message}

Component: ${((p=h==null?void 0:h.$options)==null?void 0:p.name)||"Unknown"}
Info: ${f}`,s("error",u),!1});const l=()=>{i.value=!1,a.value=null,n.onRetry&&n.onRetry(),s("retry")},c=()=>{o.push("/")};return e({setError:u=>{i.value=!0,a.value=(u==null?void 0:u.message)||u},reset:()=>{i.value=!1,a.value=null}}),(u,h)=>i.value?(y(),x("div",oP,[d("div",iP,[h[3]||(h[3]=ar('<div class="w-24 h-24 mx-auto mb-6 relative"><div class="absolute inset-0 bg-red-500/20 rounded-full animate-ping"></div><div class="relative w-24 h-24 bg-gradient-to-br from-red-600 to-red-700 rounded-full flex items-center justify-center"><svg class="w-12 h-12 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg></div></div>',1)),d("h2",aP,j(t.errorTitle),1),d("p",lP,j(t.errorMessage),1),t.showDetails&&a.value?(y(),x("details",cP,[h[0]||(h[0]=d("summary",{class:"cursor-pointer text-sm text-gray-500 hover:text-gray-400 mb-2"}," Chi tit li ",-1)),d("pre",uP,j(a.value),1)])):z("",!0),d("div",dP,[d("button",{onClick:l,class:"inline-flex items-center justify-center gap-2 bg-gradient-to-r from-red-600 to-red-700 text-white px-6 py-3 rounded-xl font-bold hover:from-red-700 hover:to-red-800 transition-all hover:scale-105 shadow-lg"},h[1]||(h[1]=[d("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1),le(" Th li ")])),t.showHomeButton?(y(),x("button",{key:0,onClick:c,class:"inline-flex items-center justify-center gap-2 bg-gray-800 text-white px-6 py-3 rounded-xl font-bold hover:bg-gray-700 transition-all border border-gray-700"},h[2]||(h[2]=[d("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})],-1),le(" V trang ch ")]))):z("",!0)])])])):yf(u.$slots,"default",{key:1})}},fP={"aria-label":"Breadcrumb",class:"mb-6"},pP={class:"flex items-center gap-2 text-sm"},gP={key:1,class:"text-white font-semibold","aria-current":"page"},mP={__name:"Breadcrumb",props:{items:{type:Array,required:!0}},setup(t){return(e,r)=>{const n=Hi("router-link");return y(),x("nav",fP,[d("ol",pP,[(y(!0),x(ve,null,$e(t.items,(s,o)=>(y(),x("li",{key:o,class:"flex items-center gap-2"},[o===0?(y(),Ie(n,{key:0,to:s.to,class:"flex items-center gap-1 text-gray-400 hover:text-yellow-400 transition-colors"},{default:fe(()=>[r[0]||(r[0]=d("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[d("path",{d:"M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z"})],-1)),d("span",null,j(s.label),1)]),_:2},1032,["to"])):(y(),x(ve,{key:1},[r[1]||(r[1]=d("svg",{class:"w-4 h-4 text-gray-600",fill:"currentColor",viewBox:"0 0 20 20"},[d("path",{"fill-rule":"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd"})],-1)),o<t.items.length-1?(y(),Ie(n,{key:0,to:s.to,class:"text-gray-400 hover:text-yellow-400 transition-colors"},{default:fe(()=>[le(j(s.label),1)]),_:2},1032,["to"])):(y(),x("span",gP,j(s.label),1))],64))]))),128))])])}}};function vP(t={}){const e=Gi(),n={...{title:"HTHREE Film - Xem Phim Online Min Ph",description:"Xem phim online cht lng cao, phim b, phim l, anime, TV shows. Cp nht lin tc phim mi nht.",keywords:"xem phim, phim online, phim bo, phim le, anime, tv shows, phim moi",image:"https://hthree.com/og-image.jpg",url:"https://hthree.com",type:"website",siteName:"HTHREE Film"},...t},s=h=>{document.title=h},o=(h,f,p=!1)=>{if(!f)return;const g=p?"property":"name";let v=document.querySelector(`meta[${g}="${h}"]`);v||(v=document.createElement("meta"),v.setAttribute(g,h),document.head.appendChild(v)),v.setAttribute("content",f)},i=h=>{let f=document.querySelector('link[rel="canonical"]');f||(f=document.createElement("link"),f.setAttribute("rel","canonical"),document.head.appendChild(f)),f.setAttribute("href",h)},a=()=>{s(n.title),o("description",n.description),o("keywords",n.keywords),o("og:title",n.title,!0),o("og:description",n.description,!0),o("og:image",n.image,!0),o("og:url",n.url,!0),o("og:type",n.type,!0),o("og:site_name",n.siteName,!0),o("twitter:card","summary_large_image"),o("twitter:title",n.title),o("twitter:description",n.description),o("twitter:image",n.image),i(n.url)},l=h=>{let f=document.querySelector('script[type="application/ld+json"]');f||(f=document.createElement("script"),f.setAttribute("type","application/ld+json"),document.head.appendChild(f)),f.textContent=JSON.stringify(h)},c=h=>{var p;const f={"@context":"https://schema.org","@type":"Movie",name:h.name,alternateName:h.origin_name,description:h.content,image:h.poster_url||h.thumb_url,datePublished:h.year,genre:(p=h.category)==null?void 0:p.map(g=>g.name).join(", "),contentRating:h.quality,inLanguage:h.lang,aggregateRating:h.rating?{"@type":"AggregateRating",ratingValue:h.rating,bestRating:"10",worstRating:"1"}:void 0};l(f)},u=()=>{l({"@context":"https://schema.org","@type":"WebSite",name:"HTHREE Film",url:"https://hthree.com",potentialAction:{"@type":"SearchAction",target:"https://hthree.com/search?q={search_term_string}","query-input":"required name=search_term_string"}})};return Et(()=>{a()}),_r(()=>e.path,()=>{a()}),{setTitle:s,setMetaTag:o,setCanonical:i,updateMeta:a,setStructuredData:l,setMovieStructuredData:c,setWebsiteStructuredData:u}}function A5(t){var e,r;return{title:`${t.name} - ${t.origin_name} | HTHREE Film`,description:((e=t.content)==null?void 0:e.substring(0,160))||`Xem phim ${t.name} (${t.origin_name}) cht lng ${t.quality} vietsub min ph ti HTHREE Film.`,keywords:`${t.name}, ${t.origin_name}, xem phim, ${(r=t.category)==null?void 0:r.map(n=>n.name).join(", ")}`,image:t.poster_url||t.thumb_url,url:`https://hthree.com/film/${t.slug}`,type:"video.movie"}}function yP(t,e={}){return{...{home:{title:"HTHREE Film - Xem Phim Online Min Ph, Phim B, Phim L, Anime",description:"Xem phim online cht lng cao HD, phim b, phim l, anime, TV shows. Cp nht lin tc phim mi nht 2024.",keywords:"xem phim online, phim bo, phim le, anime, tv shows, phim moi 2024"},pricing:{title:"Bng Gi Gi Dch V - HTHREE Film",description:"Chn gi dch v ph hp vi bn. Xem phim khng gii hn, khng qung co, cht lng HD/FHD.",keywords:"gia goi dich vu, goi vip, xem phim khong quang cao"},library:{title:"Th Vin Ca Ti - HTHREE Film",description:"Qun l phim yu thch, danh sch xem sau v lch s xem ca bn.",keywords:"thu vien phim, phim yeu thich, lich su xem"},search:{title:`Tm kim: ${e.query||""} - HTHREE Film`,description:`Kt qu tm kim cho "${e.query||""}". Tm thy ${e.count||0} phim.`,keywords:`tim kiem phim, ${e.query||""}`}}[t],url:`https://hthree.com${e.path||""}`,type:"website"}}const bP={class:"bg-black min-h-screen text-white"},wP={key:0,class:"space-y-8"},_P={class:"container mx-auto px-4 sm:px-6 lg:px-8 space-y-8"},xP={key:2},EP={key:0,class:"absolute inset-0 z-10 overflow-hidden"},kP=["src"],SP={key:1,class:"absolute inset-0"},TP=["src","alt"],CP={class:"relative z-10 h-full flex items-center container mx-auto px-4 sm:px-6 lg:px-8 pt-20"},AP={class:"max-w-2xl"},IP={class:"text-3xl md:text-4xl lg:text-5xl font-extrabold mb-3 uppercase tracking-tight leading-tight text-white",style:{"text-shadow":"2px 2px 8px rgba(0,0,0,0.9), 0 0 20px rgba(0,0,0,0.7)"}},RP={class:"text-base md:text-lg text-white mb-4 font-semibold",style:{"text-shadow":"1px 1px 6px rgba(0,0,0,0.9), 0 0 12px rgba(0,0,0,0.7)"}},OP={class:"flex flex-wrap gap-2 mb-4"},PP={key:0,class:"bg-yellow-500 text-black px-3 py-1 rounded text-xs font-bold uppercase shadow-xl"},$P={key:1,class:"bg-gray-900/90 text-white px-3 py-1 rounded text-xs font-bold uppercase shadow-xl border-2 border-gray-700"},NP={key:2,class:"bg-gray-900/90 text-white px-3 py-1 rounded text-xs font-bold shadow-xl border-2 border-gray-700"},LP={key:3,class:"bg-gray-900/90 text-white px-3 py-1 rounded text-xs font-bold shadow-xl border-2 border-gray-700"},MP={key:0,class:"flex flex-wrap gap-2 mb-5 text-sm"},jP={class:"text-sm md:text-base mb-6 line-clamp-3 text-white leading-relaxed max-w-xl font-semibold",style:{"text-shadow":"1px 1px 6px rgba(0,0,0,0.9), 0 0 12px rgba(0,0,0,0.7)"}},DP={class:"flex flex-wrap gap-3"},UP=["onClick"],BP=["onClick"],FP={class:"absolute bottom-8 left-1/2 -translate-x-1/2 z-20 flex gap-2"},HP=["onClick","aria-label"],VP={class:"container mx-auto px-4 sm:px-6 lg:px-8 pt-10 pb-10 relative z-20"},qP={__name:"Homepage",setup(t){const e=Zr(),r=q([]),n=q(0),s=q([]),o=q([]),i=q([]),a=q([]),l=q([]),c=q([]),u=q([]),h=q(!1),f=q(""),p=q(null);let g=0,v=0,_=!1;const T=q(!1),k=q(""),E=q(!0),C=q(null),$=Ae(()=>r.value[n.value]||null),R=[{label:"Trang ch",to:"/home"}],S=F=>{F!=null&&F.slug&&(k.value=F.slug,T.value=!0)},O=F=>{console.log(" Opening new movie from modal:",F),k.value=F,T.value=!0},m=F=>{F!=null&&F.slug&&e.push(`/film/${F.slug}`)},A=F=>{if(!F)return"https://image.tmdb.org/t/p/original/t6HIqrRAclMCA60NsSmeqe9RmNV.jpg";if(F.thumb_url){const ye=F.thumb_url.startsWith("http")?F.thumb_url:`https://phimimg.com/${F.thumb_url}`;return console.log(" Banner using thumb_url:",ye),ye}return F.poster_url?F.poster_url.startsWith("http")?F.poster_url:`https://phimimg.com/${F.poster_url}`:"https://image.tmdb.org/t/p/original/t6HIqrRAclMCA60NsSmeqe9RmNV.jpg"},Q=F=>{F.target.src="https://image.tmdb.org/t/p/original/t6HIqrRAclMCA60NsSmeqe9RmNV.jpg"},K=F=>{var ze,Ue;if(!F){h.value=!1,f.value="";return}let ye=F;if(F.includes("youtube.com/watch")){const M=(ze=F.split("v=")[1])==null?void 0:ze.split("&")[0];ye=`https://www.youtube.com/embed/${M}?autoplay=1&mute=1&controls=0&showinfo=0&rel=0&modestbranding=1&loop=1&playlist=${M}&iv_load_policy=3&disablekb=1&fs=0&vq=hd1080&hd=1&quality=highres`}else if(F.includes("youtu.be/")){const M=(Ue=F.split("youtu.be/")[1])==null?void 0:Ue.split("?")[0];ye=`https://www.youtube.com/embed/${M}?autoplay=1&mute=1&controls=0&showinfo=0&rel=0&modestbranding=1&loop=1&playlist=${M}&iv_load_policy=3&disablekb=1&fs=0&vq=hd1080&hd=1&quality=highres`}h.value=!1,setTimeout(()=>{f.value=ye,h.value=!0},500)},ie=()=>{n.value=(n.value+1)%r.value.length;const F=r.value[n.value];F!=null&&F.trailer_url?K(F.trailer_url):h.value=!1},we=()=>{n.value=n.value===0?r.value.length-1:n.value-1;const F=r.value[n.value];F!=null&&F.trailer_url?K(F.trailer_url):h.value=!1},De=F=>{n.value=F;const ye=r.value[F];ye!=null&&ye.trailer_url?K(ye.trailer_url):h.value=!1},G=F=>{_||Math.abs(F.deltaX)>Math.abs(F.deltaY)&&(F.preventDefault(),_=!0,F.deltaX>0?ie():we(),setTimeout(()=>{_=!1},800))},N=F=>{g=F.changedTouches[0].screenX},de=F=>{v=F.changedTouches[0].screenX},ue=()=>{if(_)return;const F=g-v;Math.abs(F)>50&&(_=!0,F>0?ie():we(),setTimeout(()=>{_=!1},800))},re=async()=>{var F,ye,ze,Ue,M,te,Z,se,ne,b,w,I,D,H,U,ee,X,J,W,Y;E.value=!0,C.value=null;try{console.log(" Loading movies from API...");const[B,oe,pe,Se,Oe,Re,Ze,et,ot]=await Promise.all([me.get("https://phimapi.com/danh-sach/phim-moi-cap-nhat?page=1"),me.get("https://phimapi.com/danh-sach/phim-moi-cap-nhat?page=1"),me.get("https://phimapi.com/danh-sach/phim-moi-cap-nhat?page=2"),me.get("https://phimapi.com/v1/api/danh-sach/phim-bo?page=1&limit=30"),me.get("https://phimapi.com/v1/api/danh-sach/phim-le?page=1&limit=30"),me.get("https://phimapi.com/v1/api/quoc-gia/han-quoc?page=1&limit=25"),me.get("https://phimapi.com/v1/api/quoc-gia/trung-quoc?page=1&limit=25"),me.get("https://phimapi.com/v1/api/quoc-gia/nhat-ban?page=1&limit=25"),me.get("https://phimapi.com/v1/api/tim-kiem?keyword=hoc vien sieu anh hung")]);console.log(" API calls completed");try{const Ge=((ye=(F=ot==null?void 0:ot.data)==null?void 0:F.data)==null?void 0:ye.items)||[];if(console.log(" My Hero Academia search results:",Ge.length),Ge.length>0){const xe=Ge[0];try{const Ye=await me.get(`https://phimapi.com/phim/${xe.slug}`);(ze=Ye.data)!=null&&ze.movie?r.value.push({...xe,content:Ye.data.movie.content||xe.content,trailer_url:Ye.data.movie.trailer_url}):r.value.push(xe)}catch{console.log(" Could not fetch My Hero detail, using basic info"),r.value.push(xe)}}}catch{console.log(" My Hero Academia search failed, skipping")}const gt=((Ue=B.data.items)==null?void 0:Ue.slice(0,2))||((te=(M=B.data.data)==null?void 0:M.items)==null?void 0:te.slice(0,2))||[];for(const Ge of gt)if(Ge!=null&&Ge.slug)try{const xe=await me.get(`https://phimapi.com/phim/${Ge.slug}`);(Z=xe.data)!=null&&Z.movie?r.value.push({...Ge,content:xe.data.movie.content||Ge.content,trailer_url:xe.data.movie.trailer_url}):r.value.push(Ge)}catch{r.value.push(Ge)}(se=r.value[0])!=null&&se.trailer_url&&K(r.value[0].trailer_url),console.log(" Featured movies loaded:",r.value.length);const Qt=oe.data.items||((ne=oe.data.data)==null?void 0:ne.items)||[];s.value=Qt.sort((Ge,xe)=>{const Ye={FHD:3,HD:2,SD:1,"":0},_s=Ye[Ge.quality]||0,Wc=Ye[xe.quality]||0;if(_s!==Wc)return Wc-_s;const qg=parseInt(Ge.year)||0;return(parseInt(xe.year)||0)-qg}),o.value=pe.data.items||((b=pe.data.data)==null?void 0:b.items)||[],i.value=((w=Se.data.data)==null?void 0:w.items)||[],a.value=((I=Oe.data.data)==null?void 0:I.items)||[],l.value=((D=Re.data.data)==null?void 0:D.items)||[],c.value=((H=Ze.data.data)==null?void 0:H.items)||[],u.value=((U=et.data.data)==null?void 0:U.items)||[],console.log(" Movies loaded successfully"),console.log(" Featured:",(ee=$.value)==null?void 0:ee.name),console.log(" Content:",(J=(X=$.value)==null?void 0:X.content)==null?void 0:J.substring(0,100))}catch(B){console.error(" Error loading movies:",B),C.value=((Y=(W=B.response)==null?void 0:W.data)==null?void 0:Y.message)||B.message||"Khng th ti d liu phim. Vui lng th li sau.",Pe.error("Khng th ti d liu phim")}finally{E.value=!1}},P=yP("home",{path:"/home"}),{setWebsiteStructuredData:ae}=vP(P);return Et(()=>{re(),ae()}),Jt(()=>{}),(F,ye)=>{var ze,Ue,M,te,Z,se;return y(),x("div",bP,[E.value?(y(),x("div",wP,[V(Vo,{type:"hero"}),d("div",_P,[V(Vo,{type:"row"}),V(Vo,{type:"row"}),V(Vo,{type:"row"})])])):C.value?(y(),Ie(hP,{key:1,"error-title":"Khng th ti phim","error-message":C.value,"show-details":!0,onRetry:re},null,8,["error-message"])):(y(),x("div",xP,[d("div",{ref_key:"heroBannerRef",ref:p,class:"relative h-[85vh] overflow-hidden group/hero pt-16",onWheel:G,onTouchstart:N,onTouchmove:de,onTouchend:ue},[(y(!0),x(ve,null,$e(r.value,(ne,b)=>{var w;return y(),x("div",{key:ne.slug,class:Te(["absolute inset-0 transition-opacity duration-700",n.value===b?"opacity-100 z-10":"opacity-0 z-0"])},[h.value&&n.value===b&&f.value?(y(),x("div",EP,[d("iframe",{src:f.value,class:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[177.77vh] h-[56.25vw] min-h-full min-w-full",frameborder:"0",allow:"autoplay; encrypted-media",allowfullscreen:"",style:{"pointer-events":"none"}},null,8,kP),ye[1]||(ye[1]=d("div",{class:"absolute inset-0 pointer-events-none"},[d("div",{class:"absolute top-0 right-0 w-32 h-20 bg-black"})],-1))])):z("",!0),!h.value||n.value!==b?(y(),x("div",SP,[d("img",{src:A(ne),class:"w-full h-full object-cover",alt:ne.name,onError:Q},null,40,TP),ye[2]||(ye[2]=d("div",{class:"absolute inset-0 bg-gradient-to-r from-black via-black/80 to-transparent"},null,-1)),ye[3]||(ye[3]=d("div",{class:"absolute inset-0 bg-gradient-to-t from-black via-transparent to-transparent"},null,-1))])):z("",!0),d("div",CP,[d("div",AP,[d("h1",IP,j((ne==null?void 0:ne.name)||"KHM PH PHIM HAY"),1),d("p",RP,j((ne==null?void 0:ne.origin_name)||""),1),d("div",OP,[ne!=null&&ne.quality?(y(),x("span",PP,j(ne.quality),1)):z("",!0),ne!=null&&ne.lang?(y(),x("span",$P,j(ne.lang),1)):z("",!0),ne!=null&&ne.year?(y(),x("span",NP,j(ne.year),1)):z("",!0),ne!=null&&ne.time?(y(),x("span",LP,j(ne.time),1)):z("",!0)]),(w=ne==null?void 0:ne.category)!=null&&w.length?(y(),x("div",MP,[(y(!0),x(ve,null,$e(ne.category.slice(0,4),(I,D)=>(y(),x("span",{key:D,class:"text-white font-bold",style:{"text-shadow":"1px 1px 4px rgba(0,0,0,0.9), 0 0 8px rgba(0,0,0,0.7)"}},j(I.name),1))),128))])):z("",!0),d("p",jP,j((ne==null?void 0:ne.content)||"Khm ph nhng b phim tuyt vi cng HTHREE"),1),d("div",DP,[d("button",{onClick:I=>m(ne),class:"flex items-center gap-2 bg-yellow-400 text-black px-8 py-3.5 rounded-full font-bold text-base hover:bg-yellow-500 transition-all shadow-xl hover:scale-105"},ye[4]||(ye[4]=[d("svg",{class:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20"},[d("path",{d:"M6.3 2.841A1.5 1.5 0 004 4.11V15.89a1.5 1.5 0 002.3 1.269l9.344-5.89a1.5 1.5 0 000-2.538L6.3 2.84z"})],-1),le(" Xem Ngay ")]),8,UP),ye[6]||(ye[6]=d("button",{class:"flex items-center gap-2 bg-white/20 backdrop-blur-sm text-white px-6 py-3.5 rounded-full font-bold text-base hover:bg-white/30 transition-all border border-white/30"},[d("svg",{class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20"},[d("path",{"fill-rule":"evenodd",d:"M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z","clip-rule":"evenodd"})])],-1)),d("button",{onClick:I=>S(ne),class:"flex items-center gap-2 bg-white/20 backdrop-blur-sm text-white px-6 py-3.5 rounded-full font-bold text-base hover:bg-white/30 transition-all border border-white/30",title:"Cc tp & Thng tin"},ye[5]||(ye[5]=[d("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1)]),8,BP)])])])],2)}),128)),d("div",FP,[(y(!0),x(ve,null,$e(r.value,(ne,b)=>(y(),x("button",{key:`dot-${ne.slug}`,onClick:w=>De(b),class:Te(["transition-all duration-300 ease-out rounded-full transform hover:scale-110",n.value===b?"w-8 h-2 bg-yellow-400 shadow-lg shadow-yellow-400/50":"w-2 h-2 bg-white/50 hover:bg-white/80"]),"aria-label":`Chuyn n phim ${b+1}`},null,10,HP))),128))])],544),V(JO),d("div",VP,[V(mP,{items:R}),ye[7]||(ye[7]=d("div",{class:"mb-8"},[d("h1",{class:"text-3xl md:text-4xl font-bold text-white mb-2"},"Khm ph phim hay"),d("p",{class:"text-gray-400"},"Cp nht lin tc nhng b phim mi nht v hot nht")],-1)),(ze=o.value)!=null&&ze.length?(y(),Ie(Hn,{key:0,title:" Phim Mi Cp Nht",movies:o.value},null,8,["movies"])):z("",!0),(Ue=i.value)!=null&&Ue.length?(y(),Ie(Hn,{key:1,title:" Phim B Hot",movies:i.value},null,8,["movies"])):z("",!0),(M=a.value)!=null&&M.length?(y(),Ie(Hn,{key:2,title:" Phim L Mi",movies:a.value},null,8,["movies"])):z("",!0),(te=l.value)!=null&&te.length?(y(),Ie(Hn,{key:3,title:" Phim Hn Quc",movies:l.value},null,8,["movies"])):z("",!0),(Z=c.value)!=null&&Z.length?(y(),Ie(Hn,{key:4,title:" Phim Trung Quc",movies:c.value},null,8,["movies"])):z("",!0),(se=u.value)!=null&&se.length?(y(),Ie(Hn,{key:5,title:" Phim Anime",movies:u.value},null,8,["movies"])):z("",!0)]),V(LO),V(Hg,{"is-open":T.value,"movie-slug":k.value,onClose:ye[0]||(ye[0]=ne=>T.value=!1),onOpenMovie:O},null,8,["is-open","movie-slug"])]))])}}},zP=pt(qP,[["__scopeId","data-v-4da6f517"]]),WP=()=>Xe(()=>import("./NetflixHomepage-D6OVJD3X.js"),__vite__mapDeps([0,1]),import.meta.url),KP=()=>Xe(()=>import("./MovieDetail-DjCL2H4Q.js"),__vite__mapDeps([2,3,4,5]),import.meta.url),GP=()=>Xe(()=>import("./WatchMovie-2GjKqHqG.js"),__vite__mapDeps([6,7]),import.meta.url),JP=()=>Xe(()=>import("./ListBaseType--FGDStgt.js"),__vite__mapDeps([8,9,3,4,10,11,12]),import.meta.url),XP=()=>Xe(()=>import("./ListBaseCategory-B2Y7aBy-.js"),__vite__mapDeps([13,9,10,11,3,4,14]),import.meta.url),YP=()=>Xe(()=>import("./ListBaseNational-C2cgBrxG.js"),__vite__mapDeps([15,9,3,4,10,11,16]),import.meta.url),QP=()=>Xe(()=>import("./Contact-DBVM3jfI.js"),__vite__mapDeps([17,18]),import.meta.url),ZP=()=>Xe(()=>import("./Account-oVsUrRpc.js"),__vite__mapDeps([19,20,21,22]),import.meta.url),e5=()=>Xe(()=>import("./DemoUI-DkOwwDek.js"),[],import.meta.url),t5=()=>Xe(()=>import("./TestImages-C5IXBQKP.js"),[],import.meta.url),r5=()=>Xe(()=>import("./SearchResults-vcuoj3RF.js"),__vite__mapDeps([23,9,24]),import.meta.url),n5=()=>Xe(()=>import("./Pricing-ChWPk8mp.js"),__vite__mapDeps([25,26]),import.meta.url),s5=()=>Xe(()=>import("./Cart-CJM2AchJ.js"),__vite__mapDeps([27,28,29,20,21,30]),import.meta.url),o5=()=>Xe(()=>import("./Checkout-doB7aG2J.js"),__vite__mapDeps([31,32]),import.meta.url),i5=()=>Xe(()=>import("./Admin-a_sHJ5BB.js"),__vite__mapDeps([33,20,21,34]),import.meta.url),a5=()=>Xe(()=>import("./Categories-1HiWL1sj.js"),[],import.meta.url),l5=()=>Xe(()=>import("./Library-BJ7V2MjP.js"),__vite__mapDeps([35,28,29]),import.meta.url),c5=[{path:"/",name:"Welcome",component:eA},{path:"/home",name:"Homepage",component:zP},{path:"/categories",name:"Categories",component:a5},{path:"/library",name:"Library",component:l5},{path:"/pricing",name:"Pricing",component:n5},{path:"/cart",name:"Cart",component:s5},{path:"/checkout",name:"Checkout",component:o5},{path:"/admin",name:"Admin",component:i5},{path:"/netflix",name:"NetflixHome",component:WP},{path:"/demo",name:"DemoUI",component:e5},{path:"/test-images",name:"TestImages",component:t5},{path:"/film/:filmName",name:"MovieDetail",component:KP,props:!0},{path:"/film/:filmName/tap/:tap",name:"WatchMovie",component:GP,props:!0},{path:"/list/:type/page/:pageNumber",name:"ListBaseType",component:JP,props:!0},{path:"/category/:categorySlug?/page/:pageNumber",name:"ListBaseCategory",component:XP,props:!0},{path:"/country/:countrySlug?/page/:pageNumber",name:"ListBaseNational",component:YP,props:!0},{path:"/contact",name:"Contact",component:QP},{path:"/account",name:"Account",component:ZP},{path:"/search",name:"Search",component:r5}],qc=gp({history:op("./"),routes:c5,scrollBehavior(t,e,r){return{top:0,behavior:"smooth"}}});qc.beforeEach((t,e,r)=>{if(["Pricing","Cart","Checkout"].includes(t.name)){const s=JSON.parse(localStorage.getItem("user")||"null"),o=["hient7182@gmail.com","admin@hthree.com"];if(s&&(s.role==="admin"||o.includes(s.email))){console.log(" Admin khng th truy cp trang:",t.name),r({name:"Homepage"});return}}r()});var u5="firebase",d5="11.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Qn(u5,d5,"app");const h5={apiKey:"AIzaSyAiwMHCsSrqX20x8o90R5hksRxUPVmnwKM",authDomain:"hthree-94a3e.firebaseapp.com",projectId:"hthree-94a3e",storageBucket:"hthree-94a3e.firebasestorage.app",messagingSenderId:"917487991713",appId:"1:917487991713:web:68dd73293f38d7fe2229e0",measurementId:"G-9LNBDMVK0M"},f5=Tp(h5),zc=$n(f5);l_(zc,k0).catch(t=>{console.error("Error setting persistence:",t)});const fa=Xf(Y3),Vg=kx();fa.use(qc);fa.use(Vg);const p5=si(Vg);p5.initAuth();qc.beforeEach((t,e,r)=>{const n=t.matched.some(o=>o.meta.requiresAuth),s=zc.currentUser;n&&!s?(console.log("Cha ng nhp (Firebase), chuyn hng v /auth"),r("/auth")):r()});let Ja=!1;_o(zc,t=>{Ja=!!t,fa.config.globalProperties.$isAuthenticated=Ja,console.log("Firebase Auth state changed. isAuthenticated:",Ja)});fa.mount("#app");export{_o as $,mf as A,gs as B,qk as C,Jt as D,Pe as E,ve as F,Vo as G,hP as H,mP as I,Fg as J,Xe as K,A5 as L,Hn as M,OC as N,vP as O,la as P,Dl as Q,fp as R,hf as S,lt as T,Kn as U,Zs as V,Ts as W,rT as X,$n as Y,Ut as Z,pt as _,d as a,wn as a0,m5 as a1,a_ as a2,ha as a3,Qk as a4,si as a5,Gf as a6,Bg as a7,C5 as a8,Oc as a9,Hg as aa,yf as ab,hy as ac,T5 as ad,S5 as ae,Hk as af,ZC as ag,ar as b,x as c,z as d,le as e,$e as f,Zr as g,me as h,J4 as i,Ae as j,Et as k,V as l,fe as m,Te as n,y as o,Hi as p,uc as q,q as r,Le as s,j as t,Gi as u,fy as v,_r as w,Ie as x,Kr as y,Rt as z};
