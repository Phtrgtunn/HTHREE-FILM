const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./index-dFMl2Q0B.js","./index-BIFFyVq5.css"])))=>i.map(i=>d[i]);
import{r as u,k as Y,B as Z,c as r,o as a,d as x,a as e,y as ee,n as $,t as i,_ as te,u as le,j as se,w as oe,x as K,l as y,D as z,E as ae,e as b,G as re,F as N,f as q,H as ne,I as ie,J as ue,K as de,h as ce,L as ve,O as he,g as ge}from"./index-dFMl2Q0B.js";import{M as me}from"./MovieCardRecommended-D4sX9aGI.js";const pe=["data-src","alt"],xe={key:1,class:"absolute inset-0 bg-gray-800 flex items-center justify-center"},fe={class:"text-center p-4"},ye={class:"text-gray-500 text-sm"},be={key:2,class:"absolute inset-0 flex items-center justify-center"},U={__name:"LazyImage",props:{src:{type:String,required:!0},alt:{type:String,default:""},blurDataUrl:{type:String,default:null},imageClass:{type:String,default:"w-full h-full object-cover"},containerClass:{type:String,default:""},showSpinner:{type:Boolean,default:!1},errorText:{type:String,default:"Không tải được ảnh"},rootMargin:{type:String,default:"50px"}},emits:["load","error"],setup(m,{emit:L}){const l=m,w=L,d=u(null),f=u(!1),h=u(!1);let g=null;const C=()=>{if(!d.value)return;const p=d.value,v=p.getAttribute("data-src");v&&(p.src=v)},k=()=>{f.value=!0,w("load")},B=()=>{h.value=!0,f.value=!0,w("error")};return Y(()=>{"IntersectionObserver"in window?(g=new IntersectionObserver(p=>{p.forEach(v=>{v.isIntersecting&&(C(),g&&d.value&&g.unobserve(d.value))})},{rootMargin:l.rootMargin}),d.value&&g.observe(d.value)):C()}),Z(()=>{g&&d.value&&g.unobserve(d.value)}),(p,v)=>(a(),r("div",{class:$(["relative overflow-hidden",m.containerClass])},[f.value?x("",!0):(a(),r("div",{key:0,class:"absolute inset-0 bg-gray-800 animate-pulse",style:ee({backgroundImage:m.blurDataUrl?`url(${m.blurDataUrl})`:"none"})},null,4)),e("img",{ref_key:"imageRef",ref:d,"data-src":m.src,alt:m.alt,class:$([m.imageClass,"transition-opacity duration-500",f.value?"opacity-100":"opacity-0"]),onLoad:k,onError:B},null,42,pe),h.value?(a(),r("div",xe,[e("div",fe,[v[0]||(v[0]=e("svg",{class:"w-12 h-12 text-gray-600 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),e("p",ye,i(m.errorText),1)])])):x("",!0),m.showSpinner&&!f.value&&!h.value?(a(),r("div",be,v[1]||(v[1]=[e("div",{class:"w-8 h-8 border-4 border-gray-600 border-t-yellow-400 rounded-full animate-spin"},null,-1)]))):x("",!0)],2))}},we={class:"min-h-screen bg-gray-900 text-white"},_e={key:0,class:"space-y-8"},ke={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 space-y-8"},Me={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},Ce={class:"lg:col-span-2 space-y-6"},je={class:"lg:col-span-1"},Be={key:2,class:"flex justify-center items-center h-screen text-gray-400"},ze={key:3},$e={class:"relative w-full h-[70vh] min-h-[500px]"},Le={class:"absolute inset-0"},De={key:0,class:"absolute inset-0 z-10 bg-black"},Ve=["src","title"],Ee={key:1,class:"absolute inset-0 flex items-end"},Ae={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pb-12 w-full"},Se={class:"max-w-2xl"},Te={class:"text-4xl md:text-5xl lg:text-6xl font-bold text-white mb-3 drop-shadow-lg"},Ie={class:"flex flex-wrap items-center gap-3 mb-4"},Ne={class:"text-green-400 font-semibold text-lg"},qe={class:"px-3 py-1 border-2 border-gray-400 text-white text-sm font-semibold rounded"},He={class:"text-white"},Pe={class:"flex items-center gap-1"},Re={class:"text-white font-semibold"},Ke={class:"text-gray-200 text-base md:text-lg leading-relaxed mb-6 line-clamp-3"},Ue={class:"flex flex-wrap gap-3"},Oe={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 space-y-8"},Fe={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},Ge={class:"lg:col-span-2 space-y-6"},Xe={class:"bg-gray-800/50 backdrop-blur-sm p-6 rounded-xl border border-gray-700"},Je={class:"text-gray-300 leading-relaxed"},Qe={class:"bg-gray-800/50 backdrop-blur-sm p-6 rounded-xl border border-gray-700"},We={class:"space-y-3"},Ye={key:0},Ze={class:"text-white mt-1"},et={key:1},tt={class:"text-white mt-1"},lt={class:"bg-gradient-to-br from-yellow-500/20 to-orange-500/20 backdrop-blur-sm p-6 rounded-xl border border-yellow-500/30 h-full flex flex-col"},st={class:"space-y-3 text-sm flex-1 flex flex-col justify-center"},ot={class:"flex items-start gap-2"},at={class:"text-white font-semibold"},rt={class:"flex items-start gap-2"},nt={class:"text-white font-semibold"},it={class:"flex items-start gap-2"},ut={class:"text-white font-semibold"},dt={class:"flex items-start gap-2"},ct={class:"text-white font-semibold"},vt={class:"flex items-start gap-2"},ht={class:"text-white font-semibold"},gt={class:"flex items-start gap-2"},mt={class:"text-white font-semibold"},pt={key:0,class:"bg-gray-800/30 backdrop-blur-sm rounded-xl border border-gray-700 p-6"},xt={class:"flex items-center justify-between mb-6"},ft={class:"text-gray-400 text-sm"},yt={class:"space-y-3 max-h-[600px] overflow-y-auto scrollbar-thin scrollbar-thumb-yellow-500 scrollbar-track-gray-700 pr-2"},bt=["onClick"],wt={class:"flex gap-4 p-4"},_t={class:"flex-shrink-0 w-12 flex items-center justify-center"},kt={class:"flex-shrink-0 w-36 h-20 bg-gray-700 rounded-lg overflow-hidden relative"},Mt={class:"flex-1 min-w-0"},Ct={class:"flex items-start justify-between gap-2 mb-2"},jt={class:"text-xs text-gray-400 whitespace-nowrap"},Bt={class:"text-sm text-gray-400 line-clamp-2 leading-relaxed"},zt={key:1,class:"bg-gray-800/30 backdrop-blur-sm rounded-xl border border-gray-700 p-6"},$t={key:0,class:"text-center text-gray-400 py-8"},Lt={key:1,class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"},Dt={class:"bg-gray-800/30 backdrop-blur-sm rounded-xl border border-gray-700 p-6"},Vt={key:0,class:"space-y-4"},Et={key:1,class:"space-y-4"},At={class:"flex gap-3"},St=["src","alt"],Tt={class:"flex-1"},It={class:"flex items-center gap-2 mb-1"},Nt={class:"text-white font-semibold"},qt={class:"text-gray-500 text-xs"},Ht={class:"text-gray-300 leading-relaxed"},Pt={class:"flex items-center gap-4 mt-2"},Rt={class:"text-gray-400 hover:text-yellow-400 text-sm flex items-center gap-1 transition-colors"},Kt={key:2,class:"text-center py-12 bg-gray-800/30 rounded-lg border border-gray-700"},Ut={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm",role:"dialog","aria-labelledby":"trailer-title"},Ot={class:"bg-gray-900 text-white rounded-xl shadow-2xl p-8 w-full max-w-4xl relative"},Ft={id:"trailer-title",class:"text-2xl font-semibold mb-4"},Gt={key:0,class:"aspect-video w-full"},Xt=["src","title"],Jt={key:1,class:"text-gray-400 text-center"},Qt={__name:"MovieDetail",setup(m){const L=le();ge();const l=u(null),w=u(!0),d=u(null),f=u(!1),h=u(L.params.filmName),g=u([]),C=u(!1),k=u([]),B=u(!1),p=u(!1),v=u(null),D=u(""),j=u(""),_=u([]),O=se(()=>{const s=[{label:"Trang chủ",to:"/home"}];return l.value&&(l.value.type==="single"?s.push({label:"Phim Lẻ",to:"/list/phim-le/page/1"}):l.value.type==="series"&&s.push({label:"Phim Bộ",to:"/list/phim-bo/page/1"}),s.push({label:l.value.title,to:`/film/${h.value}`})),s}),F=s=>{if(!s)return null;const t=s.match(/(?:youtube\.com\/(?:watch\?v=|embed\/)|youtu\.be\/)([\w-]+)/);return t?`https://www.youtube.com/embed/${t[1]}`:null},V=u(null),H=async()=>{var s,t,o,c;w.value=!0,d.value=null,l.value=null,_.value=[],console.log("moviedetail.vue: Bắt đầu fetchMovieDetail. filmSlug:",h.value);try{if(!h.value){console.warn("moviedetail.vue: filmSlug không có giá trị, không thể fetch."),d.value="URL phim không hợp lệ.",w.value=!1;return}const A=await(await ie(async()=>{const{default:T}=await import("./index-dFMl2Q0B.js").then(I=>I.ab);return{default:T}},__vite__mapDeps([0,1]),import.meta.url)).default.get(`https://phimapi.com/phim/${h.value}`),n=A.data.movie,S=A.data.episodes||[];if(console.log("moviedetail.vue: API response:",A.data),n){l.value={id:n._id,title:n.name,original_title:n.origin_name,slug:n.slug,overview:n.content,poster_path:n.poster_url,backdrop_path:n.thumb_url,release_date:n.year?`${n.year}-01-01`:null,vote_average:((s=n.tmdb)==null?void 0:s.vote_average)||0,vote_count:((t=n.tmdb)==null?void 0:t.vote_count)||0,runtime:n.time,genres:((o=n.category)==null?void 0:o.map(M=>M.name))||[],country:((c=n.country)==null?void 0:c.map(M=>M.name))||[],actor:n.actor||[],director:n.director||[],quality:n.quality,lang:n.lang,episode_current:n.episode_current,episode_total:n.episode_total,trailer_url:n.trailer_url,type:n.type,year:n.year,status:n.status,chieurap:n.chieurap},S.length>0&&S[0].server_data&&(_.value=S[0].server_data),V.value=F(l.value.trailer_url),console.log("moviedetail.vue: Đã tải thành công dữ liệu phim:",l.value),console.log("moviedetail.vue: Episodes:",_.value);const T=ue({name:l.value.title,origin_name:l.value.original_title,content:l.value.overview,quality:l.value.quality,category:l.value.genres.map(M=>({name:M})),poster_url:l.value.poster_path,thumb_url:l.value.backdrop_path,slug:l.value.slug}),{updateMeta:I,setMovieStructuredData:W}=de(T);I(),W({name:l.value.title,origin_name:l.value.original_title,content:l.value.overview,poster_url:l.value.poster_path,thumb_url:l.value.backdrop_path,year:l.value.year,category:l.value.genres.map(M=>({name:M})),quality:l.value.quality,lang:l.value.lang,rating:l.value.vote_average}),l.value.genres&&l.value.genres.length>0&&G(l.value.genres,l.value.id),P()}else d.value="Không tìm thấy thông tin phim với slug này.",console.warn("moviedetail.vue: API không trả về dữ liệu phim.")}catch(E){console.error("moviedetail.vue: Lỗi không xác định khi fetch chi tiết phim:",E),d.value="Không thể tải thông tin phim. Vui lòng thử lại sau."}finally{w.value=!1,console.log("moviedetail.vue: Kết thúc fetchMovieDetail. Loading:",w.value,"Error:",d.value)}},G=async(s,t)=>{C.value=!0,g.value=[];try{const{data:o,error:c}=await he.from("movies").select("*").overlaps("genres",s).not("id","eq",t).order("vote_average",{ascending:!1}).limit(4);c?console.error("Lỗi khi fetch phim liên quan:",c):(g.value=o||[],console.log("moviedetail.vue: Phim liên quan đã tải:",g.value))}catch(o){console.error("Lỗi không xác định khi fetch phim liên quan:",o)}finally{C.value=!1}},P=async()=>{if(h.value){B.value=!0;try{const s=await ce.get(`${ve.BACKEND_URL}/comments.php`,{params:{type:"movie",movie_slug:h.value,limit:20}});s.data.success&&(k.value=s.data.comments||[],console.log("✅ Comments loaded:",k.value.length))}catch(s){console.error("❌ Error fetching comments:",s),k.value=[]}finally{B.value=!1}}},X=s=>{const t=new Date(s),c=Math.floor((new Date-t)/1e3);return c<60?"Vừa xong":c<3600?`${Math.floor(c/60)} phút trước`:c<86400?`${Math.floor(c/3600)} giờ trước`:c<604800?`${Math.floor(c/86400)} ngày trước`:t.toLocaleDateString("vi-VN")};oe(()=>L.params.filmName,s=>{h.value=s,console.log("moviedetail.vue: route.params.filmName đã thay đổi thành:",s),h.value&&H()},{immediate:!0});const J=()=>{if(!l.value||_.value.length===0)return;const s=_.value[0];R(s),window.scrollTo({top:0,behavior:"smooth"})},R=s=>{!s||!s.link_embed||(v.value=s.link_embed,D.value=s.name,j.value=s.slug,p.value=!0,window.scrollTo({top:0,behavior:"smooth"}))},Q=()=>{p.value=!1,v.value=null,D.value="",j.value=""};return(s,t)=>(a(),r("div",we,[w.value?(a(),r("div",_e,[y(z,{type:"hero"}),e("div",ke,[e("div",Me,[e("div",Ce,[y(z,{type:"list",count:2})]),e("div",je,[y(z,{type:"card"})])]),y(z,{type:"list",count:5})])])):d.value?(a(),K(ae,{key:1,"error-title":"Không thể tải phim","error-message":d.value,onRetry:H},null,8,["error-message"])):l.value?(a(),r("div",ze,[e("div",$e,[e("div",Le,[y(U,{src:l.value.backdrop_path||l.value.poster_path||"https://placehold.co/1920x1080/1f2937/fbbf24?text=No+Image",alt:l.value.title,"image-class":"w-full h-full object-cover","error-text":"Không tải được ảnh nền"},null,8,["src","alt"]),t[3]||(t[3]=e("div",{class:"absolute inset-0 bg-gradient-to-t from-gray-900 via-gray-900/60 to-transparent"},null,-1)),t[4]||(t[4]=e("div",{class:"absolute inset-0 bg-gradient-to-r from-gray-900 via-transparent to-transparent"},null,-1))]),p.value&&v.value?(a(),r("div",De,[e("iframe",{src:v.value,title:`Xem ${l.value.title} ${D.value}`,class:"w-full h-full",frameborder:"0",allowfullscreen:"",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"},null,8,Ve),e("button",{onClick:Q,class:"absolute top-4 right-4 bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg transition-colors flex items-center gap-2 shadow-lg z-20"},t[5]||(t[5]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8 7a1 1 0 00-1 1v4a1 1 0 001 1h4a1 1 0 001-1V8a1 1 0 00-1-1H8z","clip-rule":"evenodd"})],-1),b(" Đóng ")]))])):x("",!0),p.value?x("",!0):(a(),r("div",Ee,[e("div",Ae,[e("div",Se,[e("h1",Te,i(l.value.title),1),e("div",Ie,[e("span",Ne,i(l.value.year),1),t[7]||(t[7]=e("span",{class:"text-white"},"•",-1)),e("span",qe,i(l.value.quality||"HD"),1),t[8]||(t[8]=e("span",{class:"text-white"},"•",-1)),e("span",He,i(l.value.episode_current||"Full"),1),t[9]||(t[9]=e("span",{class:"text-white"},"•",-1)),e("div",Pe,[t[6]||(t[6]=e("svg",{class:"w-5 h-5 text-yellow-400",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})],-1)),e("span",Re,i(l.value.vote_average||"N/A"),1)])]),e("p",Ke,i(l.value.overview),1),e("div",Ue,[e("button",{onClick:J,class:"bg-white hover:bg-yellow-400 text-black font-bold py-3 px-8 rounded-md transition-all duration-300 flex items-center gap-3 shadow-lg hover:shadow-yellow-500/50 text-lg transform hover:scale-105"},t[10]||(t[10]=[e("svg",{class:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M6.3 2.841A1.5 1.5 0 004 4.11V15.89a1.5 1.5 0 002.3 1.269l9.344-5.89a1.5 1.5 0 000-2.538L6.3 2.84z"})],-1),b(" Phát ")])),e("button",{onClick:t[0]||(t[0]=o=>f.value=!0),class:"bg-gray-600/80 hover:bg-gray-500/80 backdrop-blur-sm text-white font-semibold py-3 px-6 rounded-md transition-all duration-300 flex items-center gap-2 hover:scale-105"},t[11]||(t[11]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),b(" Thông tin ")]))])])])]))]),e("div",Oe,[y(re,{items:O.value},null,8,["items"]),e("div",Fe,[e("div",Ge,[e("div",Xe,[t[12]||(t[12]=e("h2",{class:"text-2xl font-bold text-white mb-4 flex items-center gap-2"},[e("svg",{class:"w-6 h-6 text-yellow-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]),b(" Giới thiệu ")],-1)),e("p",Je,i(l.value.overview),1)]),e("div",Qe,[t[15]||(t[15]=e("h2",{class:"text-2xl font-bold text-white mb-4 flex items-center gap-2"},[e("svg",{class:"w-6 h-6 text-yellow-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})]),b(" Diễn viên & Đạo diễn ")],-1)),e("div",We,[l.value.actor&&l.value.actor.length?(a(),r("div",Ye,[t[13]||(t[13]=e("span",{class:"text-gray-400 font-semibold"},"Diễn viên:",-1)),e("p",Ze,i(l.value.actor.join(", ")),1)])):x("",!0),l.value.director&&l.value.director.length?(a(),r("div",et,[t[14]||(t[14]=e("span",{class:"text-gray-400 font-semibold"},"Đạo diễn:",-1)),e("p",tt,i(l.value.director.join(", ")),1)])):x("",!0)])])]),e("div",null,[e("div",lt,[t[28]||(t[28]=e("h3",{class:"text-xl font-bold text-yellow-400 mb-4"},"Thông tin",-1)),e("div",st,[e("div",ot,[t[17]||(t[17]=e("svg",{class:"w-5 h-5 text-yellow-400 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})],-1)),e("div",null,[t[16]||(t[16]=e("span",{class:"text-gray-400"},"Thể loại:",-1)),e("p",at,i(l.value.genres&&l.value.genres.length>0?l.value.genres.join(", "):"N/A"),1)])]),e("div",rt,[t[19]||(t[19]=e("svg",{class:"w-5 h-5 text-yellow-400 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("div",null,[t[18]||(t[18]=e("span",{class:"text-gray-400"},"Thời lượng:",-1)),e("p",nt,i(l.value.runtime||"N/A"),1)])]),e("div",it,[t[21]||(t[21]=e("svg",{class:"w-5 h-5 text-yellow-400 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("div",null,[t[20]||(t[20]=e("span",{class:"text-gray-400"},"Quốc gia:",-1)),e("p",ut,i(l.value.country&&l.value.country.length>0?l.value.country.join(", "):"N/A"),1)])]),e("div",dt,[t[23]||(t[23]=e("svg",{class:"w-5 h-5 text-yellow-400 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("div",null,[t[22]||(t[22]=e("span",{class:"text-gray-400"},"Chất lượng:",-1)),e("p",ct,i(l.value.quality||"HD"),1)])]),e("div",vt,[t[25]||(t[25]=e("svg",{class:"w-5 h-5 text-yellow-400 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 5h12M9 3v2m1.048 9.5A18.022 18.022 0 016.412 9m6.088 9h7M11 21l5-10 5 10M12.751 5C11.783 10.77 8.07 15.61 3 18.129"})],-1)),e("div",null,[t[24]||(t[24]=e("span",{class:"text-gray-400"},"Ngôn ngữ:",-1)),e("p",ht,i(l.value.lang||"Vietsub"),1)])]),e("div",gt,[t[27]||(t[27]=e("svg",{class:"w-5 h-5 text-yellow-400 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})],-1)),e("div",null,[t[26]||(t[26]=e("span",{class:"text-gray-400"},"Tình trạng:",-1)),e("p",mt,i(l.value.status||"Đang cập nhật"),1)])])])])])]),_.value.length>0?(a(),r("div",pt,[e("div",xt,[t[29]||(t[29]=e("h2",{class:"text-2xl font-bold text-white flex items-center gap-2"},[e("svg",{class:"w-6 h-6 text-yellow-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})]),b(" Tập phim ")],-1)),e("span",ft,i(_.value.length)+" tập",1)]),e("div",yt,[(a(!0),r(N,null,q(_.value,(o,c)=>(a(),r("div",{key:c,onClick:E=>R(o),class:$([{"border-l-4 border-yellow-500 bg-gray-700/50":j.value===o.slug,"border-l-4 border-transparent":j.value!==o.slug},"bg-gray-800/50 hover:bg-gray-700/50 rounded-lg overflow-hidden cursor-pointer transition-all duration-300 group"])},[e("div",wt,[e("div",_t,[e("span",{class:$(["text-2xl font-bold transition-colors",j.value===o.slug?"text-yellow-400":"text-gray-500 group-hover:text-white"])},i(c+1),3)]),e("div",kt,[y(U,{src:l.value.backdrop_path||l.value.poster_path||"https://placehold.co/160x90/374151/fbbf24?text="+(c+1),alt:`${o.name} thumbnail`,"image-class":"w-full h-full object-cover","container-class":"w-full h-full"},null,8,["src","alt"]),t[30]||(t[30]=e("div",{class:"absolute inset-0 bg-black/60 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity"},[e("div",{class:"w-12 h-12 bg-white/90 rounded-full flex items-center justify-center"},[e("svg",{class:"w-6 h-6 text-black ml-1",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M6.3 2.841A1.5 1.5 0 004 4.11V15.89a1.5 1.5 0 002.3 1.269l9.344-5.89a1.5 1.5 0 000-2.538L6.3 2.84z"})])])],-1))]),e("div",Mt,[e("div",Ct,[e("h3",{class:$(["font-bold text-base transition-colors",j.value===o.slug?"text-yellow-400":"text-white group-hover:text-yellow-400"])},i(o.name),3),e("span",jt,i(l.value.runtime||"56 phút"),1)]),e("p",Bt,i(l.value.overview?l.value.overview.substring(0,120)+"...":"Xem ngay để khám phá nội dung hấp dẫn của tập phim này."),1)])])],10,bt))),128))])])):x("",!0),g.value.length>0?(a(),r("div",zt,[t[32]||(t[32]=e("h2",{class:"text-2xl font-bold text-white mb-6 flex items-center gap-2"},[e("svg",{class:"w-6 h-6 text-yellow-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 4v16M17 4v16M3 8h4m10 0h4M3 12h18M3 16h4m10 0h4M4 20h16a1 1 0 001-1V5a1 1 0 00-1-1H4a1 1 0 00-1 1v14a1 1 0 001 1z"})]),b(" Phim liên quan ")],-1)),C.value?(a(),r("div",$t,t[31]||(t[31]=[e("svg",{class:"animate-spin h-8 w-8 text-yellow-400 mx-auto mb-2",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),b(" Đang tải... ")]))):(a(),r("div",Lt,[(a(!0),r(N,null,q(g.value,o=>(a(),K(me,{key:o.id,movie:o,trending:!1},null,8,["movie"]))),128))]))])):x("",!0),e("div",Dt,[t[35]||(t[35]=e("h2",{class:"text-2xl font-bold text-white mb-6 flex items-center gap-2"},[e("svg",{class:"w-6 h-6 text-yellow-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})]),b(" Bình luận ")],-1)),y(ne,{"movie-slug":h.value,onCommentAdded:P,class:"mb-6"},null,8,["movie-slug"]),B.value?(a(),r("div",Vt,[y(z,{type:"list",count:3})])):k.value.length>0?(a(),r("div",Et,[(a(!0),r(N,null,q(k.value,o=>(a(),r("div",{key:o.id,class:"bg-gray-800/50 rounded-lg p-4 border border-gray-700 hover:border-gray-600 transition-colors"},[e("div",At,[e("img",{src:o.avatar||`https://ui-avatars.com/api/?name=${encodeURIComponent(o.full_name||"User")}&background=f59e0b&color=000`,alt:o.full_name,class:"w-10 h-10 rounded-full flex-shrink-0"},null,8,St),e("div",Tt,[e("div",It,[e("span",Nt,i(o.full_name||o.username),1),e("span",qt,i(o.time_ago||X(o.created_at)),1)]),e("p",Ht,i(o.content),1),e("div",Pt,[e("button",Rt,[t[33]||(t[33]=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M14 10h4.764a2 2 0 011.789 2.894l-3.5 7A2 2 0 0115.263 21h-4.017c-.163 0-.326-.02-.485-.06L7 20m7-10V5a2 2 0 00-2-2h-.095c-.5 0-.905.405-.905.905 0 .714-.211 1.412-.608 2.006L7 11v9m7-10h-2M7 20H5a2 2 0 01-2-2v-6a2 2 0 012-2h2.5"})],-1)),e("span",null,i(o.likes||0),1)])])])])]))),128))])):(a(),r("div",Kt,t[34]||(t[34]=[e("svg",{class:"w-16 h-16 text-gray-600 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})],-1),e("p",{class:"text-gray-400"},"Chưa có bình luận nào. Hãy là người đầu tiên!",-1)])))])]),f.value?(a(),r("div",Ut,[e("div",Ot,[e("button",{onClick:t[1]||(t[1]=o=>f.value=!1),class:"absolute top-4 right-4 text-white text-3xl hover:text-yellow-400 transition-colors","aria-label":"Đóng trailer"}," × "),e("h2",Ft,"Trailer: "+i(l.value.title),1),V.value?(a(),r("div",Gt,[e("iframe",{src:V.value,title:`Trailer - ${l.value.title}`,class:"w-full h-full rounded-lg",frameborder:"0",allowfullscreen:"",loading:"lazy"},null,8,Xt)])):(a(),r("p",Jt,"Không có trailer."))])])):x("",!0)])):(a(),r("div",Be,t[2]||(t[2]=[e("p",{class:"text-xl font-semibold"},"Không tìm thấy thông tin phim hoặc không tải được dữ liệu.",-1)])))]))}},Zt=te(Qt,[["__scopeId","data-v-8debd4ce"]]);export{Zt as default};
