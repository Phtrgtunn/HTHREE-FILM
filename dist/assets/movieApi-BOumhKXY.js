import{h}from"./index-gf5CXO_P.js";import{a as y}from"./useErrorHandler-svuVN1QS.js";const m=!1,_="https://phimapi.com/v1/api",S=async(r={})=>{const{type_list:g="phim-bo",page:a=1,sort_field:l="_id",sort_type:p="desc",sort_lang:e,category:n,country:s,year:i,limit:c=20}=r;try{if(!m){const t=new URLSearchParams({page:a.toString(),sort_field:l,sort_type:p,limit:c.toString()});e&&t.append("sort_lang",e),n&&t.append("category",n),s&&t.append("country",s),i&&t.append("year",i.toString());const o=`${_}/danh-sach/${g}?${t.toString()}`;return console.log("üì° Fetching movies:",o),await y.get(o,async()=>(await h.get(o)).data,5*60*1e3)}}catch(t){throw console.error("‚ùå Error fetching movies:",t),t}},v=r=>({...r,backdrop_path:r.thumb_url||"https://placehold.co/400x600/1a1a1a/fff?text=No+Image",poster_path:r.poster_url||r.thumb_url,title:r.name,original_title:r.origin_name}),w=async(r,g={})=>{try{const{page:a=1,limit:l=20,sort_field:p,sort_type:e,sort_lang:n,category:s,country:i,year:c}=g,t=new URLSearchParams({keyword:r,page:a.toString(),limit:l.toString()});p&&t.append("sort_field",p),e&&t.append("sort_type",e),n&&t.append("sort_lang",n),s&&t.append("category",s),i&&t.append("country",i),c&&t.append("year",c.toString());const o=m?`${_}/search.php?${t.toString()}`:`https://phimapi.com/v1/api/tim-kiem?${t.toString()}`;return console.log("üîç Searching movies:",o),await y.get(o,async()=>(await h.get(o)).data,2*60*1e3)}catch(a){throw console.error("‚ùå Error searching movies:",a),a}};export{S as getMovieList,v as mapMovieData,w as searchMovies};
