import{_ as g,j as u,w as h,x as f,d as x,o as c,m as v,a as s,t as i,c as p,F as y,f as w,n as M,s as b,R as k,a8 as d,U as m}from"./index-BdBw76LB.js";const C={class:"text-white bg-[#da966e] text-xs px-2 py-1 rounded-sm h-fit font-bold min-w-[28px] text-center"},R=["src","alt"],S={class:"flex flex-col text-gray-100 text-sm flex-grow"},L=["title"],_={class:"text-xs text-gray-400 mt-1"},E={class:"flex text-yellow-400 mt-1"},I={__name:"Rank",props:{trendingMovie:{type:Object,default:null},index:{type:Number,required:!0}},setup(e){const o=e,n=u(()=>{var t;return Math.round(((t=o.trendingMovie)==null?void 0:t.vote_average)/2||0)});return h(()=>o.trendingMovie,t=>{t?(console.log(`Rank.vue (Index ${o.index}): trendingMovie received:`,t),console.log(`Rank.vue (Index ${o.index}): poster_path:`,t.backdrop_path),console.log(`Rank.vue (Index ${o.index}): title:`,t.title)):console.log(`Rank.vue (Index ${o.index}): trendingMovie is null.`)},{immediate:!0}),(t,r)=>{var a;return e.trendingMovie?(c(),f(b(k),{key:0,to:`/film/${(a=e.trendingMovie)==null?void 0:a.slug}`,class:"flex items-start gap-3 mb-4 p-2 rounded-lg transition-colors duration-200 hover:bg-gray-600 cursor-pointer"},{default:v(()=>[s("span",C,i(e.index+1),1),s("img",{src:e.trendingMovie.backdrop_path,alt:e.trendingMovie.title||"Movie Thumbnail",class:"w-[55px] h-[70px] object-cover rounded shadow",onerror:"this.onerror=null;this.src='https://placehold.co/55x70/ccc/fff?text=No+Img';"},null,8,R),s("div",S,[s("span",{class:"font-semibold leading-tight break-words",title:e.trendingMovie.title},i(e.trendingMovie.title),9,L),s("span",_,i(e.trendingMovie.year),1),s("div",E,[(c(),p(y,null,w(5,l=>s("svg",{key:l,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 576 512",class:M([l<=n.value?"text-yellow-400":"text-gray-500","w-3 h-3 mr-0.5"]),fill:"currentColor"},r[0]||(r[0]=[s("path",{d:"M316.9 18.6L225.4 150.3 49.9 171.6c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l129.9 68.3c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6L350.6 150.3 259.1 18.6c-10.7-20.9-39.1-20.9-49.8 0z"},null,-1)]),2)),64))])])]),_:1},8,["to"])):x("",!0)}}},$=g(I,[["__scopeId","data-v-782ffcc8"]]),A=d("recommendedMovies",{state:()=>({recommended:[],loading:!1,error:null}),actions:{async getRecommendedMovies(){this.loading=!0,this.error=null;try{const{data:e,error:o}=await m.from("movies").select("*").order("vote_average",{ascending:!1}).limit(25);if(o)throw o;this.recommended=e||[],console.log("Pinia Store 'recommendedMovies': Phim đề cử đã tải từ Supabase:",this.recommended)}catch(e){console.error("Lỗi khi lấy phim đề cử từ Supabase (Pinia Store):",e),this.error=e.message}finally{this.loading=!1}},setRecommendedMovies(e){this.loading=!1,this.error=null,this.recommended=e,console.log("Pinia Store 'recommendedMovies': Dữ liệu phim đề cử đã được đặt thủ công:",this.recommended)},setLoading(e){this.loading=e},setError(e){this.error=e}},getters:{getRecommended:e=>e.recommended,getLoading:e=>e.loading,getError:e=>e.error}}),N=d("country",{state:()=>({countries:[],loading:!1,error:null}),actions:{async getCountry(){this.loading=!0,this.error=null;try{const{data:e,error:o}=await m.from("movies").select("country");if(o)throw o;let n=new Set;e&&e.forEach(t=>{t.country&&Array.isArray(t.country)&&t.country.forEach(r=>{typeof r=="string"&&r.trim()!==""&&n.add(r.trim())})}),this.countries=Array.from(n).map(t=>({name:t,slug:t.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"")})).sort((t,r)=>t.name.localeCompare(r.name)),console.log("Country Store: Đã tải countries từ Supabase (từ bảng movies):",this.countries)}catch(e){console.error("Error fetching countries from Supabase (from movies table):",e.message),this.error=e.message,this.countries=[]}finally{this.loading=!1}}},getters:{getAllCountries:e=>e.countries,filterCountries:e=>o=>o?e.countries.filter(n=>n.name.toLowerCase().includes(o.toLowerCase())):e.countries,getLoading:e=>e.loading,getError:e=>e.error}});export{$ as R,N as a,A as u};
