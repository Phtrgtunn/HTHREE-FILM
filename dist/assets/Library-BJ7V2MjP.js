import{a9 as ot,r as W,j as m,a0 as v,p as st,c as g,o as i,a as e,x as X,d as z,ab as at,n as D,A as Y,t as C,m as lt,e as N,u as rt,w as J,k as nt,l as it,s as h,F as q,f as I,z as Q,y as ct,a7 as ut,a3 as dt,g as ht}from"./index-6NOOzFJX.js";import{u as gt,U as vt}from"./UndoSnackbar-CARr9Abi.js";const ft=ot("library",()=>{const a=W([]),f=W([]),c=W([]),u=W(!1),d=W(null),b=m(()=>a.value.length),$=m(()=>f.value.length),H=m(()=>c.value.length),p=t=>{try{const o=localStorage.getItem(t);return o?JSON.parse(o):[]}catch(o){return console.error(`Error reading ${t} from localStorage:`,o),[]}},M=(t,o)=>{try{localStorage.setItem(t,JSON.stringify(o))}catch(S){console.error(`Error saving ${t} to localStorage:`,S)}},k=async()=>{u.value=!0,d.value=null;try{a.value=p("library_favorites"),f.value=p("library_watchlist"),c.value=p("library_continue")}catch(t){d.value=t.message,console.error("Error loading library:",t)}finally{u.value=!1}},y=t=>a.value.some(o=>o.id===t||o.slug===t),_=async t=>{try{if(y(t.id||t.slug)){console.log("Movie already in favorites");return}const o={id:t.id||t.slug,slug:t.slug,title:t.name||t.title,poster:t.poster_url||t.poster,year:t.year,quality:t.quality,addedAt:new Date().toISOString()};return a.value.unshift(o),M("library_favorites",a.value),!0}catch(o){return d.value=o.message,console.error("Error adding to favorites:",o),!1}},E=async t=>{try{return a.value=a.value.filter(o=>o.id!==t&&o.slug!==t),M("library_favorites",a.value),!0}catch(o){return d.value=o.message,console.error("Error removing from favorites:",o),!1}},j=async t=>y(t.id||t.slug)?await E(t.id||t.slug):await _(t),B=t=>f.value.some(o=>o.id===t||o.slug===t),T=async t=>{try{if(B(t.id||t.slug)){console.log("Movie already in watchlist");return}const o={id:t.id||t.slug,slug:t.slug,title:t.name||t.title,poster:t.poster_url||t.poster,year:t.year,quality:t.quality,addedAt:new Date().toISOString()};return f.value.unshift(o),M("library_watchlist",f.value),!0}catch(o){return d.value=o.message,console.error("Error adding to watchlist:",o),!1}},x=async t=>{try{return f.value=f.value.filter(o=>o.id!==t&&o.slug!==t),M("library_watchlist",f.value),!0}catch(o){return d.value=o.message,console.error("Error removing from watchlist:",o),!1}};return{favorites:a,watchlist:f,continueWatching:c,loading:u,error:d,favoritesCount:b,watchlistCount:$,continueWatchingCount:H,loadAll:k,isFavorite:y,addToFavorites:_,removeFromFavorites:E,toggleFavorite:j,isInWatchlist:B,addToWatchlist:T,removeFromWatchlist:x,toggleWatchlist:async t=>B(t.id||t.slug)?await x(t.id||t.slug):await T(t),isInContinue:t=>c.value.some(o=>o.id===t||o.slug===t),saveContinueWatching:async(t,o,S=0)=>{try{c.value=c.value.filter(A=>A.id!==(t.id||t.slug)&&A.slug!==t.slug);const V={id:t.id||t.slug,slug:t.slug,title:t.name||t.title,poster:t.poster_url||t.poster,year:t.year,quality:t.quality,progress:Math.round(o),currentTime:Math.round(S),lastWatched:new Date().toISOString()};return c.value.unshift(V),c.value.length>20&&(c.value=c.value.slice(0,20)),M("library_continue",c.value),!0}catch(V){return d.value=V.message,console.error("Error saving continue watching:",V),!1}},getContinueProgress:t=>{const o=c.value.find(S=>S.id===t||S.slug===t);return o?{progress:o.progress,currentTime:o.currentTime}:null},removeFromContinue:async t=>{try{return c.value=c.value.filter(o=>o.id!==t&&o.slug!==t),M("library_continue",c.value),!0}catch(o){return d.value=o.message,console.error("Error removing from continue:",o),!1}},clearAll:()=>{a.value=[],f.value=[],c.value=[],localStorage.removeItem("library_favorites"),localStorage.removeItem("library_watchlist"),localStorage.removeItem("library_continue")}}});function pt(){const a=W(new Set),f=W(!1),c=()=>{f.value=!f.value,f.value||b()},u=k=>{a.value.has(k)?a.value.delete(k):a.value.add(k),a.value=new Set(a.value)},d=k=>{k.forEach(y=>{a.value.add(y.id||y)}),a.value=new Set(a.value)},b=()=>{a.value.clear(),a.value=new Set},$=k=>a.value.has(k),H=m(()=>a.value.size),p=m(()=>Array.from(a.value)),M=m(()=>a.value.size>0);return{selectedItems:a,isSelectionMode:f,selectedCount:H,selectedArray:p,hasSelection:M,toggleSelectionMode:c,toggleItem:u,selectAll:d,clearSelection:b,isSelected:$}}const yt={class:"text-center py-20"},xt={class:"flex justify-center mb-6"},mt={class:"text-2xl font-bold text-white mb-3"},bt={class:"text-gray-400 text-base mb-8 max-w-md mx-auto"},K={__name:"EmptyState",props:{icon:{type:String,default:"box",validator:a=>["heart","list","clock","box","search","film","user","cart"].includes(a)},title:{type:String,required:!0},description:{type:String,required:!0},actionText:{type:String,default:"Khám phá ngay"},actionLink:{type:String,default:null}},setup(a){const f=a,c={heart:()=>v("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[v("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})]),list:()=>v("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[v("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})]),clock:()=>v("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[v("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})]),box:()=>v("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[v("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})]),search:()=>v("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[v("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})]),film:()=>v("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[v("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 4v16M17 4v16M3 8h4m10 0h4M3 12h18M3 16h4m10 0h4M4 20h16a1 1 0 001-1V5a1 1 0 00-1-1H4a1 1 0 00-1 1v14a1 1 0 001 1z"})]),user:()=>v("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[v("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})]),cart:()=>v("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[v("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})])},u=m(()=>c[f.icon]),d=m(()=>({heart:"bg-red-500/20",list:"bg-blue-500/20",clock:"bg-yellow-500/20",box:"bg-gray-500/20",search:"bg-purple-500/20",film:"bg-green-500/20",user:"bg-indigo-500/20",cart:"bg-orange-500/20"})[f.icon]),b=m(()=>({heart:"text-red-400",list:"text-blue-400",clock:"text-yellow-400",box:"text-gray-400",search:"text-purple-400",film:"text-green-400",user:"text-indigo-400",cart:"text-orange-400"})[f.icon]);return($,H)=>{const p=st("router-link");return i(),g("div",yt,[e("div",xt,[e("div",{class:D(["w-24 h-24 rounded-full flex items-center justify-center",d.value])},[(i(),X(Y(u.value),{class:D(["w-12 h-12",b.value])},null,8,["class"]))],2)]),e("h3",mt,C(a.title),1),e("p",bt,C(a.description),1),a.actionLink?(i(),X(p,{key:0,to:a.actionLink,class:"inline-flex items-center gap-2 bg-yellow-500 text-black px-6 py-3 rounded-lg font-semibold hover:bg-yellow-600 transition-all hover:scale-105 shadow-lg"},{default:lt(()=>[N(C(a.actionText)+" ",1),H[0]||(H[0]=e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))]),_:1},8,["to"])):z("",!0),at($.$slots,"action")])}}},wt={class:"min-h-screen bg-gradient-to-b from-gray-900 via-black to-gray-900 pt-24 pb-16"},kt={class:"container mx-auto px-4 sm:px-6 lg:px-8"},_t={class:"flex gap-2 mb-8 border-b border-gray-800 overflow-x-auto"},Ct=["onClick"],Mt={class:"flex items-center gap-2"},St={key:0,class:"absolute bottom-0 left-0 right-0 h-0.5 bg-yellow-400"},zt={class:"mt-8"},$t={key:0,class:"space-y-6"},Bt={key:0,class:"flex items-center justify-between bg-gray-800 rounded-lg px-4 py-3"},Tt={class:"flex items-center gap-4"},Ft={class:"flex items-center gap-2 cursor-pointer"},Lt=["checked"],Ht={class:"text-white text-sm font-medium"},Wt={key:0,class:"flex items-center gap-2"},Vt={key:2,class:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4"},Xt={class:"absolute top-2 left-2 z-10"},Et=["checked","onChange"],jt=["src","alt"],At={class:"absolute inset-0 bg-gradient-to-t from-black/90 via-black/50 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"},qt={class:"absolute bottom-0 left-0 right-0 p-4"},It={class:"text-white font-semibold text-sm mb-2"},Dt={class:"flex gap-2"},Ut=["onClick"],Kt=["onClick"],Nt={key:1,class:"space-y-6"},Rt={key:0,class:"flex items-center justify-between bg-gray-800 rounded-lg px-4 py-3"},Ot={class:"flex items-center gap-4"},Pt={class:"flex items-center gap-2 cursor-pointer"},Jt=["checked"],Qt={class:"text-white text-sm font-medium"},Yt={key:0,class:"flex items-center gap-2"},Gt={key:2,class:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4"},Zt={class:"absolute top-2 left-2 z-10"},te=["checked","onChange"],ee=["src","alt"],oe={class:"absolute inset-0 bg-gradient-to-t from-black/90 via-black/50 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"},se={class:"absolute bottom-0 left-0 right-0 p-4"},ae={class:"text-white font-semibold text-sm mb-2"},le={class:"flex gap-2"},re=["onClick"],ne=["onClick"],ie={key:2,class:"space-y-6"},ce={key:1,class:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4"},ue=["src","alt"],de={class:"absolute bottom-0 left-0 right-0 h-1 bg-gray-700"},he={class:"absolute inset-0 bg-gradient-to-t from-black/90 via-black/50 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"},ge={class:"absolute bottom-0 left-0 right-0 p-4"},ve={class:"text-white font-semibold text-sm mb-1"},fe={class:"text-gray-400 text-xs mb-2"},pe={class:"flex gap-2"},ye=["onClick"],xe=["onClick"],we={__name:"Library",setup(a){const f=ht(),c=rt(),u=ft(),d=dt(),{confirm:b}=ut(),{showUndo:$,undoMessage:H,triggerUndo:p,handleUndo:M,closeUndo:k}=gt(),{selectedItems:y,isSelected:_,toggleSelection:E,selectAll:j,deselectAll:B,hasSelection:T}=pt(),x=W(c.query.tab||"favorites"),R=()=>v("svg",{class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20"},[v("path",{"fill-rule":"evenodd",d:"M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z","clip-rule":"evenodd"})]),O=()=>v("svg",{class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20"},[v("path",{d:"M7 3a1 1 0 000 2h6a1 1 0 100-2H7zM4 7a1 1 0 011-1h10a1 1 0 110 2H5a1 1 0 01-1-1zM2 11a2 2 0 012-2h12a2 2 0 012 2v4a2 2 0 01-2 2H4a2 2 0 01-2-2v-4z"})]),P=()=>v("svg",{class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20"},[v("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z","clip-rule":"evenodd"})]),F=m(()=>u.favorites),L=m(()=>u.watchlist),U=m(()=>u.continueWatching),t=m(()=>[{id:"favorites",label:"Yêu thích",icon:R,count:u.favoritesCount},{id:"watchlist",label:"Danh sách",icon:O,count:u.watchlistCount},{id:"continue",label:"Xem tiếp",icon:P,count:u.continueWatchingCount}]),o=n=>n?n.startsWith("http")?n:`https://phimimg.com/${n}`:"https://placehold.co/400x600/1a1a1a/fff?text=No+Image",S=n=>{f.push(`/film/${n.slug}`)},V=async n=>{if(await b({title:"Xóa khỏi yêu thích?",message:`Bạn có chắc muốn xóa "${n.title}" khỏi danh sách yêu thích?`,type:"warning",confirmText:"Xóa",cancelText:"Hủy"})){const s={...n};await u.removeFromFavorites(n.id)?p(`Đã xóa "${n.title}" khỏi yêu thích`,async()=>{await u.addToFavorites(s),d.success("✅ Đã hoàn tác")}):d.error("❌ Không thể xóa")}},A=async()=>{if(!T)return;if(await b({title:"Xóa nhiều phim?",message:`Bạn có chắc muốn xóa ${y.length} phim khỏi danh sách yêu thích?`,type:"warning",confirmText:"Xóa tất cả",cancelText:"Hủy"})){const r=F.value.filter(w=>_(w.id)),s=y.value;let l=0;for(const w of s)await u.removeFromFavorites(w)&&l++;B(),l>0?p(`Đã xóa ${l} phim khỏi yêu thích`,async()=>{for(const w of r)await u.addToFavorites(w);d.success("✅ Đã hoàn tác")}):d.error("❌ Không thể xóa")}},G=async n=>{if(await b({title:"Xóa khỏi danh sách?",message:`Bạn có chắc muốn xóa "${n.title}" khỏi danh sách?`,type:"warning",confirmText:"Xóa",cancelText:"Hủy"})){const s={...n};await u.removeFromWatchlist(n.id)?p(`Đã xóa "${n.title}" khỏi danh sách`,async()=>{await u.addToWatchlist(s),d.success("✅ Đã hoàn tác")}):d.error("❌ Không thể xóa")}},Z=async()=>{if(!T)return;if(await b({title:"Xóa nhiều phim?",message:`Bạn có chắc muốn xóa ${y.length} phim khỏi danh sách?`,type:"warning",confirmText:"Xóa tất cả",cancelText:"Hủy"})){const r=L.value.filter(w=>_(w.id)),s=y.value;let l=0;for(const w of s)await u.removeFromWatchlist(w)&&l++;B(),l>0?p(`Đã xóa ${l} phim khỏi danh sách`,async()=>{for(const w of r)await u.addToWatchlist(w);d.success("✅ Đã hoàn tác")}):d.error("❌ Không thể xóa")}},tt=async n=>{if(await b({title:"Xóa khỏi lịch sử?",message:`Bạn có chắc muốn xóa "${n.title}" khỏi lịch sử xem?`,type:"warning",confirmText:"Xóa",cancelText:"Hủy"})){const s={...n},l=u.getContinueProgress(n.id);await u.removeFromContinue(n.id)?p(`Đã xóa "${n.title}" khỏi lịch sử`,async()=>{await u.saveContinueWatching(s,l),d.success("✅ Đã hoàn tác")}):d.error("❌ Không thể xóa")}};return J(()=>c.query.tab,n=>{n&&["favorites","watchlist","continue"].includes(n)&&(x.value=n)}),J(x,()=>{B()}),nt(async()=>{await u.loadAll(),c.query.tab&&["favorites","watchlist","continue"].includes(c.query.tab)&&(x.value=c.query.tab)}),(n,r)=>(i(),g("div",wt,[it(vt,{show:h($),message:h(H),onUndo:h(M),onClose:h(k)},null,8,["show","message","onUndo","onClose"]),e("div",kt,[r[12]||(r[12]=e("div",{class:"mb-8"},[e("h1",{class:"text-4xl md:text-5xl font-bold text-white mb-2"}," Thư viện của tôi "),e("p",{class:"text-gray-400 text-lg"}," Quản lý phim yêu thích, danh sách và lịch sử xem của bạn ")],-1)),e("div",_t,[(i(!0),g(q,null,I(t.value,s=>(i(),g("button",{key:s.id,onClick:l=>x.value=s.id,class:D(["px-6 py-3 font-medium text-sm whitespace-nowrap transition-all duration-300 relative",x.value===s.id?"text-yellow-400":"text-gray-400 hover:text-white"])},[e("div",Mt,[(i(),X(Y(s.icon),{class:"w-5 h-5"})),e("span",null,C(s.label),1),s.count>0?(i(),g("span",{key:0,class:D(["px-2 py-0.5 bg-gray-800 rounded-full text-xs",x.value===s.id?"bg-yellow-500 text-black":"bg-gray-800 text-gray-400"])},C(s.count),3)):z("",!0)]),x.value===s.id?(i(),g("div",St)):z("",!0)],10,Ct))),128))]),e("div",zt,[x.value==="favorites"?(i(),g("div",$t,[F.value.length>0?(i(),g("div",Bt,[e("div",Tt,[e("label",Ft,[e("input",{type:"checkbox",checked:F.value.length>0&&F.value.every(s=>h(_)(s.id)),onChange:r[0]||(r[0]=s=>F.value.every(l=>h(_)(l.id))?h(B)():h(j)(F.value.map(l=>l.id))),class:"w-4 h-4 rounded border-gray-600 text-yellow-400 focus:ring-yellow-400"},null,40,Lt),e("span",Ht,C(h(T)?`Đã chọn ${h(y).length}`:"Chọn tất cả"),1)])]),h(T)?(i(),g("div",Wt,[e("button",{onClick:A,class:"flex items-center gap-2 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg text-sm font-medium transition-colors"},r[7]||(r[7]=[e("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1),N(" Xóa đã chọn ")]))])):z("",!0)])):z("",!0),F.value.length===0?(i(),X(K,{key:1,icon:"heart",title:"Chưa có phim yêu thích",description:"Thêm phim vào danh sách yêu thích để xem lại sau","action-text":"Khám phá phim","action-link":"/home"})):(i(),g("div",Vt,[(i(!0),g(q,null,I(F.value,s=>(i(),g("div",{key:s.id,class:"group relative bg-gray-800 rounded-lg overflow-hidden hover:scale-105 transition-transform duration-300 cursor-pointer"},[e("div",Xt,[e("input",{type:"checkbox",checked:h(_)(s.id),onChange:l=>h(E)(s.id),onClick:r[1]||(r[1]=Q(()=>{},["stop"])),class:"w-5 h-5 rounded border-gray-600 text-yellow-400 focus:ring-yellow-400 cursor-pointer"},null,40,Et)]),e("img",{src:o(s.poster),alt:s.title,class:"w-full aspect-[2/3] object-cover",onError:r[2]||(r[2]=l=>l.target.src="https://placehold.co/400x600/1a1a1a/fff?text=Error")},null,40,jt),e("div",At,[e("div",qt,[e("h4",It,C(s.title),1),e("div",Dt,[e("button",{onClick:l=>S(s),class:"flex-1 bg-yellow-500 text-black px-3 py-1.5 rounded text-xs font-semibold hover:bg-yellow-600 transition-colors"}," Xem ngay ",8,Ut),e("button",{onClick:l=>V(s),class:"p-1.5 bg-red-500 text-white rounded hover:bg-red-600 transition-colors",title:"Xóa khỏi yêu thích"},r[8]||(r[8]=[e("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1)]),8,Kt)])])])]))),128))]))])):z("",!0),x.value==="watchlist"?(i(),g("div",Nt,[L.value.length>0?(i(),g("div",Rt,[e("div",Ot,[e("label",Pt,[e("input",{type:"checkbox",checked:L.value.length>0&&L.value.every(s=>h(_)(s.id)),onChange:r[3]||(r[3]=s=>L.value.every(l=>h(_)(l.id))?h(B)():h(j)(L.value.map(l=>l.id))),class:"w-4 h-4 rounded border-gray-600 text-yellow-400 focus:ring-yellow-400"},null,40,Jt),e("span",Qt,C(h(T)?`Đã chọn ${h(y).length}`:"Chọn tất cả"),1)])]),h(T)?(i(),g("div",Yt,[e("button",{onClick:Z,class:"flex items-center gap-2 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg text-sm font-medium transition-colors"},r[9]||(r[9]=[e("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1),N(" Xóa đã chọn ")]))])):z("",!0)])):z("",!0),L.value.length===0?(i(),X(K,{key:1,icon:"list",title:"Danh sách trống",description:"Thêm phim vào danh sách để xem sau","action-text":"Tìm phim hay","action-link":"/home"})):(i(),g("div",Gt,[(i(!0),g(q,null,I(L.value,s=>(i(),g("div",{key:s.id,class:"group relative bg-gray-800 rounded-lg overflow-hidden hover:scale-105 transition-transform duration-300 cursor-pointer"},[e("div",Zt,[e("input",{type:"checkbox",checked:h(_)(s.id),onChange:l=>h(E)(s.id),onClick:r[4]||(r[4]=Q(()=>{},["stop"])),class:"w-5 h-5 rounded border-gray-600 text-yellow-400 focus:ring-yellow-400 cursor-pointer"},null,40,te)]),e("img",{src:o(s.poster),alt:s.title,class:"w-full aspect-[2/3] object-cover",onError:r[5]||(r[5]=l=>l.target.src="https://placehold.co/400x600/1a1a1a/fff?text=Error")},null,40,ee),e("div",oe,[e("div",se,[e("h4",ae,C(s.title),1),e("div",le,[e("button",{onClick:l=>S(s),class:"flex-1 bg-yellow-500 text-black px-3 py-1.5 rounded text-xs font-semibold hover:bg-yellow-600 transition-colors"}," Xem ngay ",8,re),e("button",{onClick:l=>G(s),class:"p-1.5 bg-red-500 text-white rounded hover:bg-red-600 transition-colors",title:"Xóa khỏi danh sách"},r[10]||(r[10]=[e("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1)]),8,ne)])])])]))),128))]))])):z("",!0),x.value==="continue"?(i(),g("div",ie,[U.value.length===0?(i(),X(K,{key:0,icon:"clock",title:"Chưa có lịch sử xem",description:"Bắt đầu xem phim để theo dõi tiến trình","action-text":"Bắt đầu xem","action-link":"/home"})):(i(),g("div",ce,[(i(!0),g(q,null,I(U.value,s=>(i(),g("div",{key:s.id,class:"group relative bg-gray-800 rounded-lg overflow-hidden hover:scale-105 transition-transform duration-300 cursor-pointer"},[e("img",{src:o(s.poster),alt:s.title,class:"w-full aspect-[2/3] object-cover",onError:r[6]||(r[6]=l=>l.target.src="https://placehold.co/400x600/1a1a1a/fff?text=Error")},null,40,ue),e("div",de,[e("div",{class:"h-full bg-yellow-500 transition-all duration-300",style:ct({width:s.progress+"%"})},null,4)]),e("div",he,[e("div",ge,[e("h4",ve,C(s.title),1),e("p",fe,C(s.progress)+"% đã xem",1),e("div",pe,[e("button",{onClick:l=>S(s),class:"flex-1 bg-yellow-500 text-black px-3 py-1.5 rounded text-xs font-semibold hover:bg-yellow-600 transition-colors"}," Xem tiếp ",8,ye),e("button",{onClick:l=>tt(s),class:"p-1.5 bg-gray-700 text-white rounded hover:bg-gray-600 transition-colors",title:"Xóa khỏi lịch sử"},r[11]||(r[11]=[e("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)]),8,xe)])])])]))),128))]))])):z("",!0)])])]))}};export{we as default};
