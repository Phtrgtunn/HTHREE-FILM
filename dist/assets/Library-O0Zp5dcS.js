import{a8 as se,r as A,j as w,a1 as v,p as re,c as h,o as i,a as t,x as V,d as S,aa as le,n as D,D as Q,t as f,m as ae,e as O,u as ne,ab as ie,w as K,k as ce,l as ue,s as g,F as q,f as I,C as G,y as de,a6 as ge,A as he,g as ve}from"./index-BLiZ3QlF.js";import{u as ye,U as fe}from"./UndoSnackbar-Dz1yBo3Y.js";const me=se("library",()=>{const l=A([]),y=A([]),c=A([]),u=A(!1),d=A(null),x=w(()=>l.value.length),$=w(()=>y.value.length),B=w(()=>c.value.length),m=e=>{try{const s=localStorage.getItem(e);return s?JSON.parse(s):[]}catch(s){return console.error(`Error reading ${e} from localStorage:`,s),[]}},M=(e,s)=>{try{localStorage.setItem(e,JSON.stringify(s))}catch(F){console.error(`Error saving ${e} to localStorage:`,F)}},_=async()=>{u.value=!0,d.value=null;try{l.value=m("library_favorites"),y.value=m("library_watchlist"),c.value=m("library_continue")}catch(e){d.value=e.message,console.error("Error loading library:",e)}finally{u.value=!1}},p=e=>l.value.some(s=>s.id===e||s.slug===e),C=async e=>{try{if(p(e.id||e.slug)){console.log("Movie already in favorites");return}const s={id:e.id||e.slug,slug:e.slug,title:e.name||e.title,poster:e.poster_url||e.poster,year:e.year,quality:e.quality,addedAt:new Date().toISOString()};return l.value.unshift(s),M("library_favorites",l.value),!0}catch(s){return d.value=s.message,console.error("Error adding to favorites:",s),!1}},E=async e=>{try{return l.value=l.value.filter(s=>s.id!==e&&s.slug!==e),M("library_favorites",l.value),!0}catch(s){return d.value=s.message,console.error("Error removing from favorites:",s),!1}},j=async e=>p(e.id||e.slug)?await E(e.id||e.slug):await C(e),z=e=>y.value.some(s=>s.id===e||s.slug===e),W=async e=>{try{if(z(e.id||e.slug)){console.log("Movie already in watchlist");return}const s={id:e.id||e.slug,slug:e.slug,title:e.name||e.title,poster:e.poster_url||e.poster,year:e.year,quality:e.quality,addedAt:new Date().toISOString()};return y.value.unshift(s),M("library_watchlist",y.value),!0}catch(s){return d.value=s.message,console.error("Error adding to watchlist:",s),!1}},b=async e=>{try{return y.value=y.value.filter(s=>s.id!==e&&s.slug!==e),M("library_watchlist",y.value),!0}catch(s){return d.value=s.message,console.error("Error removing from watchlist:",s),!1}};return{favorites:l,watchlist:y,continueWatching:c,loading:u,error:d,favoritesCount:x,watchlistCount:$,continueWatchingCount:B,loadAll:_,isFavorite:p,addToFavorites:C,removeFromFavorites:E,toggleFavorite:j,isInWatchlist:z,addToWatchlist:W,removeFromWatchlist:b,toggleWatchlist:async e=>z(e.id||e.slug)?await b(e.id||e.slug):await W(e),isInContinue:e=>c.value.some(s=>s.id===e||s.slug===e),saveContinueWatching:async(e,s,F=0)=>{try{c.value=c.value.filter(R=>R.id!==(e.id||e.slug)&&R.slug!==e.slug);const H={id:e.id||e.slug,slug:e.slug,title:e.name||e.title,poster:e.poster_url||e.poster,year:e.year,quality:e.quality,progress:Math.round(s),currentTime:Math.round(F),lastWatched:new Date().toISOString()};return c.value.unshift(H),c.value.length>20&&(c.value=c.value.slice(0,20)),M("library_continue",c.value),!0}catch(H){return d.value=H.message,console.error("Error saving continue watching:",H),!1}},getContinueProgress:e=>{const s=c.value.find(F=>F.id===e||F.slug===e);return s?{progress:s.progress,currentTime:s.currentTime}:null},removeFromContinue:async e=>{try{return c.value=c.value.filter(s=>s.id!==e&&s.slug!==e),M("library_continue",c.value),!0}catch(s){return d.value=s.message,console.error("Error removing from continue:",s),!1}},clearAll:()=>{l.value=[],y.value=[],c.value=[],localStorage.removeItem("library_favorites"),localStorage.removeItem("library_watchlist"),localStorage.removeItem("library_continue")}}});function pe(){const l=A(new Set),y=A(!1),c=()=>{y.value=!y.value,y.value||x()},u=_=>{l.value.has(_)?l.value.delete(_):l.value.add(_),l.value=new Set(l.value)},d=_=>{_.forEach(p=>{l.value.add(p.id||p)}),l.value=new Set(l.value)},x=()=>{l.value.clear(),l.value=new Set},$=_=>l.value.has(_),B=w(()=>l.value.size),m=w(()=>Array.from(l.value)),M=w(()=>l.value.size>0);return{selectedItems:l,isSelectionMode:y,selectedCount:B,selectedArray:m,hasSelection:M,toggleSelectionMode:c,toggleItem:u,selectAll:d,clearSelection:x,isSelected:$}}const be={class:"text-center py-20"},we={class:"flex justify-center mb-6"},xe={class:"text-2xl font-bold text-white mb-3"},ke={class:"text-gray-400 text-base mb-8 max-w-md mx-auto"},N={__name:"EmptyState",props:{icon:{type:String,default:"box",validator:l=>["heart","list","clock","box","search","film","user","cart"].includes(l)},title:{type:String,required:!0},description:{type:String,required:!0},actionText:{type:String,default:"Khám phá ngay"},actionLink:{type:String,default:null}},setup(l){const y=l,c={heart:()=>v("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[v("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})]),list:()=>v("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[v("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})]),clock:()=>v("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[v("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})]),box:()=>v("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[v("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})]),search:()=>v("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[v("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})]),film:()=>v("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[v("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 4v16M17 4v16M3 8h4m10 0h4M3 12h18M3 16h4m10 0h4M4 20h16a1 1 0 001-1V5a1 1 0 00-1-1H4a1 1 0 00-1 1v14a1 1 0 001 1z"})]),user:()=>v("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[v("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})]),cart:()=>v("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[v("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})])},u=w(()=>c[y.icon]),d=w(()=>({heart:"bg-red-500/20",list:"bg-blue-500/20",clock:"bg-yellow-500/20",box:"bg-gray-500/20",search:"bg-purple-500/20",film:"bg-green-500/20",user:"bg-indigo-500/20",cart:"bg-orange-500/20"})[y.icon]),x=w(()=>({heart:"text-red-400",list:"text-blue-400",clock:"text-yellow-400",box:"text-gray-400",search:"text-purple-400",film:"text-green-400",user:"text-indigo-400",cart:"text-orange-400"})[y.icon]);return($,B)=>{const m=re("router-link");return i(),h("div",be,[t("div",we,[t("div",{class:D(["w-24 h-24 rounded-full flex items-center justify-center",d.value])},[(i(),V(Q(u.value),{class:D(["w-12 h-12",x.value])},null,8,["class"]))],2)]),t("h3",xe,f(l.title),1),t("p",ke,f(l.description),1),l.actionLink?(i(),V(m,{key:0,to:l.actionLink,class:"inline-flex items-center gap-2 bg-yellow-500 text-black px-6 py-3 rounded-lg font-semibold hover:bg-yellow-600 transition-all hover:scale-105 shadow-lg"},{default:ae(()=>[O(f(l.actionText)+" ",1),B[0]||(B[0]=t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))]),_:1},8,["to"])):S("",!0),le($.$slots,"action")])}}},_e={class:"min-h-screen bg-gradient-to-b from-gray-900 via-black to-gray-900 pt-24 pb-16"},Ce={class:"container mx-auto px-4 sm:px-6 lg:px-8"},Me={class:"mb-8"},Fe={class:"text-4xl md:text-5xl font-bold text-white mb-2"},Se={class:"text-gray-400 text-lg"},$e={class:"flex gap-2 mb-8 border-b border-gray-800 overflow-x-auto"},ze=["onClick"],We={class:"flex items-center gap-2"},Te={key:0,class:"absolute bottom-0 left-0 right-0 h-0.5 bg-yellow-400"},Le={class:"mt-8"},Be={key:0,class:"space-y-6"},He={key:0,class:"flex items-center justify-between bg-gray-800 rounded-lg px-4 py-3"},Ae={class:"flex items-center gap-4"},Ve={class:"flex items-center gap-2 cursor-pointer"},Ee=["checked"],je={class:"text-white text-sm font-medium"},Re={key:0,class:"flex items-center gap-2"},qe={key:2,class:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4"},Ie={class:"absolute top-2 left-2 z-10"},De=["checked","onChange"],Ue=["src","alt"],Ne={class:"absolute inset-0 bg-gradient-to-t from-black/90 via-black/50 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"},Oe={class:"absolute bottom-0 left-0 right-0 p-4"},Pe={class:"text-white font-semibold text-sm mb-2"},Xe={class:"flex gap-2"},Je=["onClick"],Ke=["onClick","title"],Ge={key:1,class:"space-y-6"},Qe={key:0,class:"flex items-center justify-between bg-gray-800 rounded-lg px-4 py-3"},Ye={class:"flex items-center gap-4"},Ze={class:"flex items-center gap-2 cursor-pointer"},et=["checked"],tt={class:"text-white text-sm font-medium"},ot={key:0,class:"flex items-center gap-2"},st={key:2,class:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4"},rt={class:"absolute top-2 left-2 z-10"},lt=["checked","onChange"],at=["src","alt"],nt={class:"absolute inset-0 bg-gradient-to-t from-black/90 via-black/50 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"},it={class:"absolute bottom-0 left-0 right-0 p-4"},ct={class:"text-white font-semibold text-sm mb-2"},ut={class:"flex gap-2"},dt=["onClick"],gt=["onClick"],ht={key:2,class:"space-y-6"},vt={key:1,class:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4"},yt=["src","alt"],ft={class:"absolute bottom-0 left-0 right-0 h-1 bg-gray-700"},mt={class:"absolute inset-0 bg-gradient-to-t from-black/90 via-black/50 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"},pt={class:"absolute bottom-0 left-0 right-0 p-4"},bt={class:"text-white font-semibold text-sm mb-1"},wt={class:"text-gray-400 text-xs mb-2"},xt={class:"flex gap-2"},kt=["onClick"],_t=["onClick","title"],Ft={__name:"Library",setup(l){const y=ve(),c=ne(),u=me(),d=he(),{confirm:x}=ge(),{showUndo:$,undoMessage:B,triggerUndo:m,handleUndo:M,closeUndo:_}=ye(),{selectedItems:p,isSelected:C,toggleSelection:E,selectAll:j,deselectAll:z,hasSelection:W}=pe(),b=A(c.query.tab||"favorites"),P=()=>v("svg",{class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20"},[v("path",{"fill-rule":"evenodd",d:"M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z","clip-rule":"evenodd"})]),X=()=>v("svg",{class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20"},[v("path",{d:"M7 3a1 1 0 000 2h6a1 1 0 100-2H7zM4 7a1 1 0 011-1h10a1 1 0 110 2H5a1 1 0 01-1-1zM2 11a2 2 0 012-2h12a2 2 0 012 2v4a2 2 0 01-2 2H4a2 2 0 01-2-2v-4z"})]),J=()=>v("svg",{class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20"},[v("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z","clip-rule":"evenodd"})]),T=w(()=>u.favorites),L=w(()=>u.watchlist),U=w(()=>u.continueWatching),{t:e}=ie(),s=w(()=>[{id:"favorites",label:e("library.favorites"),icon:P,count:u.favoritesCount},{id:"watchlist",label:e("library.watchlist"),icon:X,count:u.watchlistCount},{id:"continue",label:e("library.continue"),icon:J,count:u.continueWatchingCount}]),F=r=>r?r.startsWith("http")?r:`https://phimimg.com/${r}`:"https://placehold.co/400x600/1a1a1a/fff?text=No+Image",H=r=>{y.push(`/film/${r.slug}`)},R=async r=>{if(await x({title:e("library.removeFromFavoritesConfirm"),message:e("library.removeFromFavoritesMessage",{title:r.title}),type:"warning",confirmText:e("common.delete"),cancelText:e("common.cancel")})){const o={...r};await u.removeFromFavorites(r.id)?m(e("library.removedFromFavorites",{title:r.title}),async()=>{await u.addToFavorites(o),d.success(e("library.undoSuccess"))}):d.error(e("library.cannotRemove"))}},Y=async()=>{if(!W)return;if(await x({title:e("library.bulkRemoveConfirm"),message:e("library.bulkRemoveMessage",{count:p.length}),type:"warning",confirmText:e("library.deleteAll"),cancelText:e("common.cancel")})){const n=T.value.filter(k=>C(k.id)),o=p.value;let a=0;for(const k of o)await u.removeFromFavorites(k)&&a++;z(),a>0?m(e("library.bulkRemovedFromFavorites",{count:a}),async()=>{for(const k of n)await u.addToFavorites(k);d.success(e("library.undoSuccess"))}):d.error(e("library.cannotRemove"))}},Z=async r=>{if(await x({title:e("library.removeFromWatchlistConfirm"),message:e("library.removeFromWatchlistMessage",{title:r.title}),type:"warning",confirmText:e("common.delete"),cancelText:e("common.cancel")})){const o={...r};await u.removeFromWatchlist(r.id)?m(e("library.removedFromWatchlist",{title:r.title}),async()=>{await u.addToWatchlist(o),d.success(e("library.undoSuccess"))}):d.error(e("library.cannotRemove"))}},ee=async()=>{if(!W)return;if(await x({title:e("library.bulkRemoveConfirm"),message:e("library.bulkRemoveFromWatchlistMessage",{count:p.length}),type:"warning",confirmText:e("library.deleteAll"),cancelText:e("common.cancel")})){const n=L.value.filter(k=>C(k.id)),o=p.value;let a=0;for(const k of o)await u.removeFromWatchlist(k)&&a++;z(),a>0?m(e("library.bulkRemovedFromWatchlist",{count:a}),async()=>{for(const k of n)await u.addToWatchlist(k);d.success(e("library.undoSuccess"))}):d.error(e("library.cannotRemove"))}},te=async r=>{if(await x({title:e("library.removeFromHistoryConfirm"),message:e("library.removeFromHistoryMessage",{title:r.title}),type:"warning",confirmText:e("common.delete"),cancelText:e("common.cancel")})){const o={...r},a=u.getContinueProgress(r.id);await u.removeFromContinue(r.id)?m(e("library.removedFromHistory",{title:r.title}),async()=>{await u.saveContinueWatching(o,a),d.success(e("library.undoSuccess"))}):d.error(e("library.cannotRemove"))}};return K(()=>c.query.tab,r=>{r&&["favorites","watchlist","continue"].includes(r)&&(b.value=r)}),K(b,()=>{z()}),ce(async()=>{await u.loadAll(),c.query.tab&&["favorites","watchlist","continue"].includes(c.query.tab)&&(b.value=c.query.tab)}),(r,n)=>(i(),h("div",_e,[ue(fe,{show:g($),message:g(B),onUndo:g(M),onClose:g(_)},null,8,["show","message","onUndo","onClose"]),t("div",Ce,[t("div",Me,[t("h1",Fe,f(r.$t("library.title")),1),t("p",Se,f(r.$t("library.subtitle")),1)]),t("div",$e,[(i(!0),h(q,null,I(s.value,o=>(i(),h("button",{key:o.id,onClick:a=>b.value=o.id,class:D(["px-6 py-3 font-medium text-sm whitespace-nowrap transition-all duration-300 relative",b.value===o.id?"text-yellow-400":"text-gray-400 hover:text-white"])},[t("div",We,[(i(),V(Q(o.icon),{class:"w-5 h-5"})),t("span",null,f(o.label),1),o.count>0?(i(),h("span",{key:0,class:D(["px-2 py-0.5 bg-gray-800 rounded-full text-xs",b.value===o.id?"bg-yellow-500 text-black":"bg-gray-800 text-gray-400"])},f(o.count),3)):S("",!0)]),b.value===o.id?(i(),h("div",Te)):S("",!0)],10,ze))),128))]),t("div",Le,[b.value==="favorites"?(i(),h("div",Be,[T.value.length>0?(i(),h("div",He,[t("div",Ae,[t("label",Ve,[t("input",{type:"checkbox",checked:T.value.length>0&&T.value.every(o=>g(C)(o.id)),onChange:n[0]||(n[0]=o=>T.value.every(a=>g(C)(a.id))?g(z)():g(j)(T.value.map(a=>a.id))),class:"w-4 h-4 rounded border-gray-600 text-yellow-400 focus:ring-yellow-400"},null,40,Ee),t("span",je,f(g(W)?g(e)("library.selected",{count:g(p).length}):g(e)("library.selectAll")),1)])]),g(W)?(i(),h("div",Re,[t("button",{onClick:Y,class:"flex items-center gap-2 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg text-sm font-medium transition-colors"},[n[7]||(n[7]=t("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{"fill-rule":"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1)),O(" "+f(r.$t("library.deleteSelected")),1)])])):S("",!0)])):S("",!0),T.value.length===0?(i(),V(N,{key:1,icon:"heart",title:r.$t("library.emptyFavorites"),description:r.$t("library.emptyFavoritesDesc"),"action-text":r.$t("library.discoverMovies"),"action-link":"/home"},null,8,["title","description","action-text"])):(i(),h("div",qe,[(i(!0),h(q,null,I(T.value,o=>(i(),h("div",{key:o.id,class:"group relative bg-gray-800 rounded-lg overflow-hidden hover:scale-105 transition-transform duration-300 cursor-pointer"},[t("div",Ie,[t("input",{type:"checkbox",checked:g(C)(o.id),onChange:a=>g(E)(o.id),onClick:n[1]||(n[1]=G(()=>{},["stop"])),class:"w-5 h-5 rounded border-gray-600 text-yellow-400 focus:ring-yellow-400 cursor-pointer"},null,40,De)]),t("img",{src:F(o.poster),alt:o.title,class:"w-full aspect-[2/3] object-cover",onError:n[2]||(n[2]=a=>a.target.src="https://placehold.co/400x600/1a1a1a/fff?text=Error")},null,40,Ue),t("div",Ne,[t("div",Oe,[t("h4",Pe,f(o.title),1),t("div",Xe,[t("button",{onClick:a=>H(o),class:"flex-1 bg-yellow-500 text-black px-3 py-1.5 rounded text-xs font-semibold hover:bg-yellow-600 transition-colors"},f(r.$t("library.watchNow")),9,Je),t("button",{onClick:a=>R(o),class:"p-1.5 bg-red-500 text-white rounded hover:bg-red-600 transition-colors",title:r.$t("library.removeFromFavorites")},n[8]||(n[8]=[t("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{"fill-rule":"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1)]),8,Ke)])])])]))),128))]))])):S("",!0),b.value==="watchlist"?(i(),h("div",Ge,[L.value.length>0?(i(),h("div",Qe,[t("div",Ye,[t("label",Ze,[t("input",{type:"checkbox",checked:L.value.length>0&&L.value.every(o=>g(C)(o.id)),onChange:n[3]||(n[3]=o=>L.value.every(a=>g(C)(a.id))?g(z)():g(j)(L.value.map(a=>a.id))),class:"w-4 h-4 rounded border-gray-600 text-yellow-400 focus:ring-yellow-400"},null,40,et),t("span",tt,f(g(W)?`Đã chọn ${g(p).length}`:"Chọn tất cả"),1)])]),g(W)?(i(),h("div",ot,[t("button",{onClick:ee,class:"flex items-center gap-2 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg text-sm font-medium transition-colors"},n[9]||(n[9]=[t("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{"fill-rule":"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1),O(" Xóa đã chọn ")]))])):S("",!0)])):S("",!0),L.value.length===0?(i(),V(N,{key:1,icon:"list",title:r.$t("library.emptyWatchlist"),description:r.$t("library.emptyWatchlistDesc"),"action-text":r.$t("library.findMovies"),"action-link":"/home"},null,8,["title","description","action-text"])):(i(),h("div",st,[(i(!0),h(q,null,I(L.value,o=>(i(),h("div",{key:o.id,class:"group relative bg-gray-800 rounded-lg overflow-hidden hover:scale-105 transition-transform duration-300 cursor-pointer"},[t("div",rt,[t("input",{type:"checkbox",checked:g(C)(o.id),onChange:a=>g(E)(o.id),onClick:n[4]||(n[4]=G(()=>{},["stop"])),class:"w-5 h-5 rounded border-gray-600 text-yellow-400 focus:ring-yellow-400 cursor-pointer"},null,40,lt)]),t("img",{src:F(o.poster),alt:o.title,class:"w-full aspect-[2/3] object-cover",onError:n[5]||(n[5]=a=>a.target.src="https://placehold.co/400x600/1a1a1a/fff?text=Error")},null,40,at),t("div",nt,[t("div",it,[t("h4",ct,f(o.title),1),t("div",ut,[t("button",{onClick:a=>H(o),class:"flex-1 bg-yellow-500 text-black px-3 py-1.5 rounded text-xs font-semibold hover:bg-yellow-600 transition-colors"}," Xem ngay ",8,dt),t("button",{onClick:a=>Z(o),class:"p-1.5 bg-red-500 text-white rounded hover:bg-red-600 transition-colors",title:"Xóa khỏi danh sách"},n[10]||(n[10]=[t("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{"fill-rule":"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1)]),8,gt)])])])]))),128))]))])):S("",!0),b.value==="continue"?(i(),h("div",ht,[U.value.length===0?(i(),V(N,{key:0,icon:"clock",title:r.$t("library.emptyHistory"),description:r.$t("library.emptyHistoryDesc"),"action-text":r.$t("library.startWatching"),"action-link":"/home"},null,8,["title","description","action-text"])):(i(),h("div",vt,[(i(!0),h(q,null,I(U.value,o=>(i(),h("div",{key:o.id,class:"group relative bg-gray-800 rounded-lg overflow-hidden hover:scale-105 transition-transform duration-300 cursor-pointer"},[t("img",{src:F(o.poster),alt:o.title,class:"w-full aspect-[2/3] object-cover",onError:n[6]||(n[6]=a=>a.target.src="https://placehold.co/400x600/1a1a1a/fff?text=Error")},null,40,yt),t("div",ft,[t("div",{class:"h-full bg-yellow-500 transition-all duration-300",style:de({width:o.progress+"%"})},null,4)]),t("div",mt,[t("div",pt,[t("h4",bt,f(o.title),1),t("p",wt,f(o.progress)+"% "+f(r.$t("library.watched")),1),t("div",xt,[t("button",{onClick:a=>H(o),class:"flex-1 bg-yellow-500 text-black px-3 py-1.5 rounded text-xs font-semibold hover:bg-yellow-600 transition-colors"},f(r.$t("library.continueWatching")),9,kt),t("button",{onClick:a=>te(o),class:"p-1.5 bg-gray-700 text-white rounded hover:bg-gray-600 transition-colors",title:r.$t("library.removeFromHistory")},n[11]||(n[11]=[t("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)]),8,_t)])])])]))),128))]))])):S("",!0)])])]))}};export{Ft as default};
