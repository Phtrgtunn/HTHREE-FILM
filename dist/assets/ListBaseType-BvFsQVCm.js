import{_ as U,i as X,r as m,u as G,j as M,k as O,w as E,c as n,a as t,l as J,m as Q,e as w,p as W,t as v,b as T,F as p,f as b,d as R,q as $,v as q,s as B,x as F,y as I,n as L,g as Z,o as a}from"./index-CA5AYIC7.js";import{getMovieList as ee,mapMovieData as te}from"./movieApi-BOGj6C1C.js";import{M as se}from"./MovieCardRecommended-DUolvaTD.js";import{u as le,a as oe,R as ae}from"./country-CUD-ZUYf.js";const re={class:"min-h-screen bg-black text-white"},ne={class:"relative bg-gradient-to-b from-gray-900 to-black pt-20 pb-12 px-4"},ie={class:"max-w-7xl mx-auto"},de={class:"flex items-center gap-2 text-sm mb-6 animate-fade-in"},ue={class:"text-yellow-400 font-medium"},ge={class:"text-4xl md:text-5xl font-bold mb-4 animate-slide-up"},ce={class:"bg-gradient-to-r from-yellow-400 to-yellow-600 bg-clip-text text-transparent"},ve={class:"max-w-7xl mx-auto px-4 py-8"},pe={key:0,class:"space-y-8"},he={class:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4"},ye={key:1,class:"text-center py-20 animate-fade-in"},me={class:"text-gray-400"},fe={class:"bg-gray-900/50 backdrop-blur-sm rounded-xl p-6 mb-8 border border-gray-800 shadow-xl animate-fade-in"},xe={class:"flex flex-wrap gap-4"},be={class:"relative"},we=["value"],ke={class:"relative"},_e=["value"],Ce={class:"relative"},Me=["value"],Be={class:"mt-4 pt-4 border-t border-gray-800"},je={class:"text-sm text-gray-400"},Se={class:"text-yellow-400 font-semibold"},Ae={key:0},Pe={class:"flex flex-col lg:flex-row gap-8"},Ve={class:"flex-1"},Te={key:0,class:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4"},Re={key:1,class:"text-center py-20 animate-fade-in"},$e={class:"lg:w-80 flex-shrink-0"},qe={class:"bg-gray-900/50 backdrop-blur-sm rounded-xl p-6 border border-gray-800 sticky top-24 animate-fade-in"},Le={key:0,class:"space-y-3 max-h-[600px] overflow-y-auto scrollbar-thin scrollbar-thumb-yellow-500 scrollbar-track-gray-800"},Ne={key:1,class:"text-gray-500 text-center py-8"},De={key:0,class:"flex justify-center mt-12 animate-fade-in"},ze={class:"inline-flex items-center gap-2 bg-gray-900/50 backdrop-blur-sm rounded-xl p-2 border border-gray-800"},Ee=["disabled"],Fe={key:0,class:"px-3 text-gray-600"},Ie=["onClick"],He=["disabled"],Ye=20,Ke={__name:"ListBaseType",setup(Ue){const h=G(),j=Z(),k=le(),f=X(),x=oe(),y=m([]),i=m(1),S=m(!0),_=m(null),c=m(parseInt(h.params.pageNumber)||1),d=m(h.query.category||""),u=m(h.query.country||""),g=m(h.query.year||""),C=M(()=>{const l=h.path;return l.includes("/phim-le")?"phim-le":l.includes("/phim-bo")?"phim-bo":l.includes("/le")?"le":l.includes("/bo")?"bo":"phim-le"}),N=M(()=>h.params.typeSlug||C.value),D=M(()=>{const l=[],e=N.value;if(e==="phim-le"||e==="le"?l.push("Phim Lẻ"):e==="phim-bo"||e==="bo"?l.push("Phim Bộ"):e==="tv-shows"?l.push("TV Shows"):e==="hoat-hinh"&&l.push("Hoạt Hình"),d.value){const r=f.getAllCategories.find(s=>s.slug===d.value);r&&l.push(r.name)}if(u.value){const r=x.getAllCountries.find(s=>s.slug===u.value);r&&l.push(r.name)}return g.value&&l.push(`Năm ${g.value}`),l.length>0?l.join(" - "):"Danh Sách Phim"}),H=M(()=>{const l=new Date().getFullYear(),e=[];for(let r=l;r>=l-20;r--)e.push(r);return e}),A=()=>{const l={};d.value&&(l.category=d.value),u.value&&(l.country=u.value),g.value&&(l.year=g.value),j.push({path:`/${C.value}/page/1`,query:l})},Y=()=>{d.value="",u.value="",g.value="",j.push({path:`/${C.value}/page/1`,query:{}})},P=async()=>{var l;S.value=!0,_.value=null,y.value=[];try{const e={page:c.value,limit:Ye,sort_field:"modified.time",sort_type:"desc"},r=N.value;r==="phim-le"||r==="le"?e.type="single":r==="phim-bo"||r==="bo"?e.type="series":r==="tv-shows"?e.type="tvshows":r==="hoat-hinh"&&(e.type="hoathinh"),d.value&&(e.category=d.value),u.value&&(e.country=u.value),g.value&&(e.year=parseInt(g.value));const s=await ee(e);if(s.status&&s.data){y.value=(s.data.items||[]).map(te);const o=(l=s.data.params)==null?void 0:l.pagination;o?i.value=o.totalPages||o.total_page||1:s.data.pagination?i.value=s.data.pagination.totalPages||s.data.pagination.total_page||1:i.value=1}else y.value=[],i.value=1}catch(e){console.error("Error fetching movies:",e),_.value="Không thể tải dữ liệu phim. Vui lòng thử lại sau.",y.value=[],i.value=1}finally{S.value=!1}},V=l=>{if(l>=1&&l<=i.value){const e={};d.value&&(e.category=d.value),u.value&&(e.country=u.value),g.value&&(e.year=g.value),j.push({path:`/${C.value}/page/${l}`,query:e})}},K=()=>{const l=new Set,e=2;l.add(1),i.value>1&&l.add(i.value);for(let o=c.value-e;o<=c.value+e;o++)o>=1&&o<=i.value&&l.add(o);const r=Array.from(l).sort((o,z)=>o-z),s=[];for(let o=0;o<r.length;o++)s.push(r[o]),o<r.length-1&&r[o+1]-r[o]>1&&s.push("ellipsis");return s};return O(async()=>{k.getRecommended.length===0&&await k.getRecommendedMovies(),f.getAllCategories.length===0&&await f.getCategory(),x.getAllCountries.length===0&&await x.getCountry(),E(()=>h.params,l=>{c.value=parseInt(l.pageNumber)||1,f.getAllCategories.length>0&&x.getAllCountries.length>0&&P()},{immediate:!0}),E(()=>h.query,l=>{d.value=l.category||"",u.value=l.country||"",g.value=l.year||"",f.getAllCategories.length>0&&x.getAllCountries.length>0&&P()},{deep:!0}),f.getAllCategories.length>0&&x.getAllCountries.length>0&&P()}),(l,e)=>{const r=W("router-link");return a(),n("div",re,[t("div",ne,[t("div",ie,[t("nav",de,[J(r,{to:"/home",class:"text-gray-400 hover:text-yellow-400 transition-colors"},{default:Q(()=>e[5]||(e[5]=[w(" Trang chủ ")])),_:1}),e[6]||(e[6]=t("svg",{class:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)),t("span",ue,v(D.value),1)]),t("h1",ge,[t("span",ce,v(D.value),1)]),e[7]||(e[7]=t("p",{class:"text-gray-400 text-lg animate-slide-up animation-delay-100"}," Khám phá bộ sưu tập phim đặc sắc ",-1))])]),t("div",ve,[S.value?(a(),n("div",pe,[e[9]||(e[9]=T('<div class="bg-gray-900/50 rounded-xl p-6 animate-pulse" data-v-3e97d9c7><div class="flex flex-wrap gap-4" data-v-3e97d9c7><div class="h-10 bg-gray-800 rounded-lg w-40" data-v-3e97d9c7></div><div class="h-10 bg-gray-800 rounded-lg w-40" data-v-3e97d9c7></div><div class="h-10 bg-gray-800 rounded-lg w-32" data-v-3e97d9c7></div></div></div>',1)),t("div",he,[(a(),n(p,null,b(10,s=>t("div",{key:s,class:"animate-pulse"},e[8]||(e[8]=[t("div",{class:"aspect-[2/3] bg-gray-800 rounded-lg mb-2"},null,-1),t("div",{class:"h-4 bg-gray-800 rounded w-3/4 mb-2"},null,-1),t("div",{class:"h-3 bg-gray-800 rounded w-1/2"},null,-1)]))),64))])])):_.value?(a(),n("div",ye,[e[10]||(e[10]=t("div",{class:"inline-flex items-center justify-center w-20 h-20 bg-red-500/10 rounded-full mb-4"},[t("svg",{class:"w-10 h-10 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e[11]||(e[11]=t("h3",{class:"text-xl font-semibold text-red-400 mb-2"},"Có lỗi xảy ra",-1)),t("p",me,v(_.value),1)])):(a(),n(p,{key:2},[t("div",fe,[e[21]||(e[21]=t("h2",{class:"text-lg font-semibold text-white mb-4 flex items-center gap-2"},[t("svg",{class:"w-5 h-5 text-yellow-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})]),w(" Bộ Lọc ")],-1)),t("div",xe,[t("div",be,[$(t("select",{"onUpdate:modelValue":e[0]||(e[0]=s=>d.value=s),onChange:A,class:"appearance-none bg-gray-800 border border-gray-700 rounded-lg px-4 py-2.5 pr-10 text-white focus:outline-none focus:border-yellow-400 focus:ring-2 focus:ring-yellow-400/20 transition-all hover:border-gray-600 cursor-pointer min-w-[180px]"},[e[12]||(e[12]=t("option",{value:""},"Tất cả thể loại",-1)),(a(!0),n(p,null,b(B(f).getAllCategories,s=>(a(),n("option",{key:s.slug,value:s.slug},v(s.name),9,we))),128))],544),[[q,d.value]]),e[13]||(e[13]=t("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-3 text-gray-400"},[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])],-1))]),t("div",ke,[$(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>u.value=s),onChange:A,class:"appearance-none bg-gray-800 border border-gray-700 rounded-lg px-4 py-2.5 pr-10 text-white focus:outline-none focus:border-yellow-400 focus:ring-2 focus:ring-yellow-400/20 transition-all hover:border-gray-600 cursor-pointer min-w-[180px]"},[e[14]||(e[14]=t("option",{value:""},"Tất cả quốc gia",-1)),(a(!0),n(p,null,b(B(x).getAllCountries,s=>(a(),n("option",{key:s.slug,value:s.slug},v(s.name),9,_e))),128))],544),[[q,u.value]]),e[15]||(e[15]=t("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-3 text-gray-400"},[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])],-1))]),t("div",Ce,[$(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>g.value=s),onChange:A,class:"appearance-none bg-gray-800 border border-gray-700 rounded-lg px-4 py-2.5 pr-10 text-white focus:outline-none focus:border-yellow-400 focus:ring-2 focus:ring-yellow-400/20 transition-all hover:border-gray-600 cursor-pointer min-w-[140px]"},[e[16]||(e[16]=t("option",{value:""},"Tất cả năm",-1)),(a(!0),n(p,null,b(H.value,s=>(a(),n("option",{key:s,value:s},v(s),9,Me))),128))],544),[[q,g.value]]),e[17]||(e[17]=t("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-3 text-gray-400"},[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])],-1))]),d.value||u.value||g.value?(a(),n("button",{key:0,onClick:Y,class:"bg-gray-800 hover:bg-yellow-400/10 border border-gray-700 hover:border-yellow-400 rounded-lg px-4 py-2.5 text-gray-300 hover:text-yellow-400 transition-all flex items-center gap-2 group"},e[18]||(e[18]=[t("svg",{class:"w-4 h-4 transition-transform group-hover:rotate-90 duration-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),w(" Xóa bộ lọc ")]))):R("",!0)]),t("div",Be,[t("p",je,[e[19]||(e[19]=w(" Tìm thấy ")),t("span",Se,v(y.value.length),1),e[20]||(e[20]=w(" phim ")),i.value>1?(a(),n("span",Ae," - Trang "+v(c.value)+"/"+v(i.value),1)):R("",!0)])])]),t("div",Pe,[t("div",Ve,[y.value&&y.value.length>0?(a(),n("div",Te,[(a(!0),n(p,null,b(y.value,(s,o)=>(a(),F(se,{key:s.slug||s.id||o,movie:s,trending:!1,class:"animate-fade-in-up",style:I({animationDelay:`${o*50}ms`})},null,8,["movie","style"]))),128))])):(a(),n("div",Re,e[22]||(e[22]=[T('<div class="inline-flex items-center justify-center w-20 h-20 bg-gray-800 rounded-full mb-4" data-v-3e97d9c7><svg class="w-10 h-10 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-3e97d9c7><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 4v16M17 4v16M3 8h4m10 0h4M3 12h18M3 16h4m10 0h4M4 20h16a1 1 0 001-1V5a1 1 0 00-1-1H4a1 1 0 00-1 1v14a1 1 0 001 1z" data-v-3e97d9c7></path></svg></div><h3 class="text-xl font-semibold text-gray-400 mb-2" data-v-3e97d9c7>Không tìm thấy phim</h3><p class="text-gray-500" data-v-3e97d9c7>Thử thay đổi bộ lọc để xem thêm phim</p>',3)])))]),t("aside",$e,[t("div",qe,[e[23]||(e[23]=T('<div class="flex items-center gap-2 mb-6" data-v-3e97d9c7><div class="w-8 h-8 bg-yellow-400/10 rounded-lg flex items-center justify-center" data-v-3e97d9c7><svg class="w-5 h-5 text-yellow-400" fill="currentColor" viewBox="0 0 20 20" data-v-3e97d9c7><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" data-v-3e97d9c7></path></svg></div><h3 class="text-lg font-bold text-white" data-v-3e97d9c7>Bảng Xếp Hạng</h3></div>',1)),B(k).getRecommended.length>0?(a(),n("div",Le,[(a(!0),n(p,null,b(B(k).getRecommended.slice(0,10),(s,o)=>(a(),F(ae,{key:s.slug||s.id||o,trendingMovie:s,index:o,class:"animate-fade-in",style:I({animationDelay:`${o*100}ms`})},null,8,["trendingMovie","index","style"]))),128))])):(a(),n("p",Ne,"Đang tải..."))])])]),i.value>1?(a(),n("div",De,[t("nav",ze,[t("button",{onClick:e[3]||(e[3]=s=>V(c.value-1)),disabled:c.value===1,class:L(["p-2 rounded-lg transition-all",c.value===1?"text-gray-600 cursor-not-allowed":"text-gray-400 hover:text-yellow-400 hover:bg-gray-800"])},e[24]||(e[24]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)]),10,Ee),(a(!0),n(p,null,b(K(),(s,o)=>(a(),n(p,{key:o},[s==="ellipsis"?(a(),n("span",Fe,"...")):(a(),n("button",{key:1,onClick:z=>V(s),class:L(["min-w-[40px] h-10 rounded-lg font-medium transition-all",c.value===s?"bg-yellow-400 text-black shadow-lg shadow-yellow-400/50":"text-gray-400 hover:text-white hover:bg-gray-800"])},v(s),11,Ie))],64))),128)),t("button",{onClick:e[4]||(e[4]=s=>V(c.value+1)),disabled:c.value===i.value,class:L(["p-2 rounded-lg transition-all",c.value===i.value?"text-gray-600 cursor-not-allowed":"text-gray-400 hover:text-yellow-400 hover:bg-gray-800"])},e[25]||(e[25]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)]),10,He)])])):R("",!0)],64))])])}}},Qe=U(Ke,[["__scopeId","data-v-3e97d9c7"]]);export{Qe as default};
