import{C as h,h as y}from"./index-6NOOzFJX.js";const m=!1,_="https://phimapi.com/v1/api",u=async(r={})=>{const{type_list:g="phim-bo",page:o=1,sort_field:l="_id",sort_type:p="desc",sort_lang:a,category:n,country:s,year:i,limit:c=20}=r;try{if(!m){const t=new URLSearchParams({page:o.toString(),sort_field:l,sort_type:p,limit:c.toString()});a&&t.append("sort_lang",a),n&&t.append("category",n),s&&t.append("country",s),i&&t.append("year",i.toString());const e=`${_}/danh-sach/${g}?${t.toString()}`;return console.log("üì° Fetching movies:",e),await h.get(e,async()=>(await y.get(e)).data,5*60*1e3)}}catch(t){throw console.error("‚ùå Error fetching movies:",t),t}},S=r=>({...r,backdrop_path:r.thumb_url||"https://placehold.co/400x600/1a1a1a/fff?text=No+Image",poster_path:r.poster_url||r.thumb_url,title:r.name,original_title:r.origin_name}),v=async(r,g={})=>{try{const{page:o=1,limit:l=20,sort_field:p,sort_type:a,sort_lang:n,category:s,country:i,year:c}=g,t=new URLSearchParams({keyword:r,page:o.toString(),limit:l.toString()});p&&t.append("sort_field",p),a&&t.append("sort_type",a),n&&t.append("sort_lang",n),s&&t.append("category",s),i&&t.append("country",i),c&&t.append("year",c.toString());const e=m?`${_}/search.php?${t.toString()}`:`https://phimapi.com/v1/api/tim-kiem?${t.toString()}`;return console.log("üîç Searching movies:",e),await h.get(e,async()=>(await y.get(e)).data,2*60*1e3)}catch(o){throw console.error("‚ùå Error searching movies:",o),o}};export{u as getMovieList,S as mapMovieData,v as searchMovies};
