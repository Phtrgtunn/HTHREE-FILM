import{_ as k,r as m,u as V,w as $,c as r,a as e,t as o,b as C,d as M,e as j,F as N,f as B,n as D,g as T,o as d,h as E}from"./index-6NOOzFJX.js";const F={class:"min-h-screen bg-gray-900 text-white"},I={key:0,class:"flex justify-center items-center h-screen"},L={class:"text-center animate-fade-in"},H={class:"text-xl font-semibold text-red-400"},R={key:1,class:"flex justify-center items-center h-screen"},W={key:2,class:"animate-fade-in"},q={class:"relative bg-black"},z={class:"max-w-[1920px] mx-auto"},K={class:"aspect-video w-full"},S=["src","title"],X={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},U={class:"mb-8 animate-slide-up"},A={class:"text-3xl md:text-4xl font-bold text-white mb-3"},G={class:"flex flex-wrap items-center gap-3 text-sm"},J={class:"px-3 py-1 bg-yellow-500 text-black font-bold rounded-full"},O={class:"text-gray-400"},Q={class:"px-2 py-1 border border-gray-600 text-gray-300 rounded"},Y={class:"text-gray-400"},Z={key:0,class:"animate-slide-up",style:{"animation-delay":"0.1s"}},P={class:"bg-gray-800/50 backdrop-blur-sm rounded-xl border border-gray-700 p-6"},ee={class:"flex items-center justify-between mb-6"},te={class:"text-gray-400 text-sm"},se={class:"grid grid-cols-4 sm:grid-cols-6 md:grid-cols-8 lg:grid-cols-10 xl:grid-cols-12 gap-3 max-h-96 overflow-y-auto scrollbar-thin scrollbar-thumb-yellow-500 scrollbar-track-gray-700 pr-2"},ae=["onClick","aria-label"],le={class:"text-sm"},oe={__name:"WatchMovie",setup(ne){const g=V(),f=T(),a=m(null),n=m(null),c=m([]),v=m(null),_=m(g.params.filmName),u=m(g.params.tap),p=s=>s.startsWith("Tập ")?s.substring(4).trim():s,y=s=>{const t=p(s);f.push(`/film/${_.value}/tap/${encodeURIComponent(t)}`)},w=async()=>{var s,t;v.value=null,a.value=null,n.value=null,c.value=[];try{const l=await E.get(`https://phimapi.com/phim/${_.value}`),h=l.data.movie,x=((t=(s=l.data.episodes)==null?void 0:s[0])==null?void 0:t.server_data)||[];if(a.value=h,c.value=x,h.type==="single"){const i=x.find(b=>b.name.toLowerCase().includes("full"));n.value=(i==null?void 0:i.link_embed)||null}else{const i=x.find(b=>parseInt(p(b.name))===parseInt(u.value));n.value=(i==null?void 0:i.link_embed)||null}n.value||(v.value="Không tìm thấy link tập phim hoặc tập phim không tồn tại.")}catch(l){console.error("Lỗi khi fetch dữ liệu phim để xem:",l),v.value="Không tải được dữ liệu phim hoặc tập phim. Vui lòng thử lại sau.",a.value=null,n.value=null,c.value=[]}};return $(()=>g.params,s=>{_.value=s.filmName,u.value=s.tap,w()},{immediate:!0}),(s,t)=>(d(),r("div",F,[v.value?(d(),r("div",I,[e("div",L,[t[0]||(t[0]=e("div",{class:"w-20 h-20 bg-red-500/20 rounded-full flex items-center justify-center mx-auto mb-4"},[e("svg",{class:"w-10 h-10 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("p",H,o(v.value),1)])])):!a.value||!n.value?(d(),r("div",R,t[1]||(t[1]=[C('<div class="text-center" data-v-d78a908c><div class="relative w-20 h-20 mx-auto mb-6" data-v-d78a908c><div class="absolute inset-0 border-4 border-yellow-400/30 rounded-full" data-v-d78a908c></div><div class="absolute inset-0 border-4 border-yellow-400 rounded-full border-t-transparent animate-spin" data-v-d78a908c></div></div><p class="text-xl font-semibold text-gray-300 animate-pulse" data-v-d78a908c>Đang tải phim...</p></div>',1)]))):(d(),r("div",W,[e("div",q,[e("div",z,[e("div",K,[e("iframe",{src:n.value,title:`Xem ${a.value.name} ${a.value.type==="single"?"Full":`Tập ${u.value}`}`,class:"w-full h-full",frameborder:"0",allowfullscreen:"",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"},null,8,S)])])]),e("div",X,[e("div",U,[e("h1",A,o(a.value.name),1),e("div",G,[e("span",J,o(a.value.type==="single"?"Full":`Tập ${u.value}`),1),e("span",O,o(a.value.year),1),t[2]||(t[2]=e("span",{class:"text-gray-400"},"•",-1)),e("span",Q,o(a.value.quality||"HD"),1),t[3]||(t[3]=e("span",{class:"text-gray-400"},"•",-1)),e("span",Y,o(a.value.lang||"Vietsub"),1)])]),c.value.length>1?(d(),r("div",Z,[e("div",P,[e("div",ee,[t[4]||(t[4]=e("h2",{class:"text-2xl font-bold text-white flex items-center gap-2"},[e("svg",{class:"w-6 h-6 text-yellow-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})]),j(" Danh sách tập ")],-1)),e("span",te,o(c.value.length)+" tập",1)]),e("div",se,[(d(!0),r(N,null,B(c.value,(l,h)=>(d(),r("button",{key:h,onClick:x=>y(l.name),class:D([{"bg-yellow-500 text-black ring-2 ring-yellow-400 shadow-lg shadow-yellow-500/50 scale-105":p(l.name)===u.value,"bg-gray-700 hover:bg-gray-600 text-white hover:scale-105":p(l.name)!==u.value},"aspect-square flex items-center justify-center rounded-lg font-bold transition-all duration-300 hover:shadow-lg group"]),"aria-label":`Xem tập ${l.name}`},[e("span",le,o(p(l.name)),1)],10,ae))),128))])])])):M("",!0)])]))]))}},re=k(oe,[["__scopeId","data-v-d78a908c"]]);export{re as default};
