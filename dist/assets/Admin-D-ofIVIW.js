import{_ as W,r as c,j as y,w as ft,x as D,o as n,l as _,m as z,c as l,d as p,U as Z,a as t,n as g,y as lt,t as o,T as H,a3 as rt,Z as K,k as vt,B as bt,e as B,F as w,f as k,b as at,p as yt,q as nt,S as _t,v as wt,h as N,L as kt,g as Ct}from"./index-dFMl2Q0B.js";const Mt={class:"h-1 bg-gray-800"},Tt={class:"p-6"},Bt={class:"flex items-start gap-4"},zt={class:"flex-shrink-0"},It={key:0,class:"w-6 h-6 text-white",fill:"currentColor",viewBox:"0 0 20 20"},Vt={key:1,class:"w-6 h-6 text-white",fill:"currentColor",viewBox:"0 0 20 20"},$t={key:2,class:"w-6 h-6 text-white",fill:"currentColor",viewBox:"0 0 20 20"},St={key:3,class:"w-6 h-6 text-white",fill:"currentColor",viewBox:"0 0 20 20"},Lt={class:"flex-1 min-w-0"},jt={class:"text-white font-bold text-lg mb-1"},Ht={class:"text-gray-400 text-sm leading-relaxed"},At={__name:"NotificationModal",props:{modelValue:{type:Boolean,default:!1},type:{type:String,default:"info",validator:i=>["success","error","warning","info"].includes(i)},title:{type:String,default:"Thông báo"},message:{type:String,default:""},duration:{type:Number,default:5e3}},emits:["update:modelValue"],setup(i,{emit:h}){const d=i,m=h,v=c(100);let I=null,x=null;const r=y(()=>({success:"border-green-500/50",error:"border-red-500/50",warning:"border-yellow-500/50",info:"border-blue-500/50"})[d.type]),V=y(()=>({success:"bg-gradient-to-br from-green-600 to-green-700",error:"bg-gradient-to-br from-red-600 to-red-700",warning:"bg-gradient-to-br from-yellow-600 to-orange-500",info:"bg-gradient-to-br from-blue-600 to-blue-700"})[d.type]),$=y(()=>({success:"bg-gradient-to-r from-green-600 to-green-500",error:"bg-gradient-to-r from-red-600 to-red-500",warning:"bg-gradient-to-r from-yellow-600 to-orange-500",info:"bg-gradient-to-r from-blue-600 to-blue-500"})[d.type]),b=()=>{m("update:modelValue",!1),A()},A=()=>{I&&clearTimeout(I),x&&clearInterval(x),v.value=100};return ft(()=>d.modelValue,C=>{if(C){v.value=100,I=setTimeout(()=>{b()},d.duration);const u=50,M=100/(d.duration/u);x=setInterval(()=>{v.value-=M,v.value<=0&&clearInterval(x)},u)}else A()}),(C,u)=>(n(),D(rt,{to:"body"},[_(H,{name:"notification"},{default:z(()=>[i.modelValue?(n(),l("div",{key:0,class:"fixed inset-0 z-50 flex items-start justify-end p-6",onClick:Z(b,["self"])},[t("div",{class:g(["w-full max-w-md bg-gradient-to-br from-gray-900 to-gray-800 rounded-2xl shadow-2xl border overflow-hidden",r.value])},[t("div",Mt,[t("div",{class:g(["h-full transition-all duration-[5000ms] ease-linear",$.value]),style:lt({width:v.value+"%"})},null,6)]),t("div",Tt,[t("div",Bt,[t("div",zt,[t("div",{class:g(["w-12 h-12 rounded-xl flex items-center justify-center",V.value])},[i.type==="success"?(n(),l("svg",It,u[0]||(u[0]=[t("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)]))):i.type==="error"?(n(),l("svg",Vt,u[1]||(u[1]=[t("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"},null,-1)]))):i.type==="warning"?(n(),l("svg",$t,u[2]||(u[2]=[t("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"},null,-1)]))):(n(),l("svg",St,u[3]||(u[3]=[t("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"},null,-1)])))],2)]),t("div",Lt,[t("h3",jt,o(i.title),1),t("p",Ht,o(i.message),1)]),t("button",{onClick:b,class:"flex-shrink-0 text-gray-400 hover:text-white transition-colors"},u[4]||(u[4]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))])])],2)])):p("",!0)]),_:1})]))}},Nt=W(At,[["__scopeId","data-v-5a714d15"]]),Dt={class:"bg-gradient-to-br from-gray-900 to-gray-800 rounded-2xl max-w-md w-full border border-gray-700 shadow-2xl transform transition-all"},Et={class:"p-6 text-center"},Pt={class:"text-2xl font-black text-white mb-2"},Ut={class:"text-gray-300 text-base"},Ot={class:"p-6 pt-0 flex gap-3"},Rt={template:`
    <svg fill="currentColor" viewBox="0 0 20 20">
      <path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"/>
    </svg>
  `},Gt={template:`
    <svg fill="currentColor" viewBox="0 0 20 20">
      <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"/>
    </svg>
  `},Ft={template:`
    <svg fill="currentColor" viewBox="0 0 20 20">
      <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
    </svg>
  `},Xt={template:`
    <svg fill="currentColor" viewBox="0 0 20 20">
      <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"/>
    </svg>
  `},qt={components:{WarningIcon:Rt,DangerIcon:Gt,SuccessIcon:Ft,InfoIcon:Xt}},Qt=Object.assign(qt,{__name:"ConfirmModal",props:{modelValue:{type:Boolean,default:!1},title:{type:String,default:"Xác nhận"},message:{type:String,default:"Bạn có chắc chắn muốn thực hiện hành động này?"},confirmText:{type:String,default:"Xác nhận"},cancelText:{type:String,default:"Hủy"},type:{type:String,default:"warning",validator:i=>["warning","danger","success","info"].includes(i)}},emits:["update:modelValue","confirm","cancel"],setup(i,{emit:h}){const d=i,m=h,v=y(()=>({warning:"WarningIcon",danger:"DangerIcon",success:"SuccessIcon",info:"InfoIcon"})[d.type]),I=y(()=>({warning:"bg-yellow-500/20",danger:"bg-red-500/20",success:"bg-green-500/20",info:"bg-blue-500/20"})[d.type]),x=y(()=>({warning:"text-yellow-400",danger:"text-red-400",success:"text-green-400",info:"text-blue-400"})[d.type]),r=y(()=>({warning:"bg-gradient-to-r from-yellow-600 to-orange-600 hover:from-yellow-700 hover:to-orange-700 text-white",danger:"bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 text-white",success:"bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white",info:"bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white"})[d.type]),V=()=>{m("confirm"),m("update:modelValue",!1)},$=()=>{m("cancel"),m("update:modelValue",!1)};return(b,A)=>(n(),D(rt,{to:"body"},[_(H,{name:"modal"},{default:z(()=>[i.modelValue?(n(),l("div",{key:0,class:"fixed inset-0 bg-black/80 backdrop-blur-sm z-[100] flex items-center justify-center p-4",onClick:Z($,["self"])},[t("div",Dt,[t("div",Et,[t("div",{class:g(["w-16 h-16 rounded-full mx-auto mb-4 flex items-center justify-center",I.value])},[(n(),D(K(v.value),{class:g(["w-8 h-8",x.value])},null,8,["class"]))],2),t("h3",Pt,o(i.title),1),t("p",Ut,o(i.message),1)]),t("div",Ot,[t("button",{onClick:$,class:"flex-1 bg-gray-700 hover:bg-gray-600 text-white font-bold py-3 px-6 rounded-xl transition-all"},o(i.cancelText),1),t("button",{onClick:V,class:g(["flex-1 font-bold py-3 px-6 rounded-xl transition-all",r.value])},o(i.confirmText),3)])])])):p("",!0)]),_:1})]))}}),Kt=W(Qt,[["__scopeId","data-v-132ebc35"]]),Wt={class:"min-h-screen bg-gradient-to-br from-gray-900 via-black to-gray-900"},Zt={class:"bg-gradient-to-br from-gray-900 to-gray-800 rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto border border-gray-700 shadow-2xl"},Jt={class:"sticky top-0 bg-gradient-to-r from-red-600 to-yellow-500 p-6 flex items-center justify-between"},Yt={class:"text-white/80 text-sm mt-1"},te={key:0,class:"p-6 space-y-6"},ee={class:"bg-gray-800/50 rounded-xl p-6 border border-gray-700"},se={class:"grid grid-cols-2 gap-4"},oe={class:"text-white font-medium"},ae={class:"text-white font-medium"},ne={class:"text-white font-medium"},le={class:"text-white font-medium"},re={class:"bg-gray-800/50 rounded-xl p-6 border border-gray-700"},ie={class:"grid grid-cols-2 gap-4"},de={class:"text-white font-mono font-bold"},ce={class:"text-white font-medium"},ue={class:"text-white font-medium"},ge={class:"bg-gray-800/50 rounded-xl p-6 border border-gray-700"},he={class:"space-y-3"},me={class:"flex-1"},pe={class:"text-white font-bold"},xe={class:"text-gray-400 text-sm"},fe={class:"text-right"},ve={class:"text-white font-bold"},be={class:"text-gray-400 text-sm"},ye={class:"bg-gradient-to-r from-red-600/20 to-yellow-500/20 rounded-xl p-6 border border-red-500/30"},_e={class:"flex items-center justify-between"},we={class:"text-3xl font-black text-white"},ke={class:"text-right"},Ce={class:"text-xl font-bold text-yellow-400"},Me={key:0,class:"bg-gray-800/50 rounded-xl p-6 border border-gray-700"},Te={class:"text-gray-300"},Be={key:1,class:"bg-green-500/10 border border-green-500/30 rounded-xl p-4"},ze={class:"sticky bottom-0 bg-gray-900 p-6 border-t border-gray-700 flex gap-4"},Ie={class:"fixed left-0 top-0 h-full w-64 bg-gray-900/95 backdrop-blur-xl border-r border-gray-800 z-40"},Ve={class:"p-6"},$e={class:"space-y-2"},Se=["onClick"],Le={class:"font-medium flex-1"},je={key:0,class:"bg-red-500 text-white text-xs px-2 py-0.5 rounded-full animate-pulse flex-shrink-0"},He={class:"ml-64 p-8"},Ae={class:"mb-8"},Ne={class:"flex items-center justify-between"},De={class:"flex items-center gap-4"},Ee={class:"text-3xl font-black text-white mb-2"},Pe={class:"text-gray-400"},Ue={key:0,class:"flex items-center gap-2 text-gray-400"},Oe={key:"dashboard",class:"space-y-6"},Re={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},Ge={class:"relative"},Fe={class:"flex items-center justify-between mb-4"},Xe={class:"text-gray-400 text-sm mb-2"},qe={class:"text-3xl font-black text-white"},Qe={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},Ke={class:"bg-gradient-to-br from-gray-900/90 to-gray-800/90 backdrop-blur-sm rounded-2xl p-6 border border-gray-700/50"},We={class:"space-y-3"},Ze={class:"flex items-center gap-3"},Je={class:"w-10 h-10 rounded-lg bg-gradient-to-br from-blue-600 to-cyan-500 flex items-center justify-center"},Ye={class:"text-white font-bold text-sm"},ts={class:"text-white font-medium text-sm"},es={class:"text-gray-400 text-xs"},ss={class:"text-right"},os={class:"text-white font-bold"},as={class:"bg-gradient-to-br from-gray-900/90 to-gray-800/90 backdrop-blur-sm rounded-2xl p-6 border border-gray-700/50"},ns={class:"space-y-4"},ls={class:"flex items-center justify-between"},rs={class:"text-white font-medium"},is={class:"text-gray-400 text-sm"},ds={class:"h-2 bg-gray-800 rounded-full overflow-hidden"},cs={key:"orders",class:"space-y-6"},us={class:"flex items-center gap-4"},gs={class:"flex-1"},hs={class:"bg-gradient-to-br from-gray-900/90 to-gray-800/90 backdrop-blur-sm rounded-2xl border border-gray-700/50 overflow-hidden"},ms={class:"overflow-x-auto"},ps={class:"w-full"},xs={class:"p-4"},fs={class:"text-white font-mono font-bold"},vs={class:"p-4"},bs={class:"text-white font-medium"},ys={class:"text-gray-400 text-sm"},_s={class:"p-4"},ws={class:"text-white font-bold"},ks={class:"p-4"},Cs={class:"text-gray-400 text-sm"},Ms={class:"p-4"},Ts={class:"p-4"},Bs={class:"text-gray-400 text-sm"},zs={class:"p-4"},Is={class:"flex items-center gap-2"},Vs=["onClick"],$s={key:"users",class:"space-y-6"},Ss={class:"bg-gradient-to-br from-gray-900/90 to-gray-800/90 backdrop-blur-sm rounded-2xl border border-gray-700/50 overflow-hidden"},Ls={class:"overflow-x-auto"},js={class:"w-full"},Hs={class:"p-4"},As={class:"text-white font-mono"},Ns={class:"p-4"},Ds={class:"text-white font-medium"},Es={class:"p-4"},Ps={class:"text-gray-400 text-sm"},Us={class:"p-4"},Os={class:"p-4"},Rs={class:"text-white"},Gs={class:"p-4"},Fs={class:"text-white font-bold"},Xs={class:"p-4"},qs={key:"plans",class:"space-y-6"},Qs={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},Ks={class:"text-2xl font-black text-white mb-2"},Ws={class:"text-3xl font-black text-transparent bg-clip-text bg-gradient-to-r from-red-600 to-yellow-500 mb-4"},Zs={class:"space-y-2 text-sm"},Js={class:"text-gray-400"},Ys={class:"text-white font-bold"},to={class:"text-gray-400"},eo={class:"text-white font-bold"},so={class:"text-gray-400"},oo={class:"text-white font-bold"},ao={class:"text-gray-400"},no={class:"text-white font-bold"},lo={class:"text-gray-400"},ro={class:"text-white font-bold"},io={key:"coupons",class:"space-y-6"},co={class:"bg-gradient-to-br from-gray-900/90 to-gray-800/90 backdrop-blur-sm rounded-2xl border border-gray-700/50 overflow-hidden"},uo={class:"overflow-x-auto"},go={class:"w-full"},ho={class:"p-4"},mo={class:"text-white font-mono font-bold"},po={class:"p-4"},xo={class:"text-gray-400 text-sm"},fo={class:"p-4"},vo={class:"text-yellow-400 font-bold"},bo={class:"p-4"},yo={class:"text-white"},_o={class:"p-4"},wo={class:"text-gray-400"},ko={class:"p-4"},Co={class:"text-gray-400 text-sm"},Mo={class:"p-4"},To={__name:"Admin",setup(i){Ct();const h=c("dashboard"),d=c(""),m=c(""),v=c(!1),I=c(!1),x=c(!1),r=c(null),V=c([]),$=c(!1),b=c([]),A=c([]),C=c([]),u=c({type:"success",title:"",message:""}),S=c({title:"",message:"",type:"warning",confirmText:"Xác nhận",cancelText:"Hủy",onConfirm:()=>{}}),M=kt.BACKEND_URL,P=c(0),J=y(()=>[{id:"dashboard",label:"Dashboard",icon:"DashboardIcon"},{id:"orders",label:"Đơn hàng",icon:"OrdersIcon",badge:P.value>0?P.value.toString():null},{id:"users",label:"Người dùng",icon:"UsersIcon"},{id:"plans",label:"Gói dịch vụ",icon:"PlansIcon"},{id:"coupons",label:"Mã giảm giá",icon:"CouponsIcon"}]),L=c([{label:"Tổng doanh thu",value:"0 đ",change:"+0%",icon:"MoneyIcon",iconBg:"bg-gradient-to-br from-green-600 to-green-700",changeBg:"bg-green-500/20 text-green-400",gradient:"from-green-600 to-green-700"},{label:"Đơn hàng",value:"0",change:"+0%",icon:"CartIcon",iconBg:"bg-gradient-to-br from-blue-600 to-blue-700",changeBg:"bg-blue-500/20 text-blue-400",gradient:"from-blue-600 to-blue-700"},{label:"Người dùng",value:"0",change:"+0%",icon:"UsersIcon",iconBg:"bg-gradient-to-br from-purple-600 to-purple-700",changeBg:"bg-purple-500/20 text-purple-400",gradient:"from-purple-600 to-purple-700"},{label:"Chờ xử lý",value:"0",change:"0",icon:"ClockIcon",iconBg:"bg-gradient-to-br from-orange-600 to-orange-700",changeBg:"bg-orange-500/20 text-orange-400",gradient:"from-orange-600 to-orange-700"}]),U=c([]),Y=c([]),it=y(()=>{const a=J.value.find(e=>e.id===h.value);return(a==null?void 0:a.label)||"Dashboard"}),dt=y(()=>({dashboard:"Tổng quan hệ thống",orders:"Xem thông tin đơn hàng (Thanh toán tự động kích hoạt)",users:"Quản lý người dùng",plans:"Quản lý gói dịch vụ",coupons:"Quản lý mã giảm giá"})[h.value]||""),ct=y(()=>{let a=U.value;return d.value&&(a=a.filter(e=>e.order_code.toLowerCase().includes(d.value.toLowerCase())||e.customer_name.toLowerCase().includes(d.value.toLowerCase()))),m.value&&(a=a.filter(e=>e.payment_status===m.value)),a}),O=a=>{const e={pending:"bg-yellow-500/20 text-yellow-400",paid:"bg-green-500/20 text-green-400",failed:"bg-red-500/20 text-red-400"};return e[a]||e.pending},R=a=>({pending:"Chờ xử lý",paid:"Đã thanh toán",failed:"Thất bại"})[a]||a,tt=a=>({vnpay:"VNPay",momo:"MoMo",bank_transfer:"Chuyển khoản",cod:"Thanh toán sau"})[a]||a,ut=async a=>{r.value=a,x.value=!0;try{const e=await N.get(`${M}/orders.php?order_id=${a.id}`);e.data.success&&(V.value=e.data.items||[])}catch(e){console.error("Error fetching order items:",e),V.value=[]}},G=a=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(a),F=async(a=2)=>{try{const e=await N.get(`${M}/admin/statistics.php`,{timeout:5e3});if(e.data.success){const f=e.data.data;L.value[0].value=f.total_revenue_formatted,L.value[0].change=f.revenue_change_formatted,L.value[0].changeBg=f.revenue_change>=0?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400",L.value[1].value=f.total_orders.toString(),L.value[2].value=f.total_users.toString(),L.value[3].value=f.pending_orders.toString(),P.value=f.pending_orders,Y.value=f.top_plans.map(j=>({name:j.name,count:j.order_count,percentage:j.percentage,color:gt(j.slug)}))}}catch(e){if(console.error("Error fetching statistics:",e),a>0)return console.log(`Retrying... (${a} attempts left)`),await new Promise(f=>setTimeout(f,1e3)),F(a-1);T&&console.error("Failed to fetch statistics after retries")}},et=async()=>{try{const a=new URLSearchParams;m.value&&a.append("status",m.value),d.value&&a.append("search",d.value),a.append("limit","50");const e=await N.get(`${M}/admin/orders.php?${a.toString()}`,{timeout:5e3});e.data.success&&(U.value=e.data.data)}catch(a){T&&console.error("Error fetching orders:",a)}},gt=a=>{const e={premium:"bg-gradient-to-r from-red-600 to-yellow-500",basic:"bg-gradient-to-r from-blue-600 to-cyan-500",vip:"bg-gradient-to-r from-purple-600 to-pink-500",free:"bg-gradient-to-r from-gray-600 to-gray-500"};return e[a]||e.basic};let E=null,T=!0;const st=()=>{T=!document.hidden,T?(X(),ot()):q()},X=async()=>{if(T)try{await Promise.allSettled([F(),et(),mt(),pt(),xt()])}catch(a){console.error("Error refreshing data:",a)}},ot=()=>{q(),E=setInterval(()=>{X()},1e4)},q=()=>{E&&(clearInterval(E),E=null)},ht=()=>{F(),et(),u.value={type:"success",title:"Đã cập nhật!",message:"Dữ liệu đã được làm mới"},v.value=!0},mt=async()=>{try{const a=await N.get(`${M}/admin/users.php?limit=100`,{timeout:5e3});a.data.success&&(b.value=a.data.data)}catch(a){T&&console.error("Error fetching users:",a)}},pt=async()=>{try{const a=await N.get(`${M}/admin/plans.php`,{timeout:5e3});a.data.success&&(A.value=a.data.data)}catch(a){T&&console.error("Error fetching plans:",a)}},xt=async()=>{try{const a=await N.get(`${M}/admin/coupons.php`,{timeout:5e3});a.data.success&&(C.value=a.data.data)}catch(a){T&&console.error("Error fetching coupons:",a)}};return vt(()=>{X(),ot(),document.addEventListener("visibilitychange",st)}),bt(()=>{q(),document.removeEventListener("visibilitychange",st)}),(a,e)=>{var j;const f=yt("router-link");return n(),l("div",Wt,[_(Nt,{modelValue:v.value,"onUpdate:modelValue":e[0]||(e[0]=s=>v.value=s),type:u.value.type,title:u.value.title,message:u.value.message},null,8,["modelValue","type","title","message"]),_(Kt,{modelValue:$.value,"onUpdate:modelValue":e[1]||(e[1]=s=>$.value=s),title:S.value.title,message:S.value.message,type:S.value.type,"confirm-text":S.value.confirmText,"cancel-text":S.value.cancelText,onConfirm:S.value.onConfirm},null,8,["modelValue","title","message","type","confirm-text","cancel-text","onConfirm"]),x.value?(n(),l("div",{key:0,class:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:e[4]||(e[4]=Z(s=>x.value=!1,["self"]))},[t("div",Zt,[t("div",Jt,[t("div",null,[e[7]||(e[7]=t("h3",{class:"text-2xl font-black text-white"},"Chi tiết đơn hàng",-1)),t("p",Yt,o((j=r.value)==null?void 0:j.order_code),1)]),t("button",{onClick:e[2]||(e[2]=s=>x.value=!1),class:"w-10 h-10 rounded-full bg-white/20 hover:bg-white/30 flex items-center justify-center transition-all"},e[8]||(e[8]=[t("svg",{class:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),r.value?(n(),l("div",te,[t("div",ee,[e[13]||(e[13]=t("h4",{class:"text-lg font-bold text-white mb-4 flex items-center gap-2"},[t("svg",{class:"w-5 h-5 text-blue-400",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{"fill-rule":"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z","clip-rule":"evenodd"})]),B(" Thông tin khách hàng ")],-1)),t("div",se,[t("div",null,[e[9]||(e[9]=t("p",{class:"text-gray-400 text-sm"},"Họ tên",-1)),t("p",oe,o(r.value.customer_name),1)]),t("div",null,[e[10]||(e[10]=t("p",{class:"text-gray-400 text-sm"},"Email",-1)),t("p",ae,o(r.value.customer_email),1)]),t("div",null,[e[11]||(e[11]=t("p",{class:"text-gray-400 text-sm"},"Số điện thoại",-1)),t("p",ne,o(r.value.customer_phone||"Chưa có"),1)]),t("div",null,[e[12]||(e[12]=t("p",{class:"text-gray-400 text-sm"},"Ngày đặt",-1)),t("p",le,o(r.value.created_at),1)])])]),t("div",re,[e[18]||(e[18]=t("h4",{class:"text-lg font-bold text-white mb-4 flex items-center gap-2"},[t("svg",{class:"w-5 h-5 text-green-400",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{d:"M3 1a1 1 0 000 2h1.22l.305 1.222a.997.997 0 00.01.042l1.358 5.43-.893.892C3.74 11.846 4.632 14 6.414 14H15a1 1 0 000-2H6.414l1-1H14a1 1 0 00.894-.553l3-6A1 1 0 0017 3H6.28l-.31-1.243A1 1 0 005 1H3zM16 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM6.5 18a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"})]),B(" Thông tin đơn hàng ")],-1)),t("div",ie,[t("div",null,[e[14]||(e[14]=t("p",{class:"text-gray-400 text-sm"},"Mã đơn hàng",-1)),t("p",de,o(r.value.order_code),1)]),t("div",null,[e[15]||(e[15]=t("p",{class:"text-gray-400 text-sm"},"Phương thức thanh toán",-1)),t("p",ce,o(tt(r.value.payment_method)),1)]),t("div",null,[e[16]||(e[16]=t("p",{class:"text-gray-400 text-sm"},"Trạng thái thanh toán",-1)),t("span",{class:g(["px-3 py-1 rounded-full text-xs font-bold inline-block",O(r.value.payment_status)])},o(R(r.value.payment_status)),3)]),t("div",null,[e[17]||(e[17]=t("p",{class:"text-gray-400 text-sm"},"Trạng thái đơn hàng",-1)),t("span",ue,o(r.value.status),1)])])]),t("div",ge,[e[19]||(e[19]=t("h4",{class:"text-lg font-bold text-white mb-4 flex items-center gap-2"},[t("svg",{class:"w-5 h-5 text-purple-400",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{d:"M7 3a1 1 0 000 2h6a1 1 0 100-2H7zM4 7a1 1 0 011-1h10a1 1 0 110 2H5a1 1 0 01-1-1zM2 11a2 2 0 012-2h12a2 2 0 012 2v4a2 2 0 01-2 2H4a2 2 0 01-2-2v-4z"})]),B(" Chi tiết sản phẩm ")],-1)),t("div",he,[(n(!0),l(w,null,k(V.value,s=>(n(),l("div",{key:s.id,class:"flex items-center justify-between p-4 bg-gray-900/50 rounded-lg"},[t("div",me,[t("p",pe,o(s.plan_name),1),t("p",xe,o(s.duration_months)+" tháng × "+o(s.quantity),1)]),t("div",fe,[t("p",ve,o(G(s.total)),1),t("p",be,o(G(s.price))+" / tháng",1)])]))),128))])]),t("div",ye,[t("div",_e,[t("div",null,[e[20]||(e[20]=t("p",{class:"text-gray-300 text-sm"},"Tổng cộng",-1)),t("p",we,o(r.value.total_formatted),1)]),t("div",ke,[e[21]||(e[21]=t("p",{class:"text-gray-300 text-sm"},"Giảm giá",-1)),t("p",Ce,o(G(r.value.discount||0)),1)])])]),r.value.note?(n(),l("div",Me,[e[22]||(e[22]=t("h4",{class:"text-lg font-bold text-white mb-2"},"Ghi chú",-1)),t("p",Te,o(r.value.note),1)])):p("",!0),r.value.payment_status==="paid"?(n(),l("div",Be,e[23]||(e[23]=[at('<div class="flex items-center gap-3" data-v-b9d6b92e><svg class="w-6 h-6 text-green-400" fill="currentColor" viewBox="0 0 20 20" data-v-b9d6b92e><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" data-v-b9d6b92e></path></svg><div data-v-b9d6b92e><p class="text-green-400 font-bold" data-v-b9d6b92e>Đã kích hoạt tự động</p><p class="text-green-300 text-sm" data-v-b9d6b92e>Subscription đã được kích hoạt ngay sau khi thanh toán thành công</p></div></div>',1)]))):p("",!0)])):p("",!0),t("div",ze,[t("button",{onClick:e[3]||(e[3]=s=>x.value=!1),class:"flex-1 bg-gray-700 hover:bg-gray-600 text-white font-bold py-3 px-6 rounded-xl transition-all"}," Đóng ")])])])):p("",!0),t("aside",Ie,[t("div",Ve,[_(f,{to:"/home",class:"flex items-center gap-3 mb-8 hover:opacity-80 transition-opacity cursor-pointer group"},{default:z(()=>e[24]||(e[24]=[t("div",{class:"w-10 h-10 rounded-xl bg-gradient-to-br from-red-600 to-yellow-500 flex items-center justify-center group-hover:scale-110 transition-transform"},[t("svg",{class:"w-6 h-6 text-white",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{d:"M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z"})])],-1),t("div",null,[t("h1",{class:"text-xl font-black text-white"},"HTHREE"),t("p",{class:"text-xs text-gray-400"},"Admin Panel")],-1)])),_:1}),t("nav",$e,[(n(!0),l(w,null,k(J.value,s=>(n(),l("button",{key:s.id,onClick:Q=>h.value=s.id,class:g(["w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-300 text-left",h.value===s.id?"bg-gradient-to-r from-red-600 to-yellow-500 text-white shadow-lg shadow-red-500/20":"text-gray-400 hover:text-white hover:bg-gray-800"])},[(n(),D(K(s.icon),{class:"w-5 h-5 flex-shrink-0"})),t("span",Le,o(s.label),1),s.badge?(n(),l("span",je,o(s.badge),1)):p("",!0)],10,Se))),128))])]),e[25]||(e[25]=at('<div class="absolute bottom-0 left-0 right-0 p-6 border-t border-gray-800" data-v-b9d6b92e><div class="flex items-center gap-3" data-v-b9d6b92e><div class="w-10 h-10 rounded-full bg-gradient-to-br from-purple-600 to-pink-500 flex items-center justify-center" data-v-b9d6b92e><span class="text-white font-bold" data-v-b9d6b92e>A</span></div><div class="flex-1 min-w-0" data-v-b9d6b92e><p class="text-white font-medium text-sm truncate" data-v-b9d6b92e>Admin</p><p class="text-gray-400 text-xs" data-v-b9d6b92e>Super Admin</p></div></div></div>',1))]),t("main",He,[t("header",Ae,[t("div",Ne,[t("div",De,[t("div",null,[t("h2",Ee,o(it.value),1),t("p",Pe,o(dt.value),1)]),I.value?(n(),l("div",Ue,e[26]||(e[26]=[t("svg",{class:"animate-spin h-5 w-5",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),t("span",{class:"text-sm"},"Đang tải...",-1)]))):p("",!0)]),t("div",{class:"flex items-center gap-4"},[t("button",{onClick:ht,class:"p-3 bg-gray-800 rounded-xl hover:bg-gray-700 transition-all group",title:"Làm mới dữ liệu"},e[27]||(e[27]=[t("svg",{class:"w-6 h-6 text-gray-400 group-hover:text-white group-hover:rotate-180 transition-all duration-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1)])),e[28]||(e[28]=t("button",{class:"relative p-3 bg-gray-800 rounded-xl hover:bg-gray-700 transition-all"},[t("svg",{class:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})]),t("span",{class:"absolute top-2 right-2 w-2 h-2 bg-red-500 rounded-full"})],-1))])])]),_(H,{name:"slide-fade",mode:"out-in"},{default:z(()=>[h.value==="dashboard"?(n(),l("div",Oe,[t("div",Re,[(n(!0),l(w,null,k(L.value,(s,Q)=>(n(),l("div",{key:Q,class:"group relative overflow-hidden bg-gradient-to-br from-gray-900/90 to-gray-800/90 backdrop-blur-sm rounded-2xl p-6 border border-gray-700/50 hover:border-gray-600 transition-all duration-300 hover:scale-105"},[t("div",{class:g(["absolute inset-0 bg-gradient-to-br opacity-0 group-hover:opacity-10 transition-opacity",s.gradient])},null,2),t("div",Ge,[t("div",Fe,[t("div",{class:g(["w-12 h-12 rounded-xl flex items-center justify-center",s.iconBg])},[(n(),D(K(s.icon),{class:"w-6 h-6 text-white"}))],2),t("span",{class:g(["text-sm font-bold px-2 py-1 rounded-lg",s.changeBg])},o(s.change),3)]),t("h3",Xe,o(s.label),1),t("p",qe,o(s.value),1)])]))),128))]),t("div",Qe,[t("div",Ke,[e[29]||(e[29]=t("h3",{class:"text-xl font-bold text-white mb-4"},"Đơn hàng gần đây",-1)),t("div",We,[(n(!0),l(w,null,k(U.value.slice(0,5),s=>(n(),l("div",{key:s.id,class:"flex items-center justify-between p-4 bg-gray-800/50 rounded-xl hover:bg-gray-800 transition-all"},[t("div",Ze,[t("div",Je,[t("span",Ye,o(s.order_code.slice(-3)),1)]),t("div",null,[t("p",ts,o(s.customer_name),1),t("p",es,o(s.created_at),1)])]),t("div",ss,[t("p",os,o(s.total_formatted),1),t("span",{class:g(["text-xs px-2 py-1 rounded-full",O(s.payment_status)])},o(R(s.payment_status)),3)])]))),128))])]),t("div",as,[e[30]||(e[30]=t("h3",{class:"text-xl font-bold text-white mb-4"},"Gói phổ biến",-1)),t("div",ns,[(n(!0),l(w,null,k(Y.value,s=>(n(),l("div",{key:s.name,class:"space-y-2"},[t("div",ls,[t("span",rs,o(s.name),1),t("span",is,o(s.count)+" đơn",1)]),t("div",ds,[t("div",{class:g(["h-full rounded-full transition-all duration-500",s.color]),style:lt({width:s.percentage+"%"})},null,6)])]))),128))])])])])):p("",!0)]),_:1}),_(H,{name:"slide-fade",mode:"out-in"},{default:z(()=>[h.value==="orders"?(n(),l("div",cs,[t("div",us,[t("div",gs,[nt(t("input",{"onUpdate:modelValue":e[5]||(e[5]=s=>d.value=s),type:"text",placeholder:"Tìm kiếm đơn hàng...",class:"w-full bg-gray-800/80 text-white px-4 py-3 rounded-xl border border-gray-700 focus:border-red-600 focus:outline-none focus:ring-2 focus:ring-red-600/20 transition-all"},null,512),[[_t,d.value]])]),nt(t("select",{"onUpdate:modelValue":e[6]||(e[6]=s=>m.value=s),class:"bg-gray-800/80 text-white px-4 py-3 rounded-xl border border-gray-700 focus:border-red-600 focus:outline-none"},e[31]||(e[31]=[t("option",{value:""},"Tất cả trạng thái",-1),t("option",{value:"pending"},"Chờ xử lý",-1),t("option",{value:"paid"},"Đã thanh toán",-1),t("option",{value:"failed"},"Thất bại",-1)]),512),[[wt,m.value]])]),t("div",hs,[t("div",ms,[t("table",ps,[e[33]||(e[33]=t("thead",null,[t("tr",{class:"border-b border-gray-800"},[t("th",{class:"text-left p-4 text-gray-400 font-medium text-sm"},"Mã đơn"),t("th",{class:"text-left p-4 text-gray-400 font-medium text-sm"},"Khách hàng"),t("th",{class:"text-left p-4 text-gray-400 font-medium text-sm"},"Số tiền"),t("th",{class:"text-left p-4 text-gray-400 font-medium text-sm"},"Thanh toán"),t("th",{class:"text-left p-4 text-gray-400 font-medium text-sm"},"Trạng thái"),t("th",{class:"text-left p-4 text-gray-400 font-medium text-sm"},"Ngày tạo"),t("th",{class:"text-left p-4 text-gray-400 font-medium text-sm"},"Thao tác")])],-1)),t("tbody",null,[(n(!0),l(w,null,k(ct.value,s=>(n(),l("tr",{key:s.id,class:"border-b border-gray-800 hover:bg-gray-800/50 transition-all"},[t("td",xs,[t("span",fs,o(s.order_code),1)]),t("td",vs,[t("div",null,[t("p",bs,o(s.customer_name),1),t("p",ys,o(s.customer_email),1)])]),t("td",_s,[t("span",ws,o(s.total_formatted),1)]),t("td",ks,[t("span",Cs,o(tt(s.payment_method)),1)]),t("td",Ms,[t("span",{class:g(["px-3 py-1 rounded-full text-xs font-bold",O(s.payment_status)])},o(R(s.payment_status)),3)]),t("td",Ts,[t("span",Bs,o(s.created_at),1)]),t("td",zs,[t("div",Is,[t("button",{onClick:Q=>ut(s),class:"p-2 bg-blue-600 hover:bg-blue-700 rounded-lg transition-all",title:"Xem chi tiết"},e[32]||(e[32]=[t("svg",{class:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)]),8,Vs)])])]))),128))])])])])])):p("",!0)]),_:1}),_(H,{name:"slide-fade",mode:"out-in"},{default:z(()=>[h.value==="users"?(n(),l("div",$s,[t("div",Ss,[t("div",Ls,[t("table",js,[e[34]||(e[34]=t("thead",null,[t("tr",{class:"border-b border-gray-800"},[t("th",{class:"text-left p-4 text-gray-400 font-medium text-sm"},"ID"),t("th",{class:"text-left p-4 text-gray-400 font-medium text-sm"},"Tên"),t("th",{class:"text-left p-4 text-gray-400 font-medium text-sm"},"Email"),t("th",{class:"text-left p-4 text-gray-400 font-medium text-sm"},"Role"),t("th",{class:"text-left p-4 text-gray-400 font-medium text-sm"},"Đơn hàng"),t("th",{class:"text-left p-4 text-gray-400 font-medium text-sm"},"Tổng chi"),t("th",{class:"text-left p-4 text-gray-400 font-medium text-sm"},"Trạng thái")])],-1)),t("tbody",null,[(n(!0),l(w,null,k(b.value,s=>(n(),l("tr",{key:s.id,class:"border-b border-gray-800 hover:bg-gray-800/50 transition-all"},[t("td",Hs,[t("span",As,o(s.id),1)]),t("td",Ns,[t("span",Ds,o(s.username),1)]),t("td",Es,[t("span",Ps,o(s.email),1)]),t("td",Us,[t("span",{class:g(["px-3 py-1 rounded-full text-xs font-bold",s.role==="admin"?"bg-purple-500/20 text-purple-400":"bg-blue-500/20 text-blue-400"])},o(s.role),3)]),t("td",Os,[t("span",Rs,o(s.total_orders),1)]),t("td",Gs,[t("span",Fs,o(s.total_spent_formatted),1)]),t("td",Xs,[t("span",{class:g(["px-3 py-1 rounded-full text-xs font-bold",s.is_active?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"])},o(s.is_active?"Active":"Inactive"),3)])]))),128))])])])])])):p("",!0)]),_:1}),_(H,{name:"slide-fade",mode:"out-in"},{default:z(()=>[h.value==="plans"?(n(),l("div",qs,[t("div",Qs,[(n(!0),l(w,null,k(A.value,s=>(n(),l("div",{key:s.id,class:"bg-gradient-to-br from-gray-900/90 to-gray-800/90 backdrop-blur-sm rounded-2xl p-6 border border-gray-700/50 hover:border-gray-600 transition-all"},[t("h3",Ks,o(s.name),1),t("p",Ws,o(s.price_formatted),1),t("div",Zs,[t("p",Js,[e[35]||(e[35]=B("Chất lượng: ")),t("span",Ys,o(s.quality),1)]),t("p",to,[e[36]||(e[36]=B("Thiết bị: ")),t("span",eo,o(s.max_devices),1)]),t("p",so,[e[37]||(e[37]=B("Đã bán: ")),t("span",oo,o(s.times_sold)+" lần",1)]),t("p",ao,[e[38]||(e[38]=B("Doanh thu: ")),t("span",no,o(s.total_revenue_formatted),1)]),t("p",lo,[e[39]||(e[39]=B("Đang dùng: ")),t("span",ro,o(s.active_subscriptions)+" người",1)])])]))),128))])])):p("",!0)]),_:1}),_(H,{name:"slide-fade",mode:"out-in"},{default:z(()=>[h.value==="coupons"?(n(),l("div",io,[t("div",co,[t("div",uo,[t("table",go,[e[40]||(e[40]=t("thead",null,[t("tr",{class:"border-b border-gray-800"},[t("th",{class:"text-left p-4 text-gray-400 font-medium text-sm"},"Mã"),t("th",{class:"text-left p-4 text-gray-400 font-medium text-sm"},"Mô tả"),t("th",{class:"text-left p-4 text-gray-400 font-medium text-sm"},"Giảm giá"),t("th",{class:"text-left p-4 text-gray-400 font-medium text-sm"},"Đã dùng"),t("th",{class:"text-left p-4 text-gray-400 font-medium text-sm"},"Giới hạn"),t("th",{class:"text-left p-4 text-gray-400 font-medium text-sm"},"Hết hạn"),t("th",{class:"text-left p-4 text-gray-400 font-medium text-sm"},"Trạng thái")])],-1)),t("tbody",null,[(n(!0),l(w,null,k(C.value,s=>(n(),l("tr",{key:s.id,class:"border-b border-gray-800 hover:bg-gray-800/50 transition-all"},[t("td",ho,[t("span",mo,o(s.code),1)]),t("td",po,[t("span",xo,o(s.description),1)]),t("td",fo,[t("span",vo,o(s.discount_formatted),1)]),t("td",bo,[t("span",yo,o(s.usage_count),1)]),t("td",_o,[t("span",wo,o(s.usage_limit||"∞"),1)]),t("td",ko,[t("span",Co,o(s.end_date_formatted||"Không"),1)]),t("td",Mo,[t("span",{class:g(["px-3 py-1 rounded-full text-xs font-bold",s.is_active&&!s.is_expired?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"])},o(s.is_active&&!s.is_expired?"Active":"Inactive"),3)])]))),128))])])])])])):p("",!0)]),_:1})])])}}},zo=W(To,[["__scopeId","data-v-b9d6b92e"]]);export{zo as default};
