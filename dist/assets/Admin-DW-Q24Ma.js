import{_ as at,r as i,j as I,w as xt,x as X,o as l,l as y,m as V,c as n,d as h,C as lt,a as t,n as u,y as nt,t as o,T as j,E as ft,k as vt,B as bt,e as T,F as v,f as b,b as et,p as yt,D as st,q as ot,X as _t,v as wt,h as S,S as kt,g as Ct}from"./index-BLiZ3QlF.js";import{C as Tt}from"./ConfirmModal-BnhQaMxw.js";const Mt={class:"h-1 bg-gray-800"},Bt={class:"p-6"},zt={class:"flex items-start gap-4"},Vt={class:"flex-shrink-0"},It={key:0,class:"w-6 h-6 text-white",fill:"currentColor",viewBox:"0 0 20 20"},$t={key:1,class:"w-6 h-6 text-white",fill:"currentColor",viewBox:"0 0 20 20"},St={key:2,class:"w-6 h-6 text-white",fill:"currentColor",viewBox:"0 0 20 20"},jt={key:3,class:"w-6 h-6 text-white",fill:"currentColor",viewBox:"0 0 20 20"},Lt={class:"flex-1 min-w-0"},Ht={class:"text-white font-bold text-lg mb-1"},At={class:"text-gray-400 text-sm leading-relaxed"},Nt={__name:"NotificationModal",props:{modelValue:{type:Boolean,default:!1},type:{type:String,default:"info",validator:p=>["success","error","warning","info"].includes(p)},title:{type:String,default:"Thông báo"},message:{type:String,default:""},duration:{type:Number,default:5e3}},emits:["update:modelValue"],setup(p,{emit:m}){const c=p,_=m,f=i(100);let L=null,x=null;const r=I(()=>({success:"border-green-500/50",error:"border-red-500/50",warning:"border-yellow-500/50",info:"border-blue-500/50"})[c.type]),H=I(()=>({success:"bg-gradient-to-br from-green-600 to-green-700",error:"bg-gradient-to-br from-red-600 to-red-700",warning:"bg-gradient-to-br from-yellow-600 to-orange-500",info:"bg-gradient-to-br from-blue-600 to-blue-700"})[c.type]),N=I(()=>({success:"bg-gradient-to-r from-green-600 to-green-500",error:"bg-gradient-to-r from-red-600 to-red-500",warning:"bg-gradient-to-r from-yellow-600 to-orange-500",info:"bg-gradient-to-r from-blue-600 to-blue-500"})[c.type]),$=()=>{_("update:modelValue",!1),A()},A=()=>{L&&clearTimeout(L),x&&clearInterval(x),f.value=100};return xt(()=>c.modelValue,w=>{if(w){f.value=100,L=setTimeout(()=>{$()},c.duration);const d=50,k=100/(c.duration/d);x=setInterval(()=>{f.value-=k,f.value<=0&&clearInterval(x)},d)}else A()}),(w,d)=>(l(),X(ft,{to:"body"},[y(j,{name:"notification"},{default:V(()=>[p.modelValue?(l(),n("div",{key:0,class:"fixed inset-0 z-50 flex items-start justify-end p-6",onClick:lt($,["self"])},[t("div",{class:u(["w-full max-w-md bg-gradient-to-br from-gray-900 to-gray-800 rounded-2xl shadow-2xl border overflow-hidden",r.value])},[t("div",Mt,[t("div",{class:u(["h-full transition-all duration-[5000ms] ease-linear",N.value]),style:nt({width:f.value+"%"})},null,6)]),t("div",Bt,[t("div",zt,[t("div",Vt,[t("div",{class:u(["w-12 h-12 rounded-xl flex items-center justify-center",H.value])},[p.type==="success"?(l(),n("svg",It,d[0]||(d[0]=[t("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)]))):p.type==="error"?(l(),n("svg",$t,d[1]||(d[1]=[t("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"},null,-1)]))):p.type==="warning"?(l(),n("svg",St,d[2]||(d[2]=[t("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"},null,-1)]))):(l(),n("svg",jt,d[3]||(d[3]=[t("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"},null,-1)])))],2)]),t("div",Lt,[t("h3",Ht,o(p.title),1),t("p",At,o(p.message),1)]),t("button",{onClick:$,class:"flex-shrink-0 text-gray-400 hover:text-white transition-colors"},d[4]||(d[4]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))])])],2)])):h("",!0)]),_:1})]))}},Dt=at(Nt,[["__scopeId","data-v-5a714d15"]]),Et={class:"min-h-screen bg-gradient-to-br from-gray-900 via-black to-gray-900"},Pt={class:"bg-gradient-to-br from-gray-900 to-gray-800 rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto border border-gray-700 shadow-2xl"},Ut={class:"sticky top-0 bg-gradient-to-r from-red-600 to-yellow-500 p-6 flex items-center justify-between"},Ot={class:"text-white/80 text-sm mt-1"},Rt={key:0,class:"p-6 space-y-6"},Gt={class:"bg-gray-800/50 rounded-xl p-6 border border-gray-700"},Ft={class:"grid grid-cols-2 gap-4"},qt={class:"text-white font-medium"},Qt={class:"text-white font-medium"},Xt={class:"text-white font-medium"},Kt={class:"text-white font-medium"},Jt={class:"bg-gray-800/50 rounded-xl p-6 border border-gray-700"},Wt={class:"grid grid-cols-2 gap-4"},Yt={class:"text-white font-mono font-bold"},Zt={class:"text-white font-medium"},te={class:"text-white font-medium"},ee={class:"bg-gray-800/50 rounded-xl p-6 border border-gray-700"},se={class:"space-y-3"},oe={class:"flex-1"},ae={class:"text-white font-bold"},le={class:"text-gray-400 text-sm"},ne={class:"text-right"},re={class:"text-white font-bold"},ie={class:"text-gray-400 text-sm"},de={class:"bg-gradient-to-r from-red-600/20 to-yellow-500/20 rounded-xl p-6 border border-red-500/30"},ce={class:"flex items-center justify-between"},ue={class:"text-3xl font-black text-white"},ge={class:"text-right"},he={class:"text-xl font-bold text-yellow-400"},me={key:0,class:"bg-gray-800/50 rounded-xl p-6 border border-gray-700"},pe={class:"text-gray-300"},xe={key:1,class:"bg-green-500/10 border border-green-500/30 rounded-xl p-4"},fe={class:"sticky bottom-0 bg-gray-900 p-6 border-t border-gray-700 flex gap-4"},ve={class:"fixed left-0 top-0 h-full w-64 bg-gray-900/95 backdrop-blur-xl border-r border-gray-800 z-40"},be={class:"p-6"},ye={class:"space-y-2"},_e=["onClick"],we={class:"font-medium flex-1"},ke={key:0,class:"bg-red-500 text-white text-xs px-2 py-0.5 rounded-full animate-pulse flex-shrink-0"},Ce={class:"ml-64 p-8"},Te={class:"mb-8"},Me={class:"flex items-center justify-between"},Be={class:"flex items-center gap-4"},ze={class:"text-3xl font-black text-white mb-2"},Ve={class:"text-gray-400"},Ie={key:0,class:"flex items-center gap-2 text-gray-400"},$e={key:"dashboard",class:"space-y-6"},Se={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},je={class:"relative"},Le={class:"flex items-center justify-between mb-4"},He={class:"text-gray-400 text-sm mb-2"},Ae={class:"text-3xl font-black text-white"},Ne={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},De={class:"bg-gradient-to-br from-gray-900/90 to-gray-800/90 backdrop-blur-sm rounded-2xl p-6 border border-gray-700/50"},Ee={class:"space-y-3"},Pe={class:"flex items-center gap-3"},Ue={class:"w-10 h-10 rounded-lg bg-gradient-to-br from-blue-600 to-cyan-500 flex items-center justify-center"},Oe={class:"text-white font-bold text-sm"},Re={class:"text-white font-medium text-sm"},Ge={class:"text-gray-400 text-xs"},Fe={class:"text-right"},qe={class:"text-white font-bold"},Qe={class:"bg-gradient-to-br from-gray-900/90 to-gray-800/90 backdrop-blur-sm rounded-2xl p-6 border border-gray-700/50"},Xe={class:"space-y-4"},Ke={class:"flex items-center justify-between"},Je={class:"text-white font-medium"},We={class:"text-gray-400 text-sm"},Ye={class:"h-2 bg-gray-800 rounded-full overflow-hidden"},Ze={key:"orders",class:"space-y-6"},ts={class:"flex items-center gap-4"},es={class:"flex-1"},ss={class:"bg-gradient-to-br from-gray-900/90 to-gray-800/90 backdrop-blur-sm rounded-2xl border border-gray-700/50 overflow-hidden"},os={class:"overflow-x-auto"},as={class:"w-full"},ls={class:"p-4"},ns={class:"text-white font-mono font-bold"},rs={class:"p-4"},is={class:"text-white font-medium"},ds={class:"text-gray-400 text-sm"},cs={class:"p-4"},us={class:"text-white font-bold"},gs={class:"p-4"},hs={class:"text-gray-400 text-sm"},ms={class:"p-4"},ps={class:"p-4"},xs={class:"text-gray-400 text-sm"},fs={class:"p-4"},vs={class:"flex items-center gap-2"},bs=["onClick"],ys={key:"users",class:"space-y-6"},_s={class:"bg-gradient-to-br from-gray-900/90 to-gray-800/90 backdrop-blur-sm rounded-2xl border border-gray-700/50 overflow-hidden"},ws={class:"overflow-x-auto"},ks={class:"w-full"},Cs={class:"p-4"},Ts={class:"text-white font-mono"},Ms={class:"p-4"},Bs={class:"text-white font-medium"},zs={class:"p-4"},Vs={class:"text-gray-400 text-sm"},Is={class:"p-4"},$s={class:"p-4"},Ss={class:"text-white"},js={class:"p-4"},Ls={class:"text-white font-bold"},Hs={class:"p-4"},As={key:"plans",class:"space-y-6"},Ns={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},Ds={class:"text-2xl font-black text-white mb-2"},Es={class:"text-3xl font-black text-transparent bg-clip-text bg-gradient-to-r from-red-600 to-yellow-500 mb-4"},Ps={class:"space-y-2 text-sm"},Us={class:"text-gray-400"},Os={class:"text-white font-bold"},Rs={class:"text-gray-400"},Gs={class:"text-white font-bold"},Fs={class:"text-gray-400"},qs={class:"text-white font-bold"},Qs={class:"text-gray-400"},Xs={class:"text-white font-bold"},Ks={class:"text-gray-400"},Js={class:"text-white font-bold"},Ws={key:"coupons",class:"space-y-6"},Ys={class:"bg-gradient-to-br from-gray-900/90 to-gray-800/90 backdrop-blur-sm rounded-2xl border border-gray-700/50 overflow-hidden"},Zs={class:"overflow-x-auto"},to={class:"w-full"},eo={class:"p-4"},so={class:"text-white font-mono font-bold"},oo={class:"p-4"},ao={class:"text-gray-400 text-sm"},lo={class:"p-4"},no={class:"text-yellow-400 font-bold"},ro={class:"p-4"},io={class:"text-white"},co={class:"p-4"},uo={class:"text-gray-400"},go={class:"p-4"},ho={class:"text-gray-400 text-sm"},mo={class:"p-4"},po={__name:"Admin",setup(p){Ct();const m=i("dashboard"),c=i(""),_=i(""),f=i(!1),L=i(!1),x=i(!1),r=i(null),H=i([]),N=i(!1),$=i([]),A=i([]),w=i([]),d=i({type:"success",title:"",message:""}),M=i({title:"",message:"",type:"warning",confirmText:"Xác nhận",cancelText:"Hủy",onConfirm:()=>{}}),k=kt.BACKEND_URL,E=i(0),K=I(()=>[{id:"dashboard",label:"Dashboard",icon:"DashboardIcon"},{id:"orders",label:"Đơn hàng",icon:"OrdersIcon",badge:E.value>0?E.value.toString():null},{id:"users",label:"Người dùng",icon:"UsersIcon"},{id:"plans",label:"Gói dịch vụ",icon:"PlansIcon"},{id:"coupons",label:"Mã giảm giá",icon:"CouponsIcon"}]),B=i([{label:"Tổng doanh thu",value:"0 đ",change:"+0%",icon:"MoneyIcon",iconBg:"bg-gradient-to-br from-green-600 to-green-700",changeBg:"bg-green-500/20 text-green-400",gradient:"from-green-600 to-green-700"},{label:"Đơn hàng",value:"0",change:"+0%",icon:"CartIcon",iconBg:"bg-gradient-to-br from-blue-600 to-blue-700",changeBg:"bg-blue-500/20 text-blue-400",gradient:"from-blue-600 to-blue-700"},{label:"Người dùng",value:"0",change:"+0%",icon:"UsersIcon",iconBg:"bg-gradient-to-br from-purple-600 to-purple-700",changeBg:"bg-purple-500/20 text-purple-400",gradient:"from-purple-600 to-purple-700"},{label:"Chờ xử lý",value:"0",change:"0",icon:"ClockIcon",iconBg:"bg-gradient-to-br from-orange-600 to-orange-700",changeBg:"bg-orange-500/20 text-orange-400",gradient:"from-orange-600 to-orange-700"}]),P=i([]),J=i([]),rt=I(()=>{const a=K.value.find(e=>e.id===m.value);return(a==null?void 0:a.label)||"Dashboard"}),it=I(()=>({dashboard:"Tổng quan hệ thống",orders:"Xem thông tin đơn hàng (Thanh toán tự động kích hoạt)",users:"Quản lý người dùng",plans:"Quản lý gói dịch vụ",coupons:"Quản lý mã giảm giá"})[m.value]||""),dt=I(()=>{let a=P.value;return c.value&&(a=a.filter(e=>e.order_code.toLowerCase().includes(c.value.toLowerCase())||e.customer_name.toLowerCase().includes(c.value.toLowerCase()))),_.value&&(a=a.filter(e=>e.payment_status===_.value)),a}),U=a=>{const e={pending:"bg-yellow-500/20 text-yellow-400",paid:"bg-green-500/20 text-green-400",failed:"bg-red-500/20 text-red-400"};return e[a]||e.pending},O=a=>({pending:"Chờ xử lý",paid:"Đã thanh toán",failed:"Thất bại"})[a]||a,W=a=>({vnpay:"VNPay",momo:"MoMo",bank_transfer:"Chuyển khoản",cod:"Thanh toán sau"})[a]||a,ct=async a=>{r.value=a,x.value=!0;try{const e=await S.get(`${k}/orders.php?order_id=${a.id}`);e.data.success&&(H.value=e.data.items||[])}catch(e){console.error("Error fetching order items:",e),H.value=[]}},R=a=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(a),G=async(a=2)=>{try{const e=await S.get(`${k}/admin/statistics.php`,{timeout:5e3});if(e.data.success){const g=e.data.data;B.value[0].value=g.total_revenue_formatted,B.value[0].change=g.revenue_change_formatted,B.value[0].changeBg=g.revenue_change>=0?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400",B.value[1].value=g.total_orders.toString(),B.value[2].value=g.total_users.toString(),B.value[3].value=g.pending_orders.toString(),E.value=g.pending_orders,J.value=g.top_plans.map(z=>({name:z.name,count:z.order_count,percentage:z.percentage,color:ut(z.slug)}))}}catch(e){if(console.error("Error fetching statistics:",e),a>0)return console.log(`Retrying... (${a} attempts left)`),await new Promise(g=>setTimeout(g,1e3)),G(a-1);C&&console.error("Failed to fetch statistics after retries")}},Y=async()=>{try{const a=new URLSearchParams;_.value&&a.append("status",_.value),c.value&&a.append("search",c.value),a.append("limit","50");const e=await S.get(`${k}/admin/orders.php?${a.toString()}`,{timeout:5e3});e.data.success&&(P.value=e.data.data)}catch(a){C&&console.error("Error fetching orders:",a)}},ut=a=>{const e={premium:"bg-gradient-to-r from-red-600 to-yellow-500",basic:"bg-gradient-to-r from-blue-600 to-cyan-500",vip:"bg-gradient-to-r from-purple-600 to-pink-500",free:"bg-gradient-to-r from-gray-600 to-gray-500"};return e[a]||e.basic};let D=null,C=!0;const Z=()=>{C=!document.hidden,C?(F(),tt()):q()},F=async()=>{if(C)try{await Promise.allSettled([G(),Y(),ht(),mt(),pt()])}catch(a){console.error("Error refreshing data:",a)}},tt=()=>{q(),D=setInterval(()=>{F()},1e4)},q=()=>{D&&(clearInterval(D),D=null)},gt=()=>{G(),Y(),d.value={type:"success",title:"Đã cập nhật!",message:"Dữ liệu đã được làm mới"},f.value=!0},ht=async()=>{try{const a=await S.get(`${k}/admin/users.php?limit=100`,{timeout:5e3});a.data.success&&($.value=a.data.data)}catch(a){C&&console.error("Error fetching users:",a)}},mt=async()=>{try{const a=await S.get(`${k}/admin/plans.php`,{timeout:5e3});a.data.success&&(A.value=a.data.data)}catch(a){C&&console.error("Error fetching plans:",a)}},pt=async()=>{try{const a=await S.get(`${k}/admin/coupons.php`,{timeout:5e3});a.data.success&&(w.value=a.data.data)}catch(a){C&&console.error("Error fetching coupons:",a)}};return vt(()=>{F(),tt(),document.addEventListener("visibilitychange",Z)}),bt(()=>{q(),document.removeEventListener("visibilitychange",Z)}),(a,e)=>{var z;const g=yt("router-link");return l(),n("div",Et,[y(Dt,{modelValue:f.value,"onUpdate:modelValue":e[0]||(e[0]=s=>f.value=s),type:d.value.type,title:d.value.title,message:d.value.message},null,8,["modelValue","type","title","message"]),y(Tt,{modelValue:N.value,"onUpdate:modelValue":e[1]||(e[1]=s=>N.value=s),title:M.value.title,message:M.value.message,type:M.value.type,"confirm-text":M.value.confirmText,"cancel-text":M.value.cancelText,onConfirm:M.value.onConfirm},null,8,["modelValue","title","message","type","confirm-text","cancel-text","onConfirm"]),x.value?(l(),n("div",{key:0,class:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:e[4]||(e[4]=lt(s=>x.value=!1,["self"]))},[t("div",Pt,[t("div",Ut,[t("div",null,[e[7]||(e[7]=t("h3",{class:"text-2xl font-black text-white"},"Chi tiết đơn hàng",-1)),t("p",Ot,o((z=r.value)==null?void 0:z.order_code),1)]),t("button",{onClick:e[2]||(e[2]=s=>x.value=!1),class:"w-10 h-10 rounded-full bg-white/20 hover:bg-white/30 flex items-center justify-center transition-all"},e[8]||(e[8]=[t("svg",{class:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),r.value?(l(),n("div",Rt,[t("div",Gt,[e[13]||(e[13]=t("h4",{class:"text-lg font-bold text-white mb-4 flex items-center gap-2"},[t("svg",{class:"w-5 h-5 text-blue-400",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{"fill-rule":"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z","clip-rule":"evenodd"})]),T(" Thông tin khách hàng ")],-1)),t("div",Ft,[t("div",null,[e[9]||(e[9]=t("p",{class:"text-gray-400 text-sm"},"Họ tên",-1)),t("p",qt,o(r.value.customer_name),1)]),t("div",null,[e[10]||(e[10]=t("p",{class:"text-gray-400 text-sm"},"Email",-1)),t("p",Qt,o(r.value.customer_email),1)]),t("div",null,[e[11]||(e[11]=t("p",{class:"text-gray-400 text-sm"},"Số điện thoại",-1)),t("p",Xt,o(r.value.customer_phone||"Chưa có"),1)]),t("div",null,[e[12]||(e[12]=t("p",{class:"text-gray-400 text-sm"},"Ngày đặt",-1)),t("p",Kt,o(r.value.created_at),1)])])]),t("div",Jt,[e[18]||(e[18]=t("h4",{class:"text-lg font-bold text-white mb-4 flex items-center gap-2"},[t("svg",{class:"w-5 h-5 text-green-400",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{d:"M3 1a1 1 0 000 2h1.22l.305 1.222a.997.997 0 00.01.042l1.358 5.43-.893.892C3.74 11.846 4.632 14 6.414 14H15a1 1 0 000-2H6.414l1-1H14a1 1 0 00.894-.553l3-6A1 1 0 0017 3H6.28l-.31-1.243A1 1 0 005 1H3zM16 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM6.5 18a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"})]),T(" Thông tin đơn hàng ")],-1)),t("div",Wt,[t("div",null,[e[14]||(e[14]=t("p",{class:"text-gray-400 text-sm"},"Mã đơn hàng",-1)),t("p",Yt,o(r.value.order_code),1)]),t("div",null,[e[15]||(e[15]=t("p",{class:"text-gray-400 text-sm"},"Phương thức thanh toán",-1)),t("p",Zt,o(W(r.value.payment_method)),1)]),t("div",null,[e[16]||(e[16]=t("p",{class:"text-gray-400 text-sm"},"Trạng thái thanh toán",-1)),t("span",{class:u(["px-3 py-1 rounded-full text-xs font-bold inline-block",U(r.value.payment_status)])},o(O(r.value.payment_status)),3)]),t("div",null,[e[17]||(e[17]=t("p",{class:"text-gray-400 text-sm"},"Trạng thái đơn hàng",-1)),t("span",te,o(r.value.status),1)])])]),t("div",ee,[e[19]||(e[19]=t("h4",{class:"text-lg font-bold text-white mb-4 flex items-center gap-2"},[t("svg",{class:"w-5 h-5 text-purple-400",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{d:"M7 3a1 1 0 000 2h6a1 1 0 100-2H7zM4 7a1 1 0 011-1h10a1 1 0 110 2H5a1 1 0 01-1-1zM2 11a2 2 0 012-2h12a2 2 0 012 2v4a2 2 0 01-2 2H4a2 2 0 01-2-2v-4z"})]),T(" Chi tiết sản phẩm ")],-1)),t("div",se,[(l(!0),n(v,null,b(H.value,s=>(l(),n("div",{key:s.id,class:"flex items-center justify-between p-4 bg-gray-900/50 rounded-lg"},[t("div",oe,[t("p",ae,o(s.plan_name),1),t("p",le,o(s.duration_months)+" tháng × "+o(s.quantity),1)]),t("div",ne,[t("p",re,o(R(s.total)),1),t("p",ie,o(R(s.price))+" / tháng",1)])]))),128))])]),t("div",de,[t("div",ce,[t("div",null,[e[20]||(e[20]=t("p",{class:"text-gray-300 text-sm"},"Tổng cộng",-1)),t("p",ue,o(r.value.total_formatted),1)]),t("div",ge,[e[21]||(e[21]=t("p",{class:"text-gray-300 text-sm"},"Giảm giá",-1)),t("p",he,o(R(r.value.discount||0)),1)])])]),r.value.note?(l(),n("div",me,[e[22]||(e[22]=t("h4",{class:"text-lg font-bold text-white mb-2"},"Ghi chú",-1)),t("p",pe,o(r.value.note),1)])):h("",!0),r.value.payment_status==="paid"?(l(),n("div",xe,e[23]||(e[23]=[et('<div class="flex items-center gap-3" data-v-b9d6b92e><svg class="w-6 h-6 text-green-400" fill="currentColor" viewBox="0 0 20 20" data-v-b9d6b92e><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" data-v-b9d6b92e></path></svg><div data-v-b9d6b92e><p class="text-green-400 font-bold" data-v-b9d6b92e>Đã kích hoạt tự động</p><p class="text-green-300 text-sm" data-v-b9d6b92e>Subscription đã được kích hoạt ngay sau khi thanh toán thành công</p></div></div>',1)]))):h("",!0)])):h("",!0),t("div",fe,[t("button",{onClick:e[3]||(e[3]=s=>x.value=!1),class:"flex-1 bg-gray-700 hover:bg-gray-600 text-white font-bold py-3 px-6 rounded-xl transition-all"}," Đóng ")])])])):h("",!0),t("aside",ve,[t("div",be,[y(g,{to:"/home",class:"flex items-center gap-3 mb-8 hover:opacity-80 transition-opacity cursor-pointer group"},{default:V(()=>e[24]||(e[24]=[t("div",{class:"w-10 h-10 rounded-xl bg-gradient-to-br from-red-600 to-yellow-500 flex items-center justify-center group-hover:scale-110 transition-transform"},[t("svg",{class:"w-6 h-6 text-white",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{d:"M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z"})])],-1),t("div",null,[t("h1",{class:"text-xl font-black text-white"},"HTHREE"),t("p",{class:"text-xs text-gray-400"},"Admin Panel")],-1)])),_:1}),t("nav",ye,[(l(!0),n(v,null,b(K.value,s=>(l(),n("button",{key:s.id,onClick:Q=>m.value=s.id,class:u(["w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-300 text-left",m.value===s.id?"bg-gradient-to-r from-red-600 to-yellow-500 text-white shadow-lg shadow-red-500/20":"text-gray-400 hover:text-white hover:bg-gray-800"])},[(l(),X(st(s.icon),{class:"w-5 h-5 flex-shrink-0"})),t("span",we,o(s.label),1),s.badge?(l(),n("span",ke,o(s.badge),1)):h("",!0)],10,_e))),128))])]),e[25]||(e[25]=et('<div class="absolute bottom-0 left-0 right-0 p-6 border-t border-gray-800" data-v-b9d6b92e><div class="flex items-center gap-3" data-v-b9d6b92e><div class="w-10 h-10 rounded-full bg-gradient-to-br from-purple-600 to-pink-500 flex items-center justify-center" data-v-b9d6b92e><span class="text-white font-bold" data-v-b9d6b92e>A</span></div><div class="flex-1 min-w-0" data-v-b9d6b92e><p class="text-white font-medium text-sm truncate" data-v-b9d6b92e>Admin</p><p class="text-gray-400 text-xs" data-v-b9d6b92e>Super Admin</p></div></div></div>',1))]),t("main",Ce,[t("header",Te,[t("div",Me,[t("div",Be,[t("div",null,[t("h2",ze,o(rt.value),1),t("p",Ve,o(it.value),1)]),L.value?(l(),n("div",Ie,e[26]||(e[26]=[t("svg",{class:"animate-spin h-5 w-5",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),t("span",{class:"text-sm"},"Đang tải...",-1)]))):h("",!0)]),t("div",{class:"flex items-center gap-4"},[t("button",{onClick:gt,class:"p-3 bg-gray-800 rounded-xl hover:bg-gray-700 transition-all group",title:"Làm mới dữ liệu"},e[27]||(e[27]=[t("svg",{class:"w-6 h-6 text-gray-400 group-hover:text-white group-hover:rotate-180 transition-all duration-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1)])),e[28]||(e[28]=t("button",{class:"relative p-3 bg-gray-800 rounded-xl hover:bg-gray-700 transition-all"},[t("svg",{class:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})]),t("span",{class:"absolute top-2 right-2 w-2 h-2 bg-red-500 rounded-full"})],-1))])])]),y(j,{name:"slide-fade",mode:"out-in"},{default:V(()=>[m.value==="dashboard"?(l(),n("div",$e,[t("div",Se,[(l(!0),n(v,null,b(B.value,(s,Q)=>(l(),n("div",{key:Q,class:"group relative overflow-hidden bg-gradient-to-br from-gray-900/90 to-gray-800/90 backdrop-blur-sm rounded-2xl p-6 border border-gray-700/50 hover:border-gray-600 transition-all duration-300 hover:scale-105"},[t("div",{class:u(["absolute inset-0 bg-gradient-to-br opacity-0 group-hover:opacity-10 transition-opacity",s.gradient])},null,2),t("div",je,[t("div",Le,[t("div",{class:u(["w-12 h-12 rounded-xl flex items-center justify-center",s.iconBg])},[(l(),X(st(s.icon),{class:"w-6 h-6 text-white"}))],2),t("span",{class:u(["text-sm font-bold px-2 py-1 rounded-lg",s.changeBg])},o(s.change),3)]),t("h3",He,o(s.label),1),t("p",Ae,o(s.value),1)])]))),128))]),t("div",Ne,[t("div",De,[e[29]||(e[29]=t("h3",{class:"text-xl font-bold text-white mb-4"},"Đơn hàng gần đây",-1)),t("div",Ee,[(l(!0),n(v,null,b(P.value.slice(0,5),s=>(l(),n("div",{key:s.id,class:"flex items-center justify-between p-4 bg-gray-800/50 rounded-xl hover:bg-gray-800 transition-all"},[t("div",Pe,[t("div",Ue,[t("span",Oe,o(s.order_code.slice(-3)),1)]),t("div",null,[t("p",Re,o(s.customer_name),1),t("p",Ge,o(s.created_at),1)])]),t("div",Fe,[t("p",qe,o(s.total_formatted),1),t("span",{class:u(["text-xs px-2 py-1 rounded-full",U(s.payment_status)])},o(O(s.payment_status)),3)])]))),128))])]),t("div",Qe,[e[30]||(e[30]=t("h3",{class:"text-xl font-bold text-white mb-4"},"Gói phổ biến",-1)),t("div",Xe,[(l(!0),n(v,null,b(J.value,s=>(l(),n("div",{key:s.name,class:"space-y-2"},[t("div",Ke,[t("span",Je,o(s.name),1),t("span",We,o(s.count)+" đơn",1)]),t("div",Ye,[t("div",{class:u(["h-full rounded-full transition-all duration-500",s.color]),style:nt({width:s.percentage+"%"})},null,6)])]))),128))])])])])):h("",!0)]),_:1}),y(j,{name:"slide-fade",mode:"out-in"},{default:V(()=>[m.value==="orders"?(l(),n("div",Ze,[t("div",ts,[t("div",es,[ot(t("input",{"onUpdate:modelValue":e[5]||(e[5]=s=>c.value=s),type:"text",placeholder:"Tìm kiếm đơn hàng...",class:"w-full bg-gray-800/80 text-white px-4 py-3 rounded-xl border border-gray-700 focus:border-red-600 focus:outline-none focus:ring-2 focus:ring-red-600/20 transition-all"},null,512),[[_t,c.value]])]),ot(t("select",{"onUpdate:modelValue":e[6]||(e[6]=s=>_.value=s),class:"bg-gray-800/80 text-white px-4 py-3 rounded-xl border border-gray-700 focus:border-red-600 focus:outline-none"},e[31]||(e[31]=[t("option",{value:""},"Tất cả trạng thái",-1),t("option",{value:"pending"},"Chờ xử lý",-1),t("option",{value:"paid"},"Đã thanh toán",-1),t("option",{value:"failed"},"Thất bại",-1)]),512),[[wt,_.value]])]),t("div",ss,[t("div",os,[t("table",as,[e[33]||(e[33]=t("thead",null,[t("tr",{class:"border-b border-gray-800"},[t("th",{class:"text-left p-4 text-gray-400 font-medium text-sm"},"Mã đơn"),t("th",{class:"text-left p-4 text-gray-400 font-medium text-sm"},"Khách hàng"),t("th",{class:"text-left p-4 text-gray-400 font-medium text-sm"},"Số tiền"),t("th",{class:"text-left p-4 text-gray-400 font-medium text-sm"},"Thanh toán"),t("th",{class:"text-left p-4 text-gray-400 font-medium text-sm"},"Trạng thái"),t("th",{class:"text-left p-4 text-gray-400 font-medium text-sm"},"Ngày tạo"),t("th",{class:"text-left p-4 text-gray-400 font-medium text-sm"},"Thao tác")])],-1)),t("tbody",null,[(l(!0),n(v,null,b(dt.value,s=>(l(),n("tr",{key:s.id,class:"border-b border-gray-800 hover:bg-gray-800/50 transition-all"},[t("td",ls,[t("span",ns,o(s.order_code),1)]),t("td",rs,[t("div",null,[t("p",is,o(s.customer_name),1),t("p",ds,o(s.customer_email),1)])]),t("td",cs,[t("span",us,o(s.total_formatted),1)]),t("td",gs,[t("span",hs,o(W(s.payment_method)),1)]),t("td",ms,[t("span",{class:u(["px-3 py-1 rounded-full text-xs font-bold",U(s.payment_status)])},o(O(s.payment_status)),3)]),t("td",ps,[t("span",xs,o(s.created_at),1)]),t("td",fs,[t("div",vs,[t("button",{onClick:Q=>ct(s),class:"p-2 bg-blue-600 hover:bg-blue-700 rounded-lg transition-all",title:"Xem chi tiết"},e[32]||(e[32]=[t("svg",{class:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)]),8,bs)])])]))),128))])])])])])):h("",!0)]),_:1}),y(j,{name:"slide-fade",mode:"out-in"},{default:V(()=>[m.value==="users"?(l(),n("div",ys,[t("div",_s,[t("div",ws,[t("table",ks,[e[34]||(e[34]=t("thead",null,[t("tr",{class:"border-b border-gray-800"},[t("th",{class:"text-left p-4 text-gray-400 font-medium text-sm"},"ID"),t("th",{class:"text-left p-4 text-gray-400 font-medium text-sm"},"Tên"),t("th",{class:"text-left p-4 text-gray-400 font-medium text-sm"},"Email"),t("th",{class:"text-left p-4 text-gray-400 font-medium text-sm"},"Role"),t("th",{class:"text-left p-4 text-gray-400 font-medium text-sm"},"Đơn hàng"),t("th",{class:"text-left p-4 text-gray-400 font-medium text-sm"},"Tổng chi"),t("th",{class:"text-left p-4 text-gray-400 font-medium text-sm"},"Trạng thái")])],-1)),t("tbody",null,[(l(!0),n(v,null,b($.value,s=>(l(),n("tr",{key:s.id,class:"border-b border-gray-800 hover:bg-gray-800/50 transition-all"},[t("td",Cs,[t("span",Ts,o(s.id),1)]),t("td",Ms,[t("span",Bs,o(s.username),1)]),t("td",zs,[t("span",Vs,o(s.email),1)]),t("td",Is,[t("span",{class:u(["px-3 py-1 rounded-full text-xs font-bold",s.role==="admin"?"bg-purple-500/20 text-purple-400":"bg-blue-500/20 text-blue-400"])},o(s.role),3)]),t("td",$s,[t("span",Ss,o(s.total_orders),1)]),t("td",js,[t("span",Ls,o(s.total_spent_formatted),1)]),t("td",Hs,[t("span",{class:u(["px-3 py-1 rounded-full text-xs font-bold",s.is_active?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"])},o(s.is_active?"Active":"Inactive"),3)])]))),128))])])])])])):h("",!0)]),_:1}),y(j,{name:"slide-fade",mode:"out-in"},{default:V(()=>[m.value==="plans"?(l(),n("div",As,[t("div",Ns,[(l(!0),n(v,null,b(A.value,s=>(l(),n("div",{key:s.id,class:"bg-gradient-to-br from-gray-900/90 to-gray-800/90 backdrop-blur-sm rounded-2xl p-6 border border-gray-700/50 hover:border-gray-600 transition-all"},[t("h3",Ds,o(s.name),1),t("p",Es,o(s.price_formatted),1),t("div",Ps,[t("p",Us,[e[35]||(e[35]=T("Chất lượng: ")),t("span",Os,o(s.quality),1)]),t("p",Rs,[e[36]||(e[36]=T("Thiết bị: ")),t("span",Gs,o(s.max_devices),1)]),t("p",Fs,[e[37]||(e[37]=T("Đã bán: ")),t("span",qs,o(s.times_sold)+" lần",1)]),t("p",Qs,[e[38]||(e[38]=T("Doanh thu: ")),t("span",Xs,o(s.total_revenue_formatted),1)]),t("p",Ks,[e[39]||(e[39]=T("Đang dùng: ")),t("span",Js,o(s.active_subscriptions)+" người",1)])])]))),128))])])):h("",!0)]),_:1}),y(j,{name:"slide-fade",mode:"out-in"},{default:V(()=>[m.value==="coupons"?(l(),n("div",Ws,[t("div",Ys,[t("div",Zs,[t("table",to,[e[40]||(e[40]=t("thead",null,[t("tr",{class:"border-b border-gray-800"},[t("th",{class:"text-left p-4 text-gray-400 font-medium text-sm"},"Mã"),t("th",{class:"text-left p-4 text-gray-400 font-medium text-sm"},"Mô tả"),t("th",{class:"text-left p-4 text-gray-400 font-medium text-sm"},"Giảm giá"),t("th",{class:"text-left p-4 text-gray-400 font-medium text-sm"},"Đã dùng"),t("th",{class:"text-left p-4 text-gray-400 font-medium text-sm"},"Giới hạn"),t("th",{class:"text-left p-4 text-gray-400 font-medium text-sm"},"Hết hạn"),t("th",{class:"text-left p-4 text-gray-400 font-medium text-sm"},"Trạng thái")])],-1)),t("tbody",null,[(l(!0),n(v,null,b(w.value,s=>(l(),n("tr",{key:s.id,class:"border-b border-gray-800 hover:bg-gray-800/50 transition-all"},[t("td",eo,[t("span",so,o(s.code),1)]),t("td",oo,[t("span",ao,o(s.description),1)]),t("td",lo,[t("span",no,o(s.discount_formatted),1)]),t("td",ro,[t("span",io,o(s.usage_count),1)]),t("td",co,[t("span",uo,o(s.usage_limit||"∞"),1)]),t("td",go,[t("span",ho,o(s.end_date_formatted||"Không"),1)]),t("td",mo,[t("span",{class:u(["px-3 py-1 rounded-full text-xs font-bold",s.is_active&&!s.is_expired?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"])},o(s.is_active&&!s.is_expired?"Active":"Inactive"),3)])]))),128))])])])])])):h("",!0)]),_:1})])])}}},vo=at(po,[["__scopeId","data-v-b9d6b92e"]]);export{vo as default};
