const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./index-B0YMVSxN.js","./index-C5hQvrWp.css"])))=>i.map(i=>d[i]);
import{_ as G,r as u,k as ne,D as de,X as Z,c as i,o as r,d as x,a as e,b as ee,t as d,n as k,g as re,a4 as le,j as ce,x as F,f as K,q as U,ad as te,F as A,z as Y,V as X,B as ue,ae as ge,w as he,m as pe,T as me,a3 as ve,ab as be,af as fe,K as se,l as oe,I as xe,e as W,y as ae}from"./index-B0YMVSxN.js";const ye={class:"vietqr-payment"},we={key:0,class:"text-center py-12"},ke={key:1,class:"space-y-6"},_e={class:"bg-white p-6 rounded-2xl mx-auto max-w-sm"},$e=["src"],Ce={class:"bg-gray-800/50 rounded-xl p-6 border border-gray-700 space-y-4"},Me={class:"flex justify-between items-center pb-4 border-b border-gray-700"},Te={class:"text-2xl font-bold text-red-500"},Se={class:"space-y-2"},Pe={class:"flex justify-between"},Ie={class:"text-white font-medium"},je={class:"flex justify-between"},ze={class:"text-white font-mono"},Ve={class:"flex justify-between"},Re={class:"text-white"},Be={class:"bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-4"},Ne={class:"flex items-start gap-3"},Qe={class:"flex-1"},Ee={class:"flex items-center gap-2"},qe={class:"text-white font-mono text-lg bg-gray-900 px-3 py-1 rounded"},Ae=["title"],Le={key:0,class:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Oe={key:1,class:"w-5 h-5 text-green-400",fill:"currentColor",viewBox:"0 0 20 20"},De={class:"bg-gradient-to-r from-red-900/50 to-orange-900/50 border border-red-500/30 rounded-xl p-4"},He={class:"flex items-center justify-between"},Ue={class:"text-right"},Fe={key:0,class:"bg-blue-900/30 border border-blue-500/30 rounded-xl p-6 text-center"},Ke={key:1,class:"bg-green-900/30 border border-green-500/30 rounded-xl p-6 text-center animate-fade-in"},Ge={key:2,class:"text-center py-12"},Je={class:"text-red-400 font-bold mb-2"},Xe={__name:"VietQRPayment",props:{orderId:{type:Number,required:!0}},emits:["success","retry","expired"],setup(y,{emit:j}){const w=Z(),z=y,b=j,f=u(!0),m=u(null),v=u(null),T=u(!1),g=u(!1),C=u(900),M=u(!1);let V=null,S=null;const h="https://hthree-film-production.up.railway.app/api";ne(async()=>{await L(),c(),O()}),de(()=>{R(),N()});const L=async()=>{f.value=!0,v.value=null;try{const t=await(await fetch(`${h}/payment/generate_vietqr.php`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({order_id:z.orderId})})).json();if(t.success)m.value=t.data,C.value=t.data.timeout_seconds;else throw new Error(t.message)}catch(p){v.value=p.message||"Kh√¥ng th·ªÉ t·∫°o m√£ QR",w.error(v.value)}finally{f.value=!1}},c=()=>{T.value=!0,V=setInterval(async()=>{try{const t=await(await fetch(`${h}/payment/check_payment_status.php?order_id=${z.orderId}`)).json();t.success&&t.data.paid&&(g.value=!0,T.value=!1,R(),N(),w.success("üéâ Thanh to√°n th√†nh c√¥ng!"),setTimeout(()=>{b("success")},2e3)),t.success&&t.data.expired&&(R(),N(),b("expired"))}catch(p){console.error("Error checking payment:",p)}},3e3)},R=()=>{V&&(clearInterval(V),V=null)},O=()=>{S=setInterval(()=>{C.value--,C.value<=0&&(N(),R(),b("expired"))},1e3)},N=()=>{S&&(clearInterval(S),S=null)},D=p=>{const t=Math.floor(p/60),o=p%60;return`${t.toString().padStart(2,"0")}:${o.toString().padStart(2,"0")}`},Q=p=>new Intl.NumberFormat("vi-VN").format(p)+"ƒë",H=async()=>{try{await navigator.clipboard.writeText(m.value.transfer_content),M.value=!0,w.success("ƒê√£ copy n·ªôi dung chuy·ªÉn kho·∫£n"),setTimeout(()=>{M.value=!1},2e3)}catch{w.error("Kh√¥ng th·ªÉ copy")}},q=p=>{p.target.src="https://placehold.co/400x400/1a1a1a/fff?text=QR+Error",v.value="Kh√¥ng th·ªÉ t·∫£i m√£ QR"};return(p,t)=>(r(),i("div",ye,[f.value?(r(),i("div",we,t[2]||(t[2]=[e("div",{class:"animate-spin h-12 w-12 border-4 border-yellow-400 rounded-full border-t-transparent mx-auto mb-4"},null,-1),e("p",{class:"text-white"},"ƒêang t·∫°o m√£ QR...",-1)]))):m.value?(r(),i("div",ke,[t[17]||(t[17]=e("div",{class:"text-center"},[e("h3",{class:"text-2xl font-bold text-white mb-2"}," Qu√©t m√£ QR ƒë·ªÉ thanh to√°n "),e("p",{class:"text-gray-400"},"S·ª≠ d·ª•ng app ng√¢n h√†ng ƒë·ªÉ qu√©t m√£ QR")],-1)),e("div",_e,[e("img",{src:m.value.qr_url,alt:"VietQR Code",class:"w-full h-auto",onError:q},null,40,$e)]),e("div",Ce,[e("div",Me,[t[3]||(t[3]=e("span",{class:"text-gray-400"},"S·ªë ti·ªÅn",-1)),e("span",Te,d(Q(m.value.amount)),1)]),e("div",Se,[e("div",Pe,[t[4]||(t[4]=e("span",{class:"text-gray-400"},"Ng√¢n h√†ng",-1)),e("span",Ie,d(m.value.bank_name),1)]),e("div",je,[t[5]||(t[5]=e("span",{class:"text-gray-400"},"S·ªë t√†i kho·∫£n",-1)),e("span",ze,d(m.value.account_no),1)]),e("div",Ve,[t[6]||(t[6]=e("span",{class:"text-gray-400"},"Ch·ªß t√†i kho·∫£n",-1)),e("span",Re,d(m.value.account_name),1)])]),e("div",Be,[e("div",Ne,[t[11]||(t[11]=e("svg",{class:"w-5 h-5 text-yellow-400 flex-shrink-0 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"})],-1)),e("div",Qe,[t[9]||(t[9]=e("p",{class:"text-yellow-400 font-bold text-sm mb-1"}," N·ªôi dung chuy·ªÉn kho·∫£n ",-1)),e("div",Ee,[e("code",qe,d(m.value.transfer_content),1),e("button",{onClick:H,class:"p-2 hover:bg-gray-700 rounded transition-colors",title:M.value?"ƒê√£ copy!":"Copy n·ªôi dung"},[M.value?(r(),i("svg",Oe,t[8]||(t[8]=[e("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"},null,-1)]))):(r(),i("svg",Le,t[7]||(t[7]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"},null,-1)])))],8,Ae)]),t[10]||(t[10]=e("p",{class:"text-yellow-300 text-xs mt-2"}," ‚ö†Ô∏è Vui l√≤ng nh·∫≠p ch√≠nh x√°c n·ªôi dung ƒë·ªÉ h·ªá th·ªëng t·ª± ƒë·ªông k√≠ch ho·∫°t g√≥i ",-1))])])])]),e("div",De,[e("div",He,[t[12]||(t[12]=ee('<div class="flex items-center gap-3" data-v-8a87e359><svg class="w-6 h-6 text-red-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-8a87e359><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" data-v-8a87e359></path></svg><div data-v-8a87e359><p class="text-white font-bold" data-v-8a87e359>Th·ªùi gian c√≤n l·∫°i</p><p class="text-gray-400 text-sm" data-v-8a87e359> ƒê∆°n h√†ng s·∫Ω t·ª± ƒë·ªông h·ªßy sau khi h·∫øt th·ªùi gian </p></div></div>',1)),e("div",Ue,[e("p",{class:k(["text-3xl font-mono font-bold",C.value<60?"text-red-400 animate-pulse":"text-white"])},d(D(C.value)),3)])])]),T.value?(r(),i("div",Fe,t[13]||(t[13]=[e("div",{class:"animate-spin h-8 w-8 border-3 border-blue-400 rounded-full border-t-transparent mx-auto mb-3"},null,-1),e("p",{class:"text-blue-400 font-bold mb-1"},"ƒêang ki·ªÉm tra thanh to√°n...",-1),e("p",{class:"text-gray-400 text-sm"}," H·ªá th·ªëng s·∫Ω t·ª± ƒë·ªông k√≠ch ho·∫°t g√≥i sau khi nh·∫≠n ƒë∆∞·ª£c ti·ªÅn ",-1)]))):x("",!0),g.value?(r(),i("div",Ke,[t[14]||(t[14]=e("svg",{class:"w-16 h-16 text-green-400 mx-auto mb-4",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})],-1)),t[15]||(t[15]=e("h3",{class:"text-2xl font-bold text-green-400 mb-2"}," Thanh to√°n th√†nh c√¥ng! ",-1)),t[16]||(t[16]=e("p",{class:"text-gray-300 mb-4"},"G√≥i c·ªßa b·∫°n ƒë√£ ƒë∆∞·ª£c k√≠ch ho·∫°t",-1)),e("button",{onClick:t[0]||(t[0]=o=>p.$emit("success")),class:"bg-green-500 hover:bg-green-600 text-white font-bold px-6 py-3 rounded-lg transition-colors"}," Xem t√†i kho·∫£n ")])):x("",!0),t[18]||(t[18]=ee('<div class="bg-gray-800/30 rounded-xl p-6 border border-gray-700" data-v-8a87e359><h4 class="text-white font-bold mb-3 flex items-center gap-2" data-v-8a87e359><svg class="w-5 h-5 text-yellow-400" fill="currentColor" viewBox="0 0 20 20" data-v-8a87e359><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd" data-v-8a87e359></path></svg> H∆∞·ªõng d·∫´n thanh to√°n </h4><ol class="space-y-2 text-gray-300 text-sm" data-v-8a87e359><li class="flex gap-2" data-v-8a87e359><span class="text-yellow-400 font-bold" data-v-8a87e359>1.</span><span data-v-8a87e359>M·ªü app ng√¢n h√†ng c·ªßa b·∫°n</span></li><li class="flex gap-2" data-v-8a87e359><span class="text-yellow-400 font-bold" data-v-8a87e359>2.</span><span data-v-8a87e359>Ch·ªçn &quot;Qu√©t m√£ QR&quot; ho·∫∑c &quot;Chuy·ªÉn kho·∫£n&quot;</span></li><li class="flex gap-2" data-v-8a87e359><span class="text-yellow-400 font-bold" data-v-8a87e359>3.</span><span data-v-8a87e359>Qu√©t m√£ QR ph√≠a tr√™n</span></li><li class="flex gap-2" data-v-8a87e359><span class="text-yellow-400 font-bold" data-v-8a87e359>4.</span><span data-v-8a87e359>Ki·ªÉm tra th√¥ng tin v√† x√°c nh·∫≠n chuy·ªÉn kho·∫£n</span></li><li class="flex gap-2" data-v-8a87e359><span class="text-yellow-400 font-bold" data-v-8a87e359>5.</span><span data-v-8a87e359>G√≥i s·∫Ω t·ª± ƒë·ªông k√≠ch ho·∫°t sau 5-30 gi√¢y</span></li></ol></div>',1))])):v.value?(r(),i("div",Ge,[t[19]||(t[19]=e("svg",{class:"w-16 h-16 text-red-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("p",Je,d(v.value),1),e("button",{onClick:t[1]||(t[1]=o=>p.$emit("retry")),class:"bg-gray-700 hover:bg-gray-600 text-white px-6 py-2 rounded-lg transition-colors"}," Th·ª≠ l·∫°i ")])):x("",!0)]))}},We=G(Xe,[["__scopeId","data-v-8a87e359"]]),Ye={class:"fixed inset-0 z-50 flex items-center justify-center p-4 animate-fade-in"},Ze={class:"relative bg-gradient-to-br from-gray-900 to-gray-800 rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto border-2 border-gray-700 shadow-2xl animate-scale-in"},et={class:"p-8"},tt={class:"text-center mb-8"},st={class:"text-3xl font-black text-white mb-2"},ot={class:"text-gray-400"},at={class:"mb-6"},nt={class:"space-y-3"},rt={class:"flex items-center gap-4"},lt=["value"],it={class:"text-white font-bold"},dt={key:0,class:"text-green-400 text-sm"},ct={class:"text-right"},ut={class:"text-white font-bold text-xl"},gt={key:0,class:"text-gray-500 text-sm line-through"},ht={class:"bg-gradient-to-r from-red-900/30 to-orange-900/30 rounded-xl p-6 mb-6 border border-red-500/30"},pt={class:"flex justify-between items-center"},mt={class:"text-3xl font-black text-red-400"},vt={class:"grid grid-cols-2 gap-4"},bt={class:"space-y-2"},ft=["value"],xt={class:"flex-1"},yt={class:"text-white font-bold text-sm"},wt={class:"text-gray-400 text-xs"},kt=["disabled"],_t={__name:"PaymentModal",props:{plan:{type:Object,required:!0}},emits:["close","success"],setup(y,{emit:j}){const w=Z(),z=re(),b=y,f=j,m=le(),v=u(1),T=u(!1),g=u(null),C=u(!1),M=[{months:1,label:"1 th√°ng",discount:0},{months:3,label:"3 th√°ng",discount:5},{months:6,label:"6 th√°ng",discount:10},{months:12,label:"12 th√°ng",discount:15}],S=(()=>{var _,P,s;const t=localStorage.getItem("user"),o=localStorage.getItem("userPhoneNumber");let l={};if(t)try{l=JSON.parse(t)}catch(n){console.error("Error parsing user data:",n)}return{name:l.full_name||l.displayName||((_=m.user)==null?void 0:_.full_name)||((P=m.user)==null?void 0:P.displayName)||"",email:l.email||((s=m.user)==null?void 0:s.email)||"",phone:o||l.phone||l.phone_number||""}})(),h=u({name:S.name,email:S.email,phone:S.phone,paymentMethod:"bank_transfer"}),L=[{value:"vietqr",label:"VietQR - Chuy·ªÉn kho·∫£n ng√¢n h√†ng",description:"Qu√©t m√£ QR, t·ª± ƒë·ªông k√≠ch ho·∫°t trong 30 gi√¢y"},{value:"bank_transfer",label:"Chuy·ªÉn kho·∫£n th·ªß c√¥ng",description:"Chuy·ªÉn kho·∫£n v√† ch·ªù admin duy·ªát"}],c=ce(()=>{const t=M.find(o=>o.months===v.value);return R(b.plan.price,v.value,(t==null?void 0:t.discount)||0)}),R=(t,o,l)=>{const _=t*o,P=_*(l/100);return Math.round(_-P)},O=async()=>{var t,o,l,_;T.value=!0;try{const P=localStorage.getItem("user");let s=null;if(P)try{s=JSON.parse(P).id}catch($){console.error("Error parsing user data:",$)}s||(s=((t=m.user)==null?void 0:t.id)||((o=m.user)==null?void 0:o.uid)),console.log("Creating order with user_id:",s,"plan_id:",b.plan.id);const n={user_id:s,customer_name:h.value.name,customer_email:h.value.email,customer_phone:h.value.phone,payment_method:h.value.paymentMethod,plan_id:b.plan.id,duration_months:v.value,total_price:c.value},a=await ge(n);if(a.success)if(g.value=a.data.id,h.value.paymentMethod==="vietqr")C.value=!0,w.success("ƒê∆°n h√†ng ƒë√£ ƒë∆∞·ª£c t·∫°o! Vui l√≤ng qu√©t m√£ QR ƒë·ªÉ thanh to√°n");else{w.success("ƒê·∫∑t h√†ng th√†nh c√¥ng! ƒêang k√≠ch ho·∫°t g√≥i...");try{await fetch("https://hthree-film-production.up.railway.app/api/admin/approve_order.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({order_id:a.data.id})}),console.log("‚úÖ Order auto-approved")}catch($){console.error("Failed to auto-approve:",$)}f("success",a.data),setTimeout(()=>{f("close"),z.push("/account")},1500)}}catch(P){w.error(((_=(l=P.response)==null?void 0:l.data)==null?void 0:_.message)||"Kh√¥ng th·ªÉ t·∫°o ƒë∆°n h√†ng")}finally{T.value=!1}},N=()=>{w.success("Thanh to√°n th√†nh c√¥ng! G√≥i ƒë√£ ƒë∆∞·ª£c k√≠ch ho·∫°t"),f("success"),f("close"),z.push("/account")},D=()=>{w.error("ƒê∆°n h√†ng ƒë√£ h·∫øt h·∫°n. Vui l√≤ng t·∫°o ƒë∆°n m·ªõi"),C.value=!1,g.value=null},Q=t=>new Intl.NumberFormat("vi-VN").format(t)+"ƒë",H=t=>({free:"üé¨",basic:"‚≠ê",premium:"üî•",vip:"üëë"})[t]||"üé¨",q=t=>{const o={free:"bg-gradient-to-br from-gray-700 to-gray-600",basic:"bg-gradient-to-br from-blue-600 to-cyan-500",premium:"bg-gradient-to-br from-red-600 to-yellow-500",vip:"bg-gradient-to-br from-purple-600 to-pink-500"};return o[t]||o.free},p=t=>{const o={free:"bg-gray-700 text-white hover:bg-gray-600",basic:"bg-gradient-to-r from-blue-600 to-cyan-500 text-white shadow-lg shadow-blue-500/50 hover:shadow-blue-500/70",premium:"bg-gradient-to-r from-red-600 to-yellow-500 text-white shadow-lg shadow-red-500/50 hover:shadow-red-500/70",vip:"bg-gradient-to-r from-purple-600 to-pink-500 text-white shadow-lg shadow-purple-500/50 hover:shadow-purple-500/70"};return o[t]||o.free};return(t,o)=>(r(),F(ue,{to:"body"},[e("div",Ye,[e("div",{class:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:o[0]||(o[0]=l=>t.$emit("close"))}),e("div",Ze,[e("button",{onClick:o[1]||(o[1]=l=>t.$emit("close")),class:"absolute top-4 right-4 w-10 h-10 rounded-full bg-gray-800 hover:bg-gray-700 flex items-center justify-center transition-colors z-10"},o[8]||(o[8]=[e("svg",{class:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])),e("div",et,[e("div",tt,[e("div",{class:k(["w-20 h-20 mx-auto mb-4 rounded-2xl flex items-center justify-center text-4xl",q(y.plan.slug)])},d(H(y.plan.slug)),3),e("h2",st," Thanh to√°n g√≥i "+d(y.plan.name),1),e("p",ot,d(y.plan.description),1)]),e("div",at,[o[9]||(o[9]=e("label",{class:"block text-white font-bold text-lg mb-4"},"Ch·ªçn th·ªùi gian:",-1)),e("div",nt,[(r(),i(A,null,K(M,l=>e("label",{key:l.months,class:k(["flex items-center justify-between p-4 bg-gray-800/50 rounded-xl cursor-pointer border-2 transition-all hover:bg-gray-800",v.value===l.months?"border-red-500 bg-red-500/10":"border-transparent"])},[e("div",rt,[U(e("input",{type:"radio",value:l.months,"onUpdate:modelValue":o[2]||(o[2]=_=>v.value=_),class:"w-5 h-5 text-red-600"},null,8,lt),[[te,v.value]]),e("div",null,[e("p",it,d(l.label),1),l.discount>0?(r(),i("p",dt," Ti·∫øt ki·ªám "+d(l.discount)+"% üéâ ",1)):x("",!0)])]),e("div",ct,[e("p",ut,d(Q(R(y.plan.price,l.months,l.discount))),1),l.months>1?(r(),i("p",gt,d(Q(y.plan.price*l.months)),1)):x("",!0)])],2)),64))])]),e("div",ht,[e("div",pt,[o[10]||(o[10]=e("span",{class:"text-xl font-bold text-white"},"T·ªïng thanh to√°n",-1)),e("span",mt,d(Q(c.value)),1)])]),e("form",{onSubmit:Y(O,["prevent"]),class:"space-y-4"},[e("div",vt,[e("div",null,[o[11]||(o[11]=e("label",{class:"block text-gray-400 text-sm mb-2"},"H·ªç t√™n *",-1)),U(e("input",{"onUpdate:modelValue":o[3]||(o[3]=l=>h.value.name=l),type:"text",required:"",class:"w-full bg-gray-800 text-white px-4 py-3 rounded-lg border border-gray-700 focus:border-red-600 focus:outline-none transition-colors",placeholder:"Nguy·ªÖn VƒÉn A"},null,512),[[X,h.value.name]])]),e("div",null,[o[12]||(o[12]=e("label",{class:"block text-gray-400 text-sm mb-2"},"S·ªë ƒëi·ªán tho·∫°i",-1)),U(e("input",{"onUpdate:modelValue":o[4]||(o[4]=l=>h.value.phone=l),type:"tel",class:"w-full bg-gray-800 text-white px-4 py-3 rounded-lg border border-gray-700 focus:border-red-600 focus:outline-none transition-colors",placeholder:"0901234567"},null,512),[[X,h.value.phone]])])]),e("div",null,[o[13]||(o[13]=e("label",{class:"block text-gray-400 text-sm mb-2"},"Email *",-1)),U(e("input",{"onUpdate:modelValue":o[5]||(o[5]=l=>h.value.email=l),type:"email",required:"",class:"w-full bg-gray-800 text-white px-4 py-3 rounded-lg border border-gray-700 focus:border-red-600 focus:outline-none transition-colors",placeholder:"email@example.com"},null,512),[[X,h.value.email]])]),e("div",null,[o[14]||(o[14]=e("label",{class:"block text-gray-400 text-sm mb-3"},"Ph∆∞∆°ng th·ª©c thanh to√°n *",-1)),e("div",bt,[(r(),i(A,null,K(L,l=>e("label",{key:l.value,class:k(["flex items-center gap-3 p-3 bg-gray-800 rounded-lg cursor-pointer hover:bg-gray-700 transition-colors border-2",h.value.paymentMethod===l.value?"border-red-600 bg-red-600/10":"border-transparent"])},[U(e("input",{"onUpdate:modelValue":o[6]||(o[6]=_=>h.value.paymentMethod=_),type:"radio",value:l.value,class:"w-4 h-4 text-red-600"},null,8,ft),[[te,h.value.paymentMethod]]),e("div",xt,[e("p",yt,d(l.label),1),e("p",wt,d(l.description),1)])],2)),64))])]),C.value?x("",!0):(r(),i("button",{key:0,type:"submit",disabled:T.value,class:k(["w-full py-4 rounded-xl font-bold text-lg transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",p(y.plan.slug)])},[T.value?(r(),i(A,{key:0},[o[15]||(o[15]=e("svg",{class:"animate-spin h-5 w-5",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4",fill:"none"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)),o[16]||(o[16]=e("span",null,"ƒêang x·ª≠ l√Ω...",-1))],64)):(r(),i(A,{key:1},[o[17]||(o[17]=e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("span",null,d(h.value.paymentMethod==="vietqr"?"T·∫°o m√£ QR":"X√°c nh·∫≠n thanh to√°n")+" "+d(Q(c.value)),1)],64))],10,kt))],32),C.value&&g.value?(r(),F(We,{key:0,"order-id":g.value,onSuccess:N,onExpired:D,onRetry:o[7]||(o[7]=l=>C.value=!1)},null,8,["order-id"])):x("",!0)])])])]))}},$t=G(_t,[["__scopeId","data-v-2260abc8"]]),Ct={key:0,class:"fixed inset-0 z-50 flex items-center justify-center pointer-events-none"},Mt={class:"relative"},Tt={key:0,class:"absolute top-full mt-4 left-1/2 -translate-x-1/2 whitespace-nowrap"},St={class:"text-white font-bold text-lg bg-gray-900/90 px-6 py-2 rounded-full shadow-xl animate-slide-up"},Pt={__name:"SuccessAnimation",props:{show:{type:Boolean,default:!1},message:{type:String,default:""},duration:{type:Number,default:2e3}},emits:["close"],setup(y,{emit:j}){const w=y,z=j;return he(()=>w.show,b=>{b&&setTimeout(()=>{z("close")},w.duration)}),(b,f)=>(r(),F(me,{name:"success-fade"},{default:pe(()=>[y.show?(r(),i("div",Ct,[e("div",Mt,[f[0]||(f[0]=e("div",{class:"absolute inset-0 flex items-center justify-center"},[e("div",{class:"w-32 h-32 rounded-full bg-green-500/20 animate-ping"})],-1)),f[1]||(f[1]=e("div",{class:"relative w-24 h-24 rounded-full bg-green-500 flex items-center justify-center shadow-2xl animate-scale-bounce"},[e("svg",{class:"w-12 h-12 text-white animate-draw-check",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M5 13l4 4L19 7",class:"checkmark-path"})])],-1)),y.message?(r(),i("div",Tt,[e("p",St,d(y.message),1)])):x("",!0)])])):x("",!0)]),_:1}))}},It=G(Pt,[["__scopeId","data-v-29c967c2"]]),jt={class:"min-h-screen bg-black relative overflow-hidden"},zt={class:"relative z-10 container mx-auto px-4 py-20"},Vt={class:"text-center mb-16 animate-fade-in"},Rt={class:"text-6xl font-black text-white mb-4"},Bt={class:"text-red-600"},Nt={class:"text-xl text-gray-400"},Qt={key:0,class:"text-center py-20"},Et={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 max-w-[1400px] mx-auto"},qt=["onMouseenter"],At={key:0,class:"absolute -top-3 left-1/2 -translate-x-1/2"},Lt={class:"bg-gradient-to-r from-red-600 to-yellow-500 text-white px-4 py-1 rounded-full text-xs font-bold uppercase shadow-lg"},Ot={class:"mb-6 relative"},Dt={key:0,class:"absolute -top-2 -right-2 bg-white text-black text-xs font-bold px-2 py-1 rounded-full shadow-lg"},Ht={class:"mb-6"},Ut={class:"flex items-baseline gap-2"},Ft={key:0,class:"text-gray-400"},Kt={key:0,class:"text-gray-400 text-sm mt-2"},Gt={class:"space-y-3 mb-8"},Jt={key:0,"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"},Xt={key:1,"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"},Wt={class:"text-sm"},Yt={class:"space-y-3"},Zt=["onClick","disabled"],es={key:0,class:"w-5 h-5 animate-spin",fill:"none",viewBox:"0 0 24 24"},ts={key:1,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ss=["onClick"],os={key:0,class:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent animate-shine"},as={class:"relative z-10"},ns={key:1,class:"mt-4 text-center text-yellow-400 text-sm font-bold animate-pulse"},rs={__name:"Pricing",setup(y){const j=re(),w=le(),z=ve(),b=Z(),f=u([]),m=u(!1),v=u(!1),T=u(null),g=u(null),C=u("monthly"),M=u(null),V=u(!1),S=u(""),h=u({}),L=[{months:1,label:"1 th√°ng",discount:0},{months:3,label:"3 th√°ng",discount:5},{months:6,label:"6 th√°ng",discount:10},{months:12,label:"12 th√°ng",discount:15}],{t:c}=be(),R=[{label:c("common.home"),to:"/home"},{label:c("pricing.title"),to:"/pricing"}];ne(async()=>{await O()});const O=async()=>{m.value=!0;try{const s=await fe(!0);s.success&&(f.value=s.data,f.value.forEach(n=>{h.value[n.id]=1}))}catch(s){const{handleError:n}=await se(async()=>{const{handleError:$}=await Promise.resolve().then(()=>ls);return{handleError:$}},void 0,import.meta.url);n().handleError(s,{context:"Fetch Plans",fallbackMessage:"Kh√¥ng th·ªÉ t·∫£i danh s√°ch g√≥i. Vui l√≤ng ki·ªÉm tra k·∫øt n·ªëi Internet v√† th·ª≠ l·∫°i."})}finally{m.value=!1}},N=(s,n,a)=>{const $=s*n,I=$*(a/100);return Math.round($-I)},D=async s=>{if(!w.user){b.warning(c("pricing.loginToAddCart")),j.push("/account");return}const{useConfirm:n}=await se(async()=>{const{useConfirm:B}=await import("./index-B0YMVSxN.js").then(E=>E.ah);return{useConfirm:B}},__vite__mapDeps([0,1]),import.meta.url),{confirm:a}=n(),$=C.value==="yearly"?c("pricing.twelveMonths"):c("pricing.oneMonth");if(await a({title:c("pricing.addToCartConfirm"),message:c("pricing.addToCartMessage",{plan:s.name,duration:$}),type:"info",confirmText:c("pricing.addToCart"),cancelText:c("common.cancel")})){M.value=s.id;try{const B=h.value[s.id]||1,E=L.find(ie=>ie.months===B),J=(E==null?void 0:E.label)||"1 th√°ng";await z.addItem(s.id,1,B),S.value=c("pricing.addedToCart",{plan:s.name}),V.value=!0,b.success(c("pricing.addedToCartSuccess",{plan:s.name,duration:J}))}catch(B){const E=B.message||c("pricing.addToCartError"),J=" "+c("pricing.tryAgainOrContact");b.error(E+J)}finally{M.value=null}}},Q=s=>{if(!w.user){b.warning(c("pricing.loginToBuy")),j.push("/account");return}if(s.slug==="free"){b.info(c("pricing.usingFreePlan"));return}T.value=s,v.value=!0},H=()=>{v.value=!1,b.success(c("pricing.paymentSuccess")),j.push("/account")},q=s=>s===0?c("pricing.free"):new Intl.NumberFormat("vi-VN").format(s)+"ƒë",p=s=>{const n=[{text:s.has_ads?c("pricing.hasAds"):c("pricing.noAds"),checked:!s.has_ads,iconClass:s.has_ads?"text-red-500":"text-green-500"},{text:c("pricing.devices",{count:s.max_devices}),checked:!0,iconClass:"text-green-500"},{text:s.can_download?c("pricing.canDownload"):c("pricing.noDownload"),checked:s.can_download,iconClass:s.can_download?"text-green-500":"text-gray-500"}];return s.early_access&&n.push({text:c("pricing.earlyAccess"),checked:!0,iconClass:"text-yellow-500"}),n},t=s=>({free:"üé¨",basic:"‚≠ê",premium:"üî•",vip:"üëë"})[s]||"üé¨",o=s=>{const n={free:"bg-gradient-to-r from-gray-600 to-gray-400",basic:"bg-gradient-to-r from-blue-600 to-cyan-500",premium:"bg-gradient-to-r from-red-600 to-yellow-500",vip:"bg-gradient-to-r from-purple-600 to-pink-500"};return n[s]||n.free},l=s=>{const n={free:"bg-gradient-to-br from-gray-700 to-gray-600",basic:"bg-gradient-to-br from-blue-600 to-cyan-500",premium:"bg-gradient-to-br from-red-600 to-yellow-500",vip:"bg-gradient-to-br from-purple-600 to-pink-500"};return n[s]||n.free},_=s=>{const n={free:"bg-gray-700 text-gray-300",basic:"bg-blue-600/20 text-blue-400 border border-blue-500/50",premium:"bg-red-600/20 text-red-400 border border-red-500/50",vip:"bg-purple-600/20 text-purple-400 border border-purple-500/50"};return n[s]||n.free},P=s=>{const n={free:"bg-gray-700 text-white",basic:"bg-gradient-to-r from-blue-600 to-cyan-500 text-white shadow-lg shadow-blue-500/50",premium:"bg-gradient-to-r from-red-600 to-yellow-500 text-white shadow-lg shadow-red-500/50",vip:"bg-gradient-to-r from-purple-600 to-pink-500 text-white shadow-lg shadow-purple-500/50"};return n[s]||n.free};return(s,n)=>(r(),i("div",jt,[oe(It,{show:V.value,message:S.value,onClose:n[0]||(n[0]=a=>V.value=!1)},null,8,["show","message"]),n[7]||(n[7]=e("div",{class:"absolute inset-0"},[e("div",{class:"absolute top-0 left-1/4 w-96 h-96 bg-red-600/10 rounded-full blur-3xl animate-pulse"}),e("div",{class:"absolute bottom-0 right-1/4 w-96 h-96 bg-yellow-600/10 rounded-full blur-3xl animate-pulse",style:{"animation-delay":"1s"}})],-1)),e("div",zt,[oe(xe,{items:R,class:"mb-8"}),e("div",Vt,[e("h1",Rt,[W(d(s.$t("pricing.chooseTitle"))+" ",1),e("span",Bt,d(s.$t("pricing.chooseTitleHighlight")),1),W(" "+d(s.$t("pricing.chooseTitleEnd")),1)]),e("p",Nt,d(s.$t("pricing.subtitle")),1)]),m.value?(r(),i("div",Qt,n[3]||(n[3]=[e("div",{class:"inline-block animate-spin rounded-full h-16 w-16 border-4 border-t-red-600 border-r-transparent border-b-red-600 border-l-transparent"},null,-1)]))):(r(),i("div",Et,[(r(!0),i(A,null,K(f.value,(a,$)=>(r(),i("div",{key:a.id,onMouseenter:I=>g.value=a.slug,onMouseleave:n[1]||(n[1]=I=>g.value=null),class:k(["group relative bg-gradient-to-br from-gray-900 to-gray-800 rounded-2xl p-6 border-2 transition-all duration-300 animate-slide-up",[a.slug==="premium"?"border-red-600/50 lg:scale-105 shadow-lg shadow-red-600/10":"border-gray-700/50 hover:border-gray-600",g.value===a.slug?"scale-102 shadow-2xl":""]]),style:ae({animationDelay:`${$*.1}s`})},[e("div",{class:k(["absolute -inset-0.5 rounded-2xl opacity-0 transition-opacity duration-300 blur-lg -z-10",[o(a.slug),g.value===a.slug?"opacity-20":""]])},null,2),a.slug==="premium"?(r(),i("div",At,[e("span",Lt," ‚≠ê "+d(s.$t("pricing.mostPopular")),1)])):x("",!0),e("div",Ot,[e("div",{class:k(["w-20 h-20 rounded-2xl flex items-center justify-center text-4xl shadow-lg transform transition-all duration-300",[l(a.slug),g.value===a.slug?"scale-110 rotate-3":""]])},d(t(a.slug)),3),g.value===a.slug?(r(),i("div",Dt,d(s.$t("pricing.clickToSelect")),1)):x("",!0)]),e("h3",{class:k(["text-3xl font-black mb-2 transition-all duration-300",g.value===a.slug?"text-red-500 scale-105":"text-white"])},d(a.name),3),e("div",{class:k(["inline-block px-3 py-1 rounded-full text-xs font-bold mb-6",_(a.slug)])},d(a.quality),3),e("div",Ht,[e("div",Ut,[e("span",{class:k(["text-5xl font-black text-white transition-all duration-300",g.value===a.slug?"scale-110":""])},d(a.slug==="free"?s.$t("pricing.free"):q(a.price)),3),a.slug!=="free"?(r(),i("span",Ft,"/th√°ng")):x("",!0)]),a.price>0?(r(),i("p",Kt," Ho·∫∑c "+d(q(N(a.price,12,15)))+"/nƒÉm (ti·∫øt ki·ªám 15%) ",1)):x("",!0)]),e("ul",Gt,[(r(!0),i(A,null,K(p(a),(I,B)=>(r(),i("li",{key:B,class:k(["flex items-center gap-2 text-gray-300 transition-all duration-300",g.value===a.slug?"translate-x-1":""]),style:ae({transitionDelay:g.value===a.slug?`${B*50}ms`:"0ms"})},[(r(),i("svg",{class:k(["w-5 h-5 flex-shrink-0",I.iconClass]),fill:"currentColor",viewBox:"0 0 20 20"},[I.checked?(r(),i("path",Jt)):(r(),i("path",Xt))],2)),e("span",Wt,d(I.text),1)],6))),128))]),e("div",Yt,[a.slug!=="free"?(r(),i("button",{key:0,onClick:Y(I=>D(a),["stop"]),disabled:M.value===a.id,class:k(["w-full py-3.5 rounded-xl font-bold text-center transition-all duration-300 border-2 flex items-center justify-center gap-2",[a.slug==="basic"?"border-blue-500 text-blue-400 hover:bg-blue-500 hover:text-white hover:scale-105":"",a.slug==="premium"?"border-red-500 text-red-400 hover:bg-red-500 hover:text-white hover:scale-105":"",a.slug==="vip"?"border-purple-500 text-purple-400 hover:bg-purple-500 hover:text-white hover:scale-105":"",M.value===a.id?"opacity-50 cursor-not-allowed":""]])},[M.value===a.id?(r(),i("svg",es,n[4]||(n[4]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):(r(),i("svg",ts,n[5]||(n[5]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"},null,-1)]))),W(" "+d(s.$t("pricing.addToCart")),1)],10,Zt)):x("",!0),e("button",{onClick:Y(I=>Q(a),["stop"]),class:k(["relative w-full py-4 rounded-xl font-bold text-center transition-all duration-300 overflow-hidden flex items-center justify-center gap-2",[P(a.slug),g.value===a.slug?"scale-105 shadow-2xl":""]])},[g.value===a.slug?(r(),i("div",os)):x("",!0),n[6]||(n[6]=e("svg",{class:"w-5 h-5 relative z-10",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})],-1)),e("span",as,d(a.slug==="free"?s.$t("pricing.useFree"):s.$t("pricing.buyNow")),1)],10,ss)]),a.slug==="premium"&&g.value===a.slug?(r(),i("div",ns," ‚≠ê "+d(s.$t("pricing.popularChoice")),1)):x("",!0)],46,qt))),128))]))]),v.value?(r(),F($t,{key:0,plan:T.value,onClose:n[2]||(n[2]=a=>v.value=!1),onSuccess:H},null,8,["plan"])):x("",!0)]))}},ds=G(rs,[["__scopeId","data-v-6855e6a3"]]),ls=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));export{ds as default};
